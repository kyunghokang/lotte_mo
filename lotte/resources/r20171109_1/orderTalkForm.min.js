function sendTclick(a){a=isEllotte?"m_EL_"+a:"m_DC_"+a;var b=1e3;$("#tclick_iframe").remove(),setTimeout(function(){var b=document.createElement("iframe");b.id="tclick_iframe",b.style.visibility="hidden",b.style.display="none",b.src=LOTTE_CONSTANTS.M_HOST_SSL+"/exevent/tclick.jsp?tclick="+a+"&"+__commonParam,document.body.appendChild(b)},b)}function apply_br_tag(a){return a}function confirm_end(){$("#useLottePoint").hide(),$("#chk_lt_point").attr("disabled",!1),ltPointCert="Y",$("#lt_point_amt").show(),$("#lt_point_amt_btn").hide(),$("#chk_lt_point").is(":checked")||$("#chk_lt_point").trigger("click")}function init_cardinstmon(){if(totsttlamt=$("#frm_inp input[name=totsttlamt]:hidden").val(),iscmcd=$("#frm_inp select[name=iscmcd]").val(),prom_third=$("#frm_send input[name=prommdclcd_third]").val(),$("#frm_inp input[name=rdo_cardinst]:radio").attr("checked",""),$("#frm_inp input[name=rdo_cardinst]:radio").prop("checked",""),$("#frm_inp select[name=cardinstmon]").empty(),$("#frm_inp select[name=cardinstmon]").append("<option value=''>일시불</option>"),$("#frm_inp select[name=cardinstmon]").attr("disabled",!0),""!=iscmcd){if($("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").attr("disabled",!1),onintmonth=$("#frm_inp input[name=onintmonth]:hidden").val(),""==onintmonth||"null"==onintmonth||"35"==prom_third?$("#frm_inp input[name=rdo_cardinst]:radio:eq(1)").attr("disabled",!0):$("#frm_inp input[name=rdo_cardinst]:radio:eq(1)").attr("disabled",!1),intmonth=$("#frm_inp input[name=intmonth]:hidden").val(),""==intmonth||"null"==intmonth||"35"==prom_third?$("#frm_inp input[name=rdo_cardinst]:radio:eq(2)").attr("disabled",!0):$("#frm_inp input[name=rdo_cardinst]:radio:eq(2)").attr("disabled",!1),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").attr("checked",!0),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("checked",!0),parseInt(totsttlamt)<5e4)return $("#frm_inp select[name=cardinstmon] option:first").prop("selected",!0),void $("#frm_inp select[name=cardinstmon]").prop("disabled",!0);if(lpayCardDivCd=$("select[name=iscmcd]").find("option:selected").attr("data-card-div"),void 0!=lpayCardDivCd&&"CC"!=lpayCardDivCd)return $("#frm_inp select[name=cardinstmon] option:first").prop("selected",!0),void $("#frm_inp select[name=cardinstmon]").prop("disabled",!0)}else $("#frm_inp input[name=rdo_cardinst]:radio").attr("disabled",!0),$("#frm_inp select[name=cardinstmon]").attr("disabled",!0);setcardinstmon()}function init_cardselect(){cardkndcd=$("#frm_send input[name=cardkndcd]").val(),cardkndcd_dup=$("#frm_send input[name=cardkndcd_dup]").val(),paytype=$("#frm_inp input[name=paytype]:hidden").val();var a="N",b="N";$("#frm_inp input[name=lpay_type]:radio").each(function(){($(this).val()==cardkndcd||$(this).val()==cardkndcd_dup)&&(a="Y")}),null!=cardkndcd&&""!=cardkndcd?$("#frm_inp input[name=hist_paymean_iscmcd]:hidden").val()==cardkndcd?($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").click(),$("#frm_inp select[name=iscmcd] option").each(function(){$(this).val()==cardkndcd&&(b="Y")}),"Y"==b&&($("#frm_inp select[name=iscmcd]").val(cardkndcd),setIscmCd(cardkndcd),toggleAction5("#cardList_"+cardkndcd),selPayMean("hist_paymean"),null==$("#frm_inp select[name=iscmcd]").val()&&($("#frm_inp select[name=iscmcd]").val(""),$(".inlineBorder").removeClass("active")))):"Y"==a?($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_LPAY+"']").click(),$("#frm_inp input[name=lpay_type]:radio[value='"+cardkndcd+"']").prop("checked",!0),$("#card_select").show(),$("#frm_inp select[name=iscmcd]").val(cardkndcd),null==$("#frm_inp select[name=iscmcd]").val()&&($("#frm_inp select[name=iscmcd]").val(""),$("#frm_inp input[name=lpay_type]").prop("checked",!1)),selPayMean("lpay_paymean_"+$("#frm_inp input[name=lpay_type]:radio[value='"+cardkndcd+"']").attr("data-card-id"))):($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").click(),$("#frm_inp select[name=iscmcd] option").each(function(){$(this).val()==cardkndcd&&(b="Y")}),"Y"==b&&($("#frm_inp select[name=iscmcd]").val(cardkndcd),setIscmCd(cardkndcd),toggleAction5("#cardList_"+cardkndcd),payShortCut("16",cardkndcd),null==$("#frm_inp select[name=iscmcd]").val()&&($("#frm_inp select[name=iscmcd]").val(""),$(".inlineBorder").removeClass("active")))):null!=cardkndcd_dup&&""!=cardkndcd_dup?$("#frm_inp input[name=hist_paymean_iscmcd]:hidden").val()==cardkndcd_dup?($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").click(),$("#frm_inp select[name=iscmcd] option").each(function(){$(this).val()==cardkndcd_dup&&(b="Y")}),"Y"==b&&($("#frm_inp select[name=iscmcd]").val(cardkndcd_dup),setIscmCd(cardkndcd_dup),toggleAction5("#cardList_"+cardkndcd_dup),selPayMean("hist_paymean"),null==$("#frm_inp select[name=iscmcd]").val()&&($("#frm_inp select[name=iscmcd]").val(""),$(".inlineBorder").removeClass("active")))):"Y"==a?($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_LPAY+"']").click(),$("#frm_inp input[name=lpay_type]:radio[value='"+cardkndcd_dup+"']").prop("checked",!0),$("#frm_inp select[name=iscmcd]").val(cardkndcd_dup),selPayMean("lpay_paymean_"+$("#frm_inp input[name=lpay_type]:radio[value='"+cardkndcd_dup+"']").attr("data-card-id")),null==$("#frm_inp select[name=iscmcd]").val()&&($("#frm_inp select[name=iscmcd]").val(""),$("#frm_inp input[name=lpay_type]").prop("checked",!1))):($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").click(),$("#frm_inp select[name=iscmcd] option").each(function(){$(this).val()==cardkndcd_dup&&(b="Y")}),"Y"==b&&($("#frm_inp select[name=iscmcd]").val(cardkndcd_dup),setIscmCd(cardkndcd_dup),toggleAction5("#cardList_"+cardkndcd_dup),payShortCut("16",cardkndcd_dup),null==$("#frm_inp select[name=iscmcd]").val()&&($("#frm_inp select[name=iscmcd]").val(""),$(".inlineBorder").removeClass("active")))):($("#frm_inp select[name=iscmcd]").find("option").attr("selected",!1).eq(0).attr("selected",!0),$("#frm_inp select[name=iscmcd]").find("option").prop("selected",!1).eq(0).prop("selected",!0),$("#frm_inp input[name=onintmonth]:hidden").val(""),$("#frm_inp input[name=intmonth]:hidden").val(""),$(".inlineBorder").removeClass("active"),$("#frm_inp input[name=lpay_type]").prop("checked",!1),removeClassPayMean(),$("#eventcardsaleamt_cont").hide(),""!=firsObjName&&paySelect(firsObjName))}function init_point(){$("#chk_lpoint").attr("checked",!1),$("#chk_lt_point").attr("checked",!1),$("#chk_deposit_all").attr("checked",!1),$("#chk_lpoint").prop("checked",!1),$("#chk_lt_point").prop("checked",!1),$("#chk_deposit_all").prop("checked",!1)}function init_cpn_info(a,b,c){"Y"==a&&($("#frm_send input[name=promcartsn]").val(""),$("#frm_send input[name=prommdclcd]").val(""),$("#frm_send input[name=fvrpolctpcd]").val(""),$("#frm_send input[name=totdcamt]").val(""),$("#frm_send input[name=cpnpromno]").val(""),$("#frm_send input[name=cpnrscmgmtsn]").val(""),$("#frm_send input[name=adtncostdtlsctnm]").val(""),$("#frm_send input[name=cardkndcd]").val(""),$("#frm_send input[name=includeSaveInstCpn]").val(""),$("#dcAmt1").text("")),"Y"==b&&($("#frm_send input[name=promcartsn_dup]").val(""),$("#frm_send input[name=prommdclcd_dup]").val(""),$("#frm_send input[name=fvrpolctpcd_dup]").val(""),$("#frm_send input[name=totdcamt_dup]").val(""),$("#frm_send input[name=cpnpromno_dup]").val(""),$("#frm_send input[name=cpnrscmgmtsn_dup]").val(""),$("#frm_send input[name=adtncostdtlsctnm_dup]").val(""),$("#frm_send input[name=cardkndcd_dup]").val(""),$("#frm_send input[name=includeSaveInstCpn_dup]").val(""),$("#dcAmt2").text("("+$("#frm_inp select[name=dup_coupon] option").not("[value=N], :disabled").length+"개)")),"Y"==c&&($("#frm_send input[name=promcartsn_third]").val(""),$("#frm_send input[name=prommdclcd_third]").val(""),$("#frm_send input[name=fvrpolctpcd_third]").val(""),$("#frm_send input[name=totdcamt_third]").val(""),$("#frm_send input[name=cpnpromno_third]").val(""),$("#frm_send input[name=cpnrscmgmtsn_third]").val(""),$("#frm_send input[name=adtncostdtlsctnm_third]").val(""),$("#frm_send input[name=cardkndcd_third]").val(""),$("#frm_send input[name=includeSaveInstCpn_third]").val(""),$("#dcAmt3").text(""),$("singlePayText").text(""))}function setcardinstmon(){if($("#frm_inp select[name=cardinstmon]").empty(),$("#frm_inp select[name=cardinstmon]").append("<option value=''>일시불</option>"),cardinstmonlist=$("#frm_inp input[name=onintmonth]:hidden").val().split(","),cardinstmonlist.length>0)for(i=0;i<cardinstmonlist.length;i++)"null"!=cardinstmonlist[i]&&""!=cardinstmonlist[i]&&(text=cardinstmonlist[i]+"개월",$("#frm_inp select[name=cardinstmon]").append("<option value='"+cardinstmonlist[i]+"'>무이자"+text+"</option>"));if(cardinstmonlist=$("#frm_inp input[name=intmonth]:hidden").val().split(","),cardinstmonlist.length>0)for(i=0;i<cardinstmonlist.length;i++)"null"!=cardinstmonlist[i]&&""!=cardinstmonlist[i]&&(text=cardinstmonlist[i]+"개월",$("#frm_inp select[name=cardinstmon]").append("<option value='"+cardinstmonlist[i]+"'>할부"+text+"</option>"));$("#frm_inp select[name=cardinstmon] option").length>1&&"35"!=$("#frm_send input[name=prommdclcd_third]").val()?$("#frm_inp select[name=cardinstmon]").attr("disabled",!1):$("#frm_inp select[name=cardinstmon]").attr("disabled",!0)}function selPayType(a){var b="#pay_type"+a;$("[id^='pay_type']").removeClass("on"),$(b).addClass("on"),setPaytype(a)}function setPaytype(a){for(var b=[[1,PAYTYPE_CODE_CARD],[2,PAYTYPE_CODE_BANK],[3,PAYTYPE_CODE_PHONE],[4,PAYTYPE_CODE_LPAY]],c=0;c<b.length;c++)if(b[c][0]==a){$("#frm_inp input[name=paytype]:hidden").val(b[c][1]);break}}function select_third_coupon(){init_point(),setCashReceiptArea(),fn_initPointList("ALL"),"35"==$("#frm_send input[name=prommdclcd_third]").val()?($("#frm_inp input[name=rdo_paytype]:radio:checked").val()==PAYTYPE_CODE_PHONE&&($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").click(),removeClassPayMean()),$("#frm_inp input[name=rdo_paytype]:radio").each(function(){$(this).val()==PAYTYPE_CODE_PHONE&&$(this).prop("disabled",!0)}),$("#chk_lpoint").prop("checked",!1),$("#chk_lpoint").prop("disabled",!0),$("#chk_lt_point").prop("checked",!1),$("#chk_lt_point").prop("disabled",!0)):($("#frm_inp input[name=rdo_paytype]:radio:checked").val()==PAYTYPE_CODE_LPAY&&(ltPointCert="Y",$("#lt_point_amt").show(),$("#lt_point_amt_btn").hide()),$("#frm_inp input[name=rdo_paytype]:radio").each(function(){$(this).prop("disabled",!1)}),parseInt($("#useable_lpoint_amt").val())>0&&$("#chk_lpoint").prop("disabled",!1),"Y"==ltPointCert&&$("#chk_lt_point").prop("disabled",!1)),select_third_coupon_controll($("#frm_send input[name=prommdclcd_third]").val()),fn_calcTotalPrice()}function ord_session_clear(){sessionStorage.removeItem("dup_cnt_div"),sessionStorage.removeItem("dup_prom_no"),sessionStorage.removeItem("fvr_val"),sessionStorage.removeItem("goods_no"),sessionStorage.removeItem("itme_no"),sessionStorage.removeItem("max_fvr_val"),sessionStorage.removeItem("prom_no"),sessionStorage.removeItem("prom_nm"),sessionStorage.removeItem("rsc_mgmt_sn"),sessionStorage.removeItem("safe_browsing")}function dup_coupon_select(){var a=$(this).val();iphoneChk=!1,maxDupIdx!=a&&$("#max_dc").prop("checked",!1),$("#frm_inp select[name=dup_coupon]").find("option").each(function(){if(a==$(this).val()){var b,c=$("#frm_inp select[name=coupon]").val(),d=$("#frm_inp input[name=prommdclcd]").eq(c).val(),e=$("#frm_inp input[name=cpnpromno]").eq(c).val(),f=$("#frm_inp input[name=cpnpromno_dup]").eq(a).val(),g=0,h="0",i=0;if(ord_session_clear(),init_cpn_info("N","N","Y"),$("#frm_inp input[name=third_coupon]:radio:last").prop("checked",!0),$("span[name=dup_span]").each(function(){$(this).html("")}),"N"==a)return init_cpn_info("N","Y","N"),void select_dup_coupon();if($(this).prop("disabled",!1),void 0==c||"N"==c?(b=single_prom,g=single_prom_cnt,sessionStorage.setItem("dup_cnt_div","single")):(b=multi_prom,g=multi_prom_cnt,h="0"==e?d:e,sessionStorage.setItem("dup_cnt_div","multi")),g>0){for(var j=0;j<b.length;j++)if(b[j][0]==h&&b[j][1]==f){i=b[j][2],sessionStorage.setItem("prom_no",b[j][0]),sessionStorage.setItem("dup_prom_no",b[j][1]),sessionStorage.setItem("fvr_val",b[j][2]),sessionStorage.setItem("goods_no",b[j][3]),sessionStorage.setItem("itme_no",b[j][4]),sessionStorage.setItem("max_fvr_val",b[j][5]),sessionStorage.setItem("prom_nm",b[j][6]),sessionStorage.setItem("rsc_mgmt_sn",b[j][7]);break}if(parseInt(i)>0)return"N"!=a?(promcartsn=$("#frm_inp input[name=promcartsn_dup]").eq(a).val(),d=$("#frm_inp input[name=prommdclcd_dup]").eq(a).val(),fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd_dup]").eq(a).val(),totdcamt=sessionStorage.getItem("fvr_val"),e=$("#frm_inp input[name=cpnpromno_dup]").eq(a).val(),cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn_dup]").eq(a).val(),adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm_dup]").eq(a).val(),cardkndcd=$("#frm_inp input[name=cardkndcd_dup]").eq(a).val(),includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn_dup]").eq(a).val()):(promcartsn="",d="",fvrpolctpcd="",totdcamt="",e="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn=""),$("#frm_send input[name=promcartsn_dup]").val(promcartsn),$("#frm_send input[name=prommdclcd_dup]").val(d),$("#frm_send input[name=fvrpolctpcd_dup]").val(fvrpolctpcd),$("#frm_send input[name=totdcamt_dup]").val(totdcamt),$("#frm_send input[name=cpnpromno_dup]").val(e),$("#frm_send input[name=cpnrscmgmtsn_dup]").val(cpnrscmgmtsn),$("#frm_send input[name=adtncostdtlsctnm_dup]").val(adtncostdtlsctnm),$("#frm_send input[name=cardkndcd_dup]").val(cardkndcd),$("#frm_send input[name=includeSaveInstCpn_dup]").val(includeSaveInstCpn),$("span[name=dup_span]:eq("+a+")").html("(<strong>"+String(totdcamt).money()+"</strong> 원 할인)"),select_dup_coupon(),void $("#dcAmt2").html("(-"+String(i).money()+"원)");$(this).prop("disabled",!0),alert("죄송합니다.\n추가할인 불가능 상품입니다.")?(add_dis_impossible_flag=!1,add_dis_impossible()):(add_dis_impossible_flag=!0,add_dis_impossible())}else init_cpn_info("N","Y","N")}})}function add_dis_impossible(){$("#frm_inp select[name=dup_coupon]").blur(),$("#frm_inp select[name=dup_coupon]").val("N"),$("#frm_inp select[name=dup_coupon]")[0].selectedIndex=0,init_cpn_info("N","Y","N"),select_dup_coupon()}function select_coupon(){init_cardselect(),getCardInsCheck(),init_point(),setCashReceiptArea(),fn_initPointList("ALL"),fn_calcTotalPrice(),paycardinstmon(),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_CARD&&sel_card_confirm_type()}function select_dup_coupon(){init_cardselect(),init_point(),setCashReceiptArea(),fn_initPointList("ALL"),fn_calcTotalPrice(),getCardInsCheck(),paycardinstmon(),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_CARD&&sel_card_confirm_type()}function sel_card_confirm_type(){var a="";$(".slide_ul .check").each(function(){a=$(this).attr("id")}),""!=a&&""!=$("#frm_inp input[name="+a+"_card_confirm_type]:hidden").val()&&void 0!=$("#frm_inp input[name="+a+"_card_confirm_type]:hidden").val()&&$("#frm_inp input[name=card_confirm_type]:radio[value='"+$("#frm_inp input[name="+a+"_card_confirm_type]:hidden").val()+"']").prop("checked",!0)}function select_third_coupon_controll(a){"35"==a?($("#frm_inp input[name=rdo_cardinst]:radio").each(function(){$(this).prop("disabled",!0)}),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("disabled",!1),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("checked",!0),$("#frm_inp select[name=cardinstmon] option:first").prop("selected",!0),$("#frm_inp select[name=cardinstmon]").prop("disabled",!0)):($("#frm_inp input[name=rdo_cardinst]:radio").each(function(){$(this).prop("disabled",!1)}),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("checked",!0),$("#frm_inp select[name=cardinstmon] option:first").prop("selected",!0),$("#frm_inp select[name=cardinstmon]").prop("disabled",!1)),paycardinstmon()}function fnClear(a){a.style.background=""}function lottecard_payment(a){$("#ANSIM_LAYER").css("width","100%"),$("#ANSIM_LAYER").css("height","530px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),$("#SIMPLEPAYFORM input[name=PAY]:hidden").val(a),$("#SIMPLEPAYFORM").attr("target","X_ANSIM_FRAME"),$("#SIMPLEPAYFORM").attr("action","/smpi/M_LCSMPIAgent01.jsp"),$("#SIMPLEPAYFORM").submit()}function xmpi_exec(){$("#frm_card").attr("target","X_ANSIM_FRAME"),$("#frm_card").attr("action","/dacom/xansim/m_hagent01.jsp"),$("#frm_card").submit()}function spay_exec(){$("#frm_spay input[name=totsttlamt]:hidden").val($("#frm_send input[name=totsttlamt]:hidden").val()),$("#frm_spay input[name=cardinst]:hidden").val($("#frm_send input[name=cardinst]:hidden").val()),$("#frm_spay input[name=cardinstmon]:hidden").val($("#frm_send input[name=cardinstmon]:hidden").val()),$("#frm_spay").attr("target","X_ANSIM_FRAME"),$("#frm_spay").attr("action","/spay/shopMW.jsp"),$("#frm_spay").submit()}function cellphone_exec(){$("#frm_mobilians input[name=totsttlamt]:hidden").val($("#frm_send input[name=totsttlamt]:hidden").val()),$("#frm_mobilians").attr("target","X_ANSIM_FRAME"),$("#frm_mobilians").attr("action","/mobilians/mc_web.jsp"),$("#frm_mobilians").submit()}function setCertResult(a,b,c,d,e){$("#ANSIM_LAYER").hide(),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp"),$("#frm_send input[name=xid]:hidden").val(a),$("#frm_send input[name=eci]:hidden").val(b),$("#frm_send input[name=cavv]:hidden").val(c),$("#frm_send input[name=cardno]:hidden").val(d),doPayment()}function setCertResult2(a,b,c,d,e){$("#frm_send input[name=xid]:hidden").val(a),$("#frm_send input[name=eci]:hidden").val(b),$("#frm_send input[name=cavv]:hidden").val(c),$("#frm_send input[name=cardno]:hidden").val(d),$("#frm_send input[name=joincode]:hidden").val(e),doPayment()}function disableItems(a){a?($("#cover").css("display","block"),$("#ORDER").hide(),$("#PROCESSING").show(),$("#cover").on("click",function(){close_iframe()})):($("#cover").css("display","none"),$("#ORDER").show(),$("#PROCESSING").hide(),$("#cover").off("click"))}function returnPaymentPage(){disableItems(!1),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp")}function close_iframe(){returnPaymentPage(),location.hash="#PAYMENT_ANCHAR",document.getElementById("X_ANSIM_FRAME").width=450,document.getElementById("X_ANSIM_FRAME").height=0,document.getElementById("ANSIM_LAYER").style.display="none",document.getElementById("X_ANSIM_FRAME").style.display="none"}function doPayment(){""==$("#frm_send input[name=totdcamt]:hidden").val()&&$("#frm_send input[name=totdcamt]:hidden").val("0"),$("#cover").css("display","none"),$("#ORDER").show(),$("#PROCESSING").hide(),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp"),$("#frm_send").submit()}function ansimclose(){$("#ANSIM_LAYER").hide(),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp"),$("#ORDER").show(),$("#PROCESSING").hide()}function fn_selPointAll(a){var b=$("#frm_inp input[name=totsttlamt]:hidden").val(),c=0,d=a.id;if("chk_deposit_all"==d&&setCashReceiptArea(),a.checked){if(0==parseInt(b))return void(a.checked=!1);"chk_lpoint_all"==d?(b=parseInt(b)+parseInt($("#old_lpoint_amt").val()),c=parseInt($("#useable_lpoint_amt").val()),$("#lpoint_amt").val(c>b?b:c)):"chk_lt_point_all"==d?(b=parseInt(b)+parseInt($("#old_lt_point_amt").val()),c=parseInt($("#useable_lt_point_amt").val()),$("#lt_point_amt").val(c>b?b:c)):"chk_deposit_all"==d&&($("#cash_receipts").show(),b=parseInt(b)+parseInt($("#old_deposit_amt").val()),c=parseInt($("#useable_deposit_amt").val()),$("#deposit_amt").val(c>b?b:c))}else"chk_lpoint_all"==d?($("#lpoint_amt").val(""),$("#old_lpoint_amt").val("0")):"chk_lt_point_all"==d?($("#lt_point_amt").val(""),$("#old_lt_point_amt").val("0")):"chk_deposit_all"==d&&($("#deposit_amt").val(""),$("#old_deposit_amt").val("0"));fn_calcTotalPrice(),paycardinstmon()}function fn_freeDlvpCpnUse(){var a=$("#dlv_prom_use_yn").val(),b=$("#dlv_fvr_val").val(),c=$("#frm_inp input[name=totsttlamt]:hidden").val();return"N"==a&&parseInt(b)>parseInt(c)?($("#dlv_prom_use_yn").val("N"),$("#frm_inp input[name=free]").eq(1).prop("checked",!0),void alert("배송비할인 금액이 결제금액보다 클 수 없습니다.")):($("#dlv_prom_use_yn").val($("#frm_inp input[name=free]:checked").val()),fn_calcTotalPrice(),void paycardinstmon())}function setCertSmartpayResult(a,b,c,d,e,f,g,h,i){paramSmartpaySet(a,b,c,d,f,g,h,i)}function paramSmartpaySet(a,b,c,d,e,f,g,h){$("#frm_send input[name=xid]").val(a),$("#frm_send input[name=eci]").val(b),$("#frm_send input[name=cavv]").val(c),$("#frm_send input[name=cardno]").val(d),$("#frm_send input[name=restype]").val(f),""!=f&&""!=g&&g!=$("#frm_send input[name=user_key]").val()&&$("#frm_send input[name=update_easn_yn]").val("Y"),$("#frm_send input[name=user_key]").val(g),$("#frm_send input[name=res_type]").val(f),$("#frm_send input[name=req_type]").val(f),$("#frm_send input[name=apvl_desc]").val(h),""==a&&""==b&&""==c&&""==d?(returnPaymentPage(),$("#X_ANSIM_FRAME").css("width","450px"),$("#X_ANSIM_FRAME").css("height","0px"),$("#X_ANSIM_FRAME").hide(),$("#ANSIM_LAYER").hide()):doPayment()}function misp_plugIn(a){a==paytype_card_016||a==paytype_card_026||a==paytype_card_002||a==paytype_card_054||a==paytype_card_021?$("#mISP_INFO").show():$("#mISP_INFO").hide()}function init(){localStorageReSet("order_"),ord_session_clear(),single_prom=singleProm,single_prom_cnt=singlePromCnt,multi_prom=multiProm,multi_prom_cnt=multiPromCnt,$("#frm_inp select[name=iscmcd] option:first").attr("selected",!0),$("#frm_inp input[name=rdo_cardinst]:radio").attr("disabled",!0),$("#frm_inp select[name=cardinstmon]").attr("disabled",!0),$("#frm_inp select[name=bankno] option:first").attr("selected",!0),benefit_dlvp_set(),fn_freeDlvpCpnUse(),$("#frm_inp select[name=rdo_cash]").change(),setLottePointSaveDiv(0)}function createCardType(){var a='<option value ="">카드선택</option>';a+=cardStr,$("#frm_inp select[name=iscmcd]").html(a),getCardInsCheck(),$(".inlineBorder").removeClass("active")}function benefit_dlvp_set(a){var b,c=1;if(null==a)for(;;){if(b=$("input[name=bene_deli_data_"+c+"]:hidden"),0==b.length)break;var d=$("input[name=bene_deli_data_"+c+"]:hidden").val().split("|"),e="",f="",g="",h="",i="",j="",k=$("input[name=smartOrd]").val(),l=$("input[name=crspk_exist_yn]").val();"Y"==l&&(k="N"),$("input[name=bene_deli_data_"+c+"]:hidden").each(function(){chk_data=$(this).val().split("|"),d[1]==chk_data[1]&&(j=""==e?"":split_gubun_1,e+=j+chk_data[0],f+=j+chk_data[1],g+=j+chk_data[2],h+=j+k,i+=j+chk_data[3])});var m="",n="",o="",p=0;$.ajax({type:"post",async:!1,url:"/popup/multi_deli_amt.do?"+__commonParam,data:"goodsNoMany="+e+"&dlvPolcNoMany="+f+"&realSalePrcMany="+g+"&smpUseYnMany="+h+"&ordQtyMany="+i,success:function(a){m=a.split(":"),n=m[0],o=m[1],p=$.trim(m[2])}}),"0000"==$.trim(n)?($("#bene_group_deli_amt_"+c).find("span").attr("dlex",p),$("#bene_group_deli_amt_"+c).find("span").html("Y"==freeShippingYn?'무료 <span class="no_bold">(플래티넘+ 회원)</span>':0==p?"무료":new String(p).money()+'<span class="no_bold">원</span>')):alert($.trim(o)),c++}else{var q=a[0],p=a[1],r=a[2],c="";$("input[name^=bene_deli_data_]").each(function(){var a=$(this).val().substring(0,$(this).val().lastIndexOf("|"));a==q&&(c=$(this).attr("name").substring("bene_deli_data_".length))});$("#bene_group_deli_amt_"+c).find("span").attr("dlex");$("#bene_group_deli_amt_"+c).find("span").attr("dlex",p),$("#bene_group_deli_amt_"+c).find("span").html("Y"==freeShippingYn?'무료 <span class="no_bold">(플래티넘+ 회원)</span>':0==p?'무료<span class="no_bold">(배송지 '+r+")</span>":new String(p).money()+'<span class="no_bold">원(배송지 '+r+")</span>"),fn_calcTotalPrice()}}function send(){if(console.log("▶▶▶▶▶ send() : Start"),e=$("#frm_send input[name=iscmcd]:hidden").val(),cpncardcd=$("#frm_send input[name=cardkndcd]:hidden").val(),cpncardcd_dup=$("#frm_send input[name=cardkndcd_dup]:hidden").val(),""==totpayamt){var a=$("#frm_send input[name=defaulttotsttlamt]:hidden").val(),b=($("#frm_send input[name=includeSaveInstCpn]").val(),$("#frm_send input[name=totdcamt]").val());totpayamt="Y"==includeSaveInstCpn?a.toString():(a-b).toString();var c=0,d=$("#frm_send input[name=qs_yn]:hidden").val();"N"==freeShippingYn?c=$("#frm_send input[name=orgtotdeliamt]:hidden").val():"Y"==d&&(c=$("#frm_send input[name=orgtotdeliamt]:hidden").val()),"N"==freeShippingYn?totpayamt=(parseInt(totpayamt)+parseInt(c)-parseInt($("#frm_send input[name=orgtotdeliamt]:hidden").val())).toString():"Y"==d&&(totpayamt=(parseInt(totpayamt)+parseInt(c)-parseInt($("#frm_send input[name=orgtotdeliamt]:hidden").val())).toString())}if(paytype=$("#frm_send input[name=paytype]:hidden").val(),totsttlamt=$("#frm_send input[name=totsttlamt]:hidden").val(),parseInt(totsttlamt)>0){var e,f,g;if(paytype!=PAYTYPE_CODE_CARD&&paytype!=PAYTYPE_CODE_LPAY)return paytype==PAYTYPE_CODE_BANK?void alert("음성주문은 카드, 엘페이 결제만 가능합니다."):paytype==PAYTYPE_CODE_PHONE?void alert("음성주문은 카드, 엘페이 결제만 가능합니다."):void 0!=typeof $("#pntOnlyPay").val()&&"19"==$("#pntOnlyPay").val()?void alert("L.POINT 전용 상품입니다. \n음성주문은 카드, 엘페이 결제만 가능합니다."):void 0!=typeof $("#pntOnlyPay").val()&&"21"==$("#pntOnlyPay").val()?void alert("L-money 전용 상품입니다. \n음성주문은 카드, 엘페이 결제만 가능합니다."):void alert("결제수단 사전등록 해주세요.");if(e=$("#frm_send input[name=iscmcd]:hidden").val(),f=$("#frm_send input[name=cardinstmon]:hidden").val(),cardinst="01",f="",totsttlamt=$("#frm_send input[name=totsttlamt]:hidden").val(),bankno="",g="",reg_no1="",reg_no2="",totsttlamt<1e3)return void alert("1,000원 미만의 금액은 카드결제가 불가능합니다.");if(""==$.trim(e)&&paytype==PAYTYPE_CODE_CARD)return void alert("카드 종류를 선택해주세요.");if(paytype==PAYTYPE_CODE_LPAY)""==$.trim(e)&&alert("L.pay 앱을 실행하여 카드를 등록해주세요.");else{if(totsttlamt>3e5&&varUa<0&&"mlotte003"==cp_schema&&$.trim(e)!=paytype_card_048&&$.trim(e)!=paytype_card_029&&$.trim(e)!=paytype_card_016&&$.trim(e)!=paytype_card_026&&$.trim(e)!=paytype_card_047&&$.trim(e)!=paytype_card_002&&$.trim(e)!=paytype_card_054&&$.trim(e)!=paytype_card_021&&$.trim(e)!=paytype_card_020&&$.trim(e)!=paytype_card_008)return void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 비씨, 광주, 우체국카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요.");if(totsttlamt>3e5&&varUa<0&&$.trim(e)!=paytype_card_048&&$.trim(e)!=paytype_card_029&&$.trim(e)!=paytype_card_016&&$.trim(e)!=paytype_card_026&&$.trim(e)!=paytype_card_047&&$.trim(e)!=paytype_card_031&&$.trim(e)!=paytype_card_002&&$.trim(e)!=paytype_card_054&&$.trim(e)!=paytype_card_021&&$.trim(e)!=paytype_card_020&&$.trim(e)!=paytype_card_008&&$.trim(e)!=paytype_card_018&&$.trim(e)!=paytype_card_036)return void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 비씨, 삼성, 광주, 우체국카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요.");if(totsttlamt>3e5&&$.trim(e)!=paytype_card_048&&$.trim(e)!=paytype_card_029&&$.trim(e)!=paytype_card_016&&$.trim(e)!=paytype_card_026&&$.trim(e)!=paytype_card_020&&$.trim(e)!=paytype_card_047&&$.trim(e)!=paytype_card_031&&$.trim(e)!=paytype_card_002&&$.trim(e)!=paytype_card_054&&$.trim(e)!=paytype_card_021&&$.trim(e)!=paytype_card_008&&$.trim(e)!=paytype_card_018&&$.trim(e)!=paytype_card_036)return void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 삼성, 비씨, 하나SK, 광주, 우체국 카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요.");if(totsttlamt>3e5&&varUa<0&&"mlotte001"==cp_schema&&$.trim(e)==paytype_card_031&&""!=cp_schema&&""!=cp_udid&&!appVerChk(cp_v,"133"))return void alert("롯데닷컴 앱에서 삼성카드 30만원 이상 결제를 하시려면 롯데닷컴 최신버전 앱으로 업데이트 해주세요.");if(totsttlamt>3e5&&varUa>-1&&$.trim(e)==paytype_card_047&&"mlotte001"==cp_schema&&""!=cp_udid&&!appVerChk(cp_v,"160"))return void alert("롯데닷컴 앱에서 롯데카드 30만원 이상 결제를 하시려면 롯데닷컴 최신버전 앱으로 업데이트 해주세요.");if(totsttlamt>3e5&&varUa>-1&&$.trim(e)==paytype_card_031&&"mlotte001"==cp_schema&&""!=cp_udid&&!appVerChk(cp_v,"164"))return void alert("롯데닷컴 앱에서 삼성카드 30만원 이상 결제를 하시려면 롯데닷컴 최신버전 앱으로 업데이트 해주세요.");if("01"!=cardinst&&""==$.trim(f))return void alert("할부기간을 선택해주세요.")}$("#frm_send input[name=paytype]:hidden").val(paytype),$("#frm_send input[name=iscmcd]:hidden").val(e),$("#frm_send input[name=cardinst]:hidden").val(cardinst),$("#frm_send input[name=cardinstmon]:hidden").val(f),$("#frm_send input[name=bankno]:hidden").val(bankno),$("#frm_send input[name=onlineacctname]:hidden").val(g),paytype==PAYTYPE_CODE_LPAY}else $("#frm_send input[name=paytype]:hidden").val(""),$("#frm_send input[name=iscmcd]:hidden").val(""),$("#frm_send input[name=cardinst]:hidden").val(""),$("#frm_send input[name=cardinstmon]:hidden").val(""),$("#frm_send input[name=bankno]:hidden").val(""),$("#frm_send input[name=onlineacctname]:hidden").val(""),$("#frm_send input[name=reg_no1]:hidden").val(""),$("#frm_send input[name=reg_no2]:hidden").val(""),$("#frm_send input[name=lpay_card_id]:hidden").val(""),$("#frm_send input[name=lpay_card_anm]:hidden").val("");var h,i,j;h=void 0==$("#lpoint_amt").prop("id")?0:$("#lpoint_amt").val().length<1?0:$("#lpoint_amt").val(),i=void 0==$("#lt_point_amt").prop("id")?0:$("#lt_point_amt").val().length<1?0:$("#lt_point_amt").val(),j=void 0==$("#deposit_amt").prop("id")?0:$("#deposit_amt").val().length<1?0:$("#deposit_amt").val();new Array,new Array,new Array;if($("#frm_card input[name=X_CARDTYPE]:hidden").val(e),$("#frm_card input[name=X_AMOUNT]:hidden").val(totsttlamt),totsttlamt>3e5&&(e==paytype_card_048||e==paytype_card_029)?($("#frm_card input[name=X_ISMART_USE_SIGN]:hidden").val("Y"),("Y"==lotte_app_yn||"Y"==smart_pic_app_yn||"Y"==ellotte_app_yn)&&$("#frm_card input[name=X_MALL_APP_NAME]:hidden").val(schema_domain)):($("#frm_card input[name=X_ISMART_USE_SIGN]:hidden").val(""),$("#frm_card input[name=X_MALL_APP_NAME]:hidden").val("")),e==paytype_card_047&&($("#SIMPLEPAYFORM input[name=order_amount]:hidden").val(totsttlamt),$("#SIMPLEPAYFORM input[name=order_cardname]:hidden").val("LOTTECARD")),paytype==PAYTYPE_CODE_BANK||""!=h&&h>0||""!=j&&j>0){var k=$("#frm_inp select[name=cr_issu_mean_sct_cd]").val(),l=$("#frm_inp select[name=rdo_cash]").val(),m="",n="",o=0,p="",q=!0,r="";if("1"==l){$("#frm_send input[name=cr_issu_mean_sct_cd]:hidden").val(k),$("#frm_send input[name=cr_use_sct_cd]:hidden").val("0");"1"==k&&(k="2"),"3"==k&&(n=$("#frm_inp select[name=cr_issu_mean_no_phone1]").val()),$("#cash_receipts0"+k+" input").each(function(){return o=$(this).attr("maxlength"),p=$(this).attr("title"),m=$(this).val(),tmp_str=" 이상",r=$(this).attr("disabled"),"disabled"!=r&&("cr_issu_mean_no_credit_crd4"==$(this).attr("name")?o=3:"cr_issu_mean_no_rcpt_crd4"==$(this).attr("name")?o=1:"cr_issu_mean_no_phone2"==$(this).attr("name")?o=3:tmp_str="로",m.length<o)?(alert(p+"를 "+o+"자리"+tmp_str+" 입력해 주세요."),$(this).focus(),q=!1,!1):void(n+=m)}),$("#frm_send input[name=cr_issu_mean_no]:hidden").val(n)}else if("2"==l){$("#frm_send input[name=cr_issu_mean_sct_cd]:hidden").val($("#frm_inp input[name=cr_issu_mean_sct_cd_bman]:hidden").val()),$("#frm_send input[name=cr_use_sct_cd]:hidden").val("1"),$("#co_value input").each(function(){if(o=$(this).attr("maxlength"),o>1){if(p=$(this).attr("title"),m=$(this).val(),m.length<o)return alert(p+"를 "+o+"자리로 입력해 주세요."),$(this).focus(),q=!1,!1;n+=m}}),num1=n.charAt(0),num2=n.charAt(1),num3=n.charAt(2),num4=n.charAt(3),num5=n.charAt(4),num6=n.charAt(5),num7=n.charAt(6),num8=n.charAt(7),num9=n.charAt(8),num10=n.charAt(9);var s=1*num1+3*num2+7*num3+1*num4+3*num5+7*num6+1*num7+3*num8+5*num9;s+=parseInt(5*num9/10);var t=s%10;if(0==t)var u=0;else var u=10-t;if(u!=num10)return alert("사업자등록번호가 올바르지 않습니다."),$("#frm_inp input[name=cr_issu_mean_no_bman1]").focus(),q=!1,!1;$("#frm_send input[name=cr_issu_mean_no]:hidden").val(n)}else $("#frm_send input[name=cr_issu_mean_sct_cd]:hidden").val(""),$("#frm_send input[name=cr_use_sct_cd]:hidden").val(""),$("#frm_send input[name=cr_issu_mean_no]:hidden").val(n);if(!q)return}if($("#frm_inp input[name=paytype]:hidden").val()!=PAYTYPE_CODE_LPAY&&""==$("#frm_send input[name=lt_cd_no]").val()&&"Y"!=simple_mem_yn&&$("#temp_lt_point_amt").length>0&&""!=$("#temp_lt_point_amt").val()&&"0"!=$("#temp_lt_point_amt").val())return void $("html, body").animate({scrollTop:$("#submit_btn").offset().top},function(){$("#laver_Lpay_order").show()});$("#chk_smp_ecpn_gift_yn").length>0&&$("#frm_send input[name=smp_ecpn_gift_yn]:hidden").val($("#chk_smp_ecpn_gift_yn").val()),
$("#smp_ecpn_rfd_tgt").length>0&&(1==$("#smp_ecpn_rfd_tgt_cd_01").attr("checked")||1==$("#smp_ecpn_rfd_tgt_cd_01").prop("checked")?$("#frm_send input[name=smp_ecpn_rfd_tgt_cd]:hidden").val($("#smp_ecpn_rfd_tgt_cd_01").val()):1==$("#smp_ecpn_rfd_tgt_cd_02").attr("checked")||1==$("#smp_ecpn_rfd_tgt_cd_02").prop("checked")?$("#frm_send input[name=smp_ecpn_rfd_tgt_cd]:hidden").val($("#smp_ecpn_rfd_tgt_cd_02").val()):$("#frm_send input[name=smp_ecpn_rfd_tgt_cd]:hidden").val(""));for(var v=$("#frm_send input[name=goodsno]:hidden").val().split(split_gubun_1),w="",x=0;x<v.length;x++)w+=v[x]+":";doXansim()}function hanaskcard_payment(){var a=$("#frm_send input[name=iscmcd]:hidden").val(),b="hanaM",c=$("#frm_send input[name=cardinstmon]:hidden").val(),d="02"==$("#frm_send input[name=cardinst]:hidden").val()?"Y":"N",e=$("#frm_send input[name=totsttlamt]:hidden").val(),f=$("#frm_send input[name=goodsnm]:hidden").val(),g=f.split(split_gubun_1);g.length>1&&(f=g[0]+" 외 "+(g.length-1)),$("#frm_vpay input[name=vp_cardcode]:hidden").val(b),$("#frm_vpay input[name=vp_goodname]:hidden").val(f),$("#frm_vpay input[name=vp_price]:hidden").val(e),$("#frm_vpay input[name=vp_quota]:hidden").val(c),$("#frm_vpay input[name=vp_quota_flag]:hidden").val(d),$("#frm_vpay input[name=vp_iscmcd]:hidden").val(a),$("#frm_vpay").attr("target","X_ANSIM_FRAME"),$("#frm_vpay").attr("action","/vpay/req-authM.jsp"),$("#frm_vpay").submit()}function payment_pop_position(){$("#ANSIM_LAYER").css("top","10px"),window.scrollTo(0,0)}function doXansim(){if(console.log("doXansim"),iscmcd=$("#frm_send input[name=iscmcd]:hidden").val(),paytype=$("#frm_send input[name=paytype]:hidden").val(),pay_mean_cd=$("#frm_send input[name=pay_mean_cd]:hidden").val(),cardkndcd=$("#frm_send input[name=cardkndcd]:hidden").val(),cardkndcd_dup=$("#frm_send input[name=cardkndcd_dup]:hidden").val(),$("#frm_send input[name=credit_crd_gb]:hidden").val(""),console.log("iscmcd : "+iscmcd),console.log("paytype : "+paytype),console.log("pay_mean_cd : "+pay_mean_cd),console.log("cardkndcd : "+cardkndcd),console.log("cardkndcd_dup : "+cardkndcd_dup),disableItems(!0),paytype==PAYTYPE_CODE_LPAY){$("#frm_lpay input[name=req_div]:hidden").val("pay_req"),fn_LpayIframeSet();for(var a=["goodsno","lt_point_amt","totsttlamt","iscmcd","cardinst","cardinstmon","lpay_card_id","lpay_card_anm","giftyn","prommdclcd","ordr_nm","ordr_cell_no"],b=0;b<a.length;b++)$("#frm_lpay input[name="+a[b]+"]:hidden").val($("#frm_send input[name="+a[b]+"]:hidden").val());$("#frm_send input[name=xid]:hidden").val(""),$("#frm_send input[name=eci]:hidden").val(""),$("#frm_send input[name=cavv]:hidden").val(""),$("#frm_send input[name=cardno]:hidden").val(""),$("#frm_send input[name=lpay_conf_no]:hidden").val(""),$("#frm_send input[name=lpay_pay_sn]:hidden").val(""),$("#frm_send input[name=lpay_json_data]:hidden").val(""),$("#frm_send input[name=cardno]:hidden").val($("select[name=iscmcd]").find("option:selected").attr("data-card-no")),$("#frm_send input[name=credit_crd_gb]:hidden").val("4"),$("#frm_send input[name=smart_pay_use_yn]").val(""),$("#pageDesc").html("결제 준비 중입니다.<br>잠시만 기다려 주세요."),$("#pageCover,#pageLoading").show(),$("#frm_lpay").submit()}else if(paytype==PAYTYPE_CODE_CARD){X_CARDTYPE=$("#frm_card input[name=X_CARDTYPE]:hidden").val(),console.log("X_CARDTYPE : "+X_CARDTYPE),(X_CARDTYPE==paytype_card_047||X_CARDTYPE==paytype_card_029||X_CARDTYPE==paytype_card_031||X_CARDTYPE==paytype_card_048||X_CARDTYPE==paytype_card_020||X_CARDTYPE==paytype_card_008||X_CARDTYPE==paytype_card_036||X_CARDTYPE==paytype_card_018)&&(payment_pop_position(),$("#ANSIM_LAYER").css("width","100%"),$("#ANSIM_LAYER").css("height","530px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),$("#frm_send input[name=credit_crd_gb]:hidden").val("2"));var c=$("#frm_send input[name=op_pay_mean_hist_card_pay_meth_cd]:hidden").val();console.log("pay_confirm_type : "+c),$("#frm_send input[name=smart_pay_use_yn]").val(""),X_CARDTYPE==paytype_card_047?"01"==c?($("#frm_send input[name=smart_pay_use_yn]").val("Y"),lottecard_payment("SPS")):"02"==c?lottecard_payment("ACS"):"03"==c&&lottecard_payment("ACS"):X_CARDTYPE==paytype_card_029||X_CARDTYPE==paytype_card_031||X_CARDTYPE==paytype_card_048||X_CARDTYPE==paytype_card_018?(window.scrollTo(0,0),iscmcd!=paytype_card_018&&("01"==c?($("#frm_send input[name=smart_pay_use_yn]").val("Y"),$("#frm_card input[name=X_SP_CHAIN_CODE]:hidden").val("1")):"03"==c?$("#frm_card input[name=X_SP_CHAIN_CODE]:hidden").val("3"):$("#frm_card input[name=X_SP_CHAIN_CODE]:hidden").val("0")),xmpi_exec()):X_CARDTYPE==paytype_card_016&&(""==cp_udid||""!=cp_udid&&varUa>-1&&"mlotte001"==cp_schema&&appVerChk(cp_v,"169")||""!=cp_udid&&varUa<0&&ua_lower_str.search("iphone")>-1&&appVerChk(cp_v,"136")||""!=cp_udid&&varUa<0&&ua_lower_str.search("ipad")>-1&&appVerChk(cp_v,"127")||"Y"==smart_pic_app_yn||"Y"==ellotte_app_yn||"sklotte001"==cp_schema)?(payment_pop_position(),$("#ANSIM_LAYER").css("width","350px"),$("#ANSIM_LAYER").css("height","530px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),spay_exec()):X_CARDTYPE==paytype_card_016||X_CARDTYPE==paytype_card_026||X_CARDTYPE==paytype_card_021||X_CARDTYPE==paytype_card_054||X_CARDTYPE==paytype_card_002?confirm("국민,비씨,광주,우체국체크카드(ISP) 결제는 3G 또는 LTE로 진행 해야 안정적으로 결제하실 수 있습니다.\n결제를 진행하시겠습니까?")?($("#frm_send input[name=credit_crd_gb]:hidden").val("1"),misp_create_data()):(disableItems(!1),fn_talkOrderFail()):X_CARDTYPE==paytype_card_020?($("#frm_send input[name=credit_crd_gb]:hidden").val("2"),hanaskcard_payment()):X_CARDTYPE==paytype_card_036||X_CARDTYPE==paytype_card_008?($("#frm_send input[name=credit_crd_gb]:hidden").val("2"),ilkmpi_send()):(disableItems(!1),alert("지원되지 않는 카드 입니다."),fn_talkOrderFail())}else paytype==PAYTYPE_CODE_BANK?(bankno=$("#frm_send input[name=bankno]:hidden").val(),onlineacctname=$("#frm_send input[name=onlineacctname]:hidden").val(),""==$.trim(bankno)||""==$.trim(onlineacctname)?(disableItems(!1),alert("무통장 입금 정보가 부정확합니다."),fn_talkOrderFail()):($("#frm_send").attr("action","/order/order_complete.do?"+__commonParam),doPayment())):paytype==PAYTYPE_CODE_PHONE?(payment_pop_position(),$("#ANSIM_LAYER").css("width","380px"),$("#ANSIM_LAYER").css("height","800px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),cellphone_exec()):paytype==PAYTYPE_CODE_CARD||paytype==PAYTYPE_CODE_LPAY||""==cardkndcd&&""==cardkndcd_dup?""==paytype&&""!=pay_mean_cd?-1!=pay_mean_cd.indexOf(ltPoint)&&""==$("#frm_send input[name=lt_cd_no]").val()?(disableItems(!1),$("html, body").animate({scrollTop:$("#submit_btn").offset().top},function(){$("#laver_Lpay_order").show()}),fn_talkOrderFail()):($("#frm_send").attr("action","/order/order_complete.do?"+__commonParam),doPayment()):(disableItems(!1),alert("지원되지 않는 결제방법 입니다."),fn_talkOrderFail()):(disableItems(!1),alert("카드외 다른 결제방법 사용 시 카드할인 및 적립을 할 수 없습니다."),fn_talkOrderFail())}function fn_selPoint(a){var b=a.id;if(setCashReceiptArea(),a.checked){var c=parseInt($("#frm_inp input[name=totsttlamt]:hidden").val()),d=0;if(0==c)return void(a.checked=!1);"chk_lpoint"==b?($("#cash_receipts").show(),d=parseInt($("#useable_lpoint_amt").val()),$("#lpoint_amt").val(d>c?c:d),$("#lpoint_amt").attr("disabled",!1),$("#chk_lpoint_all").attr("disabled",!1),$("#chk_lpoint_all").attr("checked",!0),$("#chk_lpoint_all").prop("checked",!0)):"chk_lt_point"==b&&(d=parseInt($("#useable_lt_point_amt").val()),""!=$("#temp_lt_point_amt").val()&&"0"!=$("#temp_lt_point_amt").val()?$("#lt_point_amt").val($("#temp_lt_point_amt").val()):$("#lt_point_amt").val(d>c?c:d),$("#lt_point_amt").attr("disabled",!1),$("#chk_lt_point_all").attr("disabled",!1),$("#chk_lt_point_all").attr("checked",!0),$("#chk_lt_point_all").prop("checked",!0))}else"chk_lpoint"==b?fn_initPointList(lPoint):"chk_lt_point"==b&&fn_initPointList(ltPoint);fn_calcTotalPrice(),a.checked||void 0==$("#chk_deposit_all").attr("id")||fn_selPointAll(document.getElementById("chk_deposit_all")),pointUse(),paycardinstmon()}function fn_calcTotalPrice(){var a="";prommdclcd=$("#frm_send input[name=prommdclcd]").val(),dcamt=$("#frm_send input[name=totdcamt]").val(),dup_cpn_amt=sessionStorage.getItem("fvr_val"),third_cpn_amt=$("#frm_send input[name=totdcamt_third]").val(),prommdclcd_third=$("#frm_send input[name=prommdclcd_third]").val(),cardkndcd=$("#frm_send input[name=cardkndcd]").val(),payamt=$("#frm_inp input[name=defaulttotsttlamt]:hidden").val(),includeSaveInstCpn=$("#frm_send input[name=includeSaveInstCpn]").val();var b=$("#frm_send input[name=qs_yn]:hidden").val();lpoint_amt=void 0==$("#lpoint_amt").prop("id")?"":$("#lpoint_amt").val().length<1?0:$("#lpoint_amt").val(),lt_point_amt=void 0==$("#lt_point_amt").prop("id")?"":$("#lt_point_amt").val().length<1?0:$("#lt_point_amt").val(),deposit_amt=void 0==$("#deposit_amt").prop("id")?"":$("#deposit_amt").val().length<1?0:$("#deposit_amt").val(),dlv_prom_use_yn=$("#dlv_prom_use_yn").val(),dlv_fvr_val="Y"==dlv_prom_use_yn?$("#dlv_fvr_val").val():"0",tot_deli_amt=0,"N"==freeShippingYn?$("#frm_inp input[name=chk_multi_dlvp]:checkbox").prop("checked")?tot_deli_amt=$("#frm_inp input[name=caltotdeliamt]:hidden").val():tot_deli_amt=$("#frm_inp input[name=orgtotdeliamt]:hidden").val():"Y"==b&&(tot_deli_amt=$("#frm_inp input[name=orgtotdeliamt]:hidden").val()),totpayamt="Y"==includeSaveInstCpn?payamt.toString():(payamt-dcamt).toString(),"N"==freeShippingYn?totpayamt=(parseInt(totpayamt)+parseInt(tot_deli_amt)-parseInt($("#frm_inp input[name=orgtotdeliamt]:hidden").val())).toString():"Y"==b&&(totpayamt=(parseInt(totpayamt)+parseInt(tot_deli_amt)-parseInt($("#frm_inp input[name=orgtotdeliamt]:hidden").val())).toString());var c=totpayamt;"Y"!=includeSaveInstCpn&&(c=Number(c)+Number(dcamt)),$("#bene_tot_amt").find("span").text(String(c).money()+"원"),$("#frm_inp input[name=totordamt]:hidden").val(c);var d="";d="Y"==freeShippingYn?"배송비무료":$("#frm_inp input[name=orgtotdeliamt]:hidden").val()>0?"배송비포함":"배송비무료",$("#totalOrdAmt").html("<strong>"+String(c).money()+"</strong>원<span>"+d+"</span>");var e=$("#frm_send input[name=totRsrvAplyVal]").val(),f="",g=0;if(g="Y"!=$("#frm_send input[name=includeSaveInstCpn]").val()?0:dcamt,"0"==$("select[name='coupon']").val()&&"27"==$("#frm_send input[name=prommdclcd]").val()&&(e=0),Number(e)+Number(g)>0&&"27"!=$("#frm_send input[name=prommdclcd]").val()?(f="<ul><li class='list_depth2'><p class='left'>총 적립 금액</p><p class='right'>"+new String(Number(g)+Number(e)).money()+"점 예정</p></li></ul>",$("#li_totRsrvAplyVal").html(f)):$("#li_totRsrvAplyVal").hide(),dup_cpn_amt>0&&(totpayamt=(totpayamt-dup_cpn_amt).toString()),third_cpn_amt>0&&(totpayamt=(totpayamt-third_cpn_amt).toString()),"Y"==b){var h=Number(dcamt)+Number(dup_cpn_amt)+Number(third_cpn_amt);totpayamt=fn_quicDeliAmtChk(c,tot_deli_amt,h,totpayamt),dlv_prom_use_yn="N"}else"Y"==dlv_prom_use_yn&&dlv_fvr_val>0&&tot_deli_amt>0?totpayamt=(totpayamt-dlv_fvr_val).toString():"Y"==dlv_prom_use_yn&&dlv_fvr_val>0&&0==tot_deli_amt&&(dlv_prom_use_yn="N",$("#dlv_prom_use_yn").val("N"));lpoint_amt>0&&(totpayamt=(totpayamt-lpoint_amt).toString()),lt_point_amt>0&&(totpayamt=(totpayamt-lt_point_amt).toString()),deposit_amt>0&&(totpayamt=(totpayamt-deposit_amt).toString()),prommdclcdNm="",prommdclcd==adtn_cost_dtl_sct_cd_card?(cardkndcd==paytype_card_002?prommdclcdNm="광주":cardkndcd==paytype_card_008?prommdclcdNm="외환":cardkndcd==paytype_card_016?prommdclcdNm="KB국민":cardkndcd==paytype_card_018?prommdclcdNm="NH":cardkndcd==paytype_card_021?prommdclcdNm="우리":cardkndcd==paytype_card_020?prommdclcdNm="하나SK":cardkndcd==paytype_card_026?prommdclcdNm="비씨":cardkndcd==paytype_card_029?prommdclcdNm="신한":cardkndcd==paytype_card_031?prommdclcdNm="삼성":cardkndcd==paytype_card_036?prommdclcdNm="씨티":cardkndcd==paytype_card_047?prommdclcdNm="롯데":cardkndcd==paytype_card_048?prommdclcdNm="현대":cardkndcd==paytype_card_054&&(prommdclcdNm="우체국체크"),prommdclcdNm+="카드할인"):prommdclcd==adtn_cost_dtl_sct_cd_coupon?prommdclcdNm="즉석쿠폰":prommdclcd==adtn_cost_dtl_sct_cd_staff?prommdclcdNm="임직원할인":prommdclcd==adtn_cost_dtl_sct_cd_mrktng_cpn&&(prommdclcdNm="쿠폰/쇼핑지원권"),$("#deli_amt_ul").show(),$("#deli_amt_ul li").filter(".pr_text2").text(new String(tot_deli_amt).money()+"원");var i=0,j=0;dcamt>0&&"N"==includeSaveInstCpn&&(a+='<li class="pr_text1">'+prommdclcdNm+'</li><li class="pr_text2">(-)'+dcamt.money()+"원</li>",i+=parseInt(dcamt)),dup_cpn_amt>0&&(a=apply_br_tag(a),a+='<li class="pr_text1">추가할인</li><li class="pr_text2">(-)'+dup_cpn_amt.money()+"원</li>",i+=parseInt(dup_cpn_amt)),third_cpn_amt>0&&(a=apply_br_tag(a),a+='<li class="pr_text1">'+("35"==prommdclcd_third?"일시불할인":"")+'</li><li class="pr_text2">(-)'+third_cpn_amt.money()+"원</li>",i+=parseInt(third_cpn_amt)),"Y"==dlv_prom_use_yn&&dlv_fvr_val>0&&tot_deli_amt>0?(i+=parseInt(dlv_fvr_val),$("#fdAmt").html("(<span class=tBold>-"+String(dlv_fvr_val).money()+'</span><span class="no_bold">원</span>)')):$("#fdAmt").html(""),"Y"==maxdc_yn&&("Y"==includeSaveInstCpn?$("#max_bene_dctot_amt").html(String(Number(dcamt)+Number(i)).money()):$("#max_bene_dctot_amt").html(String(Number(i)).money())),"Y"==includeSaveInstCpn?$("#bene_dctot_amt").html(String(Number(dcamt)+Number(i)).money()):$("#bene_dctot_amt").html(String(Number(i)).money()),$("#bene_dctot_amt").text()==$("#max_bene_dctot_amt").text()?($("#max_slae_dlv").removeClass("type2"),$("#select_sale_div").addClass("type2"),$("#select_sale_div").hide()):($("#select_sale_div").removeClass("type2"),$("#max_slae_dlv").addClass("type2"),$("#select_sale_div").show()),lpoint_amt>0?(a=apply_br_tag(a),a+='<li class="pr_text1">L-money</li><li class="pr_text2">(-)'+lpoint_amt.money()+"점</li>",$("#old_lpoint_amt").val(lpoint_amt),i+=parseInt(lpoint_amt),j+=parseInt(lpoint_amt)):lpoint_amt>-1&&$("#old_lpoint_amt").val(lpoint_amt),lt_point_amt>0?(a=apply_br_tag(a),a+='<li class="pr_text1">L.POINT</li><li class="pr_text2">(-)'+lt_point_amt.money()+"점</li>",$("#old_lt_point_amt").val(lt_point_amt),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY&&$("#temp_lt_point_amt").val(lt_point_amt),i+=parseInt(lt_point_amt),j+=parseInt(lt_point_amt)):lt_point_amt>-1&&$("#old_lt_point_amt").val(lt_point_amt),deposit_amt>0?(a=apply_br_tag(a),a+='<li class="pr_text1">보관금</li><li class="pr_text2">(-)'+deposit_amt.money()+"원</li>",$("#old_deposit_amt").val(deposit_amt),i+=parseInt(deposit_amt),j+=parseInt(deposit_amt)):deposit_amt>-1&&$("#old_deposit_amt").val(deposit_amt),$("#usePointSum").html(j.toString().money()+'<span class="no_bold">원</span>'),"Y"==dlv_prom_use_yn&&dlv_fvr_val>0&&(a=apply_br_tag(a),a+='<li class="pr_text1">무료배송권</li><li class="pr_text2">(-)'+dlv_fvr_val.money()+"원</li>");var k=("0"==i.toString().money(),""+i.toString().money()+"원");if($("#discount").html(k),$("#lottepointSave").empty(),setLottePointSaveDiv(dcamt),0!=totpayamt||void 0!=typeof $("#pntOnlyPay").val()&&""!=$("#pntOnlyPay").val()&&"N"!=$("#pntOnlyPay").val()?($("#div_paytype_void").show(),$("#div_paytype #pay_method").show(),$("#frm_inp input[name=rdo_paytype]:radio:checked").val()==paytype_code_card||$("#frm_inp input[name=rdo_paytype]:radio:checked").val()==paytype_code_lpay?$("#div_paytype #pay_card").show():$("#frm_inp input[name=rdo_paytype]:radio:checked").val()==paytype_code_bank&&$("#div_paytype #pay_bank").show(),$("#h3_paytype_title").show(),$("#payment_method_next_use").show(),$(".slide_wrap").show(),""!=$("#eventcardsale_cont").text()&&$("#eventcardsale_cont").show(),""!=$("#eventcard_cont").text()&&$("#eventcard_cont").show(),""!=$("#eventcardsaleamt_cont").text()&&$("#eventcardsaleamt_cont").show()):($("#div_paytype_void").hide(),$("#div_paytype #pay_method").hide(),$("#div_paytype #pay_card").hide(),$("#div_paytype #pay_bank").hide(),$("#h3_paytype_title").hide(),$("#payment_method_next_use").hide(),$(".slide_wrap").hide(),$("#eventcardsale_cont").hide(),$("#eventcard_cont").hide(),$("#eventcardsaleamt_cont").hide()),$("#submit_btn").show(),$("#totalprice").html(totpayamt.money()+"<span>원</span>"),$("#frm_inp input[name=totsttlamt]:hidden").val(totpayamt),"Y"==claim_sale_yn){var l=""==$("#frm_inp input[name=claim_sale_fvr_val]:hidden").val()?"0":$("#frm_inp input[name=claim_sale_fvr_val]:hidden").val(),m=$("#frm_inp input[name=claim_sale_card_max_amt]:hidden").val(),n=""==n?"0":n,o=$("#frm_inp input[name=paytype]:hidden").val(),p="138425"!=cp_cn&&"137725"!=cp_cn&&"156230"!=cp_cn,q=parseInt(totpayamt)-parseInt(totpayamt)*parseInt(l)*.01,r=10*Math.floor(.1*q);parseInt(m)<parseInt(totpayamt)-parseInt(q)&&(r=parseInt(totpayamt)-parseInt(m)),p?($("#eventcardsaleamt_cont").html("청구할인가 "+String(r).money()+"원 예상"),$("#eventcardsaleamt_cont").show(),$("#claim_sale_price").html(String(r).money()+"원")):($("#eventcardsaleamt_cont").hide(),$("#claim_sale_price").html("")),parseInt(totpayamt)>=parseInt(n)&&$("#frm_inp select[name=iscmcd]").val()==claim_sale_card_knd_cd&&(o==PAYTYPE_CODE_CARD||o==PAYTYPE_CODE_LPAY)&&parseInt(totpayamt)>0?p&&fn_formshow():p&&fn_formshow()}pointUse(),fn_all_dc()}function setLottePointSaveDiv(a){var b="";try{var c=$("#frm_send input[name=totRsrvAplyVal]").val();"Y"!=$("#frm_send input[name=includeSaveInstCpn]").val()&&(a=0),Number(c)>0&&("0"==$("select[name='coupon']").val()&&"27"==$("#frm_send input[name=prommdclcd]").val()?$("#lottepointSave").html('<li class="list_depth2 lpoint"><p class="left">적립 L.POINT</p><p class="right">임직원할인 이용 시 적립 대상 제외</p></li>'):(b='<li class="list_depth2 lpoint"><p class="left">적립 L.POINT</p><p class="right">'+new String(Number(c)).money()+'점 예정</p></li><li class="list_depth2 lpoint2"><p class="left">(롯데포인트플러스카드 시</p><p class="right">'+new String(2*Number(c)).money()+"점 예정)</p></li>",$("#lottepointSave").html(b)))}catch(d){}}function fn_initPointList(a){("ALL"==a||a==lPoint)&&($("#lpoint_amt").val(""),$("#old_lpoint_amt").val(""),$("#lpoint_amt").attr("disabled",!0),$("#chk_lpoint_all").attr("checked",!1),$("#chk_lpoint_all").prop("checked",!1),$("#chk_lpoint_all").attr("disabled",!0)),("ALL"==a||a==ltPoint)&&($("#lt_point_amt").val(""),$("#old_lt_point_amt").val(""),$("#temp_lt_point_amt").val(""),$("#lt_point_amt").attr("disabled",!0),$("#chk_lt_point_all").attr("checked",!1),$("#chk_lt_point_all").prop("checked",!1),$("#chk_lt_point_all").attr("disabled",!0)),("ALL"==a||a==deposit)&&($("#deposit_amt").val(""),$("#old_deposit_amt").val(""))}function misp_install(){isAndroid?"Y"==tstore_yn?$("#X_ANSIM_FRAME").attr("src","tstore://PRODUCT_VIEW/0000025711/0"):$("#X_ANSIM_FRAME").attr("src","http://mobile.vpay.co.kr/jsp/MISP/andown.jsp"):isIOS?$("#X_ANSIM_FRAME").attr("src","http://itunes.apple.com/kr/app/id369125087?mt=8"):alert("지원되지 않는 운영체제 입니다.")}function misp_exec(){if(isIOS){var a=new Date;setTimeout(function(){new Date-a<3e3&&(window.location.href="http://itunes.apple.com/kr/app/id369125087?mt=8")},1500),top.location.href="ispmobile://?TID="+$("#frm_send input[name=MISP_TID]:hidden").val()}else isAndroid?window.location.href="intent://TID="+$("#frm_send input[name=MISP_TID]:hidden").val()+"#Intent;scheme=ispmobile;package=kvp.jjy.MispAndroid320;end":alert("지원되지 않는 운영체제 입니다.")}function misp_send(){$("#frm_send").attr("action","/misp/toTransData.jsp"),$("#frm_send").attr("method","post"),$("#frm_send").attr("target","X_ANSIM_FRAME"),$("#frm_send").submit()}function misp_create_data(){iscmcd=$("#frm_send input[name=iscmcd]:hidden").val(),"Y"==grockle_yn?(phone_num1=$("#frm_inp [name=grockle_cell1]:enabled").val(),phone_num2=$("#frm_inp input[name=grockle_cell2]").val(),phone_num3=$("#frm_inp input[name=grockle_cell3]").val(),companyCd="SKT",grockle_mbr_no=$("#frm_send input[name=grockle_mbr_no]:hidden").val()):(phone_num1=phone_no1,phone_num2=phone_no2,phone_num3=phone_no3,companyCd=commid,grockle_mbr_no=""),cardinst=$("#frm_send input[name=cardinst]:hidden").val(),cardinstmon=$("#frm_send input[name=cardinstmon]:hidden").val(),totsttlamt=$("#frm_send input[name=totsttlamt]:hidden").val(),goodsnm=$("#frm_send input[name=goodsnm]:hidden").val().replace(/'/gi,"").replace(/&/gi,"").replace(/=/gi,"").replace(/%/gi,""),goodsnm=encodeURIComponent(goodsnm),$.ajax({type:"post",async:!1,url:"/order/misp_confirm.do?"+__commonParam,data:"iscmcd="+iscmcd+"&companyCd="+companyCd+"&cardinst="+cardinst+"&cardinstmon="+cardinstmon+"&phone_num1="+phone_num1+"&phone_num2="+phone_num2+"&phone_num3="+phone_num3+"&totsttlamt="+totsttlamt+"&goodsnm="+goodsnm+"&grockle_yn="+grockle_yn+"&grockle_mbr_no="+grockle_mbr_no,success:function(a){$("#cover").off("click"),$("#cover").on("click",function(){$(this).hide()}),$("#misp_confirm_div").html(a),misp_send()},error:init_misp()})}function init_misp(){$("#frm_send input[name=KVP_NOINT]:hidden").val(""),$("#frm_send input[name=KVP_QUOTA]:hidden").val(""),$("#frm_send input[name=KVP_GOODNAME]:hidden").val(""),$("#frm_send input[name=KVP_PRICE]:hidden").val(""),$("#frm_send input[name=KVP_NOINT_INF]:hidden").val(""),$("#frm_send input[name=KVP_QUOTA_INF]:hidden").val(""),$("#frm_send input[name=MISP_GoodName]:hidden").val(""),$("#frm_send input[name=MISP_Price]:hidden").val(""),$("#frm_send input[name=MISP_NoInt]:hidden").val(""),$("#frm_send input[name=MISP_Noint_Inf]:hidden").val(""),$("#frm_send input[name=MISP_HpNum]:hidden").val(""),$("#frm_send input[name=MISP_MerchantNo]:hidden").val(""),$("#frm_send input[name=MISP_Tcode]:hidden").val(""),$("#frm_send input[name=MISP_TID]:hidden").val(""),fn_talkOrderFail()}function ilkmpi_send(){iscmcd=$("#frm_send input[name=iscmcd]:hidden").val(),pan="",apvl_halbu=$("#frm_send input[name=cardinstmon]:hidden").val(),pay_ansim_price=$("#frm_send input[name=totsttlamt]:hidden").val(),handNum=phone_no1+phone_no2+phone_no3,handNum.length<10&&(handNum="00000000000"),iscmcd==paytype_card_008?pan="4599300000000000":iscmcd==paytype_card_036&&(pan="4539350000000007"),$("#ILKFORM input[name=apvl_halbu]:hidden").val(apvl_halbu),$("#ILKFORM input[name=pay_ansim_price]:hidden").val(pay_ansim_price),$("#ILKFORM input[name=handNum]:hidden").val(handNum),$("#ILKFORM input[name=purchase_amount]:hidden").val(pay_ansim_price),$("#ILKFORM input[name=pan]:hidden").val(pan),$("#ILKFORM").submit()}function setMaxDc(){var a=0,b=0,c=0,d=0,e=0,f="0";$("#frm_inp select[name=coupon]").find("option").each(function(){var g=$(this).val();"N"!=g?(promcartsn=$("#frm_inp input[name=promcartsn]").eq(g).val(),prommdclcd=$("#frm_inp input[name=prommdclcd]").eq(g).val(),fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd]").eq(g).val(),totdcamt=$("#frm_inp input[name=totdcamt]").eq(g).val(),cpnpromno=$("#frm_inp input[name=cpnpromno]").eq(g).val(),cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn]").eq(g).val(),adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm]").eq(g).val(),cardkndcd=$("#frm_inp input[name=cardkndcd]").eq(g).val(),includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn]").eq(g).val(),"undefined"==$.type($("#frm_inp select[name=dup_coupon]").val())?parseInt(totdcamt)>=parseInt(b)&&(a=totdcamt,"N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=g,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=g,e=0,maxSaveDupIdx="")):$("#frm_inp select[name=dup_coupon]").find("option").each(function(){var h,i=$(this).val(),j=0;if(v_cpn_crd_dc_amt=0,dup_cpnpromno=$("#frm_inp input[name=cpnpromno_dup]").eq(i).val(),"N"!=i){if(void 0==g||"N"==g?(h=single_prom,j=single_prom_cnt):(h=multi_prom,j=multi_prom_cnt,f="0"==cpnpromno?prommdclcd:cpnpromno),j>0){v_cpn_crd_dc_amt=0,totdupdcamt=0;for(var k=0;k<h.length;k++)if(h[k][0]==f&&h[k][1]==dup_cpnpromno){v_cpn_crd_dc_amt=h[k][2],totdupdcamt=h[k][2];break}parseInt(v_cpn_crd_dc_amt)>0?"N"!=i?(dup_promcartsn=$("#frm_inp input[name=promcartsn_dup]").eq(i).val(),dup_prommdclcd=$("#frm_inp input[name=prommdclcd_dup]").eq(i).val(),dup_fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd_dup]").eq(i).val(),dup_cpnpromno=$("#frm_inp input[name=cpnpromno_dup]").eq(i).val(),dup_cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn_dup]").eq(i).val(),dup_adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm_dup]").eq(i).val(),dup_cardkndcd=$("#frm_inp input[name=cardkndcd_dup]").eq(i).val(),dup_includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn_dup]").eq(i).val(),"10"==prommdclcd&&""!=cardkndcd?("30"==$("#frm_inp input[name=prommdclcd_dup]:eq("+$(this).val()+")").val()&&cardkndcd==$("#frm_inp input[name=cardkndcd_dup]:eq("+$(this).val()+")").val()||""==$("#frm_inp input[name=cardkndcd_dup]:eq("+$(this).val()+")").val())&&parseInt(totdcamt)+parseInt(totdupdcamt)>=parseInt(a)&&(a=parseInt(totdcamt)+parseInt(totdupdcamt),"N"==includeSaveInstCpn&&parseInt(a)>parseInt(b)+parseInt(c)?(b=totdcamt,maxFirstIdx=g,c=totdupdcamt,maxDupIdx=i):"Y"==includeSaveInstCpn&&parseInt(a)>parseInt(d)+parseInt(e)&&(d=totdcamt,maxSaveFirstIdx=g,e=totdupdcamt,maxSaveDupIdx=i)):"27"==prommdclcd?parseInt(totdcamt)>=parseInt(a)&&("N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=g,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=g,e=0,maxSaveDupIdx="")):parseInt(totdcamt)+parseInt(totdupdcamt)>=parseInt(a)&&(a=parseInt(totdcamt)+parseInt(totdupdcamt),"N"==includeSaveInstCpn&&parseInt(a)>parseInt(b)+parseInt(c)?(b=totdcamt,maxFirstIdx=g,c=totdupdcamt,maxDupIdx=i):"Y"==includeSaveInstCpn&&parseInt(a)>parseInt(d)+parseInt(e)&&(d=totdcamt,maxSaveFirstIdx=g,e=totdupdcamt,maxSaveDupIdx=i))):parseInt(totdcamt)>=parseInt(a)&&(a=totdcamt,"N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=g,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=g,e=0,maxSaveDupIdx=""),promcartsn="",prommdclcd="",fvrpolctpcd="",totdcamt="0",cpnpromno="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn=""):parseInt(totdcamt)>=parseInt(a)&&(a=parseInt(totdcamt),"N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=g,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=g,e=0,maxSaveDupIdx=""),promcartsn="",prommdclcd="",fvrpolctpcd="",totdcamt="0",cpnpromno="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn="")}}else parseInt(totdcamt)>=parseInt(a)&&(a=totdcamt,"N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=g,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=g,e=0,maxSaveDupIdx=""))})):"undefined"!=$.type($("#frm_inp select[name=dup_coupon]").val())&&$("#frm_inp select[name=dup_coupon]").find("option").each(function(){var d,h=$(this).val(),i=0;if(v_cpn_crd_dc_amt=0,"N"!=h&&(void 0==g||"N"==g?(d=single_prom,i=single_prom_cnt):(d=multi_prom,i=multi_prom_cnt,f="0"==cpnpromno?prommdclcd:cpnpromno),cpnpromno_dup=$("#frm_inp input[name=cpnpromno_dup]").eq(h).val(),i>0)){for(var j=0;j<d.length;j++)if(d[j][0]==f&&d[j][1]==cpnpromno_dup){v_cpn_crd_dc_amt=d[j][2],totdupdcamt=d[j][2];break}parseInt(v_cpn_crd_dc_amt)>0&&("N"!=h?(promcartsn=$("#frm_inp input[name=promcartsn_dup]").eq(h).val(),prommdclcd=$("#frm_inp input[name=prommdclcd_dup]").eq(h).val(),fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd_dup]").eq(h).val(),cpnpromno=$("#frm_inp input[name=cpnpromno_dup]").eq(h).val(),cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn_dup]").eq(h).val(),adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm_dup]").eq(h).val(),cardkndcd=$("#frm_inp input[name=cardkndcd_dup]").eq(h).val(),includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn_dup]").eq(h).val(),parseInt(v_cpn_crd_dc_amt)>parseInt(a)&&(a=parseInt(v_cpn_crd_dc_amt),b=parseInt(v_cpn_crd_dc_amt),maxFirstIdx=g,parseInt(v_cpn_crd_dc_amt)>0?(c=v_cpn_crd_dc_amt,maxDupIdx=h):(c=0,maxDupIdx="",e=0,maxSaveDupIdx=""))):(promcartsn="",prommdclcd="",fvrpolctpcd="",totdcamt="0",cpnpromno="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn=""))}})}),parseInt(b)+parseInt(c)<parseInt(d)+parseInt(e)&&(maxFirstIdx=maxSaveFirstIdx,maxDupIdx=maxSaveDupIdx),maxFirstIdx=""==maxFirstIdx?"N":maxFirstIdx,maxDupIdx=""==maxDupIdx?"N":maxDupIdx,"N"!=maxFirstIdx&&($("#frm_inp select[name=coupon]").val(maxFirstIdx),$("#frm_inp select[name=coupon]").change()),"N"!=maxDupIdx&&($("#frm_inp select[name=dup_coupon]").val(maxDupIdx),$("#frm_inp select[name=dup_coupon]").change()),"N"==maxFirstIdx&&"N"==maxDupIdx&&("Y"==app_card_only_yn?($("#frm_inp select[name=iscmcd]").val(app_card_cd),getCardInsCheck()):0==$("#frm_inp input[name=rdo_paytype]:radio:checked").index()&&0!=$("#frm_inp select[name=iscmcd] option:selected").index()&&getCardInsCheck()),0==maxFirstIdx&&$(".order_tp #lottepointSave .lottepointOrange").hide()}function fn_chkDeliDeptClose(){var a=!0,b=$("#frm_send input[name=qs_yn]:hidden").val();if("undefined"!=typeof b&&"Y"==b){var c="";if(c="Y"==grockle_yn?$("#frm_inp input[name=inpzip1]:hidden").val()+$("#frm_inp input[name=inpzip2]:hidden").val():$("#frm_send input[name=dlvzip]").val(),"undefined"==typeof c||""==c)return alert("우편번호가 저장되어있지 않아 배송지 정보를 알수 없습니다.\n새 배송지를 입력하여 다시 시도해주세요!"),!1;$.ajax({async:!1,url:"/mylotte/searchDlvChk_quick.do",dataType:"json",data:{post_no:c},success:function(b){b.success?"Y"==b.postyn?("Y"!=b.dpclose&&(alert("공휴일 및 롯데백화점 본점 휴무일, \n배송마감일에는 \n퀵 배송 주문이 불가합니다."),a=!1),"Y"!=b.timeyn&&(alert("퀵 배송 주문은 09:00~16:30에만 가능합니다."),a=!1)):(alert("서울지역만 퀵 배송이 가능합니다.\n배송지를 다시 입력해 주세요."),a=!1):(alert("서버와 통신 조회중 입니다. 결제하기 버튼을 다시 클릭해 주세요."),a=!1)}})}return a}function fn_quicDeliAmtChk(a,b,c,d){var e=$("#frm_send input[name=stdamt]:hidden").val(),f=$("#frm_send input[name=deliamtup]:hidden").val(),g=$("#frm_send input[name=deliamtdown]:hidden").val(),h=0;return d=(parseInt(a)-parseInt(c)-parseInt(b)).toString(),a=parseInt(a)-parseInt(b),h=parseInt(d)>=parseInt(e)?g:f,d=(parseInt(d)+parseInt(h)).toString(),a=parseInt(a)+parseInt(h),$("#frm_inp input[name=defaulttotsttlamt]:hidden").val(a),$("#frm_inp input[name=totsttlamt]:hidden").val(a),$("#bene_tot_amt").find("span").text(String(a).money()+"원"),$("#frm_inp input[name=totordamt]:hidden").val(a),$("#totalOrdAmt").html("<strong>"+String(a).money()+"</strong>원<span>(배송비포함)</span>"),$("#frm_inp input[name=orgtotdeliamt]:hidden").val(h),$("#frm_inp input[name=caltotdeliamt]:hidden").val(h),$("#frm_send input[name=totdeliamt]:hidden").val(h),$("#bene_group_deli_amt_1").find("span").attr("dlex",h),$("#bene_group_deli_amt_1").find("span").html(h.money()+'<span class="no_bold">원</span>'),$("#quickDeliAmt").text(h.money()),d}function lpayCertInfo(){console.log("▶▶▶▶▶ lpayCertInfo() : Start"),selPayType(4),$("#frm_lpay input[name=req_div]:hidden").val("card_req"),$("#frm_lpay input[name=card_search_type]:hidden").val("info"),$("#frm_lpay").submit()}function lpayPaymentReq(){console.log("▶▶▶▶▶ lpayPaymentReq() : Start"),selPayType(4),$("#frm_lpay input[name=req_div]:hidden").val("pay_req"),$("#frm_lpay input[name=card_search_type]:hidden").val(""),$("#frm_lpay").submit()}function fn_LpayIframeSet(){console.log("▶▶▶▶▶ fn_LpayIframeSet() : Start"),payment_pop_position(),$("#ANSIM_LAYER").css("width","100%"),$("#ANSIM_LAYER").css("height","500px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show()}function fn_talkOrderFail(){try{parent.talkOrderCallBack("9999","결제중단","")}catch(a){return void alert("퍼블콜백함수필요")}}function getPage(){return document.frm_send.pageName.value}!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteSideMylotte","lotteCommFooter"]);d.controller("OrderCtrl",["$scope","$filter","$sce","$http","$window","$log","LotteCommon","LotteUtil",function(a,b,c,d,e,f,g,h){a.showWrap=!0,a.contVisible=!0,a.subTitle=orderSubTitle,a.actionBar=!0,a.isShowThisSns=!1,a.orderSgl=!0}]),d.controller("ordersimpleCtrl",["$scope","LotteCommon",function(a,b){a.showWrap=!0,a.contVisible=!0,a.subTitle=""}])}(window,window.angular),fn_log=function(a){var b=window.console||{log:function(){}};b.log(a)};var add_dis_impossible_flag=!1,totpayamt,ltPointCert="N",single_prom,single_prom_cnt,multi_prom,multi_prom_cnt,maxFirstIdx="",maxDupIdx="",maxSaveFirstIdx="",maxSaveDupIdx="";
$(window).load(function(){paytype=$("#frm_send input[name=paytype]:hidden").val(),PAYTYPE_CODE_LPAY==paytype?lpayCertInfo():send()});