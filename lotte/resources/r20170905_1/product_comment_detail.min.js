angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function a(a,b,c){function d(a){var b=a.originalEvent?a.originalEvent.touches:a.touches;y=b[0].clientX,z=b[0].clientY,u=s,v=t,A=0,B=0}function e(a){var c=a.originalEvent?a.originalEvent.touches:a.touches;""===l&&(1===c.length&&o>1?l="swipe":2===c.length&&(l="pinch",q=o,n=g(c),w=c[0].clientX-parseInt((c[0].clientX-c[1].clientX)/2,10)-b[0].offsetLeft-u,x=c[0].clientY-parseInt((c[0].clientY-c[1].clientY)/2,10)-b[0].offsetTop-v)),"swipe"===l?(a.preventDefault(),A=c[0].clientX-y,B=c[0].clientY-z,s=u+A,t=v+B,h()):"pinch"===l&&(a.preventDefault(),m=g(c),p=m/n,o=p*q,s=w*(1-p)+u+A,t=x*(1-p)+v+B,h())}function f(a){var b=a.originalEvent?a.originalEvent.touches:a.touches;""===l||b.length>0||(1>o?(o=1,s=0,t=0):o>r?(o=r,p=o/q,s=w*(1-p)+u+A,t=x*(1-p)+v+B):(s>0?s=0:j*(1-o)>s&&(s=j*(1-o)),t>0?t=0:k*(1-o)>t&&(t=k*(1-o))),h(.1),l="")}function g(a){var b=Math.sqrt(Math.pow(a[0].clientX-a[1].clientX,2)+Math.pow(a[0].clientY-a[1].clientY,2));return parseInt(b,10)}function h(a){var c=a?"all cubic-bezier(0,0,.5,1) "+a+"s":"",d=[o,0,0,o,s,t],e="matrix("+d.join(",")+")";b.css({"-webkit-transition":c,transition:c,"-webkit-transform":e+" translate3d(0,0,0)",transform:e})}function i(){o=1,s=0,t=0,h(.1),l=""}console.log("pinch zoom -----");var j,k,l="",m=0,n=0,o=1,p=1,q=1,r=parseInt(c.maxScale,10);(isNaN(r)||1>=r)&&(r=3);var s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=new Image;C.onload=function(){j=b[0].clientWidth,k=b[0].clientHeight,b.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),b.on("touchstart",d),b.on("touchmove",e),b.on("touchend",f),b.on("resetPinch",i)},c.ngSrc?C.src=c.ngSrc:C.src=c.src}var b={restrict:"A",scope:!1,link:a};return b}),function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSns",[]),e="[롯데닷컴 이거어때?]\n";d.controller("smsBoxCtrl",["$scope","$http","LotteCommon",function(a,b,c){a.sendSMSData=function(){var d={msg:a.smsTxt,phone_no:a.sms_phoneNo};b({url:c.sendEventSms,data:$.param(d),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(b){b.indexOf("정상적으로 처리되었습니다")>-1?alert("문자가 발송되었습니다."):alert(b),a.hideSharePop()}).error(function(a){console.log("Error Data : 데이터 로딩 에러")})}}]),d.directive("shareBox",["$window","$location","LotteCommon","commInitData","$http","$timeout",function(d,e,f,g,h,i){return{templateUrl:"/lotte/resources_dev/sns/share_box.html",replace:!0,link:function(e,j,k){function l(a){return 10>a?"0"+a:a+""}function m(a,b,c,d,e,f){var g=new Date(a,b,c,d,e,f);return a&&b&&c&&(g.setFullYear(a),g.setMonth(b-1),g.setDate(c),d&&g.setHours(d),e&&g.setMinutes(e),f&&g.setSeconds(f)),g.getTime()}function n(a){return(a+"").length>1?a:"0"+a}function o(){return g.query.goods_no?void h.get("/product/regBestProd.do",{params:{goods_no:g.query.goods_no,sum_dt:v}}).success(function(a){}).error(function(){}):!1}function p(){if(e.share_img&&""!=e.share_img)var a=e.share_img;else if(y<m(2017,4,24,0,0))var a="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg";else var a="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png";e.cnShareUrl=e.cnShareUrl.replace(/(&)/g,"%26"),e.subTitle=e.getDearPetShareTitle(e.subTitle).replace(/(&)/g,"")+e.prdComment.replace(/(&)/g,"");var b="http://m.facebook.com/sharer.php?s=100&u="+encodeURIComponent(f.facebookUrl+"?fb_yn=Y&shareUrl="+e.cnShareUrl+"&shareTitle="+e.getDearPetShareTitle(e.subTitle)+"&shareImg="+a);d.open(b)}function q(){var a=(e.subTitle+e.prdComment,"https://twitter.com/share?text="+encodeURIComponent(e.getDearPetShareTitle(e.subTitle)+e.prdComment+" ")+"&url="+encodeURIComponent(e.cnShareUrl));d.open(a)}var r=new Date,s=r.getFullYear()+"",t=r.getMonth()+1+"",u=r.getDate()+"",v=s+n(t)+n(u),w=new Date,x=w.getFullYear()+l(w.getMonth()+1)+l(w.getDate()),y=w.getTime();if(g.query.testDate){g.query.testDate;x=g.query.testDate,y=m(x.substring(0,4),x.substring(4,6),x.substring(6,8),x.substring(8,10),x.substring(10,12),x.substring(12,14))}var z=function(){i(function(){b.element(document.querySelector("#sms_phoneNo")).focus()})};e.shareSNS=function(a,b){if(("/product/m/product_view.do"==d.location.pathname||"/product/m/product_view_dev.html"==d.location.pathname)&&o(),e.loginInfo.isLogin){var g=f.baseUrl+"/event/regEvent.do?"+e.baseParam,i=f.baseUrl+"/event/saveClover.do?"+e.baseParam,j=e.share_evt_no;b!=c&&""!=b&&(j=b);h({method:"POST",url:g,data:{evt_no:j},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}}),h({method:"POST",url:i,data:{evt_no:j},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}if(e.appObj.isApp)return e.sendAppShare(a),!1;switch(a){case"sms":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.smsCdn,e.showSmsBox();break;case"kakaotalk":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.talkCdn,e.sendKakaoTalk();break;case"kakaostory":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.stotyCdn,e.sendKakaoStory();break;case"facebook":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.faceCdn,e.sendFacebook();break;case"twitter":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.twitCdn,e.sendTwitter();break;case"url_copy":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.urlCdn,e.urlCopyClick(e.cnShareUrl)}},e.urlCopyClick=function(a){e.sendTclick(e.tClickBase+"share_Clk_Pop_5"),e.urlCopyFlag=!e.urlCopyFlag},e.showSmsBox=function(){if(e.sendTclick(e.tClickBase+"share_Clk_Pop_6"),e.appObj.isTablet)e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl,b.element(document).on("focus","input, textarea",function(a){j[0].style.cssText=""});else if(e.appObj.isAndroid)if(e.appObj.isTablet)e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl;else{var c=encodeURIComponent(e.getDearPetShareTitle(e.subTitle).replace(/(&)/g,"%26")+e.prdComment.replace(/(&)/g,"%26")+" "+e.cnShareUrl.replace(/(&)/g,"%26"));a.open("sms:?body="+c)}else e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl,z()},e.sendAppShare=function(a){"sms"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_6"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.smsCdn),"kakaotalk"==a&&(e.appObj.isOldApp?e.kakaoType="":e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_1"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.talkCdn),"kakaostory"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_4"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.stotyCdn),"facebook"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_2"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.faceCdn),"twitter"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_3"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.twitCdn),"url_copy"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_5"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.urlCdn),"moreapp"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_8"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.appCdn),"mail"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_7"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.mailCdn),e.share_img&&""!=e.share_img?e.share_img=e.share_img:y<m(2017,4,24,0,0)?e.share_img="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg":e.share_img="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png";var b={url:e.cnShareUrl,title:e.kakaoType+e.getDearPetShareTitle(e.subTitle).replace(/#/gi,"")+e.prdComment.replace(/#/gi,""),imageUrl:e.share_img};e.appObj.isAndroid?d.lotteshare.callAndroid("lotteshare://"+a+"/query?"+JSON.stringify(b)):e.appObj.isIOS&&(d.location="lotteshare://"+a+"/query?"+JSON.stringify(b))},e.sendKakaoStory=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_4"),e.share_img&&""!=e.share_img?e.share_img=e.share_img:y<m(2017,4,24,0,0)?e.share_img="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg":e.share_img="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png",Kakao.Story.open({url:e.cnShareUrl,text:e.getDearPetShareTitle(e.subTitle)+e.prdComment+"\n",urlInfo:{images:[e.share_img]}})},e.sendKakaoTalk=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_1"),e.share_img&&""!=e.share_img?e.img_url=e.share_img:y<m(2017,4,24,0,0)?e.img_url="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg":e.img_url="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png",e.appShareUrl=e.cnShareUrl.replace("http","mlotte001"),Kakao.Link.sendTalkLink({label:e.getDearPetShareTitle(e.subTitle)+e.prdComment+"\n"+e.cnShareUrl,image:{src:e.img_url,width:"280",height:"280"},appButton:{text:"롯데닷컴",execParams:{iphone:{executeurl:e.appShareUrl},android:{executeurl:e.appShareUrl}}},installTalk:!0})},e.sendFacebook=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_2"),p()},e.sendTwitter=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_3"),q()}}}}]),d.directive("smsBox",["$window",function(a){return{templateUrl:"/lotte/resources_dev/sns/sms_box.html",controller:"smsBoxCtrl",link:function(a,c,d){a.focusInput=!0,a.sendShareSMS=function(){$.isNumeric(a.sms_phoneNo)&&a.sms_phoneNo.length<=11&&a.sms_phoneNo.length>=10?a.sendSMSData():alert("휴대폰 번호를 정상적으로 입력해주세요.")},a.appObj.isIOS&&b.element(document).on("focus","input, textarea",function(a){c[0].style.cssText=""})}}}]),d.directive("numericOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){var b=a?a.replace(/[^\d.-]/g,""):null;return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),d.directive("sharePop",["$window","$location","LotteCommon","$timeout",function(d,f,g,h){return{templateUrl:"/lotte/resources_dev/sns/share_pop.html",replace:!0,link:function(d,f,i){function j(){var b={};return a.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,d){b[c]=d}),b}function k(){var a=j(),b=["c","cdn","cn","schema","tclick","udid","v"],c="",d="";for(var e in a)b.indexOf(e)>=0||(c+=d+e+"="+a[e],d="&");return c}d.isBeforeShareBox=!1,d.sharePopVisible=!1,d.shareBoxVisible=!1,d.snsTitle="친구에게 공유하기",d.getDearPetShareTitle=function(a){try{d.shareCodeis&&(a="["+d.shareCodeis+" "+d.subTitle+"]\n",e="")}catch(b){}try{"DearpetGallary"==d.screenID||"Mombaby"==d.screenID||d.shareNoFixMessage||(a=e+a)}catch(b){a=e+a}try{a=a.replace("[[","["),a=a.replace("]]","]")}catch(b){console.log("shareTitle replace err")}return a},d.showSharePop=function(a,e){try{Kakao.cleanup(),1==d.appObj.isSktApp?Kakao.init("7a460fb5cdebe4589041db57d906ddda"):Kakao.init("574659987ca46095c123d71f72abac14")}catch(f){if(console.log("PC-MODE"),location.host.indexOf("localhost")<0)return}d.prdComment="",d.share_path=location.pathname,d.testParam=j();try{a.prdComment=a.prdComment.replace(/[<]br[\/][>]/gi,"\n")}catch(f){}var i=new Date,l=i.getFullYear().toString(),m=(i.getMonth()+1).toString(),n=i.getDate().toString();switch(d.nowDate=l+(m[1]?m:"0"+m[0])+(n[1]?n:"0"+n[0]),d.nowDate>=20170901&&d.nowDate<20171001?d.share_evt_no="323438":d.nowDate>=20170801&&d.nowDate<20170901?d.share_evt_no="319848":d.share_evt_no="302853","/mylotte/product/m/mylotte_crit_view.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.subTitle=" [상품평] ",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," "),b.isDefined(a.goodsNo)?d.goodsNo=a.goodsNo:d.goodsNo="",b.isDefined(a.shareImg)?d.share_img=a.shareImg:d.share_img=""):"/product/m/product_view.do"==d.share_path||"/product/m/sub/product_comment.do"==d.share_path||"/product/m/sub/product_comment_detail.do"==d.share_path?(d.share_path="/product/m/product_view.do",b.isDefined(a.prdComment)?"Y"==a.healthfood_yn?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=a.goodsNm,d.prdComment=""):(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=" [상품평] ",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ")):(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=a.goodsNm,d.prdComment="")):"/product/m/photoreview.do"==d.share_path?"Y"==a.healthfood_yn?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=a.mgoods_nm,d.prdComment=""):(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=" [상품평] ",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ")):"/mall/pet/mitou_gallery.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.bbsNo=a.bbsNo,d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ")):"/mall/baby/baby_main.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ")):"/product/m/product_list.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg):"/planshop/m/planshop_view.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg):"/product/m/product_view_gucci.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=d.$$childHead.BasicData.product.mgoods_nm):(d.snsTitle="친구에게 공유하기",d.prdComment="",d.share_img=""),d.param="","/product/m/product_view.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo),"/product/m/photoreview.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo,d.share_path="/product/m/product_view.do"),"/mylotte/product/m/mylotte_crit_view.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo),("/product/m/comment_rewrite.do"==d.share_path||"/product/m/comment_write.do"==d.share_path)&&(d.param="?goods_no="+d.testParam.goods_no),"/product/m/product_list.do"==d.share_path&&(b.isDefined(d.testParam.ss_yn)?d.testParam.ss_yn="&ss_yn="+d.testParam.ss_yn:d.testParam.ss_yn="",b.isDefined(d.testParam.shoppingholicYn)?d.testParam.shoppingholicYn="&shoppingholicYn="+d.testParam.shoppingholicYn:d.testParam.shoppingholicYn="",b.isDefined(d.testParam.planShopGubun)?d.testParam.planShopGubun="&planShopGubun="+d.testParam.planShopGubun:d.testParam.planShopGubun="",d.param="?curDispNo="+d.testParam.curDispNo+d.testParam.ss_yn+d.testParam.shoppingholicYn+d.testParam.planShopGubun),"/planshop/m/planshop_view.do"==d.share_path&&(d.param="?spdp_no="+d.testParam.spdp_no),"/event/m/eventSaunMain.do"==d.share_path&&(d.param="?evt_no="+d.testParam.evt_no),"/styleshop/styleshop.do"==d.share_path&&(d.param="?disp_no="+d.testParam.disp_no),"/styleshop/styleshopmen.do"==d.share_path&&(d.param="?keyword="+d.testParam.keyword),"/mall/pet/dearpet_gallery.do"==d.share_path&&(d.param="?curDispNo="+d.testParam.curDispNo+"&beforeNo="+d.testParam.beforeNo+"&cateDepth="+d.testParam.cateDepth),"/mall/baby/baby_main.do"==d.share_path&&(d.param="?dispNo="+d.testParam.dispNo+"&dcate="+d.testParam.dcate+"&mcate="+d.testParam.mcate),"/event/m/kids/experience_view.do"==d.share_path&&(d.param="?evt_no="+d.testParam.evt_no),"/product/m/product_view_gucci.do"==d.share_path&&(d.param="?goods_no="+d.testParam.goods_no),"/category/m/brand_prod_list.do"==d.share_path&&(d.param="?upBrdNo="+(d.testParam.upBrdNo||"")),"/brand/bestbrandMain.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),"/brand/bestbrandSub.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),d.share_path){case g.styleRecomUrl:case g.specialMallUrl:case g.specialSubUrl:a!=c&&a.shareImg!=c&&(d.share_img=a.shareImg),d.param="?"+k()}(d.param+"").length>0&&(d.param+="&"),-1==(d.param+"").indexOf("?")&&(d.param="?"+d.param),1==d.appObj.isSktApp?d.noCdnUrl=location.protocol+"//"+location.hostname+d.share_path+d.param+"cn=171127":"/mylotte/product/m/mylotte_crit_view.do"==d.share_path||"/product/m/comment_rewrite.do"==d.share_path||"/product/m/comment_write.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/product/m/product_view.do"+d.param+"&cn=123624":"/mall/pet/dearpet_gallery.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/mall/pet/dearpet_gallery.do"+d.param:"/category/m/brand_prod_list.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/category/m/brand_prod_list.do"+d.param+"curDispNoSctCd="+(d.testParam.curDispNoSctCd||"")+"&cn=123624":"/brand/bestbrandMain.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/brand/bestbrandMain.do"+d.param+"curDispNo="+(d.testParam.curDispNo||"")+"&cn=123624":"/brand/bestbrandSub.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/brand/bestbrandSub.do"+d.param+"curDispNo="+(d.testParam.curDispNo||"")+"&cn=123624":d.noCdnUrl=location.protocol+"//"+location.hostname+d.share_path+d.param+"cn=123624",1==d.appObj.isSktApp?(d.talkCdn="3093671",d.twitCdn="3093668",d.stotyCdn="3093670",d.smsCdn="3093672",d.mailCdn="3158697",d.faceCdn="3093669",d.urlCdn="3158696",d.appCdn="3158696"):(d.talkCdn="2929723",d.twitCdn="2929720",d.stotyCdn="2929722",d.smsCdn="2929725",d.mailCdn="2929724",d.faceCdn="2929721",d.urlCdn="2929719",d.appCdn="2929719"),console.log("opt",e),b.isDefined(e)||(d.talkFlag=!0,d.twitFlag=!0,d.stotyFlag=!0,d.smsFlag=!0,d.mailFlag=!0,d.faceFlag=!0,d.appObj.isAndroid?(d.urlFlag=!0,d.urlCopyFlag=!1):d.appObj.isIOS?d.appObj.isOldApp?(d.urlFlag=!1,d.urlCopyFlag=!1):(d.urlFlag=!0,d.urlCopyFlag=!1):(d.urlFlag=!1,d.urlCopyFlag=!1),d.appObj.isApp&&(d.appObj.isAndroid?d.appFlag=!0:d.appFlag=!1)),"crit"==e&&(d.talkFlag=!0,d.twitFlag=!1,d.stotyFlag=!0,d.smsFlag=!0,d.mailFlag=!0,d.faceFlag=!0,d.urlFlag=!1,d.urlCopyFlag=!1,d.appFlag=!1),d.sharePopVisible=!0,d.shareBoxVisible=!0,d.sharePopTl="이거어때?",a.tclick?d.sendTclick(a.tclick):"/mall/pet/dearpet_gallery.do"==d.share_path?d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Shr"+d.testParam.curDispNo):"/brand/bestBrandMain.do"==d.share_path||"/brand/bestBrandSub.do"==d.share_path?d.sendTclick("m_DC_"+d.screenID+"_"+d.mallID+"_share"):d.sendTclick("m_RDC_ProdDetail_Clk_SNS"),d.dimmedOpen({target:"pop_sns",callback:this.hideSharePop}),d.LotteDimm.dimmedOpacity="0.6",h(function(){b.element("#lotteDimm").css("z-index","110")})},d.hideSharePop=function(){d.isBeforeShareBox?(d.shareBoxVisible=!0,d.smsBoxVisible=!1,d.sharePopTl="이거어때?",d.isBeforeShareBox=!1,d.dimmedClose({target:"pop_sns"})):(d.contVisible=!0,d.sharePopVisible=!1,d.shareBoxVisible=!1,d.smsBoxVisible=!1,d.sharePopTl="",d.smsTxt="",d.sms_phoneNo="",d.dimmedClose({target:"pop_sns"}))}}}}])}(window,window.angular);var transformJsonToParam=function(a){var b=[];for(var c in a)if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c][d]));else b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};!function(a,b,c){"use strict";var d=b.module("product-sub-header",[]);d.directive("productSubHeader",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,b,c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/product/m/sub/product_sub_header.html",replace:!0,link:function(a,b,c){a.gotoPrepage=function(){a.jsonLoading=!0,a.sendTclick("m_RDC_header_new_pre"),a.appObj.isNativeHeader?appSendBack():history.go(-1)}}}}]),"undefined"!=typeof module&&module.exports&&(module.exports=d.name)}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","product-sub-header","lotteSns","ngPinchZoom","lotteSlider"]);d.controller("ProductCommentDetailCtrl",["$http","$scope","$timeout","$compile","LotteCommon","commInitData",function(a,c,d,e,f,g){function h(a){var b=a,c=0;for(b.photoItems=[],c;c<b.critList.items.length;c++)b.critList.items[c].photoList&&b.critList.items[c].photoList.items.length>0&&b.photoItems.push({items:b.critList.items[c].photoList.items,type:b.critList.items[c].critTpCd,gdasNo:b.critList.items[c].gdasNo,videoUrl:b.critList.items[c].videoUrl});return b}function i(a){a="undefined"!=typeof a?a:500;var d=b.element("#thumbList"),e=d.find(">li").eq(c.pageUI.curIdx),f=d.parent().width(),g=d.width(),h=e.width(),i=e.offset().left-d.offset().left,j=f/2-h/2-i;g>f&&(j>0?j=0:-(g-f)>j&&(j=-(g-f)),b.element("#thumbList").css({transform:"translateX("+j+"px)",backfaceVisibility:"hidden",transition:"transform "+a+"ms"}))}c.showWrap=!0,c.contVisible=!0,c.productSubTitle="상품평 상세보기",c.screenID="product_comment_detail",c.jsonLoading=!1,c.pageUI={gdasNo:null,baseParam:c.baseParam,curIdx:0,imgIdx:0,loadData:null,reqParam:{}},c.pageUI.reqParam.goods_no=g.query.goods_no?g.query.goods_no:"",c.pageUI.reqParam.usm_goods_no=g.query.usm_goods_no?g.query.usm_goods_no:"",c.pageUI.reqParam.photoview="Y",c.pageUI.reqParam.tot_cnt=g.query.tot_cnt?g.query.tot_cnt:"1",c.pageUI.gdasNo=g.query.gdas_no?g.query.gdas_no:null,c.pageUI.imgIdx=g.query.id?g.query.id:null,c.loadData=function(){c.jsonLoading=!0,a.get(f.productSubCommentAllData,{params:c.pageUI.reqParam}).success(function(a){a.data&&(console.log("상품평 상세보기 데이터 로드"),c.pageUI.loadData=h(a.data),c.pageUI.gdasNo&&c.pageUI.loadData.photoItems.length>0&&(c.pageUI.curIdx=c.pageUI.loadData.photoItems.findIndex(function(a,b,d){return c.pageUI.gdasNo==a.gdasNo}),c.pageUI.curIdx<0&&(c.pageUI.curIdx=0)),d(function(){(c.pageUI.imgIdx<0||c.pageUI.imgIdx>c.pageUI.loadData.photoItems[c.pageUI.curIdx].items.length-1)&&(c.pageUI.imgIdx=0),i(0)},500)),setTimeout(function(){autoVideoPlay("autoVideoCommentView","#autoVideoCommentView")},1500)}).error(function(){console.log("Data Error : 상품평 상세보기 데이터 로드 실패")})["finally"](function(){c.jsonLoading=!1})},c.loadData(),c.prdCommentDetailSwipe=function(a){var b=-1,d=-1;"prev"==a?(c.pageUI.curIdx>0||c.pageUI.imgIdx>0)&&(c.pageUI.imgIdx>0?d=c.pageUI.imgIdx-1:c.pageUI.curIdx>0&&(b=c.pageUI.curIdx-1,d=c.pageUI.loadData.photoItems[c.pageUI.curIdx].items.length-1)):(a="next")&&(c.pageUI.curIdx<c.pageUI.loadData.photoItems.length-1||c.pageUI.imgIdx<c.pageUI.loadData.photoItems[c.pageUI.curIdx].items.length-1)&&(c.pageUI.imgIdx<c.pageUI.loadData.photoItems[c.pageUI.curIdx].items.length-1?d=c.pageUI.imgIdx+1:c.pageUI.curIdx<c.pageUI.loadData.photoItems.length-1&&(b=c.pageUI.curIdx+1,d=0)),console.log(b),c.setCurIdx(b,d)},c.setCurIdx=function(a,d){"undefined"!=typeof a&&a>-1&&a<c.pageUI.loadData.photoItems.length&&(c.pageUI.curIdx=a),"undefined"!=typeof d&&d>-1&&d<c.pageUI.loadData.photoItems[c.pageUI.curIdx].items.length&&(c.pageUI.imgIdx=d),b.element("#pinchArea >img").trigger("resetPinch"),i()},c.recommClick=function(b){if(c.loginInfo.isLogin)b.regRecommUrl&&(b.myRecomm=!0,a.get(f.isTestFlag?f.regRecomUrl:b.regRecommUrl).success(function(a){if(a.data){if(alert(a.data.resultMsg),a.data.resultCode)switch(a.data.resultCode){case"01":case"02":b.recommCnt=b.recommCnt+1;case"03":b.recommYn=!0;case"04":break;case"05":}}else alert("다시 한번 시도해주시기 바랍니다.")}));else{alert("로그인을 해주세요.");var d="&targetUrl="+encodeURIComponent($window.location.href,"UTF-8");$window.location.href=f.loginUrl+"?"+c.baseParam+d}}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/product/m/sub/product_comment_detail_container.html",replace:!0,link:function(a,b,c){a.isShowBtnTalk=!1}}}),d.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),d.filter("starScorePolicy",function(){return function(a,b){if(!a)return 0;var d=5,e=Math.ceil(2*a)/2;return b!=c&&(e=e/d*b),e}})}(window,window.angular);