function calcBytes(a){var b=0;for(i=0;i<a.length;i++){var c=a.charAt(i);escape(c).length>4?b+=2:"\n"==c?"\r"!=a.charAt(i-1)&&(b+=1):b+="<"==c||">"==c?4:1}return b}function maxLengthCheck(a,b,c,d){var e,f,g=c.value.length,h=parseInt(a),i="",j=0;if(0==g)null!=document.getElementById("spn_input_char")&&(document.getElementById("spn_input_char").innerText=h);else for(k=0;k<g;k++){if(e=c.value.charAt(k),"\n"==e&&j++,escape(e).length>4?h-=2:h--,0>h){alert("총 한글 "+a/2+"자 영문 "+a+"자 까지 쓰실 수 있습니다."),c.value=i;break}if(null!=b&j>parseInt(b)){alert("라인수 "+b+"라인을 넘을 수 없습니다."),j=0,f=i.length-1,c.value=i.substring(0,f);break}null!=document.getElementById("spn_input_char")&&(document.getElementById("spn_input_char").innerText=h),i+=e}}var isSwipeActive=!1,isSwipeLock=!1,isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1;!function(a,b,c){"use strict";var d=[],e=b.module("lotteNgSwipe",[]);e.controller("lotteNgSwipeCtrl",["$scope",function(a){}]),e.factory("lotteNgSwipe",["$interval","$timeout","$window",function(c,d,e){function f(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function g(c,d,e){if(e.SLIDE_SWIPE){var f=d[0].offsetWidth-e.LEFT_MARGIN-e.RIGHT_MARGIN;0==f&&(f=a.innerWidth);var g=f/e.DISP_COUNT,h=0;if(s=d[0].offsetWidth-g-e.LEFT_MARGIN,!(d.find("ul, ol").eq(0).find(">li").length>=1||d.find(">li").length>=1)||e.LOADING_ELEMENT||e.LEFT_ELEMENT||e.RIGHT_ELEMENT)e.LOADING_ELEMENT||b.element(d).eq(0).css(q());else{if(-1!=d.context.className.indexOf("recommond_swipe"))var i=d.find(">li");else var i=d.find("ul, ol").eq(0).find(">li").length>1?d.find("ul, ol").eq(0).find(">li"):d.find(">li");var j=c,k=0,l=null;for(k;k<i.length;j++,k++)l=i.eq(j),h=j>=k||0>j?0>j?g*d.find(">li").length+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*k+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*-(c-j)+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0),-1!=d.context.className.indexOf("latest_swipe")&&a.innerWidth>=640?(f=a.innerWidth,l.css({width:f/2,backfaceVisibility:"hidden",position:"absolute",left:h})):l.css({width:f/e.DISP_COUNT,backfaceVisibility:"hidden",position:"absolute",left:h}),j+1>=d.find(">li").length&&(j=-1);t=i.length,b.element(d).eq(0).css(p(0)),b.element(d).find(">li").css("top",0).eq(0).css("position","relative")}}}function h(a){for(var b={totalwidth:0,width:[],paddingleft:[],marginleft:[],paddingright:[],marginright:[]},c=0;c<a.find(">li").length;c++){var d=a.find(">li:eq("+c+")");b.width[c]=parseInt(d.width()),b.width[c]+=b.marginleft[c]=parseInt(d.css("margin-left")),b.width[c]+=b.marginright[c]=parseInt(d.css("margin-right")),b.width[c]+=b.paddingleft[c]=parseInt(d.css("padding-left")),b.width[c]+=b.paddingright[c]=parseInt(d.css("padding-right")),b.totalwidth+=b.width[c]}return b}function i(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}function j(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(0,c.SWIPE_SPEED)),(c.LOADING_ELEMENT||c.LEFT_ELEMENT||c.LEFT_ELEMENT)&&b.element(c.LOADING_ELEMENT).css(p(0,c.SWIPE_SPEED))}function k(c,d,e,f){var g=h(c);if(a.innerWidth-d.LEFT_MARGIN-d.RIGHT_MARGIN>g.totalwidth)return!1;for(var j=a.innerWidth/2,k=g.width[e]/2,m=0,n=0;n<g.width.length&&n!=e;n++)m+=g.width[n];var o=i(c),q=-1*(m-j+k);f?(q>0?q=0:q<-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)&&(q=-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)),b.element(c).eq(0).css(p(q))):Math.abs(m)>j&&g.totalwidth-a.innerWidth+d.RIGHT_MARGIN>Math.abs(q)?l(c[0],d,o,q):Math.abs(m)<=j?l(c[0],d,o,0):l(c[0],d,o,-1*(g.totalwidth-a.innerWidth)-d.RIGHT_MARGIN)}function l(a,c,d,e){return d==e?!0:(b.element(a).on(u,function(a){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(e,c.SWIPE_SPEED)),void(c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(e,c.SWIPE_SPEED))))}function m(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED))}function n(a,c,d,e,f){return 0>d?f=f+c.DISP_COUNT>c.MAX_SLIDE?c.MAX_SLIDE:f+c.DISP_COUNT:f-=c.DISP_COUNT,c.EDGE_LAST&&(f==t-1||f==t-2&&d>0)&&(e-=s),b.element(a).on(u,function(d){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),g(f,a,c),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED)),f}function o(b,c,d){var e=i(b);return e>0?(m(b[0],c,e,0),e=0):Math.abs(e)+a.innerWidth>Math.abs(d.totalwidth)+c.RIGHT_MARGIN&&(m(b[0],c,e,d.totalwidth-a.innerWidth+c.RIGHT_MARGIN),e=-1*(d.totalwidth-a.innerWidth)),e}function p(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function q(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}}function r(a){return a||(a=""),{"-webkit-transition":a,"-moz-transition":a,"-o-transition":a,transition:a}}var s=0,t=0,u="transitionend.ngswipe webkitTransitionEnd.ngswipe oTransitionEnd.ngswipe MSTransitionEnd.ngswipe";return{unbind:function(a){a.off("touchstart.ngswipe mousedown.ngswipe touchcancel.ngswipe touchmove.ngswipe mousemove.ngswipe touchend.ngswipe mouseup.ngswipe")},bind:function(d,g,k){var l,r,u,v,w=d[0],x=!1,y=g.FIRST_INDEX,z=b.element(d).scope(),A=!1,B=!1,C=[],D=0,E=0,F=0,G=!0,H=(g.DISP_COUNT,navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1),I=!0,J=30,K=b.element(e).scrollTop();g.SLIDE_MENU_SWIPE&&b.element(w).css(p(0)),d.on("touchstart.ngswipe mousedown.ngswipe",function(c){if(c.stopPropagation(),H){var j=b.element(e).scrollTop();j+J>K&&K>j-J?I=!0:(I=!1,K=j)}A=!1,B=!1,g.SLIDE_MENU_SWIPE&&(C=h(d),G=a.innerWidth-g.LEFT_MARGIN-g.RIGHT_MARGIN>C.totalwidth?!1:!0),isSwipeLock||G&&(a.innerWidth>=900&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_640:g.RESPONSIVE_SWIPE&&(g.DISP_COUNT=g.RESPONSIVE_SWIPE_320),g.MAX_SLIDE=d.find(">li").length-1,(!(g.MAX_SLIDE<1)||g.LOADING_ELEMENT||g.LEFT_ELEMENT||g.RIGHT_ELEMENT)&&(u=f(c),u.x+=g.EDGE_LAST&&y==t-1?s:0,x=!0,l=0,r=0,isSwipeActive=!0,v=u,y=z.swipeIdx,E=(new Date).getTime(),g.SLIDE_MENU_SWIPE&&(C=h(d),D=i(d)),k.start&&k.start(u,c),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none")))}),d.on("touchcancel.ngswipe",function(a){x=!1,j(w,g,u,v)}),d.on("touchmove.ngswipe mousemove.ngswipe",function(a){if(x&&G&&u){var c=f(a);c.x+=g.EDGE_LAST&&y==t-1?s:0,l+=Math.abs(c.x-v.x),r+=Math.abs(c.y-v.y),v=c;var d,e;d=Math.abs(c.x-u.x),e=Math.abs(c.y-u.y),A||(B=d>e,A=!0);var h=v.x-u.x;if(h>0?a.moveto="right":a.moveto="left",B&&(I||!H)){a.preventDefault(),a.stopPropagation();g.SLIDE_MENU_SWIPE?b.element(w).css(p(c.x-u.x+D)):b.element(w).css(p(c.x-u.x)),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(c.x-u.x))),"left"==a.moveto?(g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(p(0))):(g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(p(0))),k.move&&k.move(c,a)}}}),d.on("touchend.ngswipe mouseup.ngswipe",function(h){if(h.stopPropagation(),A=!1,B&&(I||!H)){if(!x||!G)return;x=!1,isSwipeActive=!1;var i=d[0].offsetWidth,l=Math.abs(v.x-u.x),r=v.x-u.x;if(F=(new Date).getTime(),r>0?h.moveto="right":h.moveto="left",h.max=g.MAX_SLIDE,g.SLIDE_MENU_SWIPE){var z=v.x-u.x+D,J=-80,L="left"==h.moveto?z+J:z-J,M="left"==h.moveto?-5:5;if(Math.abs(v.x-u.x)>5&&400>=F-E)var N=c(function(){z+=M,b.element(d).eq(0).css(p(z)),(L>=z&&"left"==h.moveto||z>=L&&"right"==h.moveto||z>0||z<=-C.totalwidth+a.innerWidth)&&(D=o(d,g,C),c.cancel(N))},10);else D=o(d,g,C)}else if(i*g.MAX_RATIO<=l){if(g.SLIDE_SWIPE){if(y>=g.MAX_SLIDE&&0>r||0>y&&r>0||0==y&&r>0||g.MAX_SLIDE+1<=g.DISP_COUNT||y+g.DISP_COUNT>g.MAX_SLIDE&&"left"==h.moveto)return void j(w,g,u,v+(g.EDGE_LAST&&y==t-1?s:0));if(g.SLIDE_SWIPE)var i=i-g.LEFT_MARGIN-g.RIGHT_MARGIN;y=n(d,g,r,i,y),h.idx=y}else m(w,g,r,i);var O=f(h);O.x+=g.EDGE_LAST&&y==t-1?s:0;k.end&&k.end(O,h)}else j(w,g,u,v),b.element(d).eq(0).css(q())}H&&(K=b.element(e).scrollTop(),I=!0),u=null})},moveSwipeX:n,positionReCalc:g,resetSwipe:j,moveMenuSwipe:k,getListInfo:h}}]),e.directive("lotteNgListSwipe",["$window","$parse","$timeout","lotteNgSwipe",function(e,f,g,h){return{link:function(i,j,k){function l(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function m(){var c=j[0];if(a.innerWidth>=900&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_640:p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),0!=i.swipeIdx&&p.DISP_COUNT>1){var d=i.swipeIdx%p.DISP_COUNT;0!=d&&(i.swipeIdx-=d)}if(i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),p.SLIDE_MENU_SWIPE){var e=h.getListInfo(j);e.width.length>1&&a.innerWidth-p.LEFT_MARGIN-p.RIGHT_MARGIN>e.totalwidth&&b.element(c).css(l(0))}p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)}function n(a,b){if(!(LeftSwipeStartExec&&"left"==a.moveto||RightSwipeStartExec&&"right"==a.moveto)){"left"==a.moveto?LeftSwipeStartExec=!0:RightSwipeStartExec=!0;var c=null;i.$apply(function(){return c=q(i.$parent,{$event:{idx:a.idx,max:b.MAX_SLIDE,moveto:a.moveto}})})}}function o(a,c){if(isSwipeActive)return g(function(){o(a,c)},100),!1;var d=null;i.$apply(function(){return d=r(i.$parent,{$event:{idx:a.idx,max:c.MAX_SLIDE,moveto:a.moveto}}),"translateX_Reset"==d&&g(function(){b.element(j).eq(0).css(l(0))},500),d})}var p={MAX_RATIO:k.swipeMaxRatio?k.swipeMaxRatio:.3,MIN_DISTANCE:k.swipeMinDistance?k.swipeMinDistance:25,SWIPE_LOOP:k.swipeLoop?k.swipeLoop:!1,LEFT_ELEMENT:k.swipeLeftEl?k.swipeLeftEl:null,RIGHT_ELEMENT:k.swipeRightEl?k.swipeRightEl:null,LOADING_ELEMENT:k.swipeLoadingEl?k.swipeLoadingEl:null,LOADING_ELEMENT_ZINDEX:k.swipeLoadingElZindex?k.swipeLoadingElZindex:50,SLIDE_SWIPE:k.swipeSlideItem?k.swipeSlideItem:!1,SLIDE_MENU_SWIPE:k.swipeSlideMenu?k.swipeSlideMenu:!1,RESPONSIVE_SWIPE:k.swipeResponsive?k.swipeResponsive:!1,RESPONSIVE_SWIPE_320:parseInt(k.swipeResponsive320)?parseInt(k.swipeResponsive320):1,RESPONSIVE_SWIPE_640:parseInt(k.swipeResponsive640)?parseInt(k.swipeResponsive640):2,RESPONSIVE_SWIPE_900:parseInt(k.swipeResponsive900)?parseInt(k.swipeResponsive900):2,AUTO_HEIGHT:k.swipeAutoheight?k.swipeAutoheight:!1,DISP_COUNT:k.swipeDispCount?parseInt(k.swipeDispCount):1,FIRST_INDEX:k.swipeFirstIndex?parseInt(k.swipeFirstIndex):0,LEFT_MARGIN:k.swipeLeftMargin?parseInt(k.swipeLeftMargin):0,RIGHT_MARGIN:k.swipeRightMargin?parseInt(k.swipeRightMargin):0,START_EXEC:k.swipeStartExec?k.swipeStartExec:null,EXEC:k.swipeEndExec?k.swipeEndExec:null,LIST_SCOPE:k.swipeListModel?k.swipeListModel:null,SWIPE_ID:k.swipeId?k.swipeId:"",MAX_SLIDE:0,SWIPE_SPEED:k.swipSpeed?k.swipSpeed:150,IGNORE_DESTORY:k.ignoreDestory?k.ignoreDestory:!1,EDGE_LAST:k.swipeEdgeLast?!0:!1};i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),i.swipeBullet=[];var q=null,r=null;if(null!=p.START_EXEC&&(q=f(p.START_EXEC)),null!=p.EXEC&&(r=f(p.EXEC)),p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.SLIDE_MENU_SWIPE&&(i.moveMenuSwipe=function(a){i.moveMenuSwipeFnc(a,!1)},i.moveMenuSwipeFnc=function(a,b){h.moveMenuSwipe(j,p,a,b)}),p.SLIDE_MENU_SWIPE||p.SLIDE_SWIPE||(i.translateX_Reset=function(){console.log("스와이프 좌표 리셋"),b.element(j).eq(0).css(l(0)),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css(l(0))}),i.setSlide=function(a){0>a?a=p.MAX_SLIDE:a>p.MAX_SLIDE&&(a=0),i.swipeIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.goSlide=function(a){h.positionReCalc(a,j,p),i.swipeIdx=i.swipeBulletIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.nextSlide=function(){i.swipeIdx!=p.MAX_SLIDE&&(h.moveSwipeX(j,p,-1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx+=p.DISP_COUNT,i.swipeBulletIdx++,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.beforeSlide=function(){0!=i.swipeIdx&&(h.moveSwipeX(j,p,1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx-=p.DISP_COUNT,i.swipeBulletIdx--,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.ngswipeInit=function(){if(p.SLIDE_SWIPE){i.swipeBullet=[],p.MAX_SLIDE=j.find(">li").length;for(var a=0;a<p.MAX_SLIDE/p.DISP_COUNT;a++)i.swipeBullet.push(a)}p.MAX_SLIDE<i.swipeIdx?(i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),h.positionReCalc(i.swipeIdx,j,p),g(function(){i.$apply()})):i.swipeIdx||(i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),i.swipeIdx=p.FIRST_INDEX,g(function(){i.$apply()}))},i.resetSwipePos=function(){h.positionReCalc(i.swipeIdx,j,p)},null!=p.LIST_SCOPE){var s=null;i.$watch(p.LIST_SCOPE,function(a,b){if(a!=c&&a.length>=1){if(s!=a[0]&&(i.swipeIdx=0,i.swipeBulletIdx=0,s=a[0]),"recommondSwipe_0"==k.swipeId||"lastestSwipe_0"==k.swipeId)var d=2e3;else var d=100;g(function(){i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)},d)}},!0)}m(),-1==d.indexOf(p.SWIPE_ID)&&d.push(p.SWIPE_ID);var t=b.element(e);t.on("orientationchange.ngswipe resize.ngswipe",m),i.$on("$destroy",function(){h.unbind(j)}),h.bind(j,p,{start:function(a,b){},move:function(a,b){return null!=p.START_EXEC?(isLoadingData=!0,n(b,p)):void 0},cancel:function(){isLoadingData=!1},end:function(a,b){return isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1,i.swipeIdx=b.idx?b.idx:0,i.swipeBulletIdx=parseInt(b.idx/p.DISP_COUNT),i.$apply(),null!=p.EXEC?o(b,p):void 0}})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteNgSwipe","lotteSns","ngPinchZoom","dearpetSubCategory"]);d.controller("DearpetGalleryCtrl",["$http","$scope","$window","$location","LotteCommon","commInitData","LotteStorage","$timeout",function(c,d,e,f,g,h,i,j){function k(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function l(){if(d.loginInfo.isLogin)try{d.myLoginID||(d.myLoginID=getLoginInfo().loginId)}catch(a){j(function(){d.myLoginID=getLoginInfo().loginId},500)}}d.isMain=!1,d.showWrap=!0,d.contVisible=!0,d.subTitle="",d.shareCodeis="MIMI TOUTOU",d.screenID="DearpetGallary",d.pageLoading=!0,d.dispNo="",d.productListLoading=!0,d.productMoreScroll=!0,d.sheadHide=!1,d.shareRendingURL=location.href,d.myListState="mySwagList"==h.query.type?!0:!1,d.likeitPost="myLikeList"==h.query.type?!0:!1,d.myListState||d.likeitPost||(h.query.chkDepth=3),5564054===parseInt(h.query.beforeNo)&&(h.query.beforeNo=5566305),(d.screenDataReset=function(){d.screenData={page:0,disp_name:"",dispNo:"",curDispNo:"",cateNodeName:[],top_banner:[],showAllCategory:!1,selectCate1:h.query.beforeNo,selectCate2:0,selectCate3:0,selectedCategory:0,cate_list:[],gallery_list:[],dispGallery:[],pageSize:10,pageEnd:!1,galleryTotal:0,user_swag_count:0}})();var m=h.query.scrollback;d.screenData.curDispNo=k("curDispNo"),"5566436"==d.screenData.curDispNo?d.screenData.disp_name="미뚜그램":"5566437"==d.screenData.curDispNo?d.screenData.disp_name="포토후기":d.screenData.disp_name="뽐내기",d.likeitPost&&(d.screenData.disp_name="좋아한 게시물 ♡"),d.subTitle=d.screenData.disp_name,d.loadScreenData=function(a){if(console.log("스크린 데이터 로드..."),!d.screenData.pageEnd){d.screenData.page++,d.screenData.page>1?d.productListLoading=!0:d.screenData.cate_list.length||(d.pageLoading=!0);var b=g.petMallgalleryData+"?dispNo="+d.screenData.curDispNo+"&page="+d.screenData.page+"&pageSize="+d.screenData.pageSize;if(d.likeitPost&&(b=g.petMallgalleryLikeData+"?page="+d.screenData.page+"&pageSize="+d.screenData.pageSize+"&type="+h.query.type),a)for(var e in a)b+="&"+e+"="+a[e];d.myListState&&(b+="&type="+h.query.type),c.get(b).success(function(a){var b=[];if(b=a.dearpet_gallery,l(),!d.myListState)try{d.screenData.user_swag_count=b.swag_count}catch(c){d.screenData.user_swag_count=0}if(null!=b.gallery_list){if(d.screenData.galleryTotal=b.max_count,d.screenData.page>1){var e=d.screenData.gallery_list.concat(b.gallery_list.items);d.screenData.gallery_list=e}else d.screenData.gallery_list=b.gallery_list.items;"5566438"==d.screenData.curDispNo&&(d.commentListIndex=-1),j(function(){d.screenData.gallery_list||(d.screenData.gallery_list=[]);for(var a=0;a<d.screenData.gallery_list.length;a++)d.screenData.gallery_list[a].big=!1,d.screenData.gallery_list[a].open=!1,$("#swaglist_cont"+a).height()>35&&(d.screenData.gallery_list[a].big=!0)},100),d.screenData.galleryTotal<d.screenData.page*d.screenData.pageSize&&(d.screenData.pageEnd=!0,d.productMoreScroll=!1)}else alert("등록된 게시물이 없습니다."),d.screenData.gallery_list=[],d.screenData.pageEnd=!0,d.productMoreScroll=!1,d.productListLoading=!1,d.pageLoading=!1;d.screenData.cate_list.length||(d.screenData.cate_list=b.cate_list.items,b.cate_list.items&&d.sendCategoryData(b.cate_list.items)),d.productListLoading=!1,d.pageLoading=!1})}},d.getSubCateDataFunc,d.$on("getSubCateData",function(a,b){!d.getSubCateDataFun&&b&&(d.getSubCateDataFunc=b);try{d.screenData.cate_list.length&&d.sendCategoryData(d.screenData.cate_list)}catch(c){}}),d.sendCategoryData=function(a){d.getSubCateDataFunc&&("5566305"==h.query.beforeNo&&d.likeitPost&&b.forEach(a,function(a,b){h.query.beforeNo==a.disp_no&&(a.extra=[{disp_nm:"좋아한 게시물",hideArrow:!0}])}),d.getSubCateDataFunc(a))},d.contMoreClick=function(a){try{a.open=!a.open,a.more=!a.more}catch(b){}},d.commentViewClick=function(a,b){d.commentListIndex==b||(d.likeitPost?d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn15"):d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn07"),d.commentListIndex=b,c.get(g.petCommentData+"?bbc_no="+a.bbc_no).success(function(a){if(d.sendTclick(""),d.commentViewFlag=!d.commentViewFlag,d.commentListData=[],null!=a.comment_list.comment){for(var b=0;b<a.comment_list.comment.items.length;b++)a.comment_list.comment.items[b].cont=a.comment_list.comment.items[b].cont.split("&#34;").join('"'),a.comment_list.comment.items[b].cont=a.comment_list.comment.items[b].cont.split("&lt;").join("<"),a.comment_list.comment.items[b].cont=a.comment_list.comment.items[b].cont.split("&gt;").join(">");d.commentListData=a.comment_list.comment.items}}))};var n=i.getSessionStorage(d.screenID+"Loc"),o=i.getSessionStorage(d.screenID+"Data"),p=i.getSessionStorage(d.screenID+"ScrollY");if(n==a.location.href&&d.locationHistoryBack){var q=JSON.parse(o);d.pageLoading=!1,d.pageOptions=q.pageOptions,d.screenData=q.screenData,j(function(){b.element(e).scrollTop(p)},800),l()}else d.loadScreenData(),"y"==m&&j(function(){b.element(e).scrollTop(p)},800);b.element(e).on("unload",function(a){var c={};c.pageOptions=d.pageOptions,c.screenData=d.screenData,!h.query.localtest&&d.leavePageStroage&&(i.setSessionStorage(d.screenID+"Loc",f.absUrl()),i.setSessionStorage(d.screenID+"Data",c,"json"),i.setSessionStorage(d.screenID+"ScrollY",b.element(e).scrollTop()))})}]),d.filter("hidestr",function(){return function(a){var b="";if(a!=c){b=a.substr(0,3);for(var d=3;d<a.length;d++)b+="*"}return b}}),d.directive("lotteContainer",["$window","LotteCommon","$timeout",function(a,c,d){return{templateUrl:"/lotte/resources_dev/mall/pet/dearpet_gallery_container.html",replace:!0,link:function(e,f,g){function h(){e.screenData.galleryTotal=0,e.screenData.page=0,e.screenData.pageEnd=!1,e.loadScreenData(e.myListState?{type:"mySwagList"}:null),e.myListState&&e.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn16")}e.mallMainClick=function(b){var d=c.petMallMainUrl+"?"+e.baseParam;b&&(d+="&tclick="+b),a.location.href=d},e.mallProductClick=function(b,d){var f=c.prdviewUrl+"?"+e.baseParam+"&goods_no="+b.goods_no+"&curDispNoSctCd=95";d&&(f+="&tclick="+d),a.location.href=f},e.idChange=function(a){for(var b=a.substr(0,3),c=3;c<a.length;c++)b+="*";return b};var i=b.element(a),j=b.element("body"),k=i.height(),l=j[0].scrollHeight,m=4;i.on("scroll",function(a){!e.productMoreScroll||e.productListLoading||e.pageLoading||(l=j[0].scrollHeight,m=i.width()>=640?2:4,l-k*m>k&&i.scrollTop()+k>=l-k*m&&e.loadScreenData())}),e.popOption={open:!1,cnt:0,data:[],zoomPopup:function(a,b,c){e.popOption.cnt=a,e.popOption.data=c?[e.screenData.gallery_list[b]]:e.screenData.gallery_list[b].img_list.items,e.popOption.popState()},next:function(){e.popOption.cnt<e.popOption.data.length-1&&e.popOption.cnt++},prev:function(){e.popOption.cnt>0&&e.popOption.cnt--},popState:function(){e.popOption.open=!e.popOption.open,e.popOption.open?b.element("body").addClass("no-scroll"):b.element("body").removeClass("no-scroll")}},e.myCheckBox=function(){return e.loginInfo.isLogin?e.myListState||e.screenData.user_swag_count?(e.myListState=!e.myListState,void h()):void alert("우리 아이 뽐내기 소식이 아직 없어요~\n어서 우리 아이를 뽐내보세요~"):(alert("로그인 후 이용하실 수 있습니다."),void e.loginProc())},e.likeShowSharePop=function(a){e.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Shrlike"),e.showSharePop(a)},e.petShare=function(){e.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Shr");var a="";e.showSharePop({shareImg:null,prdComment:a,bbsNo:null}),d(function(){getScope().noCdnUrl=location.href},300)}}}}]),d.directive("petMallCtg",["$window","LotteCommon",function(a,b){return{templateUrl:"/lotte/resources_dev/mall/pet/pet_mall_ctg_container.html",link:function(c,d,e){c.menuCategoryClick=function(a){c.menuCategory1Click(a)},c.menuCategory1Click=function(d,e){if(d.sub_cate_list||(d.sub_cate_list=[]),!d.sub_cate_list.length){var f=b.petMalleventUrl+"?"+c.baseParam+"&curDispNo="+d.disp_no+"&cateDepth="+d.cate_depth;return f+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no+"&beforeNo="+d.disp_no,void(a.location.href=f)}c.screenData.selectCate1==d.disp_no?d.subopen=!d.subopen:d.subopen=!0,c.screenData.selectCate1=d.disp_no,c.sendTclick("m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no)},c.menuCategory2Click=function(d,e){switch(c.menuCategory2Index=0,e||(e=""),d.dearpet_depth_cd.toString()){case"20":var f=b.petMallgalleryUrl+"?"+c.baseParam+"&curDispNo="+d.disp_no+"&beforeNo="+e.disp_no+"&cateDepth="+d.cate_depth;f+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no,a.location.href=f;break;case"21":var f=b.petMalleventUrl+"?"+c.baseParam+"&curDispNo="+d.disp_no+"&beforeNo="+e.disp_no+"&cateDepth="+d.cate_depth;f+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no,a.location.href=f;break;default:var f=b.petMallProdListUrl+"?"+c.baseParam+"&curDispNo="+d.disp_no+"&beforeNo="+e.disp_no+"&cateDepth="+d.cate_depth+"&title="+d.disp_nm;f+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no,a.location.href=f}}}}}]),d.directive("petMallPetgram",["$http","$window","LotteCommon","$timeout","commInitData",function(a,c,d,e,f){return{templateUrl:"/lotte/resources_dev/mall/pet/pet_mall_petgram.html",link:function(c,g,h){c.recomm_click=function(b){if(null==c.loginInfo||!c.loginInfo.isLogin){var e="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href=d.loginUrl+"?"+c.baseParam+"&"+e)}a.get("/json/mall/pet_recomm_save.json?bbcNo="+b.bbc_no).success(function(a){"reg_success"==a.result?(b.like_count+=1,$("#recomm_"+b.bbc_no).addClass("on")):"reg_duplicate"==a.result?alert("이미 추천하셨습니다."):"reg_mywrit"==a.result?alert("본인이 작성한 글에는 추천 하실 수 없습니다."):alert("다시 한번 시도해주시기 바랍니다."),c.likeitPost?c.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn14"):c.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn04")})},null!=f.query.bbc_no&&e(function(){for(var a=location.search.split("&"),c=null,d=0,e=a.length;e>d;d++)"bbc_no"==a[d].split("=")[0]&&(c=a[d].split("=")[1]);try{document.body.scrollTop=b.element("#bbc_"+c).offset().top}catch(f){}},300)}}}]),d.directive("petMallPhotoview",["$window","LotteCommon",function(a,b){return{templateUrl:"/lotte/resources_dev/mall/pet/pet_mall_photoview.html",link:function(a,b,c){}}}]),d.directive("petMallSwag",["$http","$window","LotteCommon","$timeout","commInitData",function(a,b,c,d,e){return{templateUrl:"/lotte/resources_dev/mall/pet/pet_mall_swag.html",link:function(d,e,f){d.swagWriteGo=function(a){if(null==d.loginInfo||!d.loginInfo.isLogin)return void d.loginProc();if(d.appObj.isApp)if(d.appObj.isAndroid&&!d.appObj.isSktApp&&d.appObj.verNumber>=276||d.appObj.isAndroid&&d.appObj.isSktApp&&d.appObj.verNumber>=212||d.appObj.isIOS&&!d.appObj.isIpad&&d.appObj.verNumber>=2690||d.appObj.isIOS&&d.appObj.isIpad&&d.appObj.verNumber>=235){console.log("테스트");var e=c.swagWriteUrl+"?"+d.baseParam+"&top=136";a&&(e+="&tclick="+a),b.location.href=e}else confirm("롯데닷컴 앱 업데이트 후 이용 가능합니다. 지금 업데이트 하시겠습니까?")&&(location.href=c.appDown+"?"+d.baseParam);else confirm("롯데닷컴 앱에서 이용 가능합니다. 지금 설치하시겠습니까?")&&(location.href=c.appDown+"?"+d.baseParam)},d.recomm_click=function(b){if(null==d.loginInfo||!d.loginInfo.isLogin){var e="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href=c.loginUrl+"?"+d.baseParam+"&"+e)}a.get("/json/mall/pet_recomm_save.json?bbcNo="+b.bbc_no).success(function(a){"reg_success"==a.result?(b.like_count+=1,$("#recomm_"+b.bbc_no).addClass("on")):"reg_duplicate"==a.result?alert("이미 추천하셨습니다."):"reg_mywrit"==a.result?alert("본인이 작성한 글에는 추천 하실 수 없습니다."):alert("다시 한번 시도해주시기 바랍니다."),d.likeitPost?d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn14"):d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn06")})},d.deleteSwag=function(b,e){var f=confirm("글을 삭제하시겠습니까?");return f?void a.get(c.petMallSwagDeleteData+"?bbcNo="+b.bbc_no).success(function(a){"0000"==a.comment_delete.response_code&&(alert("삭제되었습니다"),d.screenData.gallery_list.splice(e,1),d.modifyOpen=null)}):!1},d.modifyOpen,d.modifyClick=function(a,b){d.modifyOpen==b?(d.modifyOpen=null,$("#swaglist_"+a.bbc_no).removeClass("on")):(d.modifyOpen=b,$("#swaglist_"+a.bbc_no).addClass("on"))},d.hideModify=function(a,b){d.modifyOpen=null,$("#swaglist_"+a.bbc_no).removeClass("on")},d.getswagRewriteUrl=function(a,b){var e=d.baseParam+"&bbcNo="+a.bbc_no;return c.swagRewriteUrl+"?"+e}}}}]),d.directive("petMallLike",["$http","$window","LotteCommon","$timeout","commInitData",function(a,b,c,d,e){return{templateUrl:"/lotte/resources_dev/mall/pet/pet_mall_like.html",replace:!0,link:function(d,e,f){d.swagWriteGo=function(a){if(null==d.loginInfo||!d.loginInfo.isLogin){var e="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href=c.loginUrl+d.baseParam+"&"+e)}if(d.appObj.isApp)if(d.appObj.isAndroid&&!d.appObj.isSktApp&&d.appObj.verNumber>=276||d.appObj.isAndroid&&d.appObj.isSktApp&&d.appObj.verNumber>=212||d.appObj.isIOS&&!d.appObj.isIpad&&d.appObj.verNumber>=2690||d.appObj.isIOS&&d.appObj.isIpad&&d.appObj.verNumber>=235){console.log("테스트");var f=c.swagWriteUrl+"?"+d.baseParam+"&top=136";a&&(f+="&tclick="+a),b.location.href=f}else confirm("롯데닷컴 앱 업데이트 후 이용 가능합니다. 지금 업데이트 하시겠습니까?")&&(location.href=c.appDown+"?"+d.baseParam);else confirm("롯데닷컴 앱에서 이용 가능합니다. 지금 설치하시겠습니까?")&&(location.href=c.appDown+"?"+d.baseParam)},d.recomm_click=function(b){if(null==d.loginInfo||!d.loginInfo.isLogin){var e="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href=c.loginUrl+"?"+d.baseParam+"&"+e)}a.get("/json/mall/pet_recomm_save.json?bbcNo="+b.bbc_no).success(function(a){"reg_success"==a.result?(b.like_count+=1,$("#recomm_"+b.bbc_no).addClass("on")):"reg_duplicate"==a.result?alert("이미 추천하셨습니다."):"reg_mywrit"==a.result?alert("본인이 작성한 글에는 추천 하실 수 없습니다."):alert("다시 한번 시도해주시기 바랍니다."),d.likeitPost?d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn14"):d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Btn06")})},d.deleteSwag=function(b,e){var f=confirm("글을 삭제하시겠습니까?");return f?void a.get(c.petMallSwagDeleteData+"?bbcNo="+b.bbc_no).success(function(a){"0000"==a.comment_delete.response_code&&(alert("삭제되었습니다"),d.screenData.gallery_list.splice(e,1),d.modifyOpen=null)}):!1},d.modifyOpen,d.modifyClick=function(a,b){d.modifyOpen==b?(d.modifyOpen=null,$("#swaglist_"+a.bbc_no).removeClass("on")):(d.modifyOpen=b,$("#swaglist_"+a.bbc_no).addClass("on"))},d.hideModify=function(a,b){d.modifyOpen=null,$("#swaglist_"+a.bbc_no).removeClass("on")},d.getswagRewriteUrl=function(a,b){var e=d.baseParam+"&bbcNo="+a.bbc_no;return c.swagRewriteUrl+"?"+e}}}}]),d.directive("commentModule",["$window","$http","LotteCommon","LotteCookie",function(a,b,c,d){return{templateUrl:"/lotte/resources_dev/mall/pet/pet_comment.html",replace:!0,link:function(a,d,e){a.input={},a.input.commentTxt="",a.commentListIndex,a.commentListClick=function(b){a.commentListIndex==b?a.commentListIndex=null:a.commentListIndex=b},a.reqDetailParam={NoArrList:[]},a.commentList=[],a.commentListPage=1,a.registerCheck=function(){if(null==a.loginInfo||!a.loginInfo.isLogin){var b="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href=c.loginUrl+"?"+a.baseParam+"&"+b)}},a.register=function(d,e){if(null==a.loginInfo||!a.loginInfo.isLogin){var f="targetUrl="+encodeURIComponent(location.href,"UTF-8");
return void(location.href=c.loginUrl+"?"+a.baseParam+"&"+f)}var g=a.input.commentTxt,h=document.querySelector("#commentTxt");return 0==g.trim().length?(alert("댓글을 남겨주세요."),h.focus(),!1):calcBytes(g)>400?(alert("댓글은 200자[한글기준] 이내로 제한되어 있습니다."),h.focus(),!1):($.ajax({type:"POST",url:c.petCommentRegData+"?bb_tgt_no="+a.item.bbc_no,data:{cont:g}}).success(function(d){"reg_success"==d.commentInsert.response_code?(alert("등록되었습니다."),b.get(c.petCommentData+"?bbc_no="+a.item.bbc_no).success(function(b){if(a.commentData=b.comment_list,a.commentListData=[],null!=b.comment_list.comment){for(var c=0;c<b.comment_list.comment.items.length;c++)b.comment_list.comment.items[c].cont=b.comment_list.comment.items[c].cont.split("&#34;").join('"'),b.comment_list.comment.items[c].cont=b.comment_list.comment.items[c].cont.split("&lt;").join("<"),b.comment_list.comment.items[c].cont=b.comment_list.comment.items[c].cont.split("&gt;").join(">");a.commentListData=b.comment_list.comment.items,a.commentLoginidData=b.comment_list.comment.items.login_id,a.item.reply_count+=1}}),a.input.commentTxt=""):"reg_fail"==d.commentInsert.response_code&&alert("등록이 실패되었습니다.")}),!1)},a.idChange=function(a){for(var b=a.substr(0,3),c=3;c<a.length;c++)b+="*";return b},a.deleteComment=function(d,e,f){var g=confirm("댓글을 삭제하시겠습니까?");return g?void b.get(c.petCommentDeleteData+"?bbTgtNo="+a.item.bbc_no+"&bbcNo="+f.bbc_no).success(function(b){"del_success"==b.commentDelete.response_code&&(alert("삭제되었습니다."),a.commentListData.splice(e,1),a.item.reply_count-=1)}):!1}}}}]),d.directive("subHeaderEach",["$window","$timeout","AppDownBnrService",function(a,c,d){return{replace:!0,link:function(a,e,f){a.subHeaderFixed=!0;b.element(e),a.subHeaderHeight;a.$on("winScroll",function(b,e){e.scrollPos>=d.appDownBnrInfo.height||e.scrollPos<0?a.headerFixed=!0:(a.headerFixed=!1,console.log("fix")),c(function(){a.$apply()})})}}}]),d.directive("depFilterLayer",["$window",function(a){return{replace:!0,link:function(c,d,e){function f(){if(c.appObj.isNativeHeader&&(h=0),i=b.element(".swag_go_wrap").offset().top,g.scrollTop()>=i-h){if(!b.element("body").scope().sheadHide){b.element("body").scope().sheadHide=!0;try{b.element("body").scope().$apply()}catch(a){}}}else if(b.element("body").scope().sheadHide){b.element("body").scope().sheadHide=!1;try{b.element("body").scope().$apply()}catch(a){}}}var g=(b.element(d),b.element(a)),h=c.subHeaderHeight,i=(b.element("#head_sub").innerHeight(),b.element(".swag_go_wrap").offset().top);g=b.element(a),h=c.subHeaderHeight,g.on("scroll",f)}}}]),d.directive("orientable",function(){return{link:function(a,b,c){b.bind("load",function(b){a.imageSize={width:this.width,height:this.height}})}}})}(window,window.angular),function(a,b,c){"use strict";b.module("dearpetSubCategory",["lotteComm"]).controller("petMallSubCtgCtrl",["$scope","commInitData",function(a,c){function d(c){var d=null;return b.forEach(a.pet_cate_data,function(a,e){return d?d:(c!=a.disp_no||d||(d=a),void b.forEach(a.sub_cate_list,function(a,e){c!=a.disp_no||d||(d=a),b.forEach(a.sub_cate_list,function(a,b){c!=a.disp_no||d||(d=a)})}))}),d}function e(b){if(b){a.pet_cate_data=b;var e=[c.query.beforeNo||null,c.query.curDispNo||null,c.query.cate3||null];e[1]==e[2]&&e.splice(2,1);for(var f=0;f<e.length;++f)if(e[f]){var g=d(e[f]);if(g&&a.pet_cate_linemap.push(g),!g.sub_cate_list)break}for(var h=a.pet_cate_linemap.length,f=h;3>f;++f){var i=a.pet_cate_linemap[a.pet_cate_linemap.length-1];if((i.sub_cate_list&&i.sub_cate_list.length||i.extra)&&g){var j=i.extra?i.extra[0]:i.sub_cate_list[0];a.pet_cate_linemap.push(j)}}a.connectCategoryDirectiveFunc&&a.connectCategoryDirectiveFunc()}}a.pet_cate_linemap=[],a.$emit("getSubCateData",e),a.connectCategoryDirectiveFunc=null,a.directiveIsCallController=function(b){return a.pet_cate_data?void b():void(a.connectCategoryDirectiveFunc=b)}}]).directive("petMallSubCtg",["$window","$timeout","LotteCommon","commInitData",function(c,d,e,f){return{templateUrl:"/lotte/resources_dev/mall/pet/dearpet_mall_sub_category.html",restrict:"E",replace:!0,link:function(g,h,i){function j(a){for(var b=0;b<g.pet_cate_linemap.length;++b)a!=b&&(g.pet_cate_linemap[b].active=!1)}function k(a){var b=e.petMallProdListUrl;return("5566305"==a||"5566436"==a||"5566437"==a||"5566438"==a)&&(b=e.petMallgalleryUrl),"5572261"==a&&(b=e.petMalleventUrl),b}function l(a){if(!a)return[];if(a.length<10)return[a];for(var b=a.length/10,c=[],d=0;b>d;++d){for(var e=[],f=0;10>f;++f)a[10*d+f]&&e.push(a[10*d+f]);e.length&&c.push(e)}return c}function m(a){if(g.pet_cate_linemap[a].disp_no){switch(String(a)){case"0":g.currentCateList=l(g.pet_cate_data);break;default:g.currentCateList=l(g.pet_cate_linemap[a-1].sub_cate_list)}g.select_depth_index=a,g.swipeIndex=0,g.select_disp_no=g.pet_cate_linemap[a].disp_no}}function n(){var a=b.element(c).width();return 360>a?13:a>450&&640>a?19:a>640?31:18}function o(){for(var a=0,b=n(),c=0;c<g.pet_cate_linemap.length;++c)a+=g.pet_cate_linemap[c].disp_nm.length;if(a>b){var d=a-b,e=g.pet_cate_linemap[g.pet_cate_linemap.length-1];e.cut_name=e.disp_nm.substr(0,e.disp_nm.length-d)+"..."}}g.currentCateList,g.select_disp_no,g.chkNo,g.swipeIndex=0,g.select_depth_index=-1,g.swipe_item_width=b.element(".dearpet_mall_sub_category").width(),g.swipeSlideFinish=function(a){g.swipeIndex=a},g.subcateClick=function(a){j(a),g.currentCateList=null,g.select_disp_no=null,g.pet_cate_linemap[a].active=!g.pet_cate_linemap[a].active,g.pet_cate_linemap[a].disp_no&&g.sendTclick("m_DC_SpeDisp_Dearpet_Clk_"+g.pet_cate_linemap[a].disp_no),g.pet_cate_linemap[a].active&&m(a)},g.subcateClose=function(){g.currentCateList=null,g.select_disp_no=null,g.select_depth_index=-1,j(null)},g.subcateLink=function(b,c){if(b){var d="",e="",f="",h=2,i=k(b);switch(String(g.select_depth_index)){case"0":e=b;try{d=g.pet_cate_data[c].sub_cate_list[0].disp_no,d||(d=b)}catch(j){d=b}break;case"1":e=g.pet_cate_linemap[0].disp_no,d=b,h=3;break;case"2":e=g.pet_cate_linemap[0].disp_no,d=g.pet_cate_linemap[1].disp_no,f=d===b?"":b,h=3}i+="?"+g.baseParam+"&beforeNo="+e+"&curDispNo="+d+"&cate3="+f+"&chkDepth="+h,i+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+b,a.location.href=i}},g.swipeObj={getCtrl:function(a){g.swipeObj.ctrl=a},ctrl:null},g.currentSwipeCategory=function(a){a&&d(function(){g.swipeObj.ctrl.moveIndex(a)},500)},g.directiveIsCallController(function(){d(function(){try{var a=1;f.query.chkDepth&&3==g.pet_cate_linemap.length&&(a=Number(f.query.chkDepth)-1),g.pet_cate_linemap[a].active=!0,g.select_disp_no=g.pet_cate_linemap[a].disp_no,g.chkNo=a,m(a)}catch(b){}})}),b.element(c).bind("resize",function(a){o()})}}}])}(window,window.angular),angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function a(a,b,c){function d(a){var b=a.originalEvent?a.originalEvent.touches:a.touches;y=b[0].clientX,z=b[0].clientY,u=s,v=t,A=0,B=0}function e(a){var c=a.originalEvent?a.originalEvent.touches:a.touches;""===l&&(1===c.length&&o>1?l="swipe":2===c.length&&(l="pinch",q=o,n=g(c),w=c[0].clientX-parseInt((c[0].clientX-c[1].clientX)/2,10)-b[0].offsetLeft-u,x=c[0].clientY-parseInt((c[0].clientY-c[1].clientY)/2,10)-b[0].offsetTop-v)),"swipe"===l?(a.preventDefault(),A=c[0].clientX-y,B=c[0].clientY-z,s=u+A,t=v+B,h()):"pinch"===l&&(a.preventDefault(),m=g(c),p=m/n,o=p*q,s=w*(1-p)+u+A,t=x*(1-p)+v+B,h())}function f(a){var b=a.originalEvent?a.originalEvent.touches:a.touches;""===l||b.length>0||(1>o?(o=1,s=0,t=0):o>r?(o=r,p=o/q,s=w*(1-p)+u+A,t=x*(1-p)+v+B):(s>0?s=0:j*(1-o)>s&&(s=j*(1-o)),t>0?t=0:k*(1-o)>t&&(t=k*(1-o))),h(.1),l="")}function g(a){var b=Math.sqrt(Math.pow(a[0].clientX-a[1].clientX,2)+Math.pow(a[0].clientY-a[1].clientY,2));return parseInt(b,10)}function h(a){var c=a?"all cubic-bezier(0,0,.5,1) "+a+"s":"",d=[o,0,0,o,s,t],e="matrix("+d.join(",")+")";b.css({"-webkit-transition":c,transition:c,"-webkit-transform":e+" translate3d(0,0,0)",transform:e})}function i(){o=1,s=0,t=0,h(.1),l=""}console.log("pinch zoom -----");var j,k,l="",m=0,n=0,o=1,p=1,q=1,r=parseInt(c.maxScale,10);(isNaN(r)||1>=r)&&(r=3);var s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=new Image;C.onload=function(){j=b[0].clientWidth,k=b[0].clientHeight,b.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),b.on("touchstart",d),b.on("touchmove",e),b.on("touchend",f),b.on("resetPinch",i)},c.ngSrc?C.src=c.ngSrc:C.src=c.src}var b={restrict:"A",scope:!1,link:a};return b});