function bookmarkCopy(a,b,c){var d=$(".bookmarListkLayer input[name=app_yn]:hidden",top.document).val(),e=$(".bookmarListkLayer input[name=app_save]:hidden",top.document).val();"Y"==d&&"Y"==e&&setBookMarkToApp(a,b,c)}function appBookMarkAvailable(a,b){"N"==a?top.document.getElementById("storage_frame").src="favorcontroll://isThisPageAvailable/"+b:window.favorcontroll&&window.favorcontroll.callAndroid(b)}function getBookMarkFromApp(a){localStorage.setItem("bookmark",a),bookmarkCopy(localStorage.getItem("bookmark"),"ADD","READ")}function setBookMarkToApp(a,b,c){var d=$(".bookmarListkLayer input[name=android_yn]:hidden",top.document).val();a=a.replace(/'/g,""),a=encodeURIComponent(a),"N"==d?"ADD"==b?"GOODS"==c?top.document.getElementById("storage_frame").src="favorlist://AddToApp/list?"+a:top.document.getElementById("storage_frame").src="favorlist://InsToApp/list?"+a:top.document.getElementById("storage_frame").src="favorlist://DelToApp/list?"+a:window.favorlist.callAndroid(a)}function getBookMarkObj(){var storage_obj,bookmark_obj;return storage_str=localStorage.getItem("bookmark"),(null==storage_str||"null"==storage_str||"undefined"==storage_str)&&(storage_str=""),storage_str.length<1?bookmark_obj=new Array:(storage_obj=eval("("+storage_str+")"),bookmark_obj=storage_obj.bookmark),bookmark_obj}function setProductBookMark(a){var b,c,d;b=getBookMarkObj(),d=b.length,c=new Array(20==d?d:d+1);for(var e=0;d>e&&19>e;e++)c[e+1]=b[e];c[0]=a,b=c,localStorage.setItem("bookmark",JSONtoString(b,"set")),bookmarkCopy(localStorage.getItem("bookmark"),"ADD","GOODS");var f=navigator.userAgent.toLowerCase(),g=location.href;g=g.substring(g.indexOf("v=")),g=g.substring(0,g.indexOf("&"));var h=g.replace("v=","");-1==location.href.indexOf(".ellotte.com")?(f.search("ipad")<0||f.search("ipad")>-1&&!appVerChk(h,"126"))&&alert("스크랩에 추가되었습니다."):alert("스크랩에 추가되었습니다.")}function setPageBookMark(){var a,b,c;a=getBookMarkObj(),c=a.length,b=new Array(20==c?c:c+1);for(var d=0;c>d&&19>d;d++)b[d+1]=a[d];for(var e,f=location.href.replace("://",""),g=f.substring(f.indexOf("/"),f.indexOf("?")),h=f.substring(f.indexOf("?")+1).split("&"),i="",j="",k="",d=0;d<h.length;d++){if(e=h[d].split("="),i=e[0],g.indexOf("product_view.do")>-1&&"goods_no"==i){k=e[1];break}"c"!=i&&"v"!=i&&"cn"!=i&&"cdn"!=i&&"udid"!=i&&"schema"!=i&&"tstore_yn"!=i&&"cosemkid"!=i&&(j+=(j.length>0?"&":"")+h[d])}var l="",m=navigator.userAgent.toLowerCase();if(g.indexOf("product_view.do")>-1){if(k.length>0)return void setProductBookMark(k)}else g.indexOf("/category/")>-1?(l=$(".subTitle h2").text().replace("카테고리","")+" 카테고리",""==l&&(l=$("#head_sub h2").text().replace("카테고리","")+" 카테고리")):m.search("ipad")>-1&&g.indexOf("/search/t/")>-1?l=$("#searchTxt").text():(l=$(".subTitle h2").text(),""==l&&(l=$("#head_sub h2").text()));var n=new Array;n[n.length]=l,n[n.length]="https:"==location.protocol?"https":"http",n[n.length]=g,n[n.length]=j,b[0]=n,a=b,localStorage.setItem("bookmark",JSONtoString(a,"set")),bookmarkCopy(localStorage.getItem("bookmark"),"ADD","PAGE");var m=navigator.userAgent.toLowerCase(),o=location.href;o=o.substring(o.indexOf("v=")),o=o.substring(0,o.indexOf("&"));var p=o.replace("v=","");-1==location.href.indexOf(".ellotte.com")?(m.search("ipad")<0||m.search("ipad")>-1&&!appVerChk(p,"126"))&&alert("스크랩에 추가되었습니다."):alert("스크랩에 추가되었습니다.")}function setPageBookMark_2014(){var a,b,c;a=getBookMarkObj(),c=a.length,b=new Array(20==c?c:c+1);for(var d=0;c>d&&19>d;d++)b[d+1]=a[d];for(var e,f=location.href.replace("://",""),g=f.substring(f.indexOf("/"),f.indexOf("?")),h=f.substring(f.indexOf("?")+1).split("&"),i="",j="",k="",d=0;d<h.length;d++){if(e=h[d].split("="),i=e[0],g.indexOf("product_view.do")>-1&&"goods_no"==i){k=e[1];break}"c"!=i&&"v"!=i&&"cn"!=i&&"cdn"!=i&&"udid"!=i&&"schema"!=i&&"tstore_yn"!=i&&"cosemkid"!=i&&(j+=(j.length>0?"&":"")+h[d])}var l="",m=navigator.userAgent.toLowerCase();if(g.indexOf("product_view.do")>-1){if(k.length>0)return void setProductBookMark(k)}else l=g.indexOf("/category/")>-1?$("#head_sub span").text():m.search("ipad")>-1&&g.indexOf("/search/t/")>-1?$("#searchTxt").text():$("#head_sub h2").text();var n=new Array;n[n.length]=l,n[n.length]="https:"==location.protocol?"https":"http",n[n.length]=g,n[n.length]=j,b[0]=n,a=b,localStorage.setItem("bookmark",JSONtoString(a,"set")),bookmarkCopy(localStorage.getItem("bookmark"),"ADD","PAGE");var m=navigator.userAgent.toLowerCase(),o=location.href;o=o.substring(o.indexOf("v=")),o=o.substring(0,o.indexOf("&"));var p=o.replace("v=","");-1==location.href.indexOf(".ellotte.com")?(m.search("ipad")<0||m.search("ipad")>-1&&!appVerChk(p,"126"))&&alert("스크랩에 추가되었습니다."):alert("스크랩에 추가되었습니다.")}function getBookMarkParam(){var a;return a=getBookMarkObj(),encodeURIComponent(JSONtoString(a,"get"))}function deleteBookMarkItem(a,b){var c,d;c=getBookMarkObj(),d=new Array;for(var e=0;e<c.length;e++)e!=a&&(d[d.length]=c[e]);c=d,localStorage.setItem("bookmark",JSONtoString(c,"set")),bookmarkCopy(localStorage.getItem("bookmark"),"DEL","");var f=$(".bookmarListkLayer input[name=common_param]:hidden",parent.document).val();self.location.href="/popup/bookmark_list_2014.do?"+f+"&bm_param="+getBookMarkParam()+"&offset="+b}function deleteBookMarkItem_2014(a,b,c,d){var e,f;if(confirm("삭제 하시겠습니까?")){e=getBookMarkObj(),f=new Array;for(var g=0;g<e.length;g++)g!=a&&(f[f.length]=e[g]);e=f,localStorage.setItem("bookmark",JSONtoString(e,"set")),bookmarkCopy(localStorage.getItem("bookmark"),"DEL","");var h="/popup/bookmark_list_2014.do?"+c+"&bm_param="+getBookMarkParam()+"&offset="+b+"&return_url="+encodeURIComponent(d);location.href=h}}function deleteBookMarkItem_ALL_2014(a,b,c,d){if(confirm("삭제 하시겠습니까?")){localStorage.removeItem("bookmark");var e=new Array;bookmarkCopy(JSONtoString(e,"set"),"DEL","");var f="/popup/bookmark_list_2014.do?"+c+"&bm_param="+getBookMarkParam()+"&offset="+b+"&return_url="+encodeURIComponent(d);location.href=f}}function JSONtoString(a,b){var c,d,e="set"==b?"{bookmark:[":"",f="",g="get"==b?":^:":",";if(a.length>0){for(var h=0;h<a.length;h++){if(break_tf=!1,"string"==typeof a[h])f+='"'+a[h]+'"';else if("object"==typeof a[h]){c=a[h],f+="[";for(var i=0;i<c.length;i++)d=c[i],d=d.replace(/'/g,""),f+='"'+d+'"'+(i!=c.length-1?",":"");f+="]"}f+=h!=a.length-1?g:""}e+=f}return e+="set"==b?"]}":"","get"==b&&(e=e.replace(/"/g,"")),e}function bookMarkResultGo(a){parent.location.href=a}function showBookmarkList(a){a=a.replace(/'/g,"");var b=$(".bookmarListkLayer input[name=android_yn]:hidden",top.document).val(),c=$(".bookmarListkLayer input[name=app_yn]:hidden",top.document).val(),d=$(".bookmarListkLayer input[name=app_save]:hidden",top.document).val();"Y"==c&&"Y"==d&&""!=a&&"undefined"!=typeof a&&(getBookMarkFromApp(a),appBookMarkAvailable(b,!1));var e=window.pageYOffset;$(window).scrollTop(0);var f=$(".bookmarListkLayer input[name=common_param]:hidden").val(),g="/popup/bookmark_list_2014.do?"+f+"&bm_param="+getBookMarkParam()+"&offset="+e+"&return_url="+encodeURIComponent(document.URL),h=$(".bookmarListkLayer input[name=app_tclick]:hidden").val();"undefined"!=typeof h&&""!=h&&(g+="&tclick="+h),location.href=g,$(".btn-top")&&$(".btn-top").hide()}function showBookmarkList_2014(a){"undefined"==typeof a&&(a=""),a=a.replace(/'/g,"");var b=$(".bookmarListkLayer input[name=android_yn]:hidden",top.document).val(),c=$(".bookmarListkLayer input[name=app_yn]:hidden",top.document).val(),d=$(".bookmarListkLayer input[name=app_save]:hidden",top.document).val();"Y"==c&&"Y"==d&&""!=a&&"undefined"!=typeof a&&(getBookMarkFromApp(a),appBookMarkAvailable(b,!1));var e=window.pageYOffset;$(window).scrollTop(0);var f=$(".bookmarListkLayer input[name=common_param]:hidden").val(),g="/popup/bookmark_list_2014.do?"+f+"&bm_param="+getBookMarkParam()+"&offset="+e+"&return_url="+encodeURIComponent(document.URL),h=$(".bookmarListkLayer input[name=app_tclick]:hidden").val();"undefined"!=typeof h&&""!=h&&(g+="&tclick="+h),location.href=g,$(".btn-top")&&$(".btn-top").hide()}function hideBookmarkList_2014(a){var b=$(".bookmarListkLayer input[name=android_yn]:hidden",top.document).val(),c=$(".bookmarListkLayer input[name=app_yn]:hidden",top.document).val(),d=$(".bookmarListkLayer input[name=available]:hidden",top.document).val();"Y"==c&&appBookMarkAvailable(b,d),location.href=a}function hideBookmarkList(){var a=($("#container input[name=offset]:hidden").val(),$(".bookmarListkLayer input[name=android_yn]:hidden",top.document).val()),b=$(".bookmarListkLayer input[name=app_yn]:hidden",top.document).val(),c=$(".bookmarListkLayer input[name=available]:hidden",top.document).val();"Y"==b&&appBookMarkAvailable(a,c),location.href=url}function goTop(){$(window).scrollTop(0)}function setSG(){scrollGap=document.body.clientHeight-110-Math.floor(.05*document.body.clientHeight)}function setSideH(){$("#sideMeniu").hide(),$("#sideMeniu").css("top",window.pageYOffset+scrollGap+"px"),$("#sideMeniu").show(500)}!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.controller("smartPayCtrl",["$scope","$window","$http","LotteCommon","LotteCookie",function(a,b,c,d,e){a.showWrap=!0,a.contVisible=!0,a.subTitle="스마트페이 관리",a.mbrNo=e.getCookie("MBRNO"),a.loginId=e.getCookie("LOGINID");var f="";console.log("#LotteCommon.smartpayData : "+d.smartpayData),c.get(d.smartpayData+"?targetUrl="+f).success(function(b){1e3==b.resultCode||(a.mbr_no=b.smartpay.mbr_no,a.order_cardname=b.smartpay.order_cardname,a.smartpayUser_key=b.smartpay.smartpayUser_key,a.targetUrl=b.smartpay.targetUrl,a.reqType="4",a.pay="ESPS",""==b.smartpay.smartpayUser_key&&(a.reqType="1"))}).error(function(a,b,c,d){console.log("Error Data : ",b,c,d)}),a.smartpaySubmit=function(c){a.dimmedOpen({target:"ansimLayer",callback:this.ansimclose}),console.log("key : "+c);var e=[d.PAYTYPE_CARD_047,d.PAYTYPE_CARD_029,d.PAYTYPE_CARD_031,d.PAYTYPE_CARD_048],f=["롯데카드","신한카드","삼성카드","현대카드"];if(console.log("paytype_card_arr["+c+"] : "+e[c]),console.log("$scope.loginId : "+a.loginId),a.loginId=""){var g="&targetUrl="+encodeURIComponent(b.location.href,"UTF-8");b.location.href=d.loginUrl+"?"+a.baseParam+g}else $("#ANSIM_LAYER .tit").text(f[c]),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),$("#CLOSE_BTN").hide(),e[c]==LOTTE_CONSTANTS.PAYTYPE_CARD_047?($("#SIMPLEPAYFORM").attr("target","X_ANSIM_FRAME"),$("#SIMPLEPAYFORM").attr("action","/smpi/M_LCSMPIAgent01.jsp"),$("#SIMPLEPAYFORM").submit()):e[c]==LOTTE_CONSTANTS.PAYTYPE_CARD_029?($("#frm_card input[name=X_CARDTYPE]").val(e[c]),$("#frm_card input[name=X_SP_CHAIN_CODE]").val(""),$("#frm_card").submit()):e[c]==LOTTE_CONSTANTS.PAYTYPE_CARD_031?($("#CLOSE_BTN").show(),$("#X_ANSIM_FRAME").attr("src","https://vbv.samsungcard.co.kr/VbV/spmobile/SMITFX500.jsp?mod=simplepay_reg")):e[c]==LOTTE_CONSTANTS.PAYTYPE_CARD_048&&($("#frm_card input[name=X_CARDTYPE]").val(e[c]),$("#frm_card input[name=X_SP_CHAIN_CODE]").val("1"),$("#frm_card").submit())},a.ansimclose=function(){$("#ANSIM_LAYER").hide(),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp")},a.paramSmartpaySet=function(b,c,d,e,f,g,h,i){$("#frm_send input[name=xid]").val(b),$("#frm_send input[name=eci]").val(c),$("#frm_send input[name=cavv]").val(d),$("#frm_send input[name=cardno]").val(e),$("#frm_send input[name=restype]").val(g),$("#frm_send input[name=smart_pay_use_yn]").val("Y"),h!=$("#frm_send input[name=user_key]").val()&&$("#frm_send input[name=update_easn_yn]").val("Y"),$("#frm_send input[name=user_key]").val(h),$("#frm_send input[name=res_type]").val(g),$("#frm_send input[name=req_type]").val(g),$("#frm_send input[name=apvl_desc]").val(i),""==b&&""==c&&""==d&&""==e?(returnPaymentPage(),$("#X_ANSIM_FRAME").hide(),$("#ANSIM_LAYER").hide()):a.doPayment()},a.setCertSmartpayResult=function(b,c,d,e,f,g,h,i,j){a.paramSmartpaySet(b,c,d,e,g,h,i,j)},a.returnPaymentPage=function(){$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp")},a.closeFrame=function(){$("#ANSIM_LAYER").hide(),$("#X_ANSIM_FRAME").hide(),$("#CLOSE_BTN").hide(),a.returnPaymentPage()},a.doPayment=function(){var b=$("#frm_send input[name=smart_pay_use_yn]").val(),e=$("#frm_send input[name=user_key]").val(),f=$("#frm_send input[name=restype]").val(),g=$("#frm_send input[name=res_type]").val(),h=$("#frm_send input[name=req_type]").val(),i=$("#frm_send input[name=apvl_desc]").val(),j=$("#frm_send input[name=update_easn_yn]").val(),k=encodeURIComponent(a.targetUrl,"UTF-8");try{c.get(d.smartpayRegUrl+"?"+a.baseParam+"&smart_pay_use_yn="+b+"&user_key="+e+"&restype="+f+"&res_type="+g+"&req_type="+h+"&apvl_desc="+i+"&update_easn_yn="+j+"&targetUrl="+k).success(function(a){$("#smartpayreg").html(response)}).error(function(a){ajaxResponseErrorHandler(a,function(){})})}catch(l){console.error(l)}}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/mylotte/smartpay/m/smartpay_container.html",replace:!0,link:function(a,b,c){}}})}(window,window.angular);var scrollGap;$(document).ready(function(){setSG()}),$(window).scroll(function(){setSideH()}),$(window).resize(function(){setSG(),setSideH()}),function(a,b,c){"use strict";var d=b.module("lotteList",[]);d.directive("listHeader",[function(){return{templateUrl:"/lotte/resources_dev/list/list_ctg_viewtype.html",replace:!0,link:function(a){}}}]),d.directive("unitViewType",["$location","planLoc","$window","$timeout",function(a,c,d,e){return{link:function(a,f,g){a.openViewTypeList=function(){var a=b.element("#vtypeLst");a.hasClass("on")?a.removeClass("on"):a.addClass("on")},a.changeViewType=function(e){return"sw"==e?(a.showSmartWindow(),!1):(a.srhObj.imgListGbn=e,b.element("#vtypeLst").removeClass("on"),c.updateLocation(a),void b.element(d).scrollTop(b.element("#prdLst").offset().top-45))},a.showSmartWindow=function(){a.showWrap=!1,a.showSmartWin=!0,b.element("#vtypeLst").removeClass("on")},a.hideSmartWindow=function(){a.showWrap=!0,a.showSmartWin=!1,b.element("#prdLst").length>0&&e(function(){b.element(d).scrollTop(b.element("#prdLst").offset().top)},100)},a.changeDivObj=function(){a.srhObj.divNum=a.divNum.divObjNo,a.srhObj.page=1,a.loadData();var b=document.querySelector("#prdLst").offsetTop-90;document.querySelector("body").scrollTop=b}}}}]),d.directive("moreBtn",[function(){return{templateUrl:"/lotte/resources_dev/list/more_view_btn.html",replace:!0,link:function(a){a.clickMoreView=function(){a.srhObj.page++,a.isShowLoading=!0,a.loadData()}}}}]),d.directive("lotteSmartwindow",[function(){return{templateUrl:"/lotte/resources_dev/list/smart_window.html",replace:!0,link:function(a,c,d){a.$watch(function(){a.appObj.isApp||b.element(".prd_info_wrap").css("bottom","50px")})}}}]),d.directive("shoppingWindow",["$window",function(a){return function(b,d,e){var f,g,h;f=b.$watch("showSmartWin",function(){b.showSmartWin!=c&&(b.showSmartWin?b.lotteSmartWindow():(b.cntIdx=0,b.showNextBtn=!1,b.swItems=null,b.swDrag.setMoveX(0,0,function(){}),b.swDrag=c))}),g=a.innerWidth,h=a.innerHeight,b.cntIdx=0,b.lotteSmartWindow=function(){var a=d.find("ul.product-container"),c=a.find("li.product-ct"),e=d.find("nav.nav");d.find("nav.nav > span.prev > a"),d.find("nav.nav > span.next > a");b.cntIdx<b.contents.prdList.totalCnt&&(b.showNextBtn=!0),b.swItems=b.contents.prdList.items.slice(b.cntIdx,3),c.width(g),a.width(g*b.swItems.length),h>590?g>550?e.css("top",315):e.css("top",g/2-25):e.css("top",(h-110)/2+40),b.swDrag=a.simpleDrag(function(){var a=b.swDrag._x(),c=b.swDrag._dir();0==b.cntIdx&&a>0?b.swDrag.setMoveX(0,300,function(){}):0==c?b.showNextBtn?b.nextPrd():b.swDrag.setMoveX(-g,300,function(){}):1==c&&b.prevPrd()})},b.prevPrd=function(){b.swDrag.setMoveX(0,300,function(){b.cntIdx-=1,b.$apply(),b.cntIdx>0&&(b.changeSwItems(),b.swDrag.setMoveX(-g,0,function(){})),b.cntIdx<b.contents.prdList.totalCnt&&(b.showNextBtn=!0,b.$apply())})},b.nextPrd=function(){var a=-g;0!=b.cntIdx&&(a=2*-g),b.swDrag.setMoveX(a,300,function(){b.cntIdx+=1,b.$apply(),b.contents.prdList.totalCnt>b.contents.prdList.items.length&&b.cntIdx+6==b.contents.prdList.items.length?b.clickMoreView():b.cntIdx+1==b.contents.prdList.totalCnt&&(b.showNextBtn=!1),b.cntIdx>1&&(b.changeSwItems(),b.swDrag.setMoveX(-g,0,function(){}))})},b.changeSwItems=function(){b.swItems=[],b.swItems=b.contents.prdList.items.slice(b.cntIdx-1,b.cntIdx+2),b.$apply()},b.clickUnit=function(a){b.productView(b.swItems[a])}}}])}(window,window.angular);