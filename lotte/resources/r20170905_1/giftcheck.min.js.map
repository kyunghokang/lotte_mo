{"version":3,"file":"giftcheck.min.js","sources":["giftcheck.js"],"names":["window","angular","undefined","addressInfoModule","module","controller","$scope","LotteCommon","directive","$window","$timeout","$parse","$http","templateUrl","replace","link","el","attrs","myAddr_tab","addressTab","searchJListInput","searchJListInput2","searchJListFlag","searchJList","moreAddress","seq3_J_1_flag","zipcode","addrData","searchAddressFlag","addr_layer","selectedAddress","editMode","s_init","type","$","val","address_post","address1","address2","inpcell1","inpcell2","inpcell3","inprmitnm","inpdlvpnm","prop","search_step1","flag","search_step2","myAddrChange","giftData","user_addr_info","ord_addr_info","editMyAddr","addrLayer_show","list_edit","id","item","trigger","delete_flag","list_del","size","alert","confirm","ajax","async","url","delete_address_list","dlvp_sn","idx","loginInfo","mbrNo","success","resp","result","response_code","del","error","i","addr_list","length","default_addr","addr_name","r_name","addr_post","addr1","addr2","addr_tel","telArr","split","parseInt","addrLayer_select","is","index","searchAddress","deli_cnt","proc_div","addr_gbn","reqData","callBack","inputval","trim","focus","dong_nm","addr_lst","$addr2","txt_seq2_J_1","noneData","s_addr","n_addr","ipt_addr2","post_addr","dtl_addr","$key1","$key2","$key3","$key4","$key5","invalid","add","each","this","keyword1","keyword2","keyword3","keyword4","keyword5","order_no","orderNo","ord_dtl_sn","ordDtlSn","get","params","data","result_code","msg","error_msg","other_address_post","other_address1","other_address2","addrGubun","selectAddress","inp_seq2_J_1","post_no","e","checkField","message","fieldID","str","writeMessage","messageChange","getlastAddress","msgData","isLogin","stnm_addr_post","stnm_addr1","stnm_addr2","is_default","getResult","nameid","console","log","app","commInitData","loading","state","showWrap","contVisible","subTitle","query","key","decodeURI","test","presentListUrl","baseParam","presentShop","mainUrl","appBanner","mainPopupData","app_down_popup","load","reqParam","KEY","mbr_no","giftCheckUrl","param","method","headers","Content-Type","gift_state","location","href","checkGiftPage","getGoodsList","gift_msg_info","bg_color","zeroOpt","gift_prd_info","opt_item_lst","optlist","push","opt_tval","setTimeout","LotteLink","gotoApp","appDeepLink","confirm_submit","password","reject_msg","confirm_gift","scrollTop","err_msg","reload","gift_epilogue","recom_prd_lst","refuseLayerFlag","refuse_rLayer","optFlag","changeOpt","initOptCheck","getOptionString","sel","opts","len","opt_list","join","saveOpt","opt","no","arr","optvalue","old_no","item_qty","selected_opt","opt_value","item_no","inv_qty","path","presentDetailOption","ord_no","goods_no","chg_item_no","rel_qty","productDetailPop","detailHtml","ProductDetailLayer","productProductDetailHtmlData","max","replaceAll","closeProductDetailLayer","searchStr","replaceStr","gotoLink","tclick","prdviewUrl","k","opt_value_lst","treecheck","find","eq","hide","checkZero","checkOptCnt","checkTime","show","selectID","level","list","key2","j","rvalue","concat","obj","cnt","return_value","i2","appObj","isApp","appDownBann","appDownBnrClose"],"mappings":"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","sourceRoot":"/","sourcesContent":["(function(window, angular, undefined) {\r\n\t'use strict';\r\n\r\n\tvar addressInfoModule = angular.module('addressInfo', [\r\n        'lotteComm'        \r\n    ]);\r\n    \r\n\taddressInfoModule.controller('AddressInfoCtrl', [\"$scope\", \"LotteCommon\", function ($scope, LotteCommon) {\r\n\t\t\r\n\t}]);\r\n\r\n\taddressInfoModule.directive('addressInfo', ['LotteCommon','$window', '$timeout', '$parse', '$http', function (LotteCommon,$window, $timeout, $parse, $http) {\r\n        return {\r\n            templateUrl : '/lotte/resources_dev/mylotte/address_info.html',\r\n            replace : true,\r\n            link : function($scope, el, attrs) {\r\n                $scope.myAddr_tab = false; //내배송지/새로운배송지 탭\r\n                $scope.addressTab = false ;//지번주소/도로명주소 탭 선택 \r\n                $scope.searchJListInput = true;//지번주소 검색\r\n                $scope.searchJListInput2 = true;//도로명주소 검색\r\n                $scope.searchJListFlag = false; //지번주소 검색 결과 목록 보기\r\n                $scope.searchJList; //지번주소 검색 결과 목록\r\n                $scope.moreAddress = false; //지번주소검색 나머지 주소 입력\r\n                $scope.seq3_J_1_flag = false; // 지번주소검색 -> 도로명\r\n                $scope.zipcode;\r\n                $scope.addrData;                \r\n                $scope.searchAddressFlag = false;\r\n                $scope.addr_layer = false;\r\n                $scope.selectedAddress = null;\r\n                \r\n                $scope.editMode = false; //배송지 수정 모드\r\n                                \r\n                $scope.s_init = function(type){                                               \r\n                    $scope.searchJListInput = true;//지번주소 검색\r\n                    $scope.searchJListInput2 = true;//도로명주소 검색\r\n                    $scope.searchJListFlag = false; //지번주소 검색 결과 목록 보기\r\n                    $scope.searchAddressFlag = false;\r\n                    $scope.searchJList = []; //지번주소 검색 결과 목록\r\n                    $scope.moreAddress = false; //지번주소검색 나머지 주소 입력\r\n                    $scope.seq3_J_1_flag = false; // 지번주소검색 -> 도로명\r\n                    $scope.zipcode = \"\";\r\n                    $scope.addrData = null;   \r\n                    //$scope.editMode = false; //배송지 수정 모드 \r\n                    $(\"#inp_seq1_J_1\").val(\"\");\r\n                    $(\"#key1_seq1_N_1\").val(\"\");\r\n                    $(\"#key2_seq1_N_1\").val(\"\");\r\n                    $(\"#key3_seq1_N_1\").val(\"\");\r\n                    $(\"#key4_seq1_N_1\").val(\"\");\r\n                    $(\"#key5_seq1_N_1\").val(\"\");\r\n                    $scope.address_post = \"\";\r\n                    $scope.address1 = \"\";\r\n                    $scope.address2 = \"\";\r\n                    $scope.inpcell1 = \"010\";\r\n                    $scope.inpcell2 = \"\";\r\n                    $scope.inpcell3 = \"\";                    \r\n                    if(type == undefined || type == \"all\"){                         \r\n                        $scope.addressTab = false ;//지번주소/도로명주소 탭 선택 \r\n                        $scope.inprmitnm = \"\";//받는분\r\n                        $scope.inpdlvpnm = \"\"; //배송지명 \r\n                        $scope.editMode = false; //배송지 수정 모드 \r\n                        //배송지리스트\r\n                        //console.log($scope.selectedAddress);\r\n                        if($scope.selectedAddress != null){\r\n                            //$scope.selectedAddress = null;\r\n                            $('input:radio[name=\"detail_list\"]').prop(\"checked\", false);\r\n                        }\r\n                    }\r\n                }\r\n                $scope.search_step1 = function(flag){\r\n                    $scope.s_init(\"sa_btn\");\r\n                    $scope.searchAddressFlag = flag;\r\n                }\r\n                //지번주소,도로명주소\r\n                $scope.search_step2 = function(flag){\r\n                    //$scope.s_init(\"sa_btn\");\r\n                    $scope.searchJListInput = true;//지번주소 검색\r\n                    $scope.searchJListInput2 = true;//도로명주소 검색\r\n                    $scope.searchJListFlag = false; //지번주소 검색 결과 목록 보기\r\n                    $scope.searchJList = []; //지번주소 검색 결과 목록\r\n                    $scope.moreAddress = false; //지번주소검색 나머지 주소 입력\r\n                    $scope.seq3_J_1_flag = false; // 지번주소검색 -> 도로명\r\n                    \r\n                    $scope.addressTab = flag;\r\n                }              \r\n                \r\n                $scope.myAddrChange = function(flag){                    \r\n                    if(flag && $scope.giftData.user_addr_info == undefined){\r\n                       //데이타가 없는 경우 동작을 막음    \r\n                       return;\r\n                    }\r\n                    $scope.s_init();       \r\n                    $scope.myAddr_tab = flag;   \r\n                    //$scope.giftData.ord_addr_info 정보가 있으면 새로운 배송지에 그 내용을 입력 20161208                  \r\n                    if($scope.giftData.ord_addr_info != undefined && $scope.giftData.ord_addr_info != null && !flag){                        \r\n                        $scope.selectedAddress = $scope.giftData.ord_addr_info;\r\n                        $scope.editMyAddr();\r\n                        $scope.editMode = false;\r\n                    }                      \r\n                }\r\n                $scope.addrLayer_show =function(flag){\r\n                    $scope.addr_layer = flag;\r\n                }\r\n                //내배송지 수정\r\n                $scope.list_edit = function (id, item){\r\n                    $(\"#tl_d\" + id).trigger(\"click\");\r\n                    $scope.selectedAddress = item;\r\n                    $scope.editMyAddr();\r\n                    $scope.addrLayer_show(false);  \r\n                    //$scope.addrLayer_select();\r\n                }\r\n                //내배송지 수정\r\n                var delete_flag = false;\r\n                $scope.list_del = function (id, item){\r\n                    $(\"#tl_d\" + id).trigger(\"click\");\r\n                    //간편회원의 경우 기본배송지가 없어 마지막 배송지를 남겨둔다\r\n                    if($(\"#filterType >ul >li\").size() == 1){\r\n                        alert(\"마지막 배송지입니다.\");\r\n                        return false;\r\n                    }                  \r\n                    \r\n                    if(confirm('내 배송지 목록에서 삭제하시겠습니까?')){\r\n                        if (!delete_flag) {\r\n                            //배송지 삭제 더블클릭 방지 \r\n                            delete_flag = true;\r\n                            //배송지 삭제 \r\n                            $.ajax({\r\n                                type: \"post\", \r\n                                async: false, \r\n                                url: LotteCommon.delete_address_list + \"?dlvp_sn=\"+item.dlvp_sn+\"&index=\"+item.idx+\"&mbr_no=\"+$scope.loginInfo.mbrNo, \r\n                                success: function(resp) {\r\n                                    if(resp.result.response_code == \"0000\"){\r\n                                    \titem.del = true;\r\n                                    }\r\n                                    delete_flag = false;\r\n                                    return true;\r\n                                },\r\n                                error:function(){\r\n                                    delete_flag = false;\r\n                                }\r\n                            });\r\n                        } else {\r\n                            alert(\"배송지 삭제중입니다.\");\r\n                        }\r\n                    }                    \r\n                    \r\n                }\r\n                \r\n                //내배송지 수정 버튼\r\n                //$scope.is_modified = false;\r\n                $scope.editMyAddr = function(){\r\n                    \r\n                    if($scope.selectedAddress == null){ //|| $scope.selectedAddress.is_default\r\n                        for(var i=0; i<$scope.giftData.user_addr_info.addr_list.length; i++){\r\n                            if($scope.giftData.user_addr_info.default_addr.addr_name == $scope.giftData.user_addr_info.addr_list[i].addr_name){\r\n                                $scope.selectedAddress = $scope.giftData.user_addr_info.addr_list[i];        \r\n                            }\r\n                        }\r\n                        //alert('기본 배송지는 마이롯데 > 회원정보에서 수정 가능합니다.');\r\n                        //$scope.list_edit(, $scope.selectedAddress);\r\n                        //return false;\r\n                    }\r\n                    \r\n                    $scope.editMode = true;\r\n                    $scope.myAddr_tab = false; //받는분\r\n                    $scope.searchAddressFlag = false; //주소찾기\r\n                    \r\n                    //수정항목세팅\r\n                    //console.log($scope.selectedAddress.addr_post);\r\n                    $scope.inprmitnm = $scope.selectedAddress.r_name ? $scope.selectedAddress.r_name : \"\";//받는분\r\n                    $scope.inpdlvpnm = $scope.selectedAddress.addr_name ? $scope.selectedAddress.addr_name : \"\"; //배송지명    \r\n                    $scope.address_post = $scope.selectedAddress.addr_post ? $scope.selectedAddress.addr_post : \"\";\r\n                    $scope.address1 = $scope.selectedAddress.addr1 ? $scope.selectedAddress.addr1 : \"\";\r\n                    $scope.address2 = $scope.selectedAddress.addr2 ? $scope.selectedAddress.addr2 : \"\";\r\n\r\n                    if ($scope.selectedAddress.addr_tel) {\r\n                        var telArr = $scope.selectedAddress.addr_tel.split(\"-\");\r\n\r\n                        if (telArr && telArr.length == 3) {\r\n                            $scope.inpcell1 = telArr[0];\r\n                            $scope.inpcell2 = parseInt(telArr[1], 10);\r\n                            $scope.inpcell3 = parseInt(telArr[2], 10);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                //배송지목록 선택완료\r\n                $scope.addrLayer_select = function(){\r\n                    \r\n                    if(!$('input:radio[name=\"detail_list\"]').is(\":checked\")){\r\n                        $scope.selectedAddress = null;\r\n                        alert(\"배송지를 선택해 주세요\");\r\n\t\t\t            return false;\r\n\t\t            };\r\n                    var index = $('input:radio[name=\"detail_list\"]:checked').val();\r\n                    $scope.selectedAddress = $scope.giftData.user_addr_info.addr_list[index]; //선택된 배송지\r\n                    //세팅\r\n                    $scope.giftData.user_addr_info.default_addr = {};                   \r\n                    //$scope.giftData.user_addr_info.default_addr.addr_name = $scope.selectedAddress.r_name +\" (\"+ $scope.selectedAddress.addr_name +\")\";\r\n                    $scope.giftData.user_addr_info.default_addr.r_name = $scope.selectedAddress.r_name;\r\n                    $scope.giftData.user_addr_info.default_addr.addr_name = $scope.selectedAddress.addr_name;\r\n                    $scope.giftData.user_addr_info.default_addr.addr_post =  $scope.selectedAddress.addr_post;\r\n                    //$scope.giftData.user_addr_info.default_addr.addr_detail = $scope.selectedAddress.addr1 +\" \"+ $scope.selectedAddress.addr2; \r\n                    $scope.giftData.user_addr_info.default_addr.addr1 = $scope.selectedAddress.addr1; \r\n                    $scope.giftData.user_addr_info.default_addr.addr2 = $scope.selectedAddress.addr2; \r\n                    $scope.giftData.user_addr_info.default_addr.addr_tel = $scope.selectedAddress.addr_tel;\r\n                    $scope.giftData.user_addr_info.default_addr.dlvp_sn = $scope.selectedAddress.dlvp_sn; //20161208\r\n                    $scope.addrLayer_show(false);    \r\n                }\r\n                // 주소검색\r\n                //  1. 지번/도로명 주소 검색 (proc_div='S'일 때) <br/>\r\n                //  3. 지번->도로명 or 도로명->지번 변환 (proc_div='M'일 때)\r\n                // @param deli_cnt 상품별 배송지 순번\r\n                // @param proc_div S:조회 | M:변환\r\n                // @param addr_gbn J:지번 | N:도로명\r\n                $scope.searchAddress = function(deli_cnt, proc_div, addr_gbn){\r\n                    var reqData = {\r\n                        \"proc_div\" : proc_div,\r\n                        \"addr_gbn\" : addr_gbn,\r\n                        \"deli_cnt\" : deli_cnt\t  \r\n                    };\r\n                    var layerId = \"\";\r\n                    var callBack = null;\r\n                    var inputval = \"\";\r\n                    if (proc_div==\"S\" && addr_gbn ==\"J\"){ // 지번 주소 조회\r\n                        inputval = $.trim($(\"#inp_seq1_J_1\").val());\r\n                        if (inputval.length <= 0) { // validation\r\n                            alert(\"읍/면/동을 입력해 주세요.\");\r\n                            $(\"#inp_seq1_J_1\").focus();\r\n                            return false;\r\n                        }\r\n                        reqData.dong_nm = inputval;\r\n                        callBack = function(resp) {\r\n                            $scope.searchJListFlag = true;\r\n                            $scope.searchJList = resp.addr_lst;                            \r\n                        };\r\n                    }else if(proc_div==\"M\" && addr_gbn ==\"J\"){ //지번 -> 도로명 (나머지 주소 입력 후)\r\n                        \r\n                        var $addr2 = $(\"#inp_seq2_J_1\");\r\n                        if ($.trim($addr2.val()).length <= 0) { // validation\r\n                            alert(\"상세주소를 입력해 주세요.\");\r\n                            $addr2.focus();\r\n                            return false; // function exit\r\n                        }                        \r\n                        reqData.zipcode = $scope.zipcode;\r\n                        reqData.addr1 = $scope.txt_seq2_J_1;\r\n                        reqData.addr2 = $(\"#inp_seq2_J_1\").val(); //$scope.inp_seq2_J_1;\r\n\r\n                        callBack = function(resp) {\r\n                            //console.log(\"t3\");\r\n                            $scope.addrData = resp;\r\n                            $scope.searchJListFlag = false;\r\n                            $scope.moreAddress = false;\r\n                            $scope.seq3_J_1_flag = true;\r\n                            $scope.noneData = false;\r\n                            if($scope.addrData.s_addr == undefined  &&\r\n                                $scope.addrData.n_addr == undefined &&\r\n                                $scope.addrData.ipt_addr2 != undefined){\r\n                                $scope.noneData = true; //검색결과가 둘다 없는 경우\r\n                                //데이타 가공\r\n                                $scope.addrData.ipt_addr2.post_addr = $scope.addrData.ipt_addr2.addr1;\r\n                                $scope.addrData.ipt_addr2.dtl_addr = $scope.addrData.ipt_addr2.addr2;\r\n                            }\r\n                            \r\n                        };                        \r\n                    }else if(proc_div==\"S\" && addr_gbn ==\"N\"){\r\n                        var $key1 = $(\"#key1_seq1_N_1\");\r\n                        var $key2 = $(\"#key2_seq1_N_1\");\r\n                        var $key3 = $(\"#key3_seq1_N_1\");\r\n                        var $key4 = $(\"#key4_seq1_N_1\");\r\n                        var $key5 = $(\"#key5_seq1_N_1\");\r\n                        // validation start\r\n                        var invalid = false;\r\n                        $key1.add($key2).add($key3).each(function() {\r\n                            if ($.trim($(this).val()).length <= 0) {\r\n                                alert(\"조회 필수항목을 입력해 주세요.\");\r\n                                $(this).focus();\r\n                                invalid = true;\r\n                                return false; // each break\r\n                            }\r\n                        });\r\n                        if (invalid) {\r\n                            return false; // function exit\r\n                        }\r\n                        // validation end\r\n                        reqData.keyword1 =  $key1.val();\r\n                        reqData.keyword2 =  $key2.val();\r\n                        reqData.keyword3 =  $key3.val();\r\n                        if ($key4.val() != \"\"){\r\n                            // 건물본번호가 입력되었을 때\r\n                            reqData.keyword4 =  $key4.val();\r\n                        }\r\n                        if ($key5.val() != \"\"){\r\n                            // 건물명이 입력되었을 때\r\n                            reqData.keyword5 =  $key5.val();\r\n                        }\r\n                        callBack = function(resp) {\r\n                        \t$scope.searchJListFlag = true;\r\n                        \t$scope.searchJList = resp.addr_lst;\r\n                        };\r\n                    }\r\n                    \r\n                    // 배송불가지역 확인 추가\r\n                    reqData.order_no = $scope.giftData.orderNo;\r\n                    reqData.ord_dtl_sn = $scope.giftData.ordDtlSn;\r\n                    \r\n                    /*\r\n                    $http({\r\n                        method : 'post',                        \r\n                        url : LotteCommon.searchAddress + \"?\" + $scope.baseParam,\r\n                        data : reqData,\r\n                        headers: {'Content-Type' : 'application/x-www-form-urlencoded'}\r\n                    }).success(function(data) {\r\n                        callBack(data);\r\n                    }).error(function (){});\r\n                    */\r\n                    $http.get(LotteCommon.searchAddress, {params:reqData})\r\n                        .success(function(data) {\r\n                        \tif(data.result_code == \"IMPS_RGN\" || data.result_code == \"ETC\"){\r\n                        \t\tvar msg = data.error_msg;\r\n                        \t\tif(msg == undefined || msg == \"\"){\r\n                        \t\t\tmsg = \"배송지를 조회하지 못했습니다.\";\r\n                        \t\t}\r\n                        \t\talert(msg);\r\n                        \t\treturn;\r\n                        \t}\r\n                        \t\r\n                        \tif(callBack != undefined){\r\n                        \t\tcallBack(data);\r\n                        \t}\r\n                        })\r\n                        .error(function(){});\r\n                }\r\n                \r\n                \r\n                //검색결과\r\n                //  2. 주소 검색 결과에서 주소 선택 시 처리 (proc_div='S'일 때) <br/>\r\n                //  4. 지번->도로명 or 도로명->지번 변환결과 설정 (proc_div='M'일 때)\r\n                // @param deli_cnt 상품별 배송지 순번\r\n                // @param proc_div S:조회 | M:변환\r\n                // @param addr_gbn J:지번 | N:도로명\r\n                // @param post_no 지번 우편번호\r\n                // @param post_addr 지번 우편주소\r\n                // @param dtl_addr 지번 상세주소\r\n                // @param bldg_nm 도로명 건물명            \r\n                $scope.other_address_post = \"\";\r\n                $scope.other_address1 = \"\";\r\n                $scope.other_address2 = \"\";\r\n                $scope.addrGubun = false;// false 지번선택, true 도로명선택\r\n                $scope.selectAddress = function(proc_div, item, index){\r\n                    //addr_gbn, post_no, post_addr, dtl_addr, bldg_nm\r\n                    //console.log(\"click ---- \");\r\n                    if(proc_div == \"SJ\"){\r\n                        $scope.searchJListInput = false;\r\n                        $scope.searchJListInput2 = false;\r\n                        $scope.txt_seq2_J_1 = item.post_addr;\r\n                        $scope.inp_seq2_J_1 = item.dtl_addr;\r\n                        $scope.zipcode = item.post_no;\r\n                        $scope.searchJListFlag = false; //지번주소 검색 결과 목록\r\n                        $scope.moreAddress = true; //지번주소검색 나머지 주소 입력                        \r\n                        $(\"#inp_seq2_J_1\").val(\"\");\r\n                        $(\"#inp_seq2_J_1\").focus();\r\n                    }else if(proc_div == \"MJa\"){ //지번주소 선택\r\n                        $scope.searchAddressFlag = false;\r\n                        $scope.seq3_J_1_flag = false;\r\n                        $scope.address_post = item.post_no;\r\n                        $scope.address1 = item.post_addr;\r\n                        $scope.address2 = item.dtl_addr ;//+ \" (\" + item.bldg_nm + \")\";\r\n                        //도로명주소도 저장\r\n                        $scope.other_address_post = $scope.addrData.n_addr[index].post_no;\r\n                        $scope.other_address1 = $scope.addrData.n_addr[index].post_addr;\r\n                        $scope.other_address2 = $scope.addrData.n_addr[index].dtl_addr;\r\n                        $scope.addrGubun = false;\r\n                    }else if(proc_div == \"MJ\"){ //도로명주소 선택\r\n                        $scope.searchAddressFlag = false;\r\n                        $scope.seq3_J_1_flag = false;\r\n                        $scope.address_post = item.post_no;\r\n                        $scope.address1 = item.post_addr;\r\n                        $scope.address2 = item.dtl_addr;// + \" (\" + item.bldg_nm + \")\";                        \r\n                        //지번주소도 저장\r\n                        try{\r\n\t                        $scope.other_address_post = $scope.addrData.s_addr[index].post_no;\r\n\t                        $scope.other_address1 = $scope.addrData.s_addr[index].post_addr;\r\n\t                        $scope.other_address2 = $scope.addrData.s_addr[index].dtl_addr;\r\n                        }catch(e){\r\n                        \t$scope.other_address_post = \"\";\r\n                        \t$scope.other_address1 = \"\";\r\n                        \t$scope.other_address2 = \"\";\r\n                        }\r\n                        $scope.addrGubun = true;\r\n                    }else if(proc_div == \"MJ_c\"){ //고객인입력한주소 : 검색 결과가 없는경우\r\n                        $scope.searchAddressFlag = false;\r\n                        $scope.seq3_J_1_flag = false;\r\n                        $scope.address_post = item.post_no;\r\n                        $scope.address1 = item.post_addr;\r\n                        $scope.address2 = item.dtl_addr;// + \" (\" + item.bldg_nm + \")\";                                                \r\n                        $scope.other_address_post = \"\";\r\n                        $scope.other_address1 = \"\";\r\n                        $scope.other_address2 = \"\";// + \" (\" + item.bldg_nm + \")\"; \r\n                        $scope.addrGubun = $scope.addressTab;\r\n                    }\r\n                    \r\n                }\r\n                \r\n                \r\n                //입력필드 검사\r\n                var checkField = function(message, fieldID){\r\n                    var str = $(fieldID).val();\r\n                    if(str == \"\"){\r\n                        alert(message + \" 입력해주세요.\");\r\n                        $(fieldID).focus();\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n                $scope.checkField = checkField;\r\n                \r\n                $scope.writeMessage = false;\r\n                $scope.messageChange = function(){\r\n                    if($(\"#message\").val() == 'write'){\r\n                        $scope.writeMessage = true;\r\n                    }                    \r\n                }\r\n                //현재 선택된 최종 주소 정보 \r\n                $scope.getlastAddress = function(){\r\n                    var result = null;                                        \r\n                    //console.log($scope.myAddr_tab, $scope.editMode);\r\n                    //console.log($scope.giftData.user_addr_info.default_addr);\r\n                    var msgData = $(\"#message\").val();\r\n                    if($scope.writeMessage){\r\n                        msgData = $(\"#message2\").val();\r\n                    }\r\n                    \r\n                    //로그인\r\n                    if($scope.loginInfo.isLogin){\r\n                        if($scope.myAddr_tab && !$scope.editMode){ //기본 디폴트 배송지 또는 다른 배송지 선택 ===================\r\n                            result = $scope.giftData.user_addr_info.default_addr;\r\n                            result.message = msgData;\r\n                            result.stnm_addr_post = '';\r\n                            result.stnm_addr1 = '';\r\n                            result.stnm_addr2 = '';\r\n                        }else if(!$scope.myAddr_tab && $scope.editMode){ //수정하기 ======================================\r\n                            //---개선 이후 사용 안함 (수정기능삭제)---\r\n                            if($scope.searchAddressFlag){\r\n                                alert(\"주소찾기를 완료해주세요.\");\r\n                                return {};\r\n                            }\r\n                            //데이타 체크\r\n                            if(checkField(\"받는분을\", \"#inprmitnm1\") ||\r\n                                //checkField(\"배송지명을\", \"#inpdlvpnm\") ||\r\n                                checkField(\"주소를\", \"#address1\") ||\r\n                                checkField(\"나머지 주소를\", \"#address2\") ||\r\n                                checkField(\"전화번호를\", \"#inpcell2\") ||\r\n                                checkField(\"전화번호를\", \"#inpcell3\")){return {}};\r\n                                \r\n                            //결과 \r\n                            result = {\r\n                              \"idx\" : $scope.selectedAddress.idx,\r\n                              \"is_default\" : $scope.selectedAddress.is_default,\r\n                              \"dlvp_sn\" : $scope.selectedAddress.dlvp_sn,\r\n                              \"r_name\" : $(\"#inprmitnm1\").val(),\r\n                              //\"addr_name\" : $(\"#inpdlvpnm\").val(),\r\n                              \"addr_post\" : $scope.address_post,\r\n                              \"addr1\" : $(\"#address1\").val(),\r\n                              \"addr2\" : $(\"#address2\").val(),\r\n                              \"addr_tel\" :$scope.inpcell1 +\"-\"+ $(\"#inpcell2\").val() +\"-\"+ $(\"#inpcell3\").val(),\r\n                              \"message\" : msgData\r\n                              //\"add_list_flag\" : $(\"#addCall:checked\").length    \r\n                            }                         \r\n                        }else if(!$scope.myAddr_tab && !$scope.editMode){ //새로운 배송지 ===================\r\n                            if($scope.searchAddressFlag || $scope.address_post == \"\"){\r\n                                alert(\"주소찾기를 완료해주세요.\");\r\n                                return {};\r\n                            }\r\n                            //데이타 체크\r\n                            if(checkField(\"받는분을\", \"#inprmitnm1\") ||\r\n                                //checkField(\"배송지명을\", \"#inpdlvpnm\") ||\r\n                                checkField(\"주소를\", \"#address1\") ||\r\n                                checkField(\"나머지 주소를\", \"#address2\") ||\r\n                                checkField(\"전화번호를\", \"#inpcell2\") ||\r\n                                checkField(\"전화번호를\", \"#inpcell3\")){return {}};\r\n                            //결과 \r\n                            result = $scope.getResult(\"#inprmitnm1\", msgData);\r\n                        }\r\n                        \r\n                    }else{  //비로그인\r\n                            //console.log($scope.address_post);\r\n                            if($scope.searchAddressFlag || $scope.address_post == \"\" || $scope.address_post == undefined){\r\n                                alert(\"주소찾기를 완료해주세요.\");\r\n                                return {};\r\n                            }                        \r\n                            //데이타 체크\r\n                            if(checkField(\"받는분을\", \"#inprmitnm2\") ||\r\n                                checkField(\"주소를\", \"#address1\") ||\r\n                                checkField(\"나머지 주소를\", \"#address2\") ||\r\n                                checkField(\"전화번호를\", \"#inpcell2\") ||\r\n                                checkField(\"전화번호를\", \"#inpcell3\")){return {}};\r\n                            //결과 \r\n                            result = $scope.getResult(\"#inprmitnm2\", msgData);\r\n                    }\r\n                    //console.log(result.message);\r\n                    return result;\r\n                }\r\n                \r\n                //20161208\r\n                $scope.getResult = function(nameid, msgData){\r\n                    var result = {\r\n                          \"r_name\" : $(nameid).val(),\r\n                          \"message\" : msgData,\r\n                          \"addr_tel\" :$scope.inpcell1 +\"-\"+ $(\"#inpcell2\").val() +\"-\"+ $(\"#inpcell3\").val()                        \r\n                    };\r\n                    //새로운배송지 && 기입력된정보\r\n                    if($scope.giftData.ord_addr_info != undefined && $scope.giftData.ord_addr_info != null && ($(\"#address1\").val() == $scope.giftData.ord_addr_info.addr1)){\r\n                        result.dlvp_sn =  $scope.giftData.ord_addr_info.dlvp_sn;\r\n                        result.stnm_addr_post = '';\r\n                        result.stnm_addr1 = '';\r\n                        result.stnm_addr2 = '';\r\n                        result.addr_post = '';\r\n                        result.addr1 = '';\r\n                        result.addr2 = '';                            \r\n                    }else{\r\n                        result.dlvp_sn =  '';\r\n                        if($scope.addrGubun){\r\n                            console.log(\"도로명주소 입력한경우\");    \r\n                            result.addr_post = $scope.other_address_post;\r\n                            result.addr1 = $scope.other_address1;\r\n                            result.addr2 = $scope.other_address2;\r\n                            result.stnm_addr_post = $scope.address_post;\r\n                            result.stnm_addr1 = $(\"#address1\").val();\r\n                            result.stnm_addr2 = $(\"#address2\").val();                                                        \r\n                        }else{ \r\n                            console.log(\"지번주소 입력한경우\");    \r\n                            result.stnm_addr_post = $scope.other_address_post;\r\n                            result.stnm_addr1 = $scope.other_address1;\r\n                            result.stnm_addr2 = $scope.other_address2;\r\n                            result.addr_post = $scope.address_post;\r\n                            result.addr1 = $(\"#address1\").val();\r\n                            result.addr2 = $(\"#address2\").val();                            \r\n                        }\r\n                    }                                             \r\n                    return result;\r\n                }\r\n            }\r\n        };\r\n        \r\n\t}]);\r\n\r\n})(window, window.angular);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n(function(window, angular, undefined) {\n    'use strict';\n\n    var app = angular.module('app', [\n        'lotteComm',\n        'lotteSrh',\n        'lotteSideCtg',\n        // 'lotteSideMylotte',\n        'lotteCommFooter',\n        'addressInfo'\n    ]);\n\n    app.controller('giftcheckCtrl', ['$scope', 'LotteCommon','$http','commInitData', function($scope, LotteCommon,$http,commInitData) {\n        $scope.loading = false;\n        $scope.state = 0; //0 일반, 1 거절, 2 이미 취소,거절 \n        $scope.showWrap = true;\n        $scope.contVisible = true;\n        $scope.subTitle = \"선물 확인\"; //서브헤더 타이틀\n        $scope.order_no = commInitData.query[\"orderNo\"];\n        $scope.key = decodeURI(commInitData.query[\"key\"]);\n        $scope.test = decodeURI(commInitData.query[\"test\"]);\n        $scope.presentListUrl =  LotteCommon.presentListUrl +'?'+baseParam; //선물함 경로\n        $scope.presentShop = LotteCommon.mainUrl +'?'+baseParam+'&dispNo=5556743'; //선물매장으로가기\n        //앱다운로드 배너 \n        $scope.appBanner = null;\n        $http.get(LotteCommon.mainPopupData, {params:{}})\n        .success(function(data) {\n            $scope.appBanner = data.app_down_popup[0];\n        });        \n        \n        $scope.load = function(){\n            var reqParam = {\n                orderNo :  $scope.order_no,\n                KEY : $scope.key,\n                mbr_no : $scope.loginInfo.mbrNo\n            };\n            //basic data\n            $http({url: LotteCommon.giftCheckUrl,\n                data: $.param(reqParam),\n                method: 'POST',\n                headers: {'Content-Type' : 'application/x-www-form-urlencoded'}\n                }).success(function(data) {\n                    $scope.giftData = data;\n                    /*gift_state\n                    0 : 기본\n                    1 : 배송지정보 x -> 선물함으로 이동\n                    2 : 주문취소 -> 거절화면으로 이동\n                    3 : 거절 -> 거절화면으로 이\n                    */\n                    //test code\n                    if($scope.test == \"0\"){\n                        $scope.giftData.gift_state = 0;\n                    }\n                \n                    if($scope.giftData.gift_state == \"1\"){\n                        //선물함으로 이동\n                        location.href =  $scope.presentListUrl;\n                    }else if($scope.giftData.gift_state == \"2\" || $scope.giftData.gift_state == \"3\"){\n                            $scope.state = 2;\n                            $scope.subTitle = \"선물 확인 완료\";                            \n                            $scope.checkGiftPage = true; //선물확인 -> 확인 완료(true)\n                            $scope.getGoodsList();                          \n                    }else if($scope.giftData.gift_state == \"4\"){ //20160907 add case\n                            $scope.state = 4;\n                            $scope.subTitle = \"선물 확인\";                            \n                            $scope.checkGiftPage = true; //선물확인 -> 확인 완료(true)\n                            $scope.getGoodsList();                          \n                    }else if($scope.giftData.gift_state == undefined){\n                        console.log(\"데이타 로드 실패\");\n                        return;\n                    }else{\n                        $scope.loading = true; //선물확인 페이지 로딩\n                    }\n                \n                    if($scope.giftData.gift_msg_info.msg != undefined){\n                        $scope.giftData.gift_msg_info.msg = $scope.giftData.gift_msg_info.msg.replace(/\\n/g, \"<br />\");\n                    }\n                    //로그인한 상태에서 사용자가 입력한 배송지가 없으면\n                    if($scope.loginInfo.isLogin && $scope.giftData.user_addr_info != undefined){\n                        $scope.myAddr_tab = true;\n                    }\n                \n                    if($scope.giftData.gift_msg_info.bg_color == undefined){\n                        $scope.giftData.gift_msg_info.bg_color = \"#ffffff\";\n                    }\n                    //옵션 수량 관련 체크 하여 품절인것만 모음 ========== 옵션 품절 처리 ==============\n                    $scope.zeroOpt = [];\n                    if($scope.giftData.gift_prd_info.opt_item_lst != undefined){\n                        var optlist = $scope.giftData.gift_prd_info.opt_item_lst;\n                        if(optlist.length > 1){\n                            for(var i=0; i< optlist.length; i++){\n                                //if(optlist[i].inv_qty == 0){\n                                    $scope.zeroOpt.push(optlist[i].opt_tval.split(\" x \"));\n                                //}\n                            }\n                        }                           \n                    }\n                    //console.log($scope.zeroOpt);\n                    //$scope.loginInfo.isLogin = true;\n                    \n                    // 배송불가지역 확인 추가\n\t\t\t\t\t$scope.giftData.orderNo = $scope.order_no;\n\t\t\t\t\t$scope.giftData.ordDtlSn = $scope.giftData.gift_prd_info.ord_dtl_sn;\n                \n                    //$scope.giftData.ord_addr_info 정보가 있으면 새로운 배송지에 그 내용을 입력 20161125                    \n                    if($scope.giftData.ord_addr_info != undefined && $scope.giftData.ord_addr_info != null && $scope.giftData.ord_addr_info.addr_post != undefined){   \n                        $scope.myAddrChange(false);\n                    }                    \n\t\t\t\t\t\n                }).error(function () {});\n            \n\n        }\n        setTimeout(function(){\n            $scope.load();    \n        }, 500);\n        \n    }]);\n\n    app.directive('lotteContainer', ['LotteCommon','$http','LotteLink', function(LotteCommon, $http, LotteLink) {\n        return {\n            templateUrl : '/lotte/resources_dev/mylotte/giftcheck_container.html',\n            replace : true,\n            link : function($scope, el, attrs) {\n                //appdown\n                $scope.gotoApp = function(){\n                    LotteLink.appDeepLink(\"lotte\", \"http://m.lotte.com\", null, null); // 앱 딥링크 params : lotte/ellotte, 딥링크URL (없을 경우 default 현재 URL, tclick, referrer)\n                }\n                \n                $scope.checkGiftPage = false; //선물확인 -> 확인 완료(true)\n                //선물확인, 거절\n                $scope.confirm_submit = function(flag){\n                    //submit\n                    var reqParam = {\n                        order_no :  $scope.order_no,\n                        key : $scope.key,\n                        ordDtlSn : $scope.giftData.gift_prd_info.ord_dtl_sn,\n                        addr1:\"\",\n                        addr2:\"\",\n                        addr_name:\"\",\n                        addr_post:\"\",\n                        addr_tel:\"\",\n                        password:\"\",\n                        r_name:\"\",\n                        message:\"\",\n                        dlvp_sn : \"\"\n                    };                    \n                    if(flag){//받기\n                        //data check    \n                        reqParam = $scope.getlastAddress(); //배송정보\n                        if(reqParam.message == undefined){\n                            return;\n                        } \n                        //console.log(reqParam);\n                        if($scope.checkField(\"비밀번호를\", \"#pass1\") ||\n                            $scope.checkField(\"비밀번호를\", \"#pass2\")){\n                            return;\n                        }\n                        if($(\"#pass1\").val() != $(\"#pass2\").val()){\n                            alert(\"비밀번호가 일치하지 않습니다.\");\n                            $(\"#pass2\").val(\"\");\n                            $(\"#pass2\").focus();\n                            return;\n                        }\n                        if($(\"#agreeInfoCheck:checked\").length == 0){\n                            alert(\"선물 수령을 위한 정보제공에 대하여 동의해주세요.\");\n                            return;                            \n                        }\n                        reqParam.ordDtlSn = $scope.giftData.gift_prd_info.ord_dtl_sn;\n                        reqParam.order_no = $scope.order_no;\n                        reqParam.key = $scope.key;\n                        reqParam.password = $(\"#pass1\").val();\n                        reqParam.reject_msg = \"\";\n                    }else{ //거절 이후 화면                         \n                        if($(\"#refuse_message\").val() == ''){\n                            alert(\"거절 메시지를 선택해주세요.\");\n                            return;\n                        }                        \n                        reqParam.reject_msg = $(\"#refuse_message\").val();\n                        $scope.state = 2;\n                    }\n                    $http.get(LotteCommon.confirm_gift, {params:reqParam})\n                        .success(function(data) {\n                            if(data.result.result_code == \"0000\"){                                \n                                $(window).scrollTop(0);\n                                $scope.subTitle = \"선물 확인 완료\";\n                                $scope.checkGiftPage = true; //선물확인 -> 확인 완료(true)\n                                $scope.getGoodsList();\n                            }else{\n                                // 조회 실패\n                            \tif(data.result != undefined){\n\t                                var err_msg = data.result.error_msg;\n\t                                if(err_msg == undefined || err_msg == \"\"){\n\t                                \terr_msg = \"선물 확인 중 에러가 발생했습니다.\";\n\t                                }\n\t                                alert(err_msg);\n\t                                console.log(data.result.result_code, data.result.error_msg);\n                            \t}\n                                if(!flag){\n                                    location.reload();//거절이면 리로드\n                                }\n                            }\n\n                        }).error(function (data) {\n                            console.log(data.result.result_code, data.result.error_msg);\n                            if(data.result.result_code == \"ETC\"){\n                                location.reload();\n                            }\n                    });\n                }                \n                //받기 완료 후 이거어때 리스트 호출 \n                \n                $scope.getGoodsList = function(){\n                    $http.get(LotteCommon.gift_epilogue, {params:null})\n                        .success(function(data) {\n                            $scope.recom_prd_lst = data.recom_prd_lst;\n                        }).error(function () {\n                    });                                        \n                }\n                \n                //선물 거절 layer ==============================\n                $scope.refuseLayerFlag = false;\n                $scope.refuse_rLayer = function(flag){\n                    if(flag){\n                        $(window).scrollTop(0);\n                    }                    \n                    $scope.refuseLayerFlag = flag;\n                }\n\n                //옵션 변경 ===============================\n                $scope.optFlag = false; //옵션변경창\n                $scope.changeOpt = function(){\n                    $scope.optFlag = !$scope.optFlag;\n                    if($scope.optFlag){\n                        $scope.initOptCheck() ; //첫번째 옵션 초기화 = 옵션 품절 처리 ==\n                    }\n                        \n                }\n                \n                $scope.getOptionString = function(){\n                    var opts = [];\n                    var sel;\n                    var len = $scope.giftData.gift_prd_info.opt_list.length;\n                    for(var i=0; i<len; i++){\n                        sel = $(\"#prod_option_\" + i);                        \n                        opts.push(sel.val());//0721 수정\n                    }\n                    return opts.join(\" x \");\n                }     \n                $scope.saveOpt = function(){\n                    if($scope.giftData.gift_prd_info.opt_item_lst == undefined){ return; }\n\n                    var opt = $scope.getOptionString();\n                    var no = -1;\n                    var arr = $scope.giftData.gift_prd_info.opt_item_lst;\n                    var len = arr.length;\n                    var item;\n\n                    var optvalue = \"\"; \n                    var old_no = \"\";\n                    var item_qty = 0;\n                    for(var i=0; i<$scope.giftData.gift_prd_info.opt_list.length; i++){\n                        if(i > 0){\n                            optvalue += \" x \";\n                        }\n                        optvalue += $scope.giftData.gift_prd_info.selected_opt[i].opt_value;//0721 수정\n                    }\n                    \n                    for(i=0; i<len; i++){\n                        item = arr[i];\n                        if(item.opt_tval == opt){ //0721 수정\n                            no = item.item_no;\n                            item_qty = item.inv_qty;\n                        }\n                        if(item.opt_tval == optvalue){//0721 수정\n                            old_no = item.item_no;\n                        }\n                    }\n                    if(old_no == no){\n                        alert(\"동일한 옵션을 선택하셨습니다.\");\n                        return;\n                    }                    \n                    \n                    if(item_qty == 0){\n                        alert(\"재고 수량이 부족합니다.\");\n                        return;\n                    }                    \n                    \n                    if(no < 0){ return; }\n\n                    var path = LotteCommon.presentDetailOption;\n                    var param = {\n                        ord_no\t\t:$scope.order_no,\n                        ord_dtl_sn\t:$scope.giftData.gift_prd_info.ord_dtl_sn,\n                        goods_no\t:$scope.giftData.gift_prd_info.goods_no,\n                        item_no\t\t:old_no,\n                        chg_item_no\t: no,\n                        rel_qty\t\t: $scope.giftData.gift_prd_info.rel_qty                        \n                    };\n                    //원주문 번호, 원주문일련번호, 상품번호, 변경 된 단품번호\n                    \n                    //$scope.UIStatus.isDataLoading = true;\n                    $http.get(path, {params:param})\n                    .success(function(data){                        \n                        //$scope.UIStatus.isDataLoading = false;\n                        if(data.result_code == \"0000\"){\n                            alert(\"저장하였습니다.\");\n                            $scope.optFlag = false;\n                            //변경한 정보로 갱신\n                            for(var i=0; i<$scope.giftData.gift_prd_info.selected_opt.length; i++){\n                                $scope.giftData.gift_prd_info.selected_opt[i].opt_value =  $(\"#prod_option_\" + i).val();\n                            }\n                            $scope.giftData.gift_prd_info.ord_dtl_sn = data.ord_dtl_sn;\n                        }else{\n                            // 조회 실패\n                            var err_msg = data.error_msg;\n                            if(err_msg == undefined || err_msg == \"\"){\n                                err_msg = \"변경 사항을 저장하지 못했습니다.\";\n                            }\n                            alert(err_msg);\n                        }\n                    })\n                    .error(function(){\n                        console.log('Data Error : 옵션 변경');\n                        //$scope.UIStatus.isDataLoading = false;\n                    });\n                };        \n                \n                //상품 기술서 팝업 =================\n                $scope.productDetailPop = false; //product detail popup \n                $scope.detailHtml = \"\";                \n                $scope.ProductDetailLayer = function(){ //open\n                    var reqParam = {\n                        goods_no : $scope.giftData.gift_prd_info.goods_no\n                    };                    \n                    $http.get(LotteCommon.productProductDetailHtmlData, {params:reqParam})\n                        .success(function(result) {\n                            var data = result.max;\n                            data = $scope.replaceAll(data,'\\\\\"', '\"');\n                            data = $scope.replaceAll(data,\"&#34;\", \"'\");\n                            $scope.detailHtml = $scope.replaceAll(data,\"\\r\\n\", \"\");\n                            $scope.productDetailPop = true;\n                        }).error(function () {\n\n                    });                    \n                    \n                }                \n                $scope.closeProductDetailLayer = function(){ //close\n                    $scope.productDetailPop = false;\n                }\n                $scope.replaceAll = function (str, searchStr, replaceStr) {\n                    if (str != undefined && str != null && str != \"\") {\n                        str = str.split(searchStr).join(replaceStr);\n                    }\n                    return str;\n                };\n                //상품 기술서 팝업 =================   \n                \n                //링크 이동 \n                $scope.gotoLink = function(item, index){\n                    var tclick = \"&tclick=m_DC_SrhResult_Clk_Prd_idx\" + (index + 1);\n                    /*\n                    index = index + 1;\n                    if(index < 10){\n                        tclick = tclick + \"0\" + index;\n                    }else{\n                        tclick = tclick + index;\n                    }\n                    */\n                    window.location.href =  LotteCommon.prdviewUrl + \"?\" + $scope.baseParam + \"&goods_no=\" + item.goods_no + tclick;     \n                };  \n                \n                \n                 //옵션 선택시 품절상품인 것 찾아서 안보이게 처리 ======================= 옵션 품절 처리 ==========================\n                $scope.initOptCheck = function(){\n                    var key = [0];\n                    var optlist = $scope.giftData.gift_prd_info.opt_list;                    \n                    for(var k = 0; k < optlist[0].opt_value_lst.length;k++){\n                        key[0] = optlist[0].opt_value_lst[k];\n                        if(optlist.length > 1){\n                            if($scope.treecheck(key, 1, optlist)){    \n                                $(\"#prod_option_0\").find(\"option\").eq(k+1).hide();\n                            }    \n                        }else{                            \n                            if($scope.checkZero(key)){ //재고 0인 것이 있으면\n                                $(\"#prod_option_0\").find(\"option\").eq(k+1).hide();\n                            }    \n                        }\n                    }                     \n                }\n                \n                $scope.checkOptCnt = function(index){\n                    //초기화  : 선택한 옵션 밑으로 초기화              \n                    var optlist = $scope.giftData.gift_prd_info.opt_list;\n                    if(optlist.length > 1){\n                        var key = [];                        \n                        var checkTime = true; //선택한 하위 옵션 한개만 품절 설정하도록 함\n                        var result;\n                        for(var i=0; i< optlist.length; i++){\n                            if(i > index){\n                                $(\"#prod_option_\" + i).find(\"option\").show();\n                                optlist[i].selectID = 0;\n                                //하위 옵션 검색\n                                //중간 옵션인 경우\n                                if(i < optlist.length - 1){\n                                    if(checkTime){\n                                        //하위 옵션의 레벨만큼 루프돌면서 체크 \n                                        //하위 옵션이 전체가 품절이어야 함.\n                                        key.push(0);\n                                        for(var k = 0; k < optlist[i].opt_value_lst.length;k++){\n                                            key[i] = optlist[i].opt_value_lst[k];\n                                            if($scope.treecheck(key, i + 1, optlist)){\n                                                $(\"#prod_option_\" + i).find(\"option\").eq(k+1).hide();\n                                            }    \n                                        }                                                                             \n                                        checkTime = false;\n                                    }\n                                }else{ //마지막 옵션인 경우\n                                    if(checkTime){\n                                        key.push(0);\n                                        for(var k = 0; k < optlist[i].opt_value_lst.length;k++){\n                                            key[i] = optlist[i].opt_value_lst[k];\n                                            result = $scope.checkZero(key);\n                                            //console.log(key[i], result);\n                                            if(result){ //재고 0인 것이 있으면\n                                                $(\"#prod_option_\" + i).find(\"option\").eq(k+1).hide();\n                                            }    \n                                        }                                         \n                                    }\n                                }                            \n                            }else{                            \n                                if(optlist[i].selectID == 0){\n                                    //상위 옵션을 선택하지 않으면 그 밑으로 다시 초기화 \n                                    for(; i< optlist.length; i++){\n                                        optlist[i].selectID = 0;\n                                    }\n                                    break;    \n                                }else{\n                                    //상위옵션 저장\n                                    key.push($(\"#prod_option_\" + i).val());\n                                }                            \n                            }\n                        }\n                        \n                    }\n                }    \n                $scope.treecheck = function(key, level, list){\n                    var key2, j;\n                    var rvalue = true;\n                    //서브노드 검색\n                    if(level < list.length - 1){ //마지막이 아니면                        \n                        key2 = key.concat(0);\n                        for(j = 0; j < list[level].opt_value_lst.length;j++){\n                            key2[level] = list[level].opt_value_lst[j];\n                            if(!$scope.treecheck(key2, level + 1, list)){ \n                                j = list[level].opt_value_lst.length;\n                                rvalue = false;\n                            }    \n                        }\n                    }else{ //마지막이면 \n                        key2 = key.concat(0);\n                        for(j = 0; j < list[level].opt_value_lst.length;j++){                            \n                            key2[level] = list[level].opt_value_lst[j];\n                            var result = $scope.checkZero(key2);\n                            if(!result){ //재고 0이 아닌것이 있으면                                  \n                                j = list[level].opt_value_lst.length;\n                                rvalue = false;                                 \n                            }                                    \n                        }\n                    }\n                    return rvalue;\n                }\n                $scope.checkZero = function(obj){\n                    var cnt = 0;\n                    var return_value = true;\n                    for(var i=0; i<$scope.zeroOpt.length; i++){\n                        cnt = 0;                        \n                        for(var i2=0; i2< $scope.zeroOpt[i].length; i2++){                            \n                            if(obj[i2] == $scope.zeroOpt[i][i2]){\n                                cnt ++;\n                            }                           \n                        }\n                        if(cnt == $scope.zeroOpt[i].length){\n                            i = $scope.zeroOpt.length;\n                            return_value = false; //일치하는게 있으면                            \n                        }\n                    }\n                    return return_value;;                    \n                }\n                \n               if(!$scope.appObj.isApp){\n                   $scope.appDownBann = true;\n               }\n\n               $scope.appDownBnrClose = function(){\n                   $scope.appDownBann = false;\n               }\n                \n            }\n        };\n    }]);\n       \n})(window, window.angular);\n"]}