!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.controller("ProductRentCtrl",["$scope","LotteCommon","LotteCookie","$http","LotteForm","LotteStorage",function(a,b,d,e,f,g){a.showWrap=!0,a.contVisible=!0,a.subTitle="상담신청하기",e.get(b.rentalCustomerUrl,{params:{entr_no:$("input[name='entr_no']").val()}}).success(function(b){var c="";"010"==b.result.cell_sct_no||"011"==b.result.cell_sct_no||"016"==b.result.cell_sct_no||"017"==b.result.cell_sct_no||"018"==b.result.cell_sct_no||"019"==b.result.cell_sct_no||"070"==b.result.cell_sct_no||"0502"==b.result.cell_sct_no||"0505"==b.result.cell_sct_no||(c=b.result.cell_sct_no,b.result.cell_sct_no="직접입력",setTimeout(function(){$(".s_box02").hide(),$(".ph1").show()},300)),a.rentInfo={goods_no:$("input[name='goods_no']").val(),pImg:$("input[name='pImg']").val(),pTitle:$("input[name='pTitle']").val(),pPrice:$("input[name='pPrice']").val(),pName:b.result.mbr_nm,phone1:b.result.cell_sct_no,phone2:b.result.cell_txno_no,phone3:b.result.cell_end_no,ph1:c,entr_nm:b.result.entr_nm,goods_choc_desc:$("input[name='goods_choc_desc']").val()}}).error(function(a){console.log("사용자 정보 조회 에러:",a)}),a.sendForm=function(){f.FormSubmitForAjax(b.rentalSendUrl,{entr_no:$("input[name='entr_no']").val(),goods_no:$("input[name='goods_no']").val(),item_no:$("input[name='item_no']").val(),ord_qty:$("input[name='ord_qty']").val(),appl_nm:a.rentInfo.pName,appl_phon:a.rentInfo.phoneNumber,goods_choc_desc:$("input[name='goods_choc_desc']").val(),info_sup_agr_ip_addr:$("input[name='info_sup_agr_ip_addr']").val()}).success(function(b){if(null==b.result.response_code){alert("상담신청이 완료되었습니다.\n전문 상담원이 2~3일내에 전화를 드리도록 하겠습니다.");var d=g.getSessionStorage("lastItemCateLink");d!=c&&""!=d?location.href=d:a.gotoDetail()}}).error(function(a){console.log("상담신청 에러:",a)})}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/product/m/product_rent_container.html",replace:!0,link:function(a,b,c){a.phoneChange=function(){"직접입력"==a.rentInfo.phone1?($(".s_box02").hide(),$(".ph1").show()):($(".s_box02").show(),$(".ph1").hide())},a.regist_ok=function(){"직접입력"==a.rentInfo.phone1?a.rentInfo.phoneNumber=a.rentInfo.ph1+""+a.rentInfo.phone2+a.rentInfo.phone3:a.rentInfo.phoneNumber=a.rentInfo.phone1+""+a.rentInfo.phone2+a.rentInfo.phone3;return""==a.rentInfo.pName?void alert("이름을 입력해주세요."):""==a.rentInfo.phone1||""==a.rentInfo.phone2||""==a.rentInfo.phone3||""==a.rentInfo.ph1&&"직접입력"==a.rentInfo.phone1?void alert("연락처를 입력해주세요."):a.agree?void a.sendForm():void alert("상품 안내 서비스를 위해 개인정보 제공 동의해주세요.")},a.gotoDetail=function(){location.href="/product/m/product_view.do?"+a.baseParam+"&goods_no="+a.rentInfo.goods_no}}}})}(window,window.angular);