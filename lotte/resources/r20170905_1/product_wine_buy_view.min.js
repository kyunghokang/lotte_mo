!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.filter("strToDate",[function(){return function(a){return a.substr(0,4)+"년 "+a.substr(4,2)+"월 "+a.substr(6,2)+"일"}}]),d.controller("ProductWindSmartpicCtrl",["$scope","$http","$window","$timeout","LotteCommon","commInitData",function(a,b,d,e,f,g){a.showWrap=!0,a.contVisible=!0,a.subTitle="스마트픽 예약 정보",a.screenDataReset=function(){a.screenData={orderCount:1,mastDispNo:0,smp_goods_no:0,smpStoreIdx:"",smpStorePickupDate:"",smpPickerPhone:[],smpPickerName:"",smpPickerMyself:!0,smpRegComplete:!1,storeList:[],wine:[],WorkDay:[]}},a.screenDataReset(),g.query.mastDispNo!=c&&(a.screenData.mastDispNo=g.query.mastDispNo),g.query.goods_no!=c&&(a.screenData.smp_goods_no=g.query.goods_no),a.getProductData=function(){a.productListLoading=!0,a.$parent.LotteSuperBlockStatus=!0;try{b.get("/json/product/product_wine_buy_view.json?"+a.baseParam+"&curDispNo="+a.screenData.mastDispNo+"&goods_no="+a.screenData.smp_goods_no).success(function(b){a.screenData.storeList=b.storeList.items,a.screenData.wine=b.wine,a.screenData.smpPickerName=a.screenData.wine.mbr_name,a.screenData.smpPickerPhone[0]=a.screenData.wine.cell_sct_no,a.screenData.smpPickerPhone[1]=a.screenData.wine.cell_txno_no,a.screenData.smpPickerPhone[2]=a.screenData.wine.cell_end_no,!a.postdata||a.postdata.ord_qty&&""!=a.postdata.ord_qty||(a.postdata.ord_qty="1"),a.screenData.orderCount=a.postdata.ord_qty,console.log(a.postdata.ord_qty),a.productListLoading=!1,a.$parent.LotteSuperBlockStatus=!1}).error(function(){a.productListLoading=!1,a.$parent.LotteSuperBlockStatus=!1})}catch(c){}},a.getStoreInfo=function(){try{b.get("/json/product_wine_date_ajax.json?&shopNo="+a.screenData.storeList[a.screenData.smpStoreIdx].pitem_no+"&goods_no="+a.screenData.smp_goods_no+"&mbrNo="+a.loginInfo.mbrNo+"&cutDay=7").success(function(b){a.screenData.WorkDay=b.WorkDay.items,a.productListLoading=!1,a.$parent.LotteSuperBlockStatus=!1}).error(function(){a.productListLoading=!1,a.$parent.LotteSuperBlockStatus=!1})}catch(c){}},a.reSearch=function(){a.screenData.page=0,a.screenData.goodsTotal=0,a.screenData.goodsList=[],a.getProductData()},a.getProductData()}]),d.directive("lotteContainer",["$timeout","LotteForm","$window","LotteCommon",function(a,b,d,e){return{templateUrl:"/lotte/resources_dev/product/m/product_wine_buy_view_container.html",replace:!0,link:function(a,f,g){a.orderCountChange=function(b){"-"==b?a.screenData.orderCount>1&&a.screenData.orderCount--:a.screenData.orderCount++},a.changeSmpStore=function(){""!=a.screenData.smpStoreIdx&&a.getStoreInfo(),a.screenData.smpStorePickupDate=""},a.smpRegCompleteClose=function(){a.screenData.smpRegComplete&&(a.screenData.smpRegComplete=!1,a.dimmedClose()),d.location.href=e.smartPickListUrl+"?"+a.baseParam+"&tclick=m_my_smartpick"},a.submitClick=function(){var d=":^:",e=[],f=[],g=[];if(""==a.screenData.smpStoreIdx||a.screenData.smpStoreIdx==c)return alert("지점을 선택해 주세요."),!1;if(""==a.screenData.smpStorePickupDate||a.screenData.smpStorePickupDate==c)return alert("방문 예정일을 선택해 주세요."),!1;if(""==a.screenData.smpPickerName||a.screenData.smpPickerName==c)return alert("방문자를 입력해 해 주세요."),!1;if(!a.screenData.smpPickerPhone[0]||!a.screenData.smpPickerPhone[1]||!a.screenData.smpPickerPhone[2])return alert("방문자를 전화번호를 입력해 해 주세요."),!1;if(e.push(a.screenData.storeList[a.screenData.smpStoreIdx].pitem_no),f.push(a.screenData.smpStorePickupDate),g.push(a.screenData.storeList[a.screenData.smpStoreIdx].pitem_no),a.postdata.order_qty=a.screenData.orderCount,a.postdata.ord_qty=a.screenData.orderCount,a.postdata.smpVstShopNm=a.screenData.storeList[a.screenData.smpStoreIdx].pitem_nm,a.postdata.vstShopNm=a.screenData.storeList[a.screenData.smpStoreIdx].pitem_nm,a.postdata.vstrNm=a.screenData.smpPickerName,a.postdata.vstrCellNo=a.screenData.smpPickerPhone.join(""),a.postdata.smartpicktime="13",a.postdata.smpVstShopNo=e.join(d),a.postdata.smartpickdate=f.join(d),a.postdata.entrNo=a.screenData.storeList[a.screenData.smpStoreIdx].entr_no,a.postdata.entrContrNo=a.screenData.storeList[a.screenData.smpStoreIdx].entr_contr_no,a.postdata.lwstEntrNo=a.screenData.storeList[a.screenData.smpStoreIdx].lwst_entr_no,a.postdata.salePrc=a.screenData.wine.org_sale_prc,a.postdata.mdlNo=a.screenData.wine.mdlNo,a.screenData.isCart);else{var h="/product/m/order_wine_buy.do?"+a.baseParam+"&curDispNo="+a.screenData.mastDispNo+"&goods_no="+a.screenData.smp_goods_no;b.FormSubmitForAjax(h,a.postdata).success(function(b){a.dimmedOpen({target:"smpRegist",callback:a.smpRegCompleteClose}),a.screenData.smpRegComplete=!0}).error(function(){})}}}}}])}(window,window.angular);