!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteUtil"]);d.controller("EventSaunListCtrl",["$scope","$http","$window","LotteCommon","LotteUtil",function(a,b,c,d,e){a.showWrap=!0,a.contVisible=!0,a.subTitle="구매사은신청",a.loginAlertFlag=!1,a.allEventViewFlag=!0,a.myEventViewFlag=!1,a.allEventList=[],a.myEventList=[],a.saunList_tot_cnt=0,a.isShowLoadingImage=!0,a.TopeventList=!1;var f=d.eventSaunListData;a.selectOptionList=[],a.selectOptionList.selected="ALL",a.selectOptionList.push({text:"전체",val:"ALL"}),a.selectOption="ALL",a.myOption="",a.getSaunDataLoad=function(){a.thisPage++,a.page_end<a.thisPage&&0!=a.page_end||b.get(f).success(function(b){a.maxData=b,a.eventList_view=!1,a.EventList=b.saunList.saun_list.items;for(var c=0;c<a.EventList.length;c++)"Y"==a.EventList[c].pur_ae_fvr_exp_yn&&(a.eventList_view=!0);a.totalEvent=b.saunList.saun_list.total_count,a.selectOptionList=[],a.selectOptionList.selected="ALL",a.selectOptionList.push({text:"전체",val:"ALL"});var d=new Array,e=!1,f=0;if(null!=b.saunList.card_list.items){for(var c=0;c<b.saunList.card_list.total_count;c++){var g=b.saunList.card_list.items[c];if(d.length){e=!1;for(var h=0;h<d.length;h++)d[h].val==g.evtCd&&(e=!0);e||(f+=1,d[f]={text:g.evtCdNm,val:g.evtCd})}else d[f]={text:g.evtCdNm,val:g.evtCd}}for(var c=0;c<d.length;c++){var g=d[c];""!=g.val&&a.selectOptionList.push({text:g.text,val:g.val})}}a.saunList_tot_cnt=b.saunList.saun_list.total_count,a.currentTotal=b.saunList.saun_list.total_count,a.moreList(a.currentStart,a.PageSize,a.selectOption),a.isShowLoadingImage=!1}).error(function(a,b,c,d){console.log("Error Data : ",b,c,d)})},a.currentStart=0,a.currentTotal=0,a.page_end=0,a.thisPage=0,a.PageSize=10,a.getSaunDataLoad(),a.allEventClick=function(){a.allEventViewFlag=!0,a.myEventViewFlag=!1,a.loginAlertFlag=!1,a.currentStart=0,a.currentTotal=a.saunList_tot_cnt,a.allEventList=[],a.moreList(a.currentStart,a.PageSize,a.selectOption)},a.myEventClick=function(){a.isShowLoadingImage=!0,a.currentStart=0,a.currentTotal=0,a.loginInfo.isLogin?(b.get(f).success(function(b){b.saunList.mysaun_list.total_count>0&&(a.myEventList=b.saunList.mysaun_list.items),a.myOptionList=b.saunList.mysaun_list.items,a.myTotalEvent=b.saunList.mysaun_list.total_count,a.currentStart=0,a.currentTotal=b.saunList.mysaun_list.total_count,a.isShowLoadingImage=!1}).error(function(b,c,d,e){console.log("Error Data : ",c,d,e),a.myTotalEvent=0}),a.allEventViewFlag=!1,a.myEventViewFlag=!0,a.loginAlertFlag=!1):(a.myEventList=[],a.loginAlertFlag=!0,a.allEventViewFlag=!1,a.myEventViewFlag=!0)},a.goEvnetMainClick=function(b){c.location.href=d.eventSaunMain+"?"+a.baseParam+"&evt_no="+b},a.goLoginClick=function(b){var e="&targetUrl="+encodeURIComponent(c.location.href,"UTF-8");c.location.href=d.loginUrl+"?"+a.baseParam+e},a.eventOptionClick=function(b){a.eventOptionData=b,a.selectOption=b,a.allEventList=[];for(var c=0,d=0;d<a.maxData.saunList.saun_list.total_count;d++){var e=a.maxData.saunList.saun_list.items[d];"ALL"==b?c+=1:e.evtCrcmCd==b&&(c+=1)}a.currentStart=0,a.saunList_tot_cnt=c,a.currentTotal=a.saunList_tot_cnt,a.moreList(a.currentStart,a.PageSize,a.selectOption)},a.myOptionClick=function(b){a.myOption=b,a.myEventList=[];for(var c=0,d=0;d<a.maxData.saunList.mysaun_list.total_count;d++){var e=a.maxData.saunList.mysaun_list.items[d];""==b?c+=1:e.eventStatus==b&&(c+=1)}a.currentStart=0,a.currentTotal=c,a.moreMyList(a.currentStart,a.PageSize,a.myOption)},a.moreListClick=function(){a.moreList(a.currentStart,a.PageSize,a.selectOption)},a.moreList=function(b,c,d){a.eventOptionData=d;for(var e=b;e<a.maxData.saunList.saun_list.total_count&&b+c>e;e++){var f=a.maxData.saunList.saun_list.items[e];"ALL"==d?a.allEventList.push(f):f.evtCrcmCd==d&&a.allEventList.push(f)}a.currentStart=a.currentStart+a.PageSize},a.moreMyListClick=function(){a.moreMyList(a.currentStart,a.PageSize,a.myOption)},a.moreMyList=function(b,c,d){for(var e=b;e<a.maxData.saunList.mysaun_list.total_count&&b+c>e;e++){var f=a.maxData.saunList.mysaun_list.items[e];""==d?a.myEventList.push(f):f.eventStatus==d&&a.myEventList.push(f)}a.currentStart=a.currentStart+a.PageSize}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/event/m/eventSaunList_container.html",replace:!0,link:function(a,b,c){}}}),d.filter("strToDate",[function(){return function(a){return null==a||""==a?"":a.substr(0,4)+"."+a.substr(5,2)+"."+a.substr(8,2)}}]),d.filter("strToDate2",[function(){return function(a){return null==a||""==a?"":a.substr(0,4)+"."+a.substr(4,2)+"."+a.substr(6,2)}}])}(window,window.angular);