!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteSns"]);d.controller("ssliveCtrl",["$scope","LotteCommon","$http","commInitData",function(b,d,e,f){b.showWrap=!0,b.contVisible=!0,b.subTitle="생생#",b.isShowThisSns=!0,b.remainTime=15,b.loading=!1,b.previewDate=f.query.preview,b.goods_info={price:0},b.previewstr="",b.previewDate!=c&&(b.previewstr="preview="+b.previewDate),e.get(d.sslive_good+"?"+b.previewstr).success(function(a){b.goods_info=a.sslive,b.loadTalk(null),setTimeout(function(){vod_useScroll=!1,autoVideoPlay("autoVideo","#autoVideo")},1500),setInterval(function(){1==b.remainTime&&b.loadTalk(null),b.loading||(b.remainTime-=1,$("#timebox").text(b.remainTime))},1e3)});var g="0";b.loadTalk=function(){b.loading=!0,e.get(d.sslive_talk,{params:{start_dtime:b.goods_info.start_dtime,spdpNo:b.goods_info.spdp_no,bbcNo:g}}).success(function(a){0==g?(b.talklist=a.result.items,a.result.items.length>0&&(g=b.talklist[b.talklist.length-1].bbcNo)):a.result.items.length>0&&(b.talklist=b.talklist.concat(a.result.items),g=b.talklist[b.talklist.length-1].bbcNo),setTimeout(function(){b.remainTime=15,$("#timebox").text(b.remainTime);var a=$(".talkbox > ul").height();$(".talkbox").scrollTop(a),b.loading=!1},100)})},b.reloadTalk=function(){b.loadTalk(null)},b.saveTalk=function(){var a=$("#talk").val().trim();if(0==a.length)alert("내용을 입력해주세요."),$("#talk").focus();else{if(b.goods_info.word_list!=c&&null!=b.goods_info.word_list)for(var f=b.goods_info.word_list.items,g=0;g<f.length;g++)if(a.indexOf(f[g])>=0)return void alert("고객님께서 입력하신 댓글에\n금칙어("+f[g]+")가 포함되어,\n전송하실 수 없습니다.");b.loading||($("#talk").val(""),e({url:d.sslive_save+"?spdpNo="+b.goods_info.spdp_no,data:$.param({cont:a}),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){b.loadTalk()}))}},b.ss_login=function(){location.href=d.loginUrl+"?"+b.baseParam+"&adultChk=N&targetUrl="+encodeURIComponent(a.location.href,"UTF-8")}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/mall/sslive_container.html",replace:!0,link:function(a,b,c){}}})}(window,window.angular);
//# sourceMappingURL=/sslive.min.js.map