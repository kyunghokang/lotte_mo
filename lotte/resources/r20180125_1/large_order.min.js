!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteProduct","lotteNgSwipe","lotteCommFooter"]);d.controller("largeOrderCtrl",["$http","$scope","LotteCommon",function(a,b,c){b.showWrap=!0,b.contVisible=!0,b.subTitle="명절 대량주문",b.screenID="largeOrder",b.pageData={html:"",prdList:[]},b.oInfo={name:b.loginInfo.name,id:b.loginInfo.loginId,tel1:"010",tel2:"",email:"",email2:"naver.com",a:["","","","",""],b:["","","","",""],c:["","","","",""]},setTimeout(function(){b.oInfo.name=b.loginInfo.name,b.oInfo.id=b.loginInfo.loginId},1e3),b.view_more=!1,b.viewMore=function(){b.view_more=!0},b.box_count=[1,2,3,4,5],b.data_pm=["갈비/정육/사골","굴비/옥돔/생선","사과/배/과일세트","곶감/건과/버섯/수삼/견과세트","홍삼/인삼","건강식품","꿀/건강즙","김/멸치/젓갈/육포","한과/양과/떡","음료/차/잼","오일/햄/캔류","생활 선물세트","제수용품","상품권"],b.data_num=[];for(var d=1;101>d;d+=5)b.data_num.push(d+"~"+(d+4));b.agree=!1,b.getProductDataLoad=function(){},(b.screenDataReset=function(){var c="/json/category/large_order.json";a.get(c).success(function(a){b.pageData.html=a.result.html,b.pageData.prdList=a.result.prdList.items}).error(function(a){})})()}]),d.directive("lotteContainer",["$http","$window","LotteCommon",function(a,d,e){return{templateUrl:"/lotte/resources_dev/category/m/large_order_container.html",replace:!0,link:function(a,f,g){a.memo_count=0,a.checkByte=function(b){for(var c=!1,d=0,e="",f=5e3,g=b.length,h=0;g>h;h++)e=b.charAt(h),d+=escape(e).length>4?2:1;return d>f&&(c=!0,d--),a.memo_count=d,c},a.change_field=function(){a.checkByte(a.memo)&&(a.memo=a.memo.substr(0,a.memo.length-1))},a.again=function(){b.element(d).scrollTop(0),location.reload()},a.emailview=!1,a.emailchange=function(){""==a.oInfo.email2&&(a.emailview=!0,$("#oemail2").focus())},a.submit_url="/json/category/insert_large_order.json";var h=function(a,b,d){var e=!1;return(""==a||a==c)&&(alert(d+" 입력해주세요."),$("#"+b).focus(),e=!0),e},i=function(){return a.agree?!1:(alert("개인정보 수집 이용에 동의해 주세요."),$("#agree").focus(),!0)};a.check_login=function(){console.log("login_check"),a.loginInfo.isLogin||e.isTestFlag||(d.location.href=e.loginUrl+"?"+a.baseParam+"&targetUrl="+encodeURIComponent(d.location.href,"UTF-8"))},a.register=function(){if(!a.loginInfo.isLogin&&!e.isTestFlag)return void(d.location.href=e.loginUrl+"?"+a.baseParam+"&targetUrl="+encodeURIComponent(d.location.href,"UTF-8"));if(h(a.oInfo.name,"oname","성명을")||h(a.oInfo.id,"oid","롯데패밀리ID를")||h(a.oInfo.tel2,"otel2","연락처를")||h(a.oInfo.email,"omail","E-mail을")||a.emailview&&h(a.oInfo.email2,"oemail2","E-mail을")||h(a.oInfo.a[0],"a0","품목을")||h(a.oInfo.b[0],"b0","가격대를")||h(a.oInfo.c[0],"c0","수량을")||i());else{var b={orderId:a.oInfo.id,orderName:a.oInfo.name,selItem:a.oInfo.a,selPrice:a.oInfo.b,selQty:a.oInfo.c,mbr_no:a.loginInfo.mbrNo,orderEmail:a.oInfo.email+"@"+a.oInfo.email2,orderPhone:a.oInfo.tel1+""+a.oInfo.tel2,orderMobile:a.oInfo.tel1+""+a.oInfo.tel2,writeMemo:a.memo,site_no:1};jQuery.ajaxSettings.traditional=!0,$.ajax({method:"POST",url:a.submit_url,data:$.param(b),dataType:"json"}).success(function(a){console.log("data:",a),"reg_fail"!=a.result&&alert("대량 주문 상담 신청이 접수되었습니다.\n확인 후 신청해주신 연락처로 유선 연락 드리겠습니다.\n감사합니다.")}).error(function(a){console.log("ex:",a),"reg_success"==a.responseText&&alert("대량 주문 상담 신청이 접수되었습니다.\n확인 후 신청해주신 연락처로 유선 연락 드리겠습니다.\n감사합니다.")})}}}}}])}(window,window.angular);