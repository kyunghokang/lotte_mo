function sendTclick(a){a=isEllotte?"m_EL_"+a:"m_DC_"+a;var b=1e3;$("#tclick_iframe").remove(),setTimeout(function(){var b=document.createElement("iframe");b.id="tclick_iframe",b.style.visibility="hidden",b.style.display="none",b.src=LOTTE_CONSTANTS.M_HOST_SSL+"/exevent/tclick.jsp?tclick="+a+"&"+__commonParam,document.body.appendChild(b)},b)}function changeName(a,b,c){var d=$("#orderer_name_text_"+b+c),e=$("#orderer_name_val_"+b+c),f=d.find("#nameSp"),g=e.find("#nameInpt");if("mod"==a){var h=f.text();g.val(h),d.hide(),e.show()}else if("cnfm"==a){var i=g.val();""==$.trim(i)&&(i=f.text()),$("[id^='orderer_name_text']").show().find("#nameSp").text(i),$("[id^='orderer_name_val']").hide().find("#nameInpt").val(i)}}function setTotalDeliSelInfo(){var a=1*$("#goodsTotQty").val(),b=$("input[name=dlex_one_goods]").val(),c=$("input[name=dlex_std_amt]").val(),d=0,e=0,f="",g=$("#sel_deli_tab").val(),h=0,i=0,j=0,k=0;if($("input[name=bene_deli_data_1]:hidden").each(function(){var a=$(this).val().split("|");f+=a[2]}),"0"==g)$("#dlvp_info li").each(function(a){d=1*$(this).children().find("select[name=ord_qty]").val(),e+=d,j++,0==Number(b)?(h=0,i=0):Number(c)>Number(f)*Number(d)&&(h+=1,i+=Number(b))});else if("1"==g)if(a>10)e=a,j=a,h=a,k=0,i=Number(b)*a;else{j=1==a?1:$("#rcv_qty_1").val();for(var l=1;j>=l;l++)d=$("#deli_"+l+"_1 #li_mine").hasClass("on")?1*$("#deli_"+l+"_1 #li_mine select[name=ord_qty]").val():1*$("#deli_"+l+"_1 #li_new select[name=ord_qty]").val(),e+=d,0==Number(b)?(h=0,i=0):Number(c)>Number(f)*Number(d)&&(h+=1,i+=Number(b))}else{j=$("#rcv_qty_2").val();for(var l=1;j>=l;l++)1==$("#deli_"+l+"_2_t").is(":visible")||1==$("#deli_"+l+"_2_d").is(":visible")?(d=1==$("#deli_"+l+"_2_t").is(":visible")?1*$("#deli_"+l+"_2_t select[name=ord_qty]").val():$("#deli_"+l+"_2_d #li_mine").hasClass("on")?1*$("#deli_"+l+"_2_d #li_mine select[name=ord_qty]").val():1*$("#deli_"+l+"_2_d #li_new select[name=ord_qty]").val(),e+=d,0==Number(b)?(h=0,i=0):Number(c)>Number(f)*Number(d)&&(h+=1,i+=Number(b))):k+=1}$("#tot_ord_goods_cnt").val(e),$("#tot_ord_deli_cnt").val(j),$("#tot_ord_dlvp_cnt").val(h),$("#tot_ord_deli_no").val(k),$("#tot_ord_deli_amt").val(i),console.log("[setTotalDeliSelInfo]================="),console.log("tot_ord_goods_cnt:"+e),console.log("tot_ord_deli_cnt:"+j),console.log("tot_ord_dlvp_cnt:"+h),console.log("tot_ord_deli_no:"+k),console.log("tot_ord_deli_amt:"+i),console.log("======================================")}function selectAddress(a,b,c,d,e,f,g){var h=" #li_new",i="_"+$("#sel_deli_tab").val()+" ";$("input[name=grockle_name]").length>0&&(h="");var j=$("#deli_"+a+i+h+" input[name=inpzip1]"),k=$("#deli_"+a+i+h+" input[name=inpzip2]"),l=$("#deli_"+a+i+h+" input[name=inpaddr1]"),m=$("#deli_"+a+i+h+" input[name=inpaddr2]"),n=$("#deli_"+a+i+h+" input[name=stnm_inp_zip1]"),o=$("#deli_"+a+i+h+" input[name=stnm_inp_zip2]"),p=$("#deli_"+a+i+h+" input[name=stnm_inp_addr1]"),q=$("#deli_"+a+i+h+" input[name=stnm_inp_addr2]"),r=$("#deli_"+a+i+"#txt_zip1_"+a),s=$("#deli_"+a+i+"#txt_zip2_"+a),t=$("#deli_"+a+i+"#txt_zip_tot_"+a),u=$("#deli_"+a+i+"#txt_addr1_"+a),v=$("#deli_"+a+i+"#txt_addr2_"+a),w=$("#deli_"+a+i+"#temp_zip1_"+a),x=$("#deli_"+a+i+"#temp_zip2_"+a),y=$("#deli_"+a+i+"#temp_addr1_"+a),z=$("#deli_"+a+i+"#temp_addr2_"+a);if("S"==b&&"J"==c){var A="<br/>"+e;$("#txt_seq2_J_"+a).html(A),w.val(d.substring(0,3)),x.val(d.substring(3,6)),y.val(e),$("#deli_"+a+i+"#seq1_J_"+a).hide(),$("#deli_"+a+i+"#seq2_J_"+a).show(),$("#deli_"+a+i+"#inp_seq2_J_"+a).val(f).focus()}else if("S"==b&&"N"==c){w.val(d.substring(0,3)),x.val(d.substring(3,6)),y.val(e),g.length>0&&(f+=" "+g),z.val(f);var A="<br/>"+e+" "+f;$("#deli_"+a+i+"#txt_seq2_N_"+a).html(A),$("#deli_"+a+i+"#seq1_N_"+a).hide(),$("#deli_"+a+i+"#seq2_N_"+a).show(),$("#deli_"+a+i+"#inp_seq2_N_"+a).focus()}else"M"==b&&"J"==c?(w.val(d.substring(0,3)),x.val(d.substring(3,6)),j.val(w.val()),k.val(x.val()),l.val(y.val()),m.val(z.val()),r.add(n).val(d.substring(0,3)),s.add(o).val(d.substring(3,6)),t.val(r.val()+s.val()),u.add(p).val(e),v.add(q).val(f)):"M"==b&&"N"==c?(w.val(d.substring(0,3)),x.val(d.substring(3,6)),n.val(w.val()),o.val(x.val()),p.val(y.val()),q.val(z.val()),r.add(j).val(d.substring(0,3)),s.add(k).val(d.substring(3,6)),t.val(r.val()+s.val()),u.add(l).val(e),v.add(m).val(f)):"M"==b&&"J_alone"==c?(w.val(d.substring(0,3)),x.val(d.substring(3,6)),r.add(j).val(w.val()),s.add(k).val(x.val()),t.val(r.val()+s.val()),u.add(l).val(y.val()),v.add(m).val(z.val()),n.add(o).add(p).add(q).val("")):"M"==b&&"N_select"==c&&(w.val(d.substring(0,3)),x.val(d.substring(3,6)),r.add(n).val(w.val()),s.add(o).val(x.val()),t.val(r.val()+s.val()),u.add(p).val(y.val()),v.add(q).val(z.val()),j.val(d.substring(0,3)),k.val(d.substring(3,6)),l.val(e),m.val(f));"M"==b&&($("#deli_"+a+i+"#search_addr_trigger_"+a).click(),$("#deli_"+a+i+"#txt_addr_wrap_"+a).show())}function searchAddress(a,b,c,d){var e="proc_div="+b+"&addr_gbn="+c+"&deli_cnt="+a,f=null,g=$("#sel_deli_tab").val(),h="#deli_"+a+"_"+g+" ";if("S"==b&&"J"==c){var i=$(h+"#inp_seq1_J_"+a);if($.trim(i.val()).length<=0)return alert("읍/면/동을 입력해 주세요."),i.focus(),!1;e+="&dong_nm="+i.val(),f=function(b){$(h+"#result_seq1_J_"+a).html(b).show()}}else if("S"==b&&"N"==c){var j=$(h+"#key1_seq1_N_"+a),k=$(h+"#key2_seq1_N_"+a),l=$(h+"#key3_seq1_N_"+a),m=$(h+"#key4_seq1_N_"+a),n=$(h+"#key5_seq1_N_"+a),o=!1;if(j.add(k).add(l).each(function(){return $.trim($(this).val()).length<=0?(alert("조회 필수항목을 입력해 주세요."),$(this).focus(),o=!0,!1):void 0}),o)return!1;e+="&keyword1="+j.val()+"&keyword2="+k.val()+"&keyword3="+l.val(),""!=m.val()&&(e+="&keyword4="+m.val()),""!=n.val()&&(e+="&keyword5="+n.val()),f=function(b){$(h+"#result_seq1_N_"+a).html(b).show()}}else if("M"==b&&"J"==c){var p=$(h+"#inp_seq2_J_"+a);if($.trim(p.val()).length<=0)return alert("상세주소를 입력해 주세요."),p.focus(),!1;var q=$(h+"#temp_zip1_"+a).val()+$(h+"#temp_zip2_"+a).val(),r=$(h+"#temp_addr1_"+a).val(),s=p.val();e+="&zipcode="+q.replace("-","")+"&addr1="+r+"&addr2="+s,$(h+"#temp_addr2_"+a).val(s),f=function(b){$(h+"#seq2_J_"+a).hide(),$(h+"#seq3_J_"+a).html(b).show()}}else if("M"==b&&"N"==c){var p=$(h+"#inp_seq2_N_"+a),q=$(h+"#temp_zip1_"+a).val()+$(h+"#temp_zip2_"+a).val(),r=$(h+"#temp_addr1_"+a).val(),s=$(h+"#temp_addr2_"+a).val()+" "+p.val();e+="&zipcode="+q.replace("-","")+"&addr1="+r+"&addr2="+s,$("#temp_addr2_"+a).val(s),f=function(b){$(h+"#seq2_N_"+a).hide(),$(h+"#seq3_N_"+a).html(b).show()}}$.ajax({type:"post",async:!1,url:"/popup/ord_search_address.do?"+d,data:e,success:function(a){return f(a),!0}})}function switchDeliOption(a,b,c,d){var e=$("#deli_"+b+" input[name=deli_chk_"+b+"]:radio[value='U']"),f=$("#deli_"+b+" input[name=deli_chk_"+b+"]:radio[value='C']");"mine"==a&&(f.prop("checked",!1),$("#deli_phone_text_"+b+"_"+c).is(":hidden")?e.prop("checked",!0):e.prop("checked",!1))}function apply_br_tag(a){return a}function confirm_end(){$("#useLottePoint").hide(),$("#chk_lt_point").attr("disabled",!1),ltPointCert="Y",$("#lt_point_amt").show(),$("#lt_point_amt_btn").hide(),$("#chk_lt_point").is(":checked")||$("#chk_lt_point").trigger("click")}function init_cardinstmon(){if(totsttlamt=$("#frm_inp input[name=totsttlamt]:hidden").val(),iscmcd=$("#frm_inp select[name=iscmcd]").val(),prom_third=$("#frm_send input[name=prommdclcd_third]").val(),$("#frm_inp input[name=rdo_cardinst]:radio").attr("checked",""),$("#frm_inp input[name=rdo_cardinst]:radio").prop("checked",""),$("#frm_inp select[name=cardinstmon]").empty(),$("#frm_inp select[name=cardinstmon]").append("<option value=''>일시불</option>"),$("#frm_inp select[name=cardinstmon]").attr("disabled",!0),""!=iscmcd){if($("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").attr("disabled",!1),onintmonth=$("#frm_inp input[name=onintmonth]:hidden").val(),""==onintmonth||"null"==onintmonth||"35"==prom_third?$("#frm_inp input[name=rdo_cardinst]:radio:eq(1)").attr("disabled",!0):$("#frm_inp input[name=rdo_cardinst]:radio:eq(1)").attr("disabled",!1),intmonth=$("#frm_inp input[name=intmonth]:hidden").val(),""==intmonth||"null"==intmonth||"35"==prom_third?$("#frm_inp input[name=rdo_cardinst]:radio:eq(2)").attr("disabled",!0):$("#frm_inp input[name=rdo_cardinst]:radio:eq(2)").attr("disabled",!1),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").attr("checked",!0),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("checked",!0),parseInt(totsttlamt)<5e4)return $("#frm_inp select[name=cardinstmon] option:first").prop("selected",!0),void $("#frm_inp select[name=cardinstmon]").prop("disabled",!0);if(lpayCardDivCd=$("select[name=iscmcd]").find("option:selected").attr("data-card-div"),void 0!=lpayCardDivCd&&"CC"!=lpayCardDivCd)return $("#frm_inp select[name=cardinstmon] option:first").prop("selected",!0),void $("#frm_inp select[name=cardinstmon]").prop("disabled",!0)}else $("#frm_inp input[name=rdo_cardinst]:radio").attr("disabled",!0),$("#frm_inp select[name=cardinstmon]").attr("disabled",!0);setcardinstmon()}function init_cardselect(){cardkndcd=$("#frm_send input[name=cardkndcd]").val(),cardkndcd_dup=$("#frm_send input[name=cardkndcd_dup]").val(),paytype=$("#frm_inp input[name=paytype]:hidden").val(),null!=cardkndcd&&""!=cardkndcd?(paytype==PAYTYPE_CODE_CARD&&$("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").click(),$("#frm_inp select[name=iscmcd]").val(cardkndcd),null==$("#frm_inp select[name=iscmcd]").val()&&$("#frm_inp select[name=iscmcd]").val("")):null!=cardkndcd_dup&&""!=cardkndcd_dup?(paytype==PAYTYPE_CODE_CARD&&$("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").click(),$("#frm_inp select[name=iscmcd]").val(cardkndcd_dup)):($("#frm_inp select[name=iscmcd]").find("option").attr("selected",!1).eq(0).attr("selected",!0),$("#frm_inp select[name=iscmcd]").find("option").prop("selected",!1).eq(0).prop("selected",!0),$("#frm_inp input[name=onintmonth]:hidden").val(""),$("#frm_inp input[name=intmonth]:hidden").val(""))}function init_point(){$("#chk_lpoint").attr("checked",!1),$("#chk_lt_point").attr("checked",!1),$("#chk_deposit_all").attr("checked",!1),$("#chk_lpoint").prop("checked",!1),$("#chk_lt_point").prop("checked",!1),$("#chk_deposit_all").prop("checked",!1)}function init_cpn_info(a,b,c){"Y"==a&&($("#frm_send input[name=promcartsn]").val(""),$("#frm_send input[name=prommdclcd]").val(""),$("#frm_send input[name=fvrpolctpcd]").val(""),$("#frm_send input[name=totdcamt]").val(""),$("#frm_send input[name=cpnpromno]").val(""),$("#frm_send input[name=cpnrscmgmtsn]").val(""),$("#frm_send input[name=adtncostdtlsctnm]").val(""),$("#frm_send input[name=cardkndcd]").val(""),$("#frm_send input[name=includeSaveInstCpn]").val(""),$("#dcAmt1").text("")),"Y"==b&&($("#frm_send input[name=promcartsn_dup]").val(""),$("#frm_send input[name=prommdclcd_dup]").val(""),$("#frm_send input[name=fvrpolctpcd_dup]").val(""),$("#frm_send input[name=totdcamt_dup]").val(""),$("#frm_send input[name=cpnpromno_dup]").val(""),$("#frm_send input[name=cpnrscmgmtsn_dup]").val(""),$("#frm_send input[name=adtncostdtlsctnm_dup]").val(""),$("#frm_send input[name=cardkndcd_dup]").val(""),$("#frm_send input[name=includeSaveInstCpn_dup]").val(""),$("#dcAmt2").text("("+$("#frm_inp select[name=dup_coupon] option").not("[value=N], :disabled").length+"개)")),"Y"==c&&($("#frm_send input[name=promcartsn_third]").val(""),$("#frm_send input[name=prommdclcd_third]").val(""),$("#frm_send input[name=fvrpolctpcd_third]").val(""),$("#frm_send input[name=totdcamt_third]").val(""),$("#frm_send input[name=cpnpromno_third]").val(""),$("#frm_send input[name=cpnrscmgmtsn_third]").val(""),$("#frm_send input[name=adtncostdtlsctnm_third]").val(""),$("#frm_send input[name=cardkndcd_third]").val(""),$("#frm_send input[name=includeSaveInstCpn_third]").val(""),$("#dcAmt3").text(""))}function setcardinstmon(){if($("#frm_inp select[name=cardinstmon]").empty(),$("#frm_inp select[name=cardinstmon]").append("<option value=''>일시불</option>"),cardinstmonlist=$("#frm_inp input[name=onintmonth]:hidden").val().split(","),cardinstmonlist.length>0)for(i=0;i<cardinstmonlist.length;i++)"null"!=cardinstmonlist[i]&&""!=cardinstmonlist[i]&&(text=cardinstmonlist[i]+"개월",$("#frm_inp select[name=cardinstmon]").append("<option value='"+cardinstmonlist[i]+"'>무이자"+text+"</option>"));if(cardinstmonlist=$("#frm_inp input[name=intmonth]:hidden").val().split(","),cardinstmonlist.length>0)for(i=0;i<cardinstmonlist.length;i++)"null"!=cardinstmonlist[i]&&""!=cardinstmonlist[i]&&(text=cardinstmonlist[i]+"개월",$("#frm_inp select[name=cardinstmon]").append("<option value='"+cardinstmonlist[i]+"'>할부"+text+"</option>"));$("#frm_inp select[name=cardinstmon] option").length>1&&"35"!=$("#frm_send input[name=prommdclcd_third]").val()?$("#frm_inp select[name=cardinstmon]").attr("disabled",!1):$("#frm_inp select[name=cardinstmon]").attr("disabled",!0)}function chkboxMAsianaAgree(){if(document.getElementById("info_agree_check").checked){if(0==document.getElementById("ip_asianaNo").value.length)return void alert("회원번호가 올바르지 않습니다. 확인후 입력해 주시기 바랍니다.");if(document.getElementById("ip_asianaNo").value.length<=0)return void alert("아시아나클럽 회원번호를 9자리의 숫자로 입력해 주세요");if(isNaN(document.getElementById("ip_asianaNo").value))return void alert("아시아나클럽 회원번호는 숫자로만 입력하셔야 합니다.");1==checkForAsiana(document.getElementById("ip_asianaNo").value)?($("#frm_send input[name=asiana_mbr_no]:hidden").val(document.getElementById("ip_asianaNo").value),alert("회원번호가 정상적으로 확인되었습니다.")):alert("회원번호가 올바르지 않습니다. 확인후 입력해 주시기 바랍니다.")}else alert("정보제공 동의를 하셔야 합니다.")}function checkBtn(a){var b=$(a).find("input:checkbox"),c=b.attr("name");"grockle_info"==c?b.attr("checked",$(a).hasClass("checked")):"grockle_same"==c?b.trigger("click"):b.trigger("click")}function selPayType(a){var b="#pay_type"+a;$("[id^='pay_type']").removeClass("on"),$(b).addClass("on"),setPaytype(a)}function setPaytype(a){for(var b=[[1,PAYTYPE_CODE_CARD],[2,PAYTYPE_CODE_BANK],[3,PAYTYPE_CODE_PHONE],[4,PAYTYPE_CODE_LPAY]],c=0;c<b.length;c++)if(b[c][0]==a){$("#frm_inp input[name=paytype]:hidden").val(b[c][1]);break}}function fn_ordernomemberAgree(a){$(a).closest("div.check_layer03").hasClass("on")?($(a).closest("div.check_layer03").removeClass("on"),$(a).closest("div.check").removeClass("on").addClass("off"),$("#grockle_resident_div").hide()):($(a).closest("div.check_layer03").addClass("on"),$(a).closest("div.check").removeClass("off").addClass("on"),$("#grockle_resident_div").show())}function chkSendMsgLimit(a,b,c){str=$("#"+a).val(),strlen=str.length;for(var d=0,e=0;e<strlen;e++)if(d+=1,d>b)return alert("최대 "+b+"자 까지 입력가능합니다."),$("#"+a).val(str.substring(0,b)),$("#"+c).html(b),!1;return $("#"+c).html(d),!0}function chkDeliMsgLimit(a,b,c){str=$("#"+a).val(),strlen=str.length;for(var d=0,e=0;e<strlen;e++)if(d+=str.charCodeAt(e)>128?2:1,d>b)return alert("최대 "+b+"byte까지 입력가능합니다."),$("#"+a).val(str.cut(b)),$("#"+c).html(b),!1;return $("#"+c).html(strlen),!0}function fn_useLottePointCancel(){$("#useLottePoint").hide(),$("#card_no1").val(""),$("#card_no2").val(""),$("#card_no3").val(""),$("#card_no4").val(""),$("#card_passwd").val(""),$("#temp_lt_point_amt").val(""),3==$("input[name=temp_paytype]:hidden").val()&&1==$("#chk_lt_point").prop("checked")&&($("#chk_lt_point").trigger("click"),$("#lt_point_amt").show(),$("#lt_point_amt_btn").hide())}function select_third_coupon(){init_point(),setCashReceiptArea(),fn_initPointList("ALL"),"35"==$("#frm_send input[name=prommdclcd_third]").val()?($("#frm_inp input[name=rdo_paytype]:radio:checked").val()==PAYTYPE_CODE_PHONE&&$("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").click(),$("#frm_inp input[name=rdo_paytype]:radio").each(function(){$(this).val()==PAYTYPE_CODE_PHONE&&$(this).prop("disabled",!0)}),$("#chk_lpoint").prop("checked",!1),$("#chk_lpoint").prop("disabled",!0),$("#chk_lt_point").prop("checked",!1),$("#chk_lt_point").prop("disabled",!0)):($("#frm_inp input[name=rdo_paytype]:radio:checked").val()==PAYTYPE_CODE_LPAY&&(ltPointCert="Y",$("#lt_point_amt").show(),$("#lt_point_amt_btn").hide()),$("#frm_inp input[name=rdo_paytype]:radio").each(function(){$(this).prop("disabled",!1)}),parseInt($("#useable_lpoint_amt").val())>0&&$("#chk_lpoint").prop("disabled",!1),"Y"==ltPointCert&&$("#chk_lt_point").prop("disabled",!1)),select_third_coupon_controll($("#frm_send input[name=prommdclcd_third]").val()),fn_calcTotalPrice()}function ord_session_clear(){sessionStorage.removeItem("dup_cnt_div"),sessionStorage.removeItem("dup_prom_no"),sessionStorage.removeItem("fvr_val"),sessionStorage.removeItem("goods_no"),sessionStorage.removeItem("itme_no"),sessionStorage.removeItem("max_fvr_val"),sessionStorage.removeItem("prom_no"),sessionStorage.removeItem("prom_nm"),sessionStorage.removeItem("rsc_mgmt_sn"),sessionStorage.removeItem("safe_browsing")}function dup_coupon_select(){var a=$(this).val();iphoneChk=!1,maxDupIdx!=a&&$("#max_dc").prop("checked",!1),$("#frm_inp select[name=dup_coupon]").find("option").each(function(){if(a==$(this).val()){var b,c=$("#frm_inp select[name=coupon]").val(),d=$("#frm_inp input[name=prommdclcd]").eq(c).val(),e=$("#frm_inp input[name=cpnpromno]").eq(c).val(),f=$("#frm_inp input[name=cpnpromno_dup]").eq(a).val(),g=0,h="0",i=0;if(ord_session_clear(),init_cpn_info("N","N","Y"),$("#frm_inp input[name=third_coupon]:radio:last").prop("checked",!0),$("span[name=dup_span]").each(function(){$(this).html("")}),"N"==a)return init_cpn_info("N","Y","N"),void select_dup_coupon();if($(this).prop("disabled",!1),void 0==c||"N"==c?(b=single_prom,g=single_prom_cnt,sessionStorage.setItem("dup_cnt_div","single")):(b=multi_prom,g=multi_prom_cnt,h="0"==e?d:e,sessionStorage.setItem("dup_cnt_div","multi")),g>0){for(var j=0;j<b.length;j++)if(b[j][0]==h&&b[j][1]==f){i=b[j][2],sessionStorage.setItem("prom_no",b[j][0]),sessionStorage.setItem("dup_prom_no",b[j][1]),sessionStorage.setItem("fvr_val",b[j][2]),sessionStorage.setItem("goods_no",b[j][3]),sessionStorage.setItem("itme_no",b[j][4]),sessionStorage.setItem("max_fvr_val",b[j][5]),sessionStorage.setItem("prom_nm",b[j][6]),sessionStorage.setItem("rsc_mgmt_sn",b[j][7]);break}if(parseInt(i)>0)return"N"!=a?(promcartsn=$("#frm_inp input[name=promcartsn_dup]").eq(a).val(),d=$("#frm_inp input[name=prommdclcd_dup]").eq(a).val(),fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd_dup]").eq(a).val(),totdcamt=sessionStorage.getItem("fvr_val"),e=$("#frm_inp input[name=cpnpromno_dup]").eq(a).val(),cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn_dup]").eq(a).val(),adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm_dup]").eq(a).val(),cardkndcd=$("#frm_inp input[name=cardkndcd_dup]").eq(a).val(),includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn_dup]").eq(a).val()):(promcartsn="",d="",fvrpolctpcd="",totdcamt="",e="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn=""),$("#frm_send input[name=promcartsn_dup]").val(promcartsn),$("#frm_send input[name=prommdclcd_dup]").val(d),$("#frm_send input[name=fvrpolctpcd_dup]").val(fvrpolctpcd),$("#frm_send input[name=totdcamt_dup]").val(totdcamt),$("#frm_send input[name=cpnpromno_dup]").val(e),$("#frm_send input[name=cpnrscmgmtsn_dup]").val(cpnrscmgmtsn),$("#frm_send input[name=adtncostdtlsctnm_dup]").val(adtncostdtlsctnm),$("#frm_send input[name=cardkndcd_dup]").val(cardkndcd),$("#frm_send input[name=includeSaveInstCpn_dup]").val(includeSaveInstCpn),$("span[name=dup_span]:eq("+a+")").html("(<strong>"+String(totdcamt).money()+"</strong> 원 할인)"),select_dup_coupon(),void $("#dcAmt2").html("(-"+String(i).money()+'<span class="no_bold">원</span>)');$(this).prop("disabled",!0),alert("죄송합니다.\n추가할인 불가능 상품입니다.")?(add_dis_impossible_flag=!1,add_dis_impossible()):(add_dis_impossible_flag=!0,add_dis_impossible())}else init_cpn_info("N","Y","N")}})}function add_dis_impossible(){$("#frm_inp select[name=dup_coupon]").blur(),$("#frm_inp select[name=dup_coupon]").val("N"),$("#frm_inp select[name=dup_coupon]")[0].selectedIndex=0,init_cpn_info("N","Y","N"),select_dup_coupon()}function select_coupon(){init_cardselect(),getCardInsCheck(),init_point(),setCashReceiptArea(),fn_initPointList("ALL"),fn_calcTotalPrice()}function select_dup_coupon(){init_cardselect(),init_point(),setCashReceiptArea(),fn_initPointList("ALL"),fn_calcTotalPrice(),getCardInsCheck()}function select_third_coupon_controll(a){"35"==a?($("#frm_inp input[name=rdo_cardinst]:radio").each(function(){$(this).prop("disabled",!0)}),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("disabled",!1),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("checked",!0),$("#frm_inp select[name=cardinstmon] option:first").prop("selected",!0),$("#frm_inp select[name=cardinstmon]").prop("disabled",!0)):($("#frm_inp input[name=rdo_cardinst]:radio").each(function(){$(this).prop("disabled",!1)}),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("checked",!0),$("#frm_inp select[name=cardinstmon] option:first").prop("selected",!0),$("#frm_inp select[name=cardinstmon]").prop("disabled",!1))}function fnClear(a){a.style.background=""}function lottecard_payment(a){$("#ANSIM_LAYER").css("width","100%"),$("#ANSIM_LAYER").css("height","530px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),$("#SIMPLEPAYFORM input[name=PAY]:hidden").val(a),$("#SIMPLEPAYFORM").attr("target","X_ANSIM_FRAME"),$("#SIMPLEPAYFORM").attr("action","/smpi/M_LCSMPIAgent01.jsp"),$("#SIMPLEPAYFORM").submit()}function xmpi_exec(){$("#frm_card").attr("target","X_ANSIM_FRAME"),$("#frm_card").attr("action","/dacom/xansim/m_hagent01.jsp"),$("#frm_card").submit()}function spay_exec(){$("#frm_spay input[name=totsttlamt]:hidden").val($("#frm_send input[name=totsttlamt]:hidden").val()),$("#frm_spay input[name=cardinst]:hidden").val($("#frm_send input[name=cardinst]:hidden").val()),$("#frm_spay input[name=cardinstmon]:hidden").val($("#frm_send input[name=cardinstmon]:hidden").val()),$("#frm_spay").attr("target","X_ANSIM_FRAME"),$("#frm_spay").attr("action","/spay/shopMW.jsp"),$("#frm_spay").submit()}function cellphone_exec(){$("#frm_mobilians input[name=totsttlamt]:hidden").val($("#frm_send input[name=totsttlamt]:hidden").val()),$("#frm_mobilians").attr("target","X_ANSIM_FRAME"),$("#frm_mobilians").attr("action","/mobilians/mc_web.jsp"),$("#frm_mobilians").submit()}function setCertResult(a,b,c,d,e){$("#ANSIM_LAYER").hide(),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp"),$("#frm_send input[name=xid]:hidden").val(a),$("#frm_send input[name=eci]:hidden").val(b),$("#frm_send input[name=cavv]:hidden").val(c),$("#frm_send input[name=cardno]:hidden").val(d),doPayment()}function setCertResult2(a,b,c,d,e){$("#frm_send input[name=xid]:hidden").val(a),$("#frm_send input[name=eci]:hidden").val(b),$("#frm_send input[name=cavv]:hidden").val(c),$("#frm_send input[name=cardno]:hidden").val(d),$("#frm_send input[name=joincode]:hidden").val(e),doPayment()}function disableItems(a){a?($("#cover").css("display","block"),$("#ORDER").hide(),$("#PROCESSING").show(),$("#cover").on("click",function(){close_iframe()})):($("#cover").css("display","none"),$("#ORDER").show(),$("#PROCESSING").hide(),$("#cover").off("click"))}function returnPaymentPage(){disableItems(!1),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp")}function close_iframe(){returnPaymentPage(),location.hash="#PAYMENT_ANCHAR",document.getElementById("X_ANSIM_FRAME").width=450,document.getElementById("X_ANSIM_FRAME").height=0,document.getElementById("ANSIM_LAYER").style.display="none",document.getElementById("X_ANSIM_FRAME").style.display="none"}function doPayment(){""==$("#frm_send input[name=totdcamt]:hidden").val()&&$("#frm_send input[name=totdcamt]:hidden").val("0"),$("#cover").css("display","none"),$("#ORDER").show(),$("#PROCESSING").hide(),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp"),$("#frm_send").submit()}function ansimclose(){$("#ANSIM_LAYER").hide(),$("#X_ANSIM_FRAME").attr("src","/dacom/xansim/iframe.jsp"),$("#ORDER").show(),$("#PROCESSING").hide()}function getName(){var a=$("#frm_inp input[name=inprmitnm]").val();a+=" 님",$("#frm_inp input[name=receivename]").val(a)}function fn_selPointAll(a){var b=$("#frm_inp input[name=totsttlamt]:hidden").val(),c=0,d=a.id;if("chk_deposit_all"==d&&setCashReceiptArea(),a.checked){if(0==parseInt(b))return void(a.checked=!1);"chk_lpoint_all"==d?(b=parseInt(b)+parseInt($("#old_lpoint_amt").val()),c=parseInt($("#useable_lpoint_amt").val()),$("#lpoint_amt").val(c>b?b:c)):"chk_lt_point_all"==d?(b=parseInt(b)+parseInt($("#old_lt_point_amt").val()),c=parseInt($("#useable_lt_point_amt").val()),$("#lt_point_amt").val(c>b?b:c)):"chk_deposit_all"==d&&($("#cash_receipts").show(),b=parseInt(b)+parseInt($("#old_deposit_amt").val()),c=parseInt($("#useable_deposit_amt").val()),$("#deposit_amt").val(c>b?b:c))}else"chk_lpoint_all"==d?($("#lpoint_amt").val(""),$("#old_lpoint_amt").val("0")):"chk_lt_point_all"==d?($("#lt_point_amt").val(""),$("#old_lt_point_amt").val("0")):"chk_deposit_all"==d&&($("#deposit_amt").val(""),$("#old_deposit_amt").val("0"));fn_calcTotalPrice()}function fn_point_change(a){var b=a.id,c=a.value,d=$("#frm_inp input[name=totsttlamt]:hidden").val(),e=$("#old_"+b).val(),f=0;c=""==c?"0":c,d=parseInt(d)+parseInt(e),"lpoint_amt"==b&&$("#chk_lpoint").prop("checked")?(f=parseInt($("#useable_lpoint_amt").val()),$("#chk_lpoint_all").prop("checked",!1)):"lt_point_amt"==b&&$("#chk_lt_point").prop("checked")&&(f=parseInt($("#useable_lt_point_amt").val()),$("#chk_lt_point_all").prop("checked",!1)),f=f>d?d:f,parseInt(c)>f?a.value=0==f?0:10*Math.floor(f/10):a.value="0"==c?"":c,fn_calcTotalPrice()}function fn_point_focus(a){a.value="",fn_point_change(a)}function fn_freeDlvpCpnUse(){var a=$("#dlv_prom_use_yn").val(),b=$("#dlv_fvr_val").val(),c=$("#frm_inp input[name=totsttlamt]:hidden").val();return"N"==a&&parseInt(b)>parseInt(c)?($("#dlv_prom_use_yn").val("N"),$("#frm_inp input[name=free]").eq(1).prop("checked",!0),void alert("배송비할인 금액이 결제금액보다 클 수 없습니다.")):(fn_getDeliCnt(),void fn_calcTotalPrice())}function setCertSmartpayResult(a,b,c,d,e,f,g,h,i){paramSmartpaySet(a,b,c,d,f,g,h,i)}function paramSmartpaySet(a,b,c,d,e,f,g,h){$("#frm_send input[name=xid]").val(a),$("#frm_send input[name=eci]").val(b),$("#frm_send input[name=cavv]").val(c),$("#frm_send input[name=cardno]").val(d),$("#frm_send input[name=restype]").val(f),""!=f&&""!=g&&g!=$("#frm_send input[name=user_key]").val()&&$("#frm_send input[name=update_easn_yn]").val("Y"),$("#frm_send input[name=user_key]").val(g),$("#frm_send input[name=res_type]").val(f),$("#frm_send input[name=req_type]").val(f),$("#frm_send input[name=apvl_desc]").val(h),""==a&&""==b&&""==c&&""==d?(returnPaymentPage(),$("#X_ANSIM_FRAME").css("width","450px"),$("#X_ANSIM_FRAME").css("height","0px"),$("#X_ANSIM_FRAME").hide(),$("#ANSIM_LAYER").hide()):doPayment()}function misp_plugIn(a){a==paytype_card_016||a==paytype_card_026||a==paytype_card_002||a==paytype_card_054||a==paytype_card_021?$("#mISP_INFO").show():$("#mISP_INFO").hide()}function fn_getDeliCnt(){var a=$("#tot_ord_deli_cnt").val();return a>1?($("#frm_inp input[name=free]:radio").length>0&&($("#dlv_prom_use_yn").val("N"),$("#frm_inp input[name=free]:radio").eq(1).prop("checked",!0),$("#frm_inp input[name=free]:radio").eq(0).prop("disabled",!0)),"undefined"!=$.type($("#frm_inp select[name=dup_coupon]").val())&&($("#frm_inp select[name=dup_coupon]").val("N"),$("#frm_inp select[name=dup_coupon]").prop("disabled",!0))):($("#frm_inp input[name=free]:radio").length>0&&($("#frm_inp input[name=free]:radio").prop("disabled",!1),$("#dlv_prom_use_yn").val($("#frm_inp input[name=free]:checked").val())),"undefined"!=$.type($("#frm_inp select[name=dup_coupon]").val())&&"27"!=$("#frm_send input[name=prommdclcd]").val()&&$("#frm_inp select[name=dup_coupon]").prop("disabled",!1)),a}function setDeliDataGift(){console.log("[setDeliDataGift]===============================");var a=1,b=(new Array,new Array),c=new Array,d=(new Array,new Array,new Array),e=new Array,f=new Array,g=(new Array,new Array,new Array),h=new Array,i=new Array,j=(new Array,new Array,new Array),k=new Array,l=new Array,m=new Array,n=new Array,o=(new Array,new Array),p=new Array,q=(new Array,new Array,new Array),r=new Array,s=new Array,t=(new Array,new Array),u=!1,v=0;if(ord_man_nm="",1==fn_getDeliCnt()?(a=0,u=!0):$("#frm_send input[name=chk_multi_dlvp]:hidden").val("Y"),""==$.trim($("#order_nm").val()))return alert("보내는 분 이름을 입력해 주세요."),$("#order_nm").focus(),!1;if(ord_man_nm=$.trim($("#order_nm").val()),$("#frm_send input[name=ord_man_nm]").val(ord_man_nm),console.log("ord_man_nm:"+$("#frm_send input[name=ord_man_nm]:hidden").val()),""==$.trim($("[name=inpcell1]:enabled").val())||""==$.trim($("input[name=inpcell2]").val())||""==$.trim($("input[name=inpcell3]").val()))return alert("보내는 분 연락처를 입력해 주세요."),$("input[name=inpcell2]").focus(),!1;if($("#frm_send input[name=ord_man_tell_no]").val($.trim($("[name=inpcell1]:enabled").val())+$.trim($("input[name=inpcell2]").val())+$.trim($("input[name=inpcell3]").val())),console.log("ord_man_tell_no:"+$("#frm_send input[name=ord_man_tell_no]:hidden").val()),setTotalDeliSelInfo(),v=1*$("#tot_ord_goods_cnt").val(),w>v)return alert("주문수량 "+w+"개를 모두 선택하세요."),!1;if(!fn_chkSendInfo())return!1;for(var w=1*$("#goodsTotQty").val(),x="",y="",z="",A="",B="",C="",D="",E="",F="",G="",H="",I="",J="",K="",L="",M="",N="",O=$("#sel_deli_tab").val(),P=$("#tot_ord_deli_cnt").val(),Q="",R="",S=$(".msg_card .to_list li"),T=!1,U=0,V="N",W=1;+P+1>W;W++){if(U++,skip_yn="N","0"==O)x=$("#dlvp_info li").eq(W-1).find("input[name=rcv_nm]").val(),z=$("#dlvp_info li").eq(W-1).find("input[name=rcv_tel_no]").val(),A=u?w:1*$("#dlvp_info li").eq(W-1).find("select[name=ord_qty]").val(),B=z.substring(0,3),10==z.length?(C=z.substring(3,6),D=z.substring(6)):(C=z.substring(3,7),D=z.substring(7)),F="-";else if("1"==O)if(w>10)x="-",B="000",C="0000",D="0000",F="-",V="Y",A=1;else if($("#deli_"+W+"_"+O+" #li_mine").hasClass("on")){var X=$("#deli_"+W+"_"+O+" #li_mine #deli_select_"+W).val(),Y=$('input:radio[name="detail_list"][value="'+X+'"]');x=Y.data("d02"),A=u?w:1*$("#deli_"+W+"_"+O+" #li_mine select[name=ord_qty]").val(),0==$("#deli_"+W+"_"+O+" #li_mine input[name=inpcell2]").is(":visible")?(z=$("#deli_"+W+"_"+O+" #deli_phone_text_"+W).html().replace(/-/g,""),B=z.substring(0,3),10==z.length?(C=z.substring(3,6),D=z.substring(6)):(C=z.substring(3,7),D=z.substring(7))):(B=$("#deli_"+W+"_"+O+" #li_mine select[name=inpcell1]").val(),C=$("#deli_"+W+"_"+O+" #li_mine input[name=inpcell2]").val(),D=$("#deli_"+W+"_"+O+" #li_mine input[name=inpcell3]").val()),F=Y.data("d03").toString(),G=Y.data("d04").toString(),H=Y.data("d05"),I=Y.data("d06"),E=F+G,K=Y.data("d07").toString(),L=Y.data("d08").toString(),M=Y.data("d09"),N=Y.data("d10"),J=K+L}else x=$("#deli_"+W+"_"+O+" #li_new input[name=inprmitnm]").val(),A=u?w:1*$("#deli_"+W+"_"+O+" #li_new select[name=ord_qty]").val(),F=$("#deli_"+W+"_"+O+" #li_new input[name=inpzip1]").val().toString(),G=$("#deli_"+W+"_"+O+" #li_new input[name=inpzip2]").val().toString(),H=$("#deli_"+W+"_"+O+" #li_new input[name=inpaddr1]").val(),I=$("#deli_"+W+"_"+O+" #li_new input[name=inpaddr2]").val(),E=F+G,K=$("#deli_"+W+"_"+O+" #li_new input[name=stnm_inp_zip1]").val().toString(),L=$("#deli_"+W+"_"+O+" #li_new input[name=stnm_inp_zip2]").val().toString(),M=$("#deli_"+W+"_"+O+" #li_new input[name=stnm_inp_addr1]").val(),N=$("#deli_"+W+"_"+O+" #li_new input[name=stnm_inp_addr2]").val(),J=K+L,B=$("#deli_"+W+"_"+O+" #li_new select[name=inpcell1]").val(),C=$("#deli_"+W+"_"+O+" #li_new input[name=inpcell2]").val(),D=$("#deli_"+W+"_"+O+" #li_new input[name=inpcell3]").val();else if(1==$("#deli_"+W+"_"+O+"_t").is(":visible")||1==$("#deli_"+W+"_"+O+"_d").is(":visible"))if(1==$("#deli_"+W+"_"+O+"_t").is(":visible"))x=$("#deli_"+W+"_"+O+"_t input[name=rcv_nm]").val(),z=$("#deli_"+W+"_"+O+"_t input[name=rcv_tel_no]").val(),A=u?w:1*$("#deli_"+W+"_"+O+"_t select[name=ord_qty]").val(),B=z.substring(0,3),10==z.length?(C=z.substring(3,6),D=z.substring(6)):(C=z.substring(3,7),D=z.substring(7)),F="-";else if($("#deli_"+W+"_"+O+"_d #li_mine").hasClass("on")){var X=$("#deli_"+W+"_"+O+"_d #li_mine #deli_select_"+W).val(),Y=$('input:radio[name="detail_list"][value="'+X+'"]');
x=Y.data("d02");var X=$("#deli_"+W+"_"+O+"_d #li_mine #deli_select_"+W).val(),Y=$('input:radio[name="detail_list"][value="'+X+'"]');x=Y.data("d02"),A=u?w:1*$("#deli_"+W+"_"+O+"_d #li_mine select[name=ord_qty]").val(),0==$("#deli_"+W+"_"+O+"_d #li_mine input[name=inpcell2]").is(":visible")?(z=$("#deli_"+W+"_"+O+"_d #deli_phone_text_"+W).html().replace(/-/g,""),B=z.substring(0,3),10==z.length?(C=z.substring(3,6),D=z.substring(6)):(C=z.substring(3,7),D=z.substring(7))):(B=$("#deli_"+W+"_"+O+"_d #li_mine select[name=inpcell1]").val(),C=$("#deli_"+W+"_"+O+"_d #li_mine input[name=inpcell2]").val(),D=$("#deli_"+W+"_"+O+"_d #li_mine input[name=inpcell3]").val()),F=Y.data("d03").toString(),G=Y.data("d04").toString(),H=Y.data("d05"),I=Y.data("d06"),E=F+G,K=Y.data("d07").toString(),L=Y.data("d08").toString(),M=Y.data("d09"),N=Y.data("d10"),J=K+L}else x=$("#deli_"+W+"_"+O+"_d #li_new input[name=inprmitnm]").val(),x=$("#deli_"+W+"_"+O+"_d #li_new input[name=inprmitnm]").val(),A=u?w:1*$("#deli_"+W+"_"+O+"_d #li_new select[name=ord_qty]").val(),F=$("#deli_"+W+"_"+O+"_d #li_new input[name=inpzip1]").val().toString(),G=$("#deli_"+W+"_"+O+"_d #li_new input[name=inpzip2]").val().toString(),H=$("#deli_"+W+"_"+O+"_d #li_new input[name=inpaddr1]").val(),I=$("#deli_"+W+"_"+O+"_d #li_new input[name=inpaddr2]").val(),E=F+G,K=$("#deli_"+W+"_"+O+"_d #li_new input[name=stnm_inp_zip1]").val().toString(),L=$("#deli_"+W+"_"+O+"_d #li_new input[name=stnm_inp_zip2]").val().toString(),M=$("#deli_"+W+"_"+O+"_d #li_new input[name=stnm_inp_addr1]").val(),N=$("#deli_"+W+"_"+O+"_d #li_new input[name=stnm_inp_addr2]").val(),J=K+L,B=$("#deli_"+W+"_"+O+"_d #li_new select[name=inpcell1]").val(),C=$("#deli_"+W+"_"+O+"_d #li_new input[name=inpcell2]").val(),D=$("#deli_"+W+"_"+O+"_d #li_new input[name=inpcell3]").val();else U--,skip_yn="Y";if("N"==skip_yn){if($("#each_msg_write").prop("checked")){if(y=S.eq(U-1).find("input[name=cd_name]").val(),x!=y&&(console.log("받는 분/메시지TO 이름 불일치, 받는 분으로 통일:"+x+"/"+y),S.eq(U-1).find("input[name=cd_name]").val(x),S.eq(U-1).find("span").text(x)),S.eq(U-1).hasClass("on")?(Q=$("#giftCardBgImgNo").val(),R=$("#card_txt_view").val(),S.eq(U-1).find("input[name=cd_img]").val(Q),S.eq(U-1).find("input[name=cd_msg]").val(R)):(Q=S.eq(U-1).find("input[name=cd_img]").val(),R=S.eq(U-1).find("input[name=cd_msg]").val()),""==$.trim(Q)||""==$.trim(R))return alert("개인별 카드 메시지를 작성해 주세요"),T=!0,S.eq(U-1).click(),$("#card_txt_view").val(""),$("#card_txt_view").focus(),!1}else if(Q=$("#giftCardBgImgNo").val(),R=$("#card_txt_view").val(),""==$.trim(Q)||""==$.trim(R))return alert("카드 메시지를 작성해 주세요."),console.log("msg_bg_sel:"+Q+"|msg_bg_cont:"+R),$("#card_txt_view").focus(),T=!0,!1;1==Q.length&&(Q="0"+Q),"-"==F&&(E="",H="",I="",J="",M="",N=""),p[U-1]=U-1,s[U-1]=ord_man_nm,c[U-1]=x,q[U-1]=x,e[U-1]=x,l[U-1]=B,m[U-1]=C,n[U-1]=D,o[U-1]=A,r[U-1]=R,t[U-1]=Q,d[U-1]="C",b[U-1]="N",f[U-1]=E,g[U-1]=H,h[U-1]=I,i[U-1]=J,j[U-1]=M,k[U-1]=N}}return T?!1:($("#frm_send input[name=dlvp_idx]").val(p.join(split_gubun_3)),$("#frm_send input[name=dlvpnm]:hidden").val(c.join(split_gubun_3)),$("#frm_send input[name=rmitnm]:hidden").val(e.join(split_gubun_3)),$("#frm_send input[name=cellsctno]:hidden").val(l.join(split_gubun_3)),$("#frm_send input[name=celltxnono]:hidden").val(m.join(split_gubun_3)),$("#frm_send input[name=cellendno]:hidden").val(n.join(split_gubun_3)),$("#frm_send input[name=ord_qty_list]").val(o.join(split_gubun_3)),$("#frm_send input[name=sendmessage]:hidden").val(r.join(split_gubun_3)),$("#frm_send input[name=gift_msg_cd]:hidden").val(t.join(split_gubun_3)),$("#frm_send input[name=delichk]:hidden").val(d.join(split_gubun_3)),$("#frm_send input[name=receivename]:hidden").val(q.join(split_gubun_3)),$("#frm_send input[name=sendname]:hidden").val(s.join(split_gubun_3)),$("#frm_send input[name=basedlvpyn]:hidden").val(b.join(split_gubun_3)),$("#frm_send input[name=dlvzip]:hidden").val(f.join(split_gubun_3)),$("#frm_send input[name=postaddr]:hidden").val(g.join(split_gubun_3)),$("#frm_send input[name=dtladdr]:hidden").val(h.join(split_gubun_3)),$("#frm_send input[name=stnm_dlv_zip]:hidden").val(i.join(split_gubun_3)),$("#frm_send input[name=stnm_post_addr]:hidden").val(j.join(split_gubun_3)),$("#frm_send input[name=stnm_dtl_addr]:hidden").val(k.join(split_gubun_3)),console.log("chk_multi_dlvp:"+$("#frm_send input[name=chk_multi_dlvp]:hidden").val()),console.log("dlvp_idx:"+$("#frm_send input[name=dlvp_idx]:hidden").val()),console.log("dlvpnm:"+$("#frm_send input[name=dlvpnm]:hidden").val()),console.log("rmitnm:"+$("#frm_send input[name=rmitnm]:hidden").val()),console.log("cellsctno:"+$("#frm_send input[name=cellsctno]:hidden").val()),console.log("celltxnono:"+$("#frm_send input[name=celltxnono]:hidden").val()),console.log("cellendno:"+$("#frm_send input[name=cellendno]:hidden").val()),console.log("ord_qty_list:"+$("#frm_send input[name=ord_qty_list]:hidden").val()),console.log("sendmessage:"+$("#frm_send input[name=sendmessage]:hidden").val()),console.log("gift_msg_cd:"+$("#frm_send input[name=gift_msg_cd]:hidden").val()),console.log("delichk:"+$("#frm_send input[name=delichk]:hidden").val()),console.log("receivename:"+$("#frm_send input[name=receivename]:hidden").val()),console.log("sendname:"+$("#frm_send input[name=sendname]:hidden").val()),console.log("basedlvpyn:"+$("#frm_send input[name=basedlvpyn]:hidden").val()),console.log("dlvzip:"+$("#frm_send input[name=dlvzip]:hidden").val()),console.log("postaddr:"+$("#frm_send input[name=postaddr]:hidden").val()),console.log("dtladdr:"+$("#frm_send input[name=dtladdr]:hidden").val()),console.log("stnm_dlv_zip:"+$("#frm_send input[name=stnm_dlv_zip]:hidden").val()),console.log("stnm_post_addr:"+$("#frm_send input[name=stnm_post_addr]:hidden").val()),console.log("stnm_dtl_addr:"+$("#frm_send input[name=stnm_dtl_addr]:hidden").val()),$("#frm_send input[name=sendmessage]:hidden").val().length>0&&$("#frm_send input[name=sendmessage]:hidden").val($("#frm_send input[name=sendmessage]:hidden").val().replace(/\n/g,"<br>")),"Y"==V?$("#frm_send input[name=str_msg_snd_fcst_dtime]:hidden").val($("#giftmsg_day").find("option:eq(2)").val()):$("#giftmsg_send2").prop("checked")&&$("#frm_send input[name=str_msg_snd_fcst_dtime]:hidden").val($("#giftmsg_day").val()),console.log("str_msg_snd_fcst_dtime:"+$("#frm_send input[name=str_msg_snd_fcst_dtime]:hidden").val()),void 0!=$("input[name=gift_bag]")&&($("#gift_bag_y").prop("checked")?$("#frm_send input[name=spbg_req_yn]:hidden").val($("input[name=gift_bag_size]:radio:checked").val()):$("#frm_send input[name=spbg_req_yn]:hidden").val("0")),console.log("spbg_req_yn:"+$("#frm_send input[name=spbg_req_yn]:hidden").val()),void 0!=$("#with_paper")&&$("#with_paper").prop("checked")?$("#frm_send input[name=msg_card_encl_yn]:hidden").val("Y"):$("#frm_send input[name=msg_card_encl_yn]:hidden").val("N"),console.log("msg_card_encl_yn:"+$("#frm_send input[name=msg_card_encl_yn]:hidden").val()),void 0!=$("#shop_memo_cont_")&&""!=$.trim($("#shop_memo_cont_").val())&&($("#frm_send input[name=shop_memo_cont]:hidden").val($.trim($("#shop_memo_cont_").val())),console.log("shop_memo_cont:"+$("#frm_send input[name=shop_memo_cont]:hidden").val())),void 0!=$("#giftopt1")&&$("#giftopt1").prop("checked")?($("#frm_send input[name=gift_pkg_tp_cd]:hidden").val("01"),$("#frm_send input[name=gift_pkg_yn]:hidden").val("Y")):($("#frm_send input[name=gift_pkg_tp_cd]:hidden").val("00"),$("#frm_send input[name=gift_pkg_yn]:hidden").val("N")),console.log("gift_pkg_tp_cd:"+$("#frm_send input[name=gift_pkg_tp_cd]:hidden").val()),console.log("gift_pkg_yn:"+$("#frm_send input[name=gift_pkg_yn]:hidden").val()),!0)}function fn_clickMinus(a){$(a).parent().remove(),$("#each_msg_write").prop("checked")&&($(".msg_card .to_list li").each(function(a){$(this).remove()}),$("#to_name_msg").hide(),$("#giftMsgConfirm").val("N"),$("#each_msg_write").prop("checked",!1)),1==$("#dlvp_info li").length&&$("#each_msg_write").prop("disabled",!0),setTotalDeliSelInfo(),benefit_dlvp_set()}function fn_appendNewAddr1(){fn_chkOrdQty(1)&&($.dlvClone='<li class="flex">'+$("#empty_dlvp_info ul li").clone().html()+"</li>",$("#dlvp_info:last").append($.dlvClone),$("#dlvp_info li:last>a").on("click",function(){fn_clickMinus(this)}),$("#dlvp_info li:last>span>select").on("change",function(){1==$(this).is(":visible")?(console.log("ord_qty change1 on...."),fn_changeOrdQty(this)):console.log("ord_qty change1 off...."),setTotalDeliSelInfo()}),$("#one_send").prop("checked")&&$("#one_send").prop("checked",!1),setTotalDeliSelInfo())}function fn_changeRcvNm(a){console.log("fn_changeRcvNm, obj.value--->"+a.value);var b=$(".msg_card .to_list li"),c="",d="";if(1*$("#goodsTotQty").val()>1&&$("#each_msg_write").prop("checked")){if($.trim($(a).val()).length<=0&&$(a).is(":visible"))return alert("받는 분 이름을 입력해 주세요."),void $(a).focus();$("#dlvp_info li").each(function(a){c=$(this).find("input[name=rcv_nm]").val(),d=b.eq(a).find("input[name=cd_name]").val(),c!=d&&(console.log("받는 분/메시지TO 이름 불일치, [받는 분]으로 재설정:"+c+"/"+d),b.eq(a).find("input[name=cd_name]").val(c),b.eq(a).find("span").text(c))})}}function fn_changeOrdQty(a){var b=$(a).val(),c=$(a).next("input").val();$("#sel_deli_tab").val();return fn_chkOrdQty(0)?($(a).next("input").val(b),void 0!=$(a).data("qtyidx")&&($("#deli_"+$(a).data("qtyidx")).find("select[name=ord_qty]").val(b),$("#deli_"+$(a).data("qtyidx")).find("input[name=ord_qty_temp]").val(b)),void benefit_dlvp_set()):($(a).val(c),void setTotalDeliSelInfo())}function fn_chkOrdQty(a){setTotalDeliSelInfo();var b=1*$("#goodsTotQty").val(),c=1*$("#tot_ord_goods_cnt").val();return c+a>b?(alert("주문수량 "+b+"개를 초과 하실 수 없습니다."),!1):!0}function fn_chkSendInfo(){var a=0,b=1*$("#goodsTotQty").val(),c=0,d=0,e="Y",f=$("#sel_deli_tab").val(),g=0,h="",i="",j="",k="",l="",m="",n="",o="",p="",q="";if("0"==f)$("#dlvp_info li").each(function(b){a++,g=$(this).children().find("select[name=ord_qty]").val(),h=$(this).find("input[name=rcv_nm]").val(),i=$(this).find("input[name=rcv_tel_no]").val();var d=/(01[016789])(\d{3}|\d{4})\d{4}$/g;return""==$.trim(h)?(alert("선물 받으시는 분의 성함을 정확히 확인해 주세요."),$(this).find("input[name=rcv_nm]").focus(),e="N",!1):d.test(i)?void(c+=1*g):($.trim(i).length<=0?alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요."):alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요. ["+i+"]"),$(this).find("input[name=rcv_tel_no]").focus(),e="N",!1)});else if("1"==f)if(b>10)c+=b;else{1==b?deli_cnt=1:deli_cnt=$("#rcv_qty_1").val();for(var r=1;r<=deli_cnt;r++){if($("#deli_"+r+"_1 #li_mine").hasClass("on")){g=1*$("#deli_"+r+"_1 #li_mine select[name=ord_qty]").val();var s=$("#deli_"+r+"_"+f+" #li_mine #deli_select_"+r).val(),t=$('input:radio[name="detail_list"][value="'+s+'"]');i=0==$("#deli_"+r+"_"+f+" #li_mine input[name=inpcell2]").is(":visible")?$("#deli_"+r+"_"+f+" #deli_phone_text_"+r).html().replace(/-/g,""):$("#deli_"+r+"_"+f+" #li_mine select[name=inpcell1]").val()+$("#deli_"+r+"_"+f+" #li_mine input[name=inpcell2]").val()+$("#deli_"+r+"_"+f+" #li_mine input[name=inpcell3]").val();var u=/(01[016789])(\d{3}|\d{4})\d{4}$/g;if(!u.test(i))return $.trim(i).length<=0?alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요."):alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요. ["+i+"]"),$("#deli_"+r+"_"+f+" #li_mine #deli_phone_text_"+r).hide(),$("#deli_"+r+"_"+f+" #li_mine #deli_phone_inp_"+r).show(),$("#deli_"+r+"_"+f+" #li_mine input[name=inpcell2]").show(),$("#deli_"+r+"_"+f+" #li_mine input[name=inpcell3]").show(),$("#deli_"+r+"_"+f+" #li_mine input[name=inpcell2]").focus(),e="N",!1;if(("000"==t.data("d03")||t.data("d03").length<=0||t.data("d04").length<=0||t.data("d05").length<=0||t.data("d06").length<=0)&&("000"==t.data("d07")||t.data("d07").length<=0||t.data("d08").length<=0||t.data("d09").length<=0||t.data("d10").length<=0))return alert("기존 배송지정보(우편번호/주소)가 유효하지 않습니다.\n새로운 배송지로 입력해 주세요."),$("#deli_"+r+"_"+f+" #li_new > a").click(),$("#deli_"+r+"_"+f+" #li_new [name=inprmitnm]").val(t.data("d02")),$("#deli_"+r+"_"+f+" #li_new select[name=inpcell1]").val(t.data("d13")),$("#deli_"+r+"_"+f+" #li_new input[name=inpcell2]").val(t.data("d14")),$("#deli_"+r+"_"+f+" #li_new input[name=inpcell3]").val(t.data("d15")),$("#deli_"+r+"_"+f+" #li_new input[name=txt_zip_tot]").focus(),e="N",!1}else{if(g=1*$("#deli_"+r+"_1 #li_new select[name=ord_qty]").val(),j=$("#deli_"+r+"_"+f+" #li_new input[name=inpzip1]").val().toString(),k=$("#deli_"+r+"_"+f+" #li_new input[name=inpzip2]").val().toString(),l=$("#deli_"+r+"_"+f+" #li_new input[name=inpaddr1]").val(),m=$("#deli_"+r+"_"+f+" #li_new input[name=inpaddr2]").val(),n=$("#deli_"+r+"_"+f+" #li_new input[name=stnm_inp_zip1]").val().toString(),o=$("#deli_"+r+"_"+f+" #li_new input[name=stnm_inp_zip2]").val().toString(),p=$("#deli_"+r+"_"+f+" #li_new input[name=stnm_inp_addr1]").val(),q=$("#deli_"+r+"_"+f+" #li_new input[name=stnm_inp_addr2]").val(),h=$("#deli_"+r+"_"+f+" #li_new input[name=inprmitnm]").val(),i=$("#deli_"+r+"_"+f+" #li_new select[name=inpcell1]").val()+$("#deli_"+r+"_"+f+" #li_new input[name=inpcell2]").val()+$("#deli_"+r+"_"+f+" #li_new input[name=inpcell3]").val(),$.trim(h).length<=0)return alert("선물 받으시는 분의 성함을 정확히 확인해 주세요."),$("#deli_"+r+"_"+f+" #li_new input[name=inprmitnm]").focus(),e="N",!1;var u=/(01[016789])(\d{3}|\d{4})\d{4}$/g;if(!u.test(i))return $.trim(i).length<=0?alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요."):alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요. ["+i+"]"),$("#deli_"+r+"_"+f+" #li_new input[name=inpcell2]").val(""),$("#deli_"+r+"_"+f+" #li_new input[name=inpcell3]").val(""),$("#deli_"+r+"_"+f+" #li_new input[name=inpcell2]").focus(),e="N",!1;if(("000"==j||j.length<=0||k.length<=0||l.length<=0||$.trim(m).length<=0)&&(n="000"))return alert("선물 받으시는 분의 주소를 확인해 주세요."),$("#deli_"+r+"_"+f+" #li_new input[name=txt_zip_tot]").focus(),e="N",!1}c+=g}}else{deli_cnt=$("#rcv_qty_2").val();for(var r=1;r<=deli_cnt;r++)if(1==$("#deli_"+r+"_2_t").is(":visible")||1==$("#deli_"+r+"_2_d").is(":visible"))if(1==$("#deli_"+r+"_2_t").is(":visible")){g=$("#deli_"+r+"_2_t select[name=ord_qty]").val(),h=$("#deli_"+r+"_2_t input[name=rcv_nm]").val(),i=$("#deli_"+r+"_2_t input[name=rcv_tel_no]").val();var u=/(01[016789])(\d{3}|\d{4})\d{4}$/g;if(""==$.trim(h))return alert("선물 받으시는 분의 성함을 정확히 확인해 주세요."),$("#deli_"+r+"_2_t input[name=rcv_nm]").focus(),e="N",!1;if(!u.test(i))return $.trim(i).length<=0?alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요."):alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요. ["+i+"]"),$("#deli_"+r+"_2_t input[name=rcv_tel_no]").focus(),e="N",!1;c+=1*g}else{if($("#deli_"+r+"_2_d #li_mine").hasClass("on")){g=1*$("#deli_"+r+"_2_d #li_mine select[name=ord_qty]").val();var s=$("#deli_"+r+"_"+f+"_d #li_mine #deli_select_"+r).val(),t=$('input:radio[name="detail_list"][value="'+s+'"]');i=0==$("#deli_"+r+"_"+f+" #li_mine input[name=inpcell2]").is(":visible")?$("#deli_"+r+"_"+f+"_d #deli_phone_text_"+r).html().replace(/-/g,""):$("#deli_"+r+"_"+f+"_d #li_mine select[name=inpcell1]").val()+$("#deli_"+r+"_"+f+"_d #li_mine input[name=inpcell2]").val()+$("#deli_"+r+"_"+f+"_d #li_mine input[name=inpcell3]").val();var u=/(01[016789])(\d{3}|\d{4})\d{4}$/g;if(!u.test(i))return $.trim(i).length<=0?alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요."):alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요. ["+i+"]"),$("#deli_"+r+"_"+f+"_d #li_mine #deli_phone_text_"+r).hide(),$("#deli_"+r+"_"+f+"_d #li_mine #deli_phone_inp_"+r).show(),$("#deli_"+r+"_"+f+"_d #li_mine input[name=inpcell2]").show(),$("#deli_"+r+"_"+f+"_d #li_mine input[name=inpcell3]").show(),$("#deli_"+r+"_"+f+"_d #li_mine input[name=inpcell2]").focus(),e="N",!1;if(("000"==t.data("d03")||t.data("d03").length<=0||t.data("d04").length<=0||t.data("d05").length<=0||t.data("d06").length<=0)&&("000"==t.data("d07")||t.data("d07").length<=0||t.data("d08").length<=0||t.data("d09").length<=0||t.data("d10").length<=0))return alert("기존 배송지정보(우편번호/주소)가 유효하지 않습니다.\n새로운 배송지로 입력해 주세요."),$("#deli_"+r+"_"+f+"_d #li_new > a").click(),$("#deli_"+r+"_"+f+"_d #li_new [name=inprmitnm]").val(t.data("d02")),$("#deli_"+r+"_"+f+"_d #li_new select[name=inpcell1]").val(t.data("d13")),$("#deli_"+r+"_"+f+"_d #li_new input[name=inpcell2]").val(t.data("d14")),$("#deli_"+r+"_"+f+"_d #li_new input[name=inpcell3]").val(t.data("d15")),$("#deli_"+r+"_"+f+"_d #li_new input[name=txt_zip_tot]").focus(),e="N",!1}else{if(g=1*$("#deli_"+r+"_2_d #li_new select[name=ord_qty]").val(),g=1*$("#deli_"+r+"_2_d #li_new select[name=ord_qty]").val(),j=$("#deli_"+r+"_"+f+"_d #li_new input[name=inpzip1]").val().toString(),k=$("#deli_"+r+"_"+f+"_d #li_new input[name=inpzip2]").val().toString(),l=$("#deli_"+r+"_"+f+"_d #li_new input[name=inpaddr1]").val(),m=$("#deli_"+r+"_"+f+"_d #li_new input[name=inpaddr2]").val(),n=$("#deli_"+r+"_"+f+"_d #li_new input[name=stnm_inp_zip1]").val().toString(),o=$("#deli_"+r+"_"+f+"_d #li_new input[name=stnm_inp_zip2]").val().toString(),p=$("#deli_"+r+"_"+f+"_d #li_new input[name=stnm_inp_addr1]").val(),q=$("#deli_"+r+"_"+f+"_d #li_new input[name=stnm_inp_addr2]").val(),h=$("#deli_"+r+"_"+f+"_d #li_new input[name=inprmitnm]").val(),i=$("#deli_"+r+"_"+f+"_d #li_new select[name=inpcell1]").val()+$("#deli_"+r+"_"+f+"_d #li_new input[name=inpcell2]").val()+$("#deli_"+r+"_"+f+"_d #li_new input[name=inpcell3]").val(),$.trim(h).length<=0)return alert("선물 받으시는 분의 성함을 정확히 확인해 주세요."),$("#deli_"+r+"_"+f+"_d #li_new input[name=inprmitnm]").focus(),e="N",!1;var u=/(01[016789])(\d{3}|\d{4})\d{4}$/g;if(!u.test(i))return $.trim(i).length<=0?alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요."):alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요. ["+i+"]"),$("#deli_"+r+"_"+f+"_d #li_new input[name=inpcell2]").val(""),$("#deli_"+r+"_"+f+"_d #li_new input[name=inpcell3]").val(""),$("#deli_"+r+"_"+f+"_d #li_new input[name=inpcell2]").focus(),e="N",!1;if(("000"==j||j.length<=0||k.length<=0||l.length<=0||$.trim(m).length<=0)&&("000"==n||n.length<=0||o.length<=0||p.length<=0||$.trim(q).length<=0))return alert("선물 받으시는 분의 주소를 확인해 주세요."),$("#deli_"+r+"_"+f+"_d #li_new input[name=txt_zip_tot]").focus(),e="N",!1}c+=g}else d+=1}return"N"==e?!1:b>c?(alert("주문수량 "+b+"개를 모두 선택하세요."),!1):(benefit_dlvp_set(),!0)}function init(){function a(){var a,b=d.width(),f=h._x()/-b,i=g.children("li").eq(c).find("input[name=cd_msg]");0==f?(h.setX(-(e-2)*b),f=e-2):f==e-1&&(h.setX(-1*b),f=1),d.find(".swipe_num .current").text(f),$(".msg_card_wrap").css("background",$("#card_swipe > li").eq(f).data("cdBg")),g.children("li").length&&g.children("li").eq(c).find("input[name=cd_img]").val(f),(""==i.val()||void 0==i.val())&&(a=$("#card_swipe > li").eq(f).children("img").attr("alt")),$("#giftCardBgImgNo").val(f),$("#giftCardBgMsg").val($("#card_swipe > li").eq(f).children("input[name=msgDescHd]").val()),$("#each_msg_write").prop("checked")?(g.children("li").length&&g.children("li").eq(c).find("input[name=cd_img]").val(f),a=""==i.val()||void 0==i.val()?$("#card_swipe > li").eq(f).children("img").attr("alt"):i.val(),$(".msg_card .card_cnt .card_txt").val(a)):(void 0==i.val()||""==i.val())&&"N"==$("#giftMsgConfirm").val()&&(a=$("#card_swipe > li").eq(f).children("input[name=msgDescHd]").val(),$(".msg_card .card_cnt .card_txt").val(a)),chkSendMsgLimit("card_txt_view",100,"sendmessagebyte_1")}function b(){$(".msg_card .to_list li").each(function(a){$(this).remove()}),$("#to_name_msg").hide(),$("#giftMsgConfirm").val("N"),$("#card_txt_view").val(""),c=1,h.setX(-1*d.width()),a()}if($("#card_swipe").length){var c=0,d=$("#card_swipe").parent(),e=$("#card_swipe > li").length+2,f=-1,g=$(".msg_card .to_list"),h=setEGSlide("#card_swipe",a,!0);$(".msg_card_wrap").css("background",$("#card_swipe > li").eq(1).data("cdBg")),d.children(".btn_swipe").click(function(){$(this).hasClass("prev")?f=1:$(this).hasClass("next")&&(f=-1);var b=d.width(),c=h._x()+b*f;h.setMoveX(c,300,function(){h.getIndex(e,b);a()})}),$("#card_txt_view").focusout(function(){var a=$("#giftCardBgImgNo").val(),b=$("#card_swipe > li").eq(1*a).children("input[name=msgDescHd]").val(),d=$("#card_txt_view").val();"N"==$("#giftMsgConfirm").val()&&void 0!=d&&""!=d&&b!=d&&$("#giftMsgConfirm").val("Y"),(void 0==d||""==d)&&$("#giftMsgConfirm").val("N"),$("#each_msg_write").prop("checked")&&void 0!=d&&""!=d&&g.children("li").eq(c).find("input[name=cd_msg]").val(d)}),$("#each_msg_write").click(function(){if($("#each_msg_write").prop("checked")){if(!fn_chkSendInfo())return $("#each_msg_write").prop("checked",!1),void b();$("#card_txt_view").val("");for(var e=$("#sel_deli_tab").val(),f=$("#tot_ord_deli_cnt").val(),i="",j=0,k=1;+f+1>k;k++){if("0"==e)i=$("#dlvp_info li").eq(k-1).find("input[name=rcv_nm]").val();else if("1"==e)if($("#deli_"+k+"_"+e+" #li_mine").hasClass("on")){var l=$("#deli_"+k+"_"+e+" #li_mine #deli_select_"+k).val(),m=$('input:radio[name="detail_list"][value="'+l+'"]');i=m.data("d02")}else i=$("#deli_"+k+"_"+e+" #li_new input[name=inprmitnm]").val();else if(1==$("#deli_"+k+"_"+e+"_t").is(":visible")||1==$("#deli_"+k+"_"+e+"_d").is(":visible"))if(1==$("#deli_"+k+"_"+e+"_t").is(":visible"))i=$("#deli_"+k+"_"+e+"_t input[name=rcv_nm]").val();else if($("#deli_"+k+"_"+e+"_d #li_mine").hasClass("on")){var l=$("#deli_"+k+"_"+e+"_d #li_mine #deli_select_"+k).val(),m=$('input:radio[name="detail_list"][value="'+l+'"]');i=m.data("d02")}else i=$("#deli_"+k+"_"+e+"_d #li_new input[name=inprmitnm]").val();else i="";""!=i&&($.msg_write_on="<li class='on'><span>"+i+"</span><input type='hidden' name='cd_name' value='"+i+"'/><input type='hidden' name='cd_img' value='1' /><input type='hidden' name='cd_msg' value=''/>",$.msg_write_off="<li><span>"+i+"</span><input type='hidden' name='cd_name' value='"+i+"'/><input type='hidden' name='cd_img' value='1' /><input type='hidden' name='cd_msg' value=''/>",0==j?$("#msg_write_list ul:last").append($.msg_write_on):$("#msg_write_list ul:last").append($.msg_write_off),$(".msg_card .to_list li").on("click",function(){if(c==$(this).index())return!1;g.children("li").eq(c).find("input[name=cd_msg]").val($(".order_section .msg_card_wrap .msg_card .card_cnt .card_txt").val());var b=$(this).find("input[name=cd_name]").val(),e=$(this).find("input[name=cd_img]").val(),f=$(this).find("input[name=cd_msg]").val();console.log("[받는분클릭시 저장된정보]"+b+"======="),console.log("(이미지번호)--->"+e),console.log("(메시지내용)--->"+f),console.log("(=================================="),$(".msg_card .to_name em").html(b),$(".msg_card .card_cnt .card_txt").val(f),c=$(this).index(),h.setX(-e*d.width()),a(),$(this).addClass("on").siblings().removeClass("on"),$("#to_name_msg").show()}),j++)}c=-1,$(".msg_card .to_list li").eq(0).click()}else b()})}if($("#premium_detail_list").length){var i=$(".layer_gift_pop.view_premium .swipe_wrap"),j=$("#premium_detail_list").parent(),k=$("#premium_detail_list > li").length+2,l=-1,m=setEGSlide("#premium_detail_list",null,!0);m.off(),i.children(".btn_swipe").click(function(){$(this).hasClass("prev")?l=1:$(this).hasClass("next")&&(l=-1);var a=j.width(),b=m._x()+a*l;m.setX(b);var c=m.getIndex(k,a);0==c?m.setX(-(k-2)*a):c==k-1&&m.setX(-1*a)})}if($(".pop_layer_pop").on("click",function(){var a=$(this).attr("class").match(/\b(view_).*?\b/),b=".layer_gift_pop."+a;$("#pageCover").show(),$(b).css({top:0,bottom:"auto"}).addClass("on"),$(b).hasClass("view_card")&&($("#pop_view_card_img").attr("src",$("#card_swipe > li").eq($("#giftCardBgImgNo").val()).children("img").attr("src")),$("#pop_view_card_txt").html($("#card_txt_view").val().replace(/\n/g,"<br>")),$("#pop_view_card_from").text("From. "+$("#order_nm").val())),$(".layer_gift_pop p.close, .layer_gift_pop .btn_cls").unbind("click").bind("click",function(){$("#pageCover").hide(),$(b).css("top","auto").removeClass("on")})}),$("#premium_list").length){var n=$("#premium_list"),o=n.children("label").length,p=n.children("label").eq(0).outerWidth(!0)*o;n.width(p);var q=n.simpleDrag(function(){var a=n.parent().width(),b=q._width()-a,c=q._x();c>0?c=0:-b>c&&(c=-b),q.setMoveX(c,300,null)})}$("input[name=gift_bag]").click(function(){var a=$(".gift_bag_size");$("#gift_bag_y").is(":checked")?a.addClass("on"):a.removeClass("on")}),$("input[name=one_send]").click(function(){var a=1*$("#goodsTotQty").val(),c=0,d=$("#sel_deli_tab").val();if(1==a)return void($(this).prop("checked")||$(this).prop("checked",!0));if($(this).prop("checked")){if("0"==d)$("#dlvp_info li").each(function(b){c++,0==b?($(this).children().find("select[name=ord_qty]").val(a),$(this).children().find("select[name=ord_qty]").attr("disabled",!0)):$(this).remove()});else if("1"==d){for(var e=1;a>=e;e++)1==e?($("#deli_1_1 select[name=ord_qty]").val(a),$("#deli_1_1 select[name=ord_qty]").attr("disabled",!0)):($("#deli_"+e+"_"+d+" select[name=ord_qty]").val(1),$("#deli_"+e+"_"+d).hide());$(this).parent().siblings().children().find("select").val(1)}$("#each_msg_write").prop("checked",!1),$("#each_msg_write").attr("disabled",!0),b(),$("#giftMsgConfirm").val("N")}else{if("0"==d){$("#dlvp_info li").each(function(a){c++,0==a&&($(this).children().find("select[name=ord_qty]").val(1),$(this).children().find("select[name=ord_qty]").attr("disabled",!1))});for(var e=c;a>e;e++)fn_appendNewAddr1()}else if("1"==d){for(var e=1;a>=e;e++)$("#deli_"+e+"_"+d).show();$(this).parent().siblings().children().find("select").val(a),$("#deli_1_"+d).find("select[name=ord_qty]").val(1),$("#deli_1_"+d).find("select[name=ord_qty]").attr("disabled",!1)}$("#each_msg_write").attr("disabled",!1)}setTotalDeliSelInfo(),benefit_dlvp_set()}),$("select[name=rcv_qty]").change(function(){var a=1*$(this).val(),c=(1*$(this).next("input").val(),$("#sel_deli_tab").val()),d=1*$("#goodsTotQty").val();if(console.log("rcvQty-->"+a),1==a)if("1"==c){if($("#one_send1").prop("checked"))return;$("#one_send1").click()}else for(var e=1;d>=e;e++)1==e?($("#deli_1_2 select[name=ord_qty]").val(d),$("#deli_1_2 select[name=ord_qty]").attr("disabled",!0)):$("#deli_"+e+"_"+c).hide();else for(var e=1;d>=e;e++)"1"==c&&$("#one_send1").prop("checked",!1),a>=e?($("#deli_"+e+"_"+c+" select[name=ord_qty]").val(1),$("#deli_"+e+"_"+c+" select[name=ord_qty]").attr("disabled",!1),$("#deli_"+e+"_"+c).show()):$("#deli_"+e+"_"+c).hide();setTotalDeliSelInfo(),benefit_dlvp_set(),1*$("#tot_ord_deli_cnt").val()>1&&$("#each_msg_write").attr("disabled")?$("#each_msg_write").attr("disabled",!1):1*$("#tot_ord_deli_cnt").val()==1?($("#each_msg_write").prop("checked",!1),$("#each_msg_write").attr("disabled",!0),b(),$("#giftMsgConfirm").val("N")):$("#each_msg_write").prop("checked")&&(b(),$("#each_msg_write").prop("checked",!1),$("#giftMsgConfirm").val("N"))}),$(".btnPlus").click(function(){1*$("#goodsTotQty").val()!=1&&($("#one_send").prop("checked")&&($("#one_send").prop("checked",!1),$("#one_send").attr("disabled",!1),$("#dlvp_info li").eq(0).children().find("select[name=ord_qty]").val(1),$("#dlvp_info li").eq(0).children().find("select[name=ord_qty]").attr("disabled",!1)),$("#each_msg_write").attr("disabled")&&$("#each_msg_write").attr("disabled",!1),$("#each_msg_write").prop("checked")&&(b(),$("#each_msg_write").prop("checked",!1)),fn_appendNewAddr1(),benefit_dlvp_set())}),$(".btnMinus").click(function(){fn_clickMinus(this)}),$("select[name=ord_qty]").change(function(){1==$(this).is(":visible")?(console.log("ord_qty change2 on...."),fn_changeOrdQty(this)):console.log("ord_qty change2 off....")}),$("#giftmsg_send1").click(function(){$("#giftmsg_send_date").hide()}),$("#giftmsg_send2").click(function(){$("#giftmsg_send_date").show()}),$(".gift_card_open").click(function(){$this=$(this),$("#pageCover").show(),$(".gift_card_layer").addClass("on"),$("#frm_inp #filterType_gift").egScroll(!0,!1),$(".btn_cancel").unbind("click").bind("click",function(){$("#pageCover").hide(),$(".gift_card_layer").removeClass("on")}),$(".btn_msg_list").unbind("click").bind("click",function(){$("input[name=card_msg_list]:checked").next(".rdo_txt").text();$("#pageCover").hide(),$(".gift_card_layer").removeClass("on");var a=$("input[name=card_msg_list]:checked").next(".rdo_txt").text();$("#card_txt_view").val(a),$("#giftMsgConfirm").val("Y"),chkSendMsgLimit("card_txt_view",100,"sendmessagebyte_1"),$("#card_txt_view").focus()})}),$(".gift_msgMulti").hide(),$(".gift_msgMulti_new").hide();var r="",s=-1;$("#frm_inp input[name^=gift_yn_]:radio").each(function(){r=$(this).attr("name"),s=r.substring(r.lastIndexOf("_")+1),"1"==$("#frm_inp input[name="+r+"]:radio:checked").val()?$("dd[name^=gift_msg_form_"+s+"]").show():$("dd[name^=gift_msg_form_"+s+"]").hide()}),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_CARD?$("#pay_card").show():$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_BANK?$("#pay_bank").show():$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY&&$("#pay_card").show(),localStorageReSet("order_"),ord_session_clear(),single_prom=singleProm,single_prom_cnt=singlePromCnt,multi_prom=multiProm,multi_prom_cnt=multiPromCnt,$("#frm_inp select[name=iscmcd] option:first").attr("selected",!0),$("#frm_inp input[name=rdo_cardinst]:radio").attr("disabled",!0),$("#frm_inp select[name=cardinstmon]").attr("disabled",!0),$("#frm_inp select[name=bankno] option:first").attr("selected",!0),$("input[name^=gift_yn_]:visible:last").prop("checked",!0),$("input[name^=gift_yn_]:visible:last").click(),$("#frm_inp input[name=gift_msg_y_index]:hidden").val(""),$("#frm_inp input[name=choose_card_msg_one]:hidden").val(""),$("#frm_inp input[name=choose_card_msg_many]:hidden").val("");var t=$("#deli_1 #li_mine input[name=inprmitnm]").val();$(".gift_msgMultiInsert input[name=defultRecvNm]:hidden").val(t),$(".sendGiftTebBtn > div").click(function(){var a=$(this).index();$(this).addClass("on").siblings().removeClass("on"),$(".sendGift_cont_wrap > div").eq(a).addClass("on").siblings().removeClass("on"),$("#sel_deli_tab").val(a.toString());var c=1*$("#goodsTotQty").val();0==a?($("#sendGift_dtl_1").hide(),$("#sendGift_dtl_2").hide(),c>10&&$("#giftmsg_send_div").show()):1==a?10>=c?($("#sendGift_dtl_1").show(),$("#sendGift_dtl_2").hide()):$("#giftmsg_send_div").hide():($("#sendGift_dtl_1").hide(),$("#sendGift_dtl_2").show()),setTotalDeliSelInfo(),benefit_dlvp_set(),1==a&&c>10?($("#each_msg_write").prop("checked",!1),$("#each_msg_write").attr("disabled",!0),b(),$("#giftMsgConfirm").val("N")):c>1&&(1*$("#tot_ord_deli_cnt").val()>1&&$("#each_msg_write").attr("disabled")?$("#each_msg_write").attr("disabled",!1):1*$("#tot_ord_deli_cnt").val()==1?($("#each_msg_write").prop("checked",!1),$("#each_msg_write").attr("disabled",!0),b(),$("#giftMsgConfirm").val("N")):$("#each_msg_write").prop("checked")&&(b(),$("#each_msg_write").prop("checked",!1),$("#giftMsgConfirm").val("N")))}),$(".order_send_select .s_text").each(function(a){var c,d,e;$(this).find("input:radio").change(function(){return c=$(this).parent().index(),d=$(this).parents("li").find(".cont > div").eq(c),e=d.hasClass("on")||d.siblings().hasClass("on")?!1:!0,console.log("order_send_select(index/firstOpen)-->"+c+"/"+e),1!=e||fn_chkOrdQty(1)?(d.addClass("on").siblings().removeClass("on"),setTotalDeliSelInfo(),benefit_dlvp_set(),void(1*$("#goodsTotQty").val()>1&&$("#each_msg_write").prop("checked")&&(b(),$("#each_msg_write").prop("checked",!1)))):void $(this).prop("checked",!1)})}),$(".tab_addr > li > a").click(function(){isDeliPlcChg&&($(this).parent().siblings().removeClass("on"),$(this).parent().siblings().children().next().hide(),$(this).parent().addClass("on"),$(this).parent().children().next().css("display","block"),"li_mine"==$(this).parent().attr("id")?(switchDeliOption("mine",$(this).attr("cnt"),$(this).next().find("[name=deli_select]").val(),$(this).attr("cnttab")),sendTclick("order_Clk_tap_1")):"li_new"==$(this).parent().attr("id")&&(switchDeliOption("new",$(this).attr("cnt"),"",$(this).attr("cnttab")),sendTclick("order_Clk_tap_2")),setTotalDeliSelInfo(),benefit_dlvp_set(),1*$("#goodsTotQty").val()>1&&$("#each_msg_write").prop("checked")&&(b(),$("#each_msg_write").prop("checked",!1)))}),$(".tab_addr_detail > li > a").click(function(){$(this).parent().siblings().removeClass("on").children().next().hide(),$(this).parent().addClass("on").children().next().eq(0).show().nextAll().hide()}),$(".tit_addr_search").on("click",function(){var a=$(this);a.toggleClass("show"),a.hasClass("show")?(a.children(".txt").replaceWith('<span class="txt">취소하기</span>'),
a.parent().next().show().next().hide(),a.parent().next().find("input").val(""),a.parent().next().find("[id^=result_seq1_]").hide().empty(),a.parent().find("[id^=txt_zip]").val(""),a.parent().next().find("li:eq(0) a").click()):(a.children(".txt").replaceWith('<span class="txt">주소찾기</span>'),a.parent().find("[name=stnm_inp_zip1]").val().length>0?(a.parent().find("[id^=txt_zip1]").val(a.parent().find("[name=stnm_inp_zip1]").val()),a.parent().find("[id^=txt_zip2]").val(a.parent().find("[name=stnm_inp_zip2]").val())):(a.parent().find("[id^=txt_zip1]").val(a.parent().find("[name=inpzip1]").val()),a.parent().find("[id^=txt_zip2]").val(a.parent().find("[name=inpzip2]").val())),a.parent().next().hide().next().show())}),benefit_dlvp_set(),isDeliPlcChg,$("dd.deli_"+$("input[name=deli_select]").val()).show();var u="deli_"+$("input[name=deli_select]").val(),v=$("#frm_inp input[name="+u+"]:hidden").val();$("#frm_inp input[name=defaultNm]:hidden").val(v),fn_freeDlvpCpnUse(),$("#frm_inp input[name=rdo_cash]:radio:checked").click(),setLottePointSaveDiv(0),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_CARD?($("#pay_notice_lpay").hide(),$("#pay_notice_card").show(),$("#pay_notice_bank").hide(),$("#pay_notice_phone").hide()):$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_BANK?($("#pay_notice_lpay").hide(),$("#pay_notice_card").hide(),$("#pay_notice_bank").show(),$("#pay_notice_phone").hide()):$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_PHONE?($("#pay_notice_lpay").hide(),$("#pay_notice_card").hide(),$("#pay_notice_bank").hide(),$("#pay_notice_phone").show()):$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY&&($("#pay_notice_lpay").show(),$("#pay_notice_card").hide(),$("#pay_notice_bank").hide(),$("#pay_notice_phone").hide())}function productToggle(a,b){$(a).toggleClass("on"),$(b).toggle()}function createCardType(){var a='<option value ="">카드선택</option>';a+=cardStr,$("#frm_inp select[name=iscmcd]").html(a),getCardInsCheck()}function benefit_dlvp_set(a){var b=$("input[name=dlex_one_goods]").val(),c=$("#tot_ord_dlvp_cnt").val(),d=$("#tot_ord_deli_cnt").val(),e=$("#tot_ord_deli_amt").val();d>1&&null!=$("#frm_inp select[name=dup_coupon]")&&"undefined"!=$.type($("#frm_inp select[name=dup_coupon]").val())&&(add_dis_impossible_flag=!0,$("#frm_inp select[name=dup_coupon]").val("N"),$("#frm_inp select[name=dup_coupon]")[0].selectedIndex=0,$("#frm_inp select[name=dup_coupon]").attr("disabled",!0)),1>=c?$("#bene_group_deli_amt_1").html("Y"==freeShippingYn?"무료 (플래티넘+ 회원)":0==e?"무료":new String(e).money()+"원"):$("#bene_group_deli_amt_1").html("Y"==freeShippingYn?"무료(플래티넘+ 회원)":0==e?"무료":new String(e).money()+"원("+new String(b).money()+"원x"+c+"건)");var f=Number($("#frm_inp input[name=caltotdeliamt]:hidden").val()),g=Number($("#frm_inp input[name=totsttlamt]:hidden").val());0>g-(f-e)&&(init_point(),setCashReceiptArea(),fn_initPointList("ALL")),$("#frm_inp input[name=caltotdeliamt]:hidden").val(e),$("#frm_send input[name=totdeliamt]:hidden").val(e),fn_calcTotalPrice()}function send(){if(sendTclick("order_Clk_Btn_9"),"137725"!=cp_cn||chk_ocb_card_no()){if(p=$("#frm_inp select[name=iscmcd]").val(),cpncardcd=$("#frm_send input[name=cardkndcd]:hidden").val(),cpncardcd_dup=$("#frm_send input[name=cardkndcd_dup]:hidden").val(),""!=cpncardcd||""!=cpncardcd_dup){if(""==p||$("#frm_inp input[name=rdo_paytype]:radio:checked").val()!=PAYTYPE_CODE_CARD&&$("#frm_inp input[name=rdo_paytype]:radio:checked").val()!=PAYTYPE_CODE_LPAY)return alert("카드할인을 받으시려면 해당 카드로 결제하셔야 합니다."),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").attr("disabled",!1),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").attr("checked",!0),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("checked",!0),void $("#frm_inp select[name=iscmcd]").change();if(""!=p&&p!=cpncardcd&&p!=cpncardcd_dup)return $("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").attr("disabled",!1),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").attr("checked",!0),$("#frm_inp input[name=rdo_cardinst]:radio:eq(0)").prop("checked",!0),void $("#frm_inp select[name=iscmcd]").change()}if(!$("#frm_inp input[name=ord_agr_yn]").is(":checked"))return alert("주문 내역 확인 동의를 하셔야 합니다."),$("#pointcheck7").addClass("checked"),$("#frm_send input[name=ord_agr_yn]:hidden").val("Y"),$("input[name=ord_agr_yn]:checkbox")[0].checked=!0,$("input:checkbox[id='order_agree_off']").prop("checked",!0),void $("input:checkbox[id='order_agree_on']").prop("checked",!0);if($("#frm_send input[name=ord_agr_yn]:hidden").val("Y"),""==totpayamt){var a=$("#frm_inp input[name=defaulttotsttlamt]:hidden").val(),b=($("#frm_send input[name=includeSaveInstCpn]").val(),$("#frm_send input[name=totdcamt]").val());totpayamt="Y"==includeSaveInstCpn?a.toString():(a-b).toString();var c=0;"N"==freeShippingYn&&(c=$("#frm_inp input[name=chk_multi_dlvp]:checkbox").prop("checked")?$("#frm_inp input[name=caltotdeliamt]:hidden").val():$("#frm_inp input[name=orgtotdeliamt]:hidden").val()),"N"==freeShippingYn&&(totpayamt=(parseInt(totpayamt)+parseInt(c)-parseInt($("#frm_inp input[name=orgtotdeliamt]:hidden").val())).toString())}if($("#frm_inp input[name=next_use]").is(":checked")&&Number(totpayamt)>0&&($("#frm_send input[name=pay_mean_hist_use_yn]").val("Y"),$("#frm_send input[name=pay_mean_hist_pay_mean_cd]").val($("#frm_inp input[name=rdo_paytype]:radio:checked").val()),$("#frm_send input[name=bnk_cd]").val(""),$("#frm_send input[name=acqr_cd]").val(""),$("#frm_send input[name=card_pay_meth_cd]").val(""),$("#frm_send input[name=pay_mean_hist_pay_mean_cd]").val()==PAYTYPE_CODE_CARD?($("#frm_send input[name=acqr_cd]").val($("#frm_inp select[name=iscmcd]").val()),$("#frm_send input[name=card_pay_meth_cd]").val($("#frm_inp input[name=card_confirm_type]:radio:checked").val())):$("#frm_send input[name=pay_mean_hist_pay_mean_cd]").val()==PAYTYPE_CODE_BANK?$("#frm_send input[name=bnk_cd]").val($("#frm_inp select[name=bankno]").val()):$("#frm_send input[name=pay_mean_hist_pay_mean_cd]").val()==PAYTYPE_CODE_LPAY&&$("#frm_send input[name=acqr_cd]").val($("#frm_inp select[name=iscmcd]").val())),0==Number(totpayamt)&&""!=$("#frm_inp input[name=op_pay_mean_hist_pay_mean_cd]").val()&&($("#frm_send input[name=pay_mean_hist_use_yn]").val("Y"),$("#frm_send input[name=pay_mean_hist_pay_mean_cd]").val($("#frm_inp input[name=op_pay_mean_hist_pay_mean_cd]").val()),$("#frm_send input[name=bnk_cd]").val(""),$("#frm_send input[name=acqr_cd]").val(""),$("#frm_send input[name=card_pay_meth_cd]").val(""),$("#frm_send input[name=pay_mean_hist_pay_mean_cd]").val()==PAYTYPE_CODE_CARD?($("#frm_send input[name=acqr_cd]").val($("#frm_inp input[name=op_pay_mean_hist_acqr_cd]").val()),$("#frm_send input[name=card_pay_meth_cd]").val($("#frm_inp input[name=op_pay_mean_hist_card_pay_meth_cd]").val())):$("#frm_send input[name=pay_mean_hist_pay_mean_cd]").val()==PAYTYPE_CODE_BANK?$("#frm_send input[name=bnk_cd]").val($("#frm_inp input[name=op_pay_mean_hist_bnk_cd]").val()):$("#frm_send input[name=pay_mean_hist_pay_mean_cd]").val()==PAYTYPE_CODE_LPAY&&$("#frm_send input[name=acqr_cd]").val($("#frm_inp select[name=iscmcd]").val())),$("#frm_inp input[name=paytype]:hidden").val()!=PAYTYPE_CODE_PHONE||cellphone_confirm()){if(username!=$("#nameSp").text()?$("#frm_send input[name=ord_man_nm]").val($("#nameSp").text()):$("#frm_send input[name=ord_man_nm]").val(""),!$("#frm_inp input[name=chk_multi_dlvp]:checkbox").prop("checked")){var d=$("#frm_inp input[name=gift_msg_y_index]:hidden").val(),e="",f="",g="";e=$("#frm_inp #giftMs_"+d+" input[name=receivename_"+d+"]").val(),f=$("#frm_inp #giftMs_"+d+" input[name=sendname_"+d+"]").val(),g=$("#frm_inp #giftMs_"+d+" #sendmessage_"+d).val(),"1"==$("#frm_inp #gift_msgMulti_"+d+" input[name=gift_yn_"+d+"]:radio:checked").val()&&($("#frm_inp .gift_msgMultiInsert input[name=gift_yn_1]:radio[value='1']").prop("checked",!0),$("#frm_inp .gift_msgMultiInsert input[name=gift_yn_1]:radio[value='2']").prop("checked",!1),$("#frm_inp .gift_msgMultiInsert input[name=receivename_1").val(e),$(".gift_msgMultiInsert #sendmessage_1").val(g),$("#frm_inp .gift_msgMultiInsert input[name=sendname_1").val(f))}if(setDeliDataGift()){var h=$("#frm_inp input[name=sendSms]:checkbox").prop("checked")?"Y":"N";if("Y"==h&&("SMARTPICK"==gubun||"ECOUPON"==gubun)){$("#frm_send input[name=sendSms]:hidden").val(h),$("#frm_send input[name=mst_adre_nm]:hidden").val($("#frm_inp input[name=mst_adre_nm]").val()),$("#frm_send input[name=mst_adre_no_01]:hidden").val($("#frm_inp select[name=mst_adre_no_01]").val()),$("#frm_send input[name=mst_adre_no_02]:hidden").val($("#frm_inp input[name=mst_adre_no_02]").val()),$("#frm_send input[name=mst_adre_no_03]:hidden").val($("#frm_inp input[name=mst_adre_no_03]").val()),""==$("#frm_send input[name=mst_adre_no_01]:hidden").val()&&($("#frm_send input[name=mst_adre_nm]:hidden").val($("#frm_inp input[name=ordr_nm]:hidden").val()),$("#frm_send input[name=mst_adre_no_01]:hidden").val($("#frm_inp input[name=adre_no_01]:hidden").val()),$("#frm_send input[name=mst_adre_no_02]:hidden").val($("#frm_inp input[name=adre_no_02]:hidden").val()),$("#frm_send input[name=mst_adre_no_03]:hidden").val($("#frm_inp input[name=adre_no_03]:hidden").val())),$("#frm_send input[name=msg_cont]:hidden").val($("#frm_inp textarea[name=msg_cont]").val());var i=$.trim($("#frm_send input[name=mst_adre_no_01]:hidden").val())+$.trim($("#frm_send input[name=mst_adre_no_02]:hidden").val())+$.trim($("#frm_send input[name=mst_adre_no_03]:hidden").val()),j=/(01[016789])(\d{3}|\d{4})\d{4}$/g;if(!j.test(i))return void alert("교환권 수신 휴대폰 번호가 올바르지 않습니다.")}if($("#frm_inp input[name=chk_multi_dlvp]:checkbox").prop("checked"))for(var k=$("#frm_send input[name=cartsn]:hidden").val().split(split_gubun_1),l=$("#frm_send input[name=ordqty]:hidden").val().split(split_gubun_1),m=$("#frm_send input[name=goodsnm]:hidden").val().split(split_gubun_1),n=0,o=0;o<k.length;o++)if(n=0,$("input[name^=multi_prod_"+k[o]+"]").each(function(){n+=parseInt($(this).val())}),parseInt(l[o])!=n)return void alert(m[o]+" 수가 맞지 않습니다.");if(paytype=$("#frm_inp input[name=paytype]:hidden").val(),totsttlamt=$("#frm_inp input[name=totsttlamt]:hidden").val(),parseInt(totsttlamt)>0){var p,q,r;if(paytype==PAYTYPE_CODE_CARD||paytype==PAYTYPE_CODE_LPAY){if(p=$("#frm_inp select[name=iscmcd]").val(),q=$("#frm_inp select[name=cardinstmon]").val(),""==q||"35"==$("#frm_send input[name=prommdclcd_third]").val())cardinst="01",q="",$("#frm_inp select[name=cardinstmon]").val("");else{var s=$("#frm_inp input[name=onintmonth]:hidden").val();$("#frm_inp input[name=intmonth]:hidden").val();"2"==q?0==s.indexOf(q)?cardinst="02":cardinst="03":s.indexOf(q)>-1?cardinst="02":cardinst="03"}if($("#frm_inp input[name=rdo_cardinst]:radio[value='"+cardinst+"']").prop("checked",!0),totsttlamt=$("#frm_inp input[name=totsttlamt]:hidden").val(),bankno="",r="",reg_no1="",reg_no2="",totsttlamt<1e3)return void alert("1,000원 미만의 금액은 카드결제가 불가능합니다.");if(""==$.trim(p)&&paytype==PAYTYPE_CODE_CARD)return void alert("카드 종류를 선택해주세요.");if(paytype==PAYTYPE_CODE_LPAY){if("none"!=$(".box_Lpay_agree_check").css("display")&&"none"!=$(".box_Lpay_agree_check div a").css("display"))return void alert("L.pay 앱을 실행하여 카드를 등록해주세요.");if(""==$.trim(p))return void alert("카드 종류를 선택해주세요.")}else{if(totsttlamt>3e5&&varUa<0&&"mlotte003"==cp_schema&&$.trim(p)!=paytype_card_048&&$.trim(p)!=paytype_card_029&&$.trim(p)!=paytype_card_016&&$.trim(p)!=paytype_card_026&&$.trim(p)!=paytype_card_047&&$.trim(p)!=paytype_card_002&&$.trim(p)!=paytype_card_054&&$.trim(p)!=paytype_card_021&&$.trim(p)!=paytype_card_020&&$.trim(p)!=paytype_card_008)return $("#frm_inp input[name=rdo_paytype]:radio").length>1?void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 비씨, 광주, 우체국카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요."):void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 비씨, 광주, 우체국카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요.");if(totsttlamt>3e5&&varUa<0&&$.trim(p)!=paytype_card_048&&$.trim(p)!=paytype_card_029&&$.trim(p)!=paytype_card_016&&$.trim(p)!=paytype_card_026&&$.trim(p)!=paytype_card_047&&$.trim(p)!=paytype_card_031&&$.trim(p)!=paytype_card_002&&$.trim(p)!=paytype_card_054&&$.trim(p)!=paytype_card_021&&$.trim(p)!=paytype_card_020&&$.trim(p)!=paytype_card_008&&$.trim(p)!=paytype_card_018&&$.trim(p)!=paytype_card_036)return $("#frm_inp input[name=rdo_paytype]:radio").length>1?void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 비씨, 삼성, 광주, 우체국카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요."):void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 비씨, 삼성, 광주, 우체국카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요.");if(totsttlamt>3e5&&$.trim(p)!=paytype_card_048&&$.trim(p)!=paytype_card_029&&$.trim(p)!=paytype_card_016&&$.trim(p)!=paytype_card_026&&$.trim(p)!=paytype_card_020&&$.trim(p)!=paytype_card_047&&$.trim(p)!=paytype_card_031&&$.trim(p)!=paytype_card_002&&$.trim(p)!=paytype_card_054&&$.trim(p)!=paytype_card_021&&$.trim(p)!=paytype_card_008&&$.trim(p)!=paytype_card_018&&$.trim(p)!=paytype_card_036)return $("#frm_inp input[name=rdo_paytype]:radio").length>1?void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 삼성, 비씨, 하나SK, 광주, 우체국 카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요."):void alert("결제금액이 30만원 이상인 경우는 롯데, 신한, 현대, 국민, 삼성, 비씨, 하나SK, 광주, 우체국 카드만 가능합니다. 그 외 카드는 무통장입금으로 결제하시거나 고객센터("+exp_tel_no+")로 전화주세요.");if(totsttlamt>3e5&&varUa<0&&"mlotte001"==cp_schema&&$.trim(p)==paytype_card_031&&""!=cp_schema&&""!=cp_udid&&!appVerChk(cp_v,"133"))return void alert("롯데닷컴 앱에서 삼성카드 30만원 이상 결제를 하시려면 롯데닷컴 최신버전 앱으로 업데이트 해주세요.");if(totsttlamt>3e5&&varUa>-1&&$.trim(p)==paytype_card_047&&"mlotte001"==cp_schema&&""!=cp_udid&&!appVerChk(cp_v,"160"))return void alert("롯데닷컴 앱에서 롯데카드 30만원 이상 결제를 하시려면 롯데닷컴 최신버전 앱으로 업데이트 해주세요.");if(totsttlamt>3e5&&varUa>-1&&$.trim(p)==paytype_card_031&&"mlotte001"==cp_schema&&""!=cp_udid&&!appVerChk(cp_v,"164"))return void alert("롯데닷컴 앱에서 삼성카드 30만원 이상 결제를 하시려면 롯데닷컴 최신버전 앱으로 업데이트 해주세요.");if("01"!=cardinst&&""==$.trim(q))return void alert("할부기간을 선택해주세요.")}if("Y"==$("#frm_inp input[name=select_card_payment_yn]:hidden").val()&&!confirm("선택하신 카드로 청구할인이 불가능한 상품이 있어 청구할인이 적용되지 않습니다. 계속 결제 하시겠습니까?"))return}else if(paytype==PAYTYPE_CODE_BANK){if(p="",cardinst="",q="",bankno=$("#frm_inp select[name=bankno]").val(),r=$("#frm_inp input[name=onlineacctname]").val(),reg_no1="",reg_no2="",""==$.trim(bankno))return void alert("입금 은행을 선택해주세요.");if(""==$.trim(r))return alert("입금자이름을 입력해주세요."),void $("#frm_inp input[name=onlineacctname]").focus()}else{if(paytype!=PAYTYPE_CODE_PHONE)return void 0!=typeof $("#pntOnlyPay").val()&&"19"==$("#pntOnlyPay").val()?void alert("L.POINT 전용 상품입니다. \n현재 보유하고 계신 L.POINT가 부족하여 주문을 진행 하실 수 없습니다."):void 0!=typeof $("#pntOnlyPay").val()&&"21"==$("#pntOnlyPay").val()?void alert("L-money 전용 상품입니다. \n현재 보유하고 계신L-money가 부족하여 주문을 진행 하실 수 없습니다."):void alert("결제수단을 선택해주세요.");p="",cardinst="",q="",bankno="",r="",reg_no1=$("#frm_inp input[name=reg_no1]").val(),reg_no2=$("#frm_inp input[name=reg_no2]").val()}$("#frm_send input[name=paytype]:hidden").val(paytype),$("#frm_send input[name=iscmcd]:hidden").val(p),$("#frm_send input[name=cardinst]:hidden").val(cardinst),$("#frm_send input[name=cardinstmon]:hidden").val(q),$("#frm_send input[name=bankno]:hidden").val(bankno),$("#frm_send input[name=onlineacctname]:hidden").val(r),$("#frm_send input[name=reg_no1]:hidden").val(reg_no1),$("#frm_send input[name=reg_no2]:hidden").val(reg_no2),paytype==PAYTYPE_CODE_LPAY&&($("#frm_send input[name=lpay_card_id]:hidden").val($("select[name=iscmcd]").find("option:selected").attr("data-card-id")),$("#frm_send input[name=lpay_card_anm]:hidden").val($("select[name=iscmcd]").find("option:selected").attr("data-card-anm")))}else $("#frm_send input[name=paytype]:hidden").val(""),$("#frm_send input[name=iscmcd]:hidden").val(""),$("#frm_send input[name=cardinst]:hidden").val(""),$("#frm_send input[name=cardinstmon]:hidden").val(""),$("#frm_send input[name=bankno]:hidden").val(""),$("#frm_send input[name=onlineacctname]:hidden").val(""),$("#frm_send input[name=reg_no1]:hidden").val(""),$("#frm_send input[name=reg_no2]:hidden").val(""),$("#frm_send input[name=lpay_card_id]:hidden").val(""),$("#frm_send input[name=lpay_card_anm]:hidden").val("");var t,u,v,w,x,y,z;t=void 0==$("#lpoint_amt").prop("id")?0:$("#lpoint_amt").val().length<1?0:$("#lpoint_amt").val(),u=void 0==$("#lt_point_amt").prop("id")?0:$("#lt_point_amt").val().length<1?0:$("#lt_point_amt").val(),v=void 0==$("#deposit_amt").prop("id")?0:$("#deposit_amt").val().length<1?0:$("#deposit_amt").val();var A=new Array,B=new Array,C=new Array;$.each($("#frm_inp input:checkbox[name=chk_point]:checked"),function(){A.push($(this).val()),"lpoint"==$(this).val()&&(B.push(lPoint),C.push(t)),"lt_point"==$(this).val()&&(B.push(ltPoint),C.push(u))});var D=new Array;$.each($("#frm_inp input:checkbox[name=chk_point_all]:checked"),function(){D.push($(this).val()),"deposit"==$(this).val()&&(B.push(deposit),C.push(v))}),w=A.join(),y=B.join(),z=C.join(),x=D.join(),$("#frm_send input[name=lpoint_amt]:hidden").val(t),$("#frm_send input[name=lt_point_amt]:hidden").val(u),$("#frm_send input[name=deposit_amt]:hidden").val(v),$("#frm_send input[name=chk_point]:hidden").val(w),$("#frm_send input[name=chk_point_all]:hidden").val(x),$("#frm_send input[name=pay_mean_cd]:hidden").val(y),$("#frm_send input[name=pay_amt]:hidden").val(z);var E,F,G,H;if(E=$("#dlv_prom_use_yn").val(),"Y"==E?(F=$("#dlv_fvr_val").val(),G=$("#dlv_prom_no").val(),H=$("#dlv_rsc_mgmt_sn").val()):(F="",G="",H=""),$("#frm_send input[name=dlv_prom_use_yn]:hidden").val(E),$("#frm_send input[name=dlv_fvr_val]:hidden").val(F),$("#frm_send input[name=dlv_prom_no]:hidden").val(G),$("#frm_send input[name=dlv_rsc_mgmt_sn]:hidden").val(H),$("#frm_send input[name=totsttlamt]:hidden").val(totsttlamt),$("#frm_card input[name=X_CARDTYPE]:hidden").val(p),$("#frm_card input[name=X_AMOUNT]:hidden").val(totsttlamt),totsttlamt>3e5&&(p==paytype_card_048||p==paytype_card_029)?($("#frm_card input[name=X_ISMART_USE_SIGN]:hidden").val("Y"),("Y"==lotte_app_yn||"Y"==smart_pic_app_yn||"Y"==ellotte_app_yn)&&$("#frm_card input[name=X_MALL_APP_NAME]:hidden").val(schema_domain)):($("#frm_card input[name=X_ISMART_USE_SIGN]:hidden").val(""),$("#frm_card input[name=X_MALL_APP_NAME]:hidden").val("")),p==paytype_card_047&&($("#SIMPLEPAYFORM input[name=order_amount]:hidden").val(totsttlamt),$("#SIMPLEPAYFORM input[name=order_cardname]:hidden").val("LOTTECARD")),paytype==PAYTYPE_CODE_BANK||""!=t&&t>0||""!=v&&v>0){var I=$("#frm_inp select[name=cr_issu_mean_sct_cd]").val(),J=$("#frm_inp input[name=rdo_cash]:radio:checked").val(),K="",L="",M=0,N="",O=!0;if("1"==J){$("#frm_send input[name=cr_issu_mean_sct_cd]:hidden").val(I),$("#frm_send input[name=cr_use_sct_cd]:hidden").val("0");"1"==I&&(I="2"),"3"==I&&(L=$("#frm_inp select[name=cr_issu_mean_no_phone1]").val()),$("#cash_receipts0"+I+" input").each(function(){return M=$(this).attr("maxlength"),N=$(this).attr("title"),K=$(this).val(),tmp_str=" 이상","cr_issu_mean_no_credit_crd4"==$(this).attr("name")?M=3:"cr_issu_mean_no_rcpt_crd4"==$(this).attr("name")?M=1:"cr_issu_mean_no_phone2"==$(this).attr("name")?M=3:tmp_str="로",K.length<M?(alert(N+"를 "+M+"자리"+tmp_str+" 입력해 주세요."),$(this).focus(),O=!1,!1):void(L+=K)}),$("#frm_send input[name=cr_issu_mean_no]:hidden").val(L)}else if("2"==J){$("#frm_send input[name=cr_issu_mean_sct_cd]:hidden").val($("#frm_inp input[name=cr_issu_mean_sct_cd_bman]:hidden").val()),$("#frm_send input[name=cr_use_sct_cd]:hidden").val("1"),$("#co_value input").each(function(){if(M=$(this).attr("maxlength"),M>1){if(N=$(this).attr("title"),K=$(this).val(),K.length<M)return alert(N+"를 "+M+"자리로 입력해 주세요."),$(this).focus(),O=!1,!1;L+=K}}),num1=L.charAt(0),num2=L.charAt(1),num3=L.charAt(2),num4=L.charAt(3),num5=L.charAt(4),num6=L.charAt(5),num7=L.charAt(6),num8=L.charAt(7),num9=L.charAt(8),num10=L.charAt(9);var P=1*num1+3*num2+7*num3+1*num4+3*num5+7*num6+1*num7+3*num8+5*num9;P+=parseInt(5*num9/10);var Q=P%10;if(0==Q)var R=0;else var R=10-Q;if(R!=num10)return alert("사업자등록번호가 올바르지 않습니다."),$("#frm_inp input[name=cr_issu_mean_no_bman1]").focus(),O=!1,!1;$("#frm_send input[name=cr_issu_mean_no]:hidden").val(L)}else $("#frm_send input[name=cr_issu_mean_sct_cd]:hidden").val(""),$("#frm_send input[name=cr_use_sct_cd]:hidden").val(""),$("#frm_send input[name=cr_issu_mean_no]:hidden").val(L);if(!O)return}if($("#frm_inp input[name=paytype]:hidden").val()!=PAYTYPE_CODE_LPAY&&""==$("#frm_send input[name=lt_cd_no]").val()&&"Y"!=simple_mem_yn&&$("#temp_lt_point_amt").length>0&&""!=$("#temp_lt_point_amt").val()&&"0"!=$("#temp_lt_point_amt").val())return void $("html, body").animate({scrollTop:$("#submit_btn").offset().top},function(){$("#laver_Lpay_order").show()});$("#chk_smp_ecpn_gift_yn").length>0&&$("#frm_send input[name=smp_ecpn_gift_yn]:hidden").val($("#chk_smp_ecpn_gift_yn").val()),$("#smp_ecpn_rfd_tgt").length>0&&(1==$("#smp_ecpn_rfd_tgt_cd_01").attr("checked")||1==$("#smp_ecpn_rfd_tgt_cd_01").prop("checked")?$("#frm_send input[name=smp_ecpn_rfd_tgt_cd]:hidden").val($("#smp_ecpn_rfd_tgt_cd_01").val()):1==$("#smp_ecpn_rfd_tgt_cd_02").attr("checked")||1==$("#smp_ecpn_rfd_tgt_cd_02").prop("checked")?$("#frm_send input[name=smp_ecpn_rfd_tgt_cd]:hidden").val($("#smp_ecpn_rfd_tgt_cd_02").val()):$("#frm_send input[name=smp_ecpn_rfd_tgt_cd]:hidden").val("")),regOpOrdPayErrLog(),doXansim()}}}}function regOpOrdPayErrLog(){var a=$("#frm_send input[name=paytype]:hidden").val(),b=$("#frm_send input[name=pay_mean_cd]:hidden").val(),c="",d=$("#frm_send input[name=grockle_mbr_no]:hidden").val(),e="";"16"==a&&(e=$("#frm_send input[name=iscmcd]:hidden").val()),"Y"==grockle_yn&&""!=d&&(c=d),$.ajax({type:"post",async:!1,url:"/order/order_regordpay.do?"+__commonParam,data:"pay_mean_cd="+b+"&paytype="+a+"&iscmcd="+e+"&non_login_id="+c+"&grockle_yn="+grockle_yn,success:function(a){$("#cardinscheck").html(a)},error:function(a,b,c){}})}function hanaskcard_payment(){var a=$("#frm_send input[name=iscmcd]:hidden").val(),b="hanaM",c=$("#frm_send input[name=cardinstmon]:hidden").val(),d="02"==$("#frm_send input[name=cardinst]:hidden").val()?"Y":"N",e=$("#frm_send input[name=totsttlamt]:hidden").val(),f=$("#frm_send input[name=goodsnm]:hidden").val(),g=f.split(split_gubun_1);g.length>1&&(f=g[0]+" 외 "+(g.length-1)),$("#frm_vpay input[name=vp_cardcode]:hidden").val(b),$("#frm_vpay input[name=vp_goodname]:hidden").val(f),$("#frm_vpay input[name=vp_price]:hidden").val(e),$("#frm_vpay input[name=vp_quota]:hidden").val(c),$("#frm_vpay input[name=vp_quota_flag]:hidden").val(d),$("#frm_vpay input[name=vp_iscmcd]:hidden").val(a),$("#frm_vpay").attr("target","X_ANSIM_FRAME"),$("#frm_vpay").attr("action","/vpay/req-authM.jsp"),$("#frm_vpay").submit()}function payment_pop_position(){isIOS?($("#ANSIM_LAYER").css("top","43px"),window.scrollTo(0,0)):location.hash="#ANDROID_ANCHAR"}function doXansim(){if(paytype=$("#frm_send input[name=paytype]:hidden").val(),pay_mean_cd=$("#frm_send input[name=pay_mean_cd]:hidden").val(),cardkndcd=$("#frm_send input[name=cardkndcd]:hidden").val(),cardkndcd_dup=$("#frm_send input[name=cardkndcd_dup]:hidden").val(),$("#frm_send input[name=credit_crd_gb]:hidden").val(""),disableItems(!0),paytype==PAYTYPE_CODE_LPAY){payment_pop_position(),$("#ANSIM_LAYER").css("width","100%"),$("#ANSIM_LAYER").css("height","530px"),window.scrollTo(0,0),$("#X_ANSIM_FRAME").show(),$("#frm_send input[name=cardno]:hidden").val($("select[name=iscmcd]").find("option:selected").attr("data-card-no")),$("#frm_send input[name=credit_crd_gb]:hidden").val("4"),$("#frm_send input[name=smart_pay_use_yn]").val(""),$("#pageDesc").html("결제를 진행 중입니다.<br>잠시만 기다려 주세요."),$("#pageCover,#pageLoading").show();var a=$("#frm_send").clone();a.attr("action","/lpay/callDLP.jsp"),a.attr("method","post"),a.attr("target","X_ANSIM_FRAME"),a.submit()}else if(paytype==PAYTYPE_CODE_CARD){X_CARDTYPE=$("#frm_card input[name=X_CARDTYPE]:hidden").val(),(X_CARDTYPE==paytype_card_047||X_CARDTYPE==paytype_card_029||X_CARDTYPE==paytype_card_031||X_CARDTYPE==paytype_card_048||X_CARDTYPE==paytype_card_020||X_CARDTYPE==paytype_card_008||X_CARDTYPE==paytype_card_036||X_CARDTYPE==paytype_card_018)&&(payment_pop_position(),$("#ANSIM_LAYER").css("width","100%"),$("#ANSIM_LAYER").css("height","530px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),$("#frm_send input[name=credit_crd_gb]:hidden").val("2"));var b=$("input[name=card_confirm_type]:radio:checked").val();$("#frm_send input[name=smart_pay_use_yn]").val(""),X_CARDTYPE==paytype_card_047?"01"==b?($("#frm_send input[name=smart_pay_use_yn]").val("Y"),lottecard_payment("SPS")):"02"==b?lottecard_payment("ACS"):"03"==b&&lottecard_payment("ACS"):X_CARDTYPE==paytype_card_029||X_CARDTYPE==paytype_card_031||X_CARDTYPE==paytype_card_048||X_CARDTYPE==paytype_card_018?(window.scrollTo(0,0),iscmcd!=paytype_card_018&&("01"==b?($("#frm_send input[name=smart_pay_use_yn]").val("Y"),$("#frm_card input[name=X_SP_CHAIN_CODE]:hidden").val("1")):"03"==b?$("#frm_card input[name=X_SP_CHAIN_CODE]:hidden").val("3"):$("#frm_card input[name=X_SP_CHAIN_CODE]:hidden").val("0")),xmpi_exec()):X_CARDTYPE==paytype_card_016&&(""==cp_udid||""!=cp_udid&&varUa>-1&&"mlotte001"==cp_schema&&appVerChk(cp_v,"169")||""!=cp_udid&&varUa<0&&ua_lower_str.search("iphone")>-1&&appVerChk(cp_v,"136")||""!=cp_udid&&varUa<0&&ua_lower_str.search("ipad")>-1&&appVerChk(cp_v,"127")||"Y"==smart_pic_app_yn||"Y"==ellotte_app_yn||"sklotte001"==cp_schema)?(payment_pop_position(),$("#ANSIM_LAYER").css("width","350px"),$("#ANSIM_LAYER").css("height","530px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),spay_exec()):X_CARDTYPE==paytype_card_016||X_CARDTYPE==paytype_card_026||X_CARDTYPE==paytype_card_021||X_CARDTYPE==paytype_card_054||X_CARDTYPE==paytype_card_002?confirm("국민,비씨,광주,우체국체크카드(ISP) 결제는 3G 또는 LTE로 진행 해야 안정적으로 결제하실 수 있습니다.\n결제를 진행하시겠습니까?")?($("#frm_send input[name=credit_crd_gb]:hidden").val("1"),misp_create_data()):disableItems(!1):X_CARDTYPE==paytype_card_020?($("#frm_send input[name=credit_crd_gb]:hidden").val("2"),hanaskcard_payment()):X_CARDTYPE==paytype_card_036||X_CARDTYPE==paytype_card_008?($("#frm_send input[name=credit_crd_gb]:hidden").val("2"),ilkmpi_send()):(disableItems(!1),alert("지원되지 않는 카드 입니다.\n다시 시도해 주십시오."))}else paytype==PAYTYPE_CODE_BANK?(bankno=$("#frm_send input[name=bankno]:hidden").val(),onlineacctname=$("#frm_send input[name=onlineacctname]:hidden").val(),""==$.trim(bankno)||""==$.trim(onlineacctname)?(disableItems(!1),alert("무통장 입금 정보가 부정확합니다.\n다시 시도해 주십시오.")):($("#frm_send").attr("action","/order/order_complete.do?"+__commonParam),doPayment())):paytype==PAYTYPE_CODE_PHONE?(payment_pop_position(),$("#ANSIM_LAYER").css("width","380px"),$("#ANSIM_LAYER").css("height","800px"),window.scrollTo(0,0),$("#ANSIM_LAYER").show(),$("#X_ANSIM_FRAME").show(),cellphone_exec()):paytype==PAYTYPE_CODE_CARD||paytype==PAYTYPE_CODE_LPAY||""==cardkndcd&&""==cardkndcd_dup?""==paytype&&""!=pay_mean_cd?-1!=pay_mean_cd.indexOf(ltPoint)&&""==$("#frm_send input[name=lt_cd_no]").val()?(disableItems(!1),$("html, body").animate({scrollTop:$("#submit_btn").offset().top},function(){$("#laver_Lpay_order").show()})):($("#frm_send").attr("action","/order/order_complete.do?"+__commonParam),doPayment()):(disableItems(!1),alert("지원되지 않는 결제방법 입니다.\n다시 시도해 주십시오.")):(disableItems(!1),alert("카드외 다른 결제방법 사용 시 카드할인 및 적립을 할 수 없습니다."))}function openLotteMembers(){alert("롯데멤버스 페이지로 이동합니다.\n비밀번호를 설정하시면\n롯데닷컴에서 L.POINT를 사용하실 수 있습니다.");var a="m.lpoint.com/app/point/WMPA100100.do";""!=cp_schema?isIOS?window.location="family://"+a:isAndroid&&window.myJs.callAndroid("https://"+a):window.open("https://"+a)}function make_certification(){if("0"==$("input[name=third_coupon]:radio:checked").val())return void alert("신용카드 결제수단과 L.POINT를 함께 사용하실 수 없습니다.");var a,b,c,d,e;if(e=$("#card_passwd").val(),e.length<1)return void alert("카드 비밀번호를 입력해 주세요.");var f=a+b+c+d;$.ajax({type:"post",async:!1,url:"/popup/lotte_point_mng.do?"+__commonParam,data:"card_no="+f+"&passwd="+e+"&from_page="+from_page+"&page_div=R&proc_div=P",success:function(a){$("#LottePoint_Result_div").html(a),""!=$("#temp_lt_point_amt").val()&&"0"!=$("#temp_lt_point_amt").val()&&($("#lt_point_amt").val($("#temp_lt_point_amt").val()),fn_calcTotalPrice())}})}function fn_selPoint(a){var b=a.id;if(setCashReceiptArea(),a.checked){var c=parseInt($("#frm_inp input[name=totsttlamt]:hidden").val()),d=0;if(0==c)return void(a.checked=!1);"chk_lpoint"==b?($("#cash_receipts").show(),d=parseInt($("#useable_lpoint_amt").val()),$("#lpoint_amt").val(d>c?c:d),$("#lpoint_amt").attr("disabled",!1),$("#chk_lpoint_all").attr("disabled",!1),$("#chk_lpoint_all").attr("checked",!0),$("#chk_lpoint_all").prop("checked",!0),sendTclick("order_Clk_Btn_2")):"chk_lt_point"==b?(d=parseInt($("#useable_lt_point_amt").val()),""!=$("#temp_lt_point_amt").val()&&"0"!=$("#temp_lt_point_amt").val()?$("#lt_point_amt").val($("#temp_lt_point_amt").val()):$("#lt_point_amt").val(d>c?c:d),$("#lt_point_amt").attr("disabled",!1),$("#chk_lt_point_all").attr("disabled",!1),$("#chk_lt_point_all").attr("checked",!0),$("#chk_lt_point_all").prop("checked",!0),sendTclick("order_Clk_Btn_3")):"chk_deposit_all"==b&&sendTclick("order_Clk_Btn_4")}else"chk_lpoint"==b?fn_initPointList(lPoint):"chk_lt_point"==b&&fn_initPointList(ltPoint);fn_calcTotalPrice(),a.checked||void 0==$("#chk_deposit_all").attr("id")||fn_selPointAll(document.getElementById("chk_deposit_all"))}function fn_calcTotalPrice(){var a="";prommdclcd=$("#frm_send input[name=prommdclcd]").val(),dcamt=$("#frm_send input[name=totdcamt]").val(),dup_cpn_amt=sessionStorage.getItem("fvr_val"),third_cpn_amt=$("#frm_send input[name=totdcamt_third]").val(),prommdclcd_third=$("#frm_send input[name=prommdclcd_third]").val(),cardkndcd=$("#frm_send input[name=cardkndcd]").val(),payamt=$("#frm_inp input[name=defaulttotsttlamt]:hidden").val(),includeSaveInstCpn=$("#frm_send input[name=includeSaveInstCpn]").val(),lpoint_amt=void 0==$("#lpoint_amt").prop("id")?"":$("#lpoint_amt").val().length<1?0:$("#lpoint_amt").val(),lt_point_amt=void 0==$("#lt_point_amt").prop("id")?"":$("#lt_point_amt").val().length<1?0:$("#lt_point_amt").val(),deposit_amt=void 0==$("#deposit_amt").prop("id")?"":$("#deposit_amt").val().length<1?0:$("#deposit_amt").val(),dlv_prom_use_yn=$("#dlv_prom_use_yn").val();var b=1*$("#goodsTotQty").val(),c=!1;1==fn_getDeliCnt()&&(c=!0),"Y"==dlv_prom_use_yn&&b>1&&!c&&(dlv_prom_use_yn="N"),dlv_fvr_val="Y"==dlv_prom_use_yn?$("#dlv_fvr_val").val():"0",tot_deli_amt=0,"N"==freeShippingYn&&(tot_deli_amt=$("#frm_inp input[name=caltotdeliamt]:hidden").val()),totpayamt="Y"==includeSaveInstCpn?payamt.toString():(payamt-dcamt).toString(),"N"==freeShippingYn&&(totpayamt=(parseInt(totpayamt)+parseInt(tot_deli_amt)-parseInt($("#frm_inp input[name=orgtotdeliamt]:hidden").val())).toString());var d=totpayamt;"Y"!=includeSaveInstCpn&&(d=Number(d)+Number(dcamt)),$("#bene_tot_amt").find("span").text(String(d).money()+"원"),$("#frm_inp input[name=totordamt]:hidden").val(d),$("#totalOrdAmt").html("<strong>"+String(d).money()+"</strong>원"),b>1&&!c&&(dup_cpn_amt=0),dup_cpn_amt>0&&(totpayamt=(totpayamt-dup_cpn_amt).toString()),third_cpn_amt>0&&(totpayamt=(totpayamt-third_cpn_amt).toString()),"Y"==dlv_prom_use_yn&&dlv_fvr_val>0&&(totpayamt=(totpayamt-dlv_fvr_val).toString()),lpoint_amt>0&&(totpayamt=(totpayamt-lpoint_amt).toString()),lt_point_amt>0&&(totpayamt=(totpayamt-lt_point_amt).toString()),deposit_amt>0&&(totpayamt=(totpayamt-deposit_amt).toString()),prommdclcdNm="",prommdclcd==adtn_cost_dtl_sct_cd_card?(cardkndcd==paytype_card_002?prommdclcdNm="광주":cardkndcd==paytype_card_008?prommdclcdNm="외환":cardkndcd==paytype_card_016?prommdclcdNm="KB국민":cardkndcd==paytype_card_018?prommdclcdNm="NH":cardkndcd==paytype_card_021?prommdclcdNm="우리":cardkndcd==paytype_card_020?prommdclcdNm="하나SK":cardkndcd==paytype_card_026?prommdclcdNm="비씨":cardkndcd==paytype_card_029?prommdclcdNm="신한":cardkndcd==paytype_card_031?prommdclcdNm="삼성":cardkndcd==paytype_card_036?prommdclcdNm="씨티":cardkndcd==paytype_card_047?prommdclcdNm="롯데":cardkndcd==paytype_card_048?prommdclcdNm="현대":cardkndcd==paytype_card_054&&(prommdclcdNm="우체국체크"),
prommdclcdNm+="카드할인"):prommdclcd==adtn_cost_dtl_sct_cd_coupon?prommdclcdNm="즉석쿠폰":prommdclcd==adtn_cost_dtl_sct_cd_staff?prommdclcdNm="임직원할인":prommdclcd==adtn_cost_dtl_sct_cd_mrktng_cpn&&(prommdclcdNm="쿠폰/쇼핑지원권"),$("#deli_amt_ul").show(),$("#deli_amt_ul li").filter(".pr_text2").text(new String(tot_deli_amt).money()+"원");var e=0,f=0;dcamt>0&&"N"==includeSaveInstCpn&&(a+='<li class="pr_text1">'+prommdclcdNm+'</li><li class="pr_text2">(-)'+dcamt.money()+"원</li>",e+=parseInt(dcamt)),dup_cpn_amt>0&&(a=apply_br_tag(a),a+='<li class="pr_text1">추가할인</li><li class="pr_text2">(-)'+dup_cpn_amt.money()+"원</li>",e+=parseInt(dup_cpn_amt)),third_cpn_amt>0&&(a=apply_br_tag(a),a+='<li class="pr_text1">'+("35"==prommdclcd_third?"일시불할인":"")+'</li><li class="pr_text2">(-)'+third_cpn_amt.money()+"원</li>",e+=parseInt(third_cpn_amt)),"Y"==dlv_prom_use_yn&&dlv_fvr_val>0?(e+=parseInt(dlv_fvr_val),$("#fdAmt").html("(<span class=tBold>-"+String(dlv_fvr_val).money()+'</span><span class="no_bold">원</span>)')):$("#fdAmt").html(""),$("#bene_dctot_amt").html("<span class=tBold>"+(e>0?"-":"")+String(e).money()+'</span><span class="no_bold">원</span>'),lpoint_amt>0?(a=apply_br_tag(a),a+='<li class="pr_text1">L-money</li><li class="pr_text2">(-)'+lpoint_amt.money()+"점</li>",$("#old_lpoint_amt").val(lpoint_amt),e+=parseInt(lpoint_amt),f+=parseInt(lpoint_amt)):lpoint_amt>-1&&$("#old_lpoint_amt").val(lpoint_amt),lt_point_amt>0?(a=apply_br_tag(a),a+='<li class="pr_text1">L.POINT</li><li class="pr_text2">(-)'+lt_point_amt.money()+"점</li>",$("#old_lt_point_amt").val(lt_point_amt),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY&&$("#temp_lt_point_amt").val(lt_point_amt),e+=parseInt(lt_point_amt),f+=parseInt(lt_point_amt)):lt_point_amt>-1&&$("#old_lt_point_amt").val(lt_point_amt),deposit_amt>0?(a=apply_br_tag(a),a+='<li class="pr_text1">보관금</li><li class="pr_text2">(-)'+deposit_amt.money()+"원</li>",$("#old_deposit_amt").val(deposit_amt),e+=parseInt(deposit_amt),f+=parseInt(deposit_amt)):deposit_amt>-1&&$("#old_deposit_amt").val(deposit_amt),$("#usePointSum").html(f.toString().money()+'<span class="no_bold">원</span>'),"Y"==dlv_prom_use_yn&&dlv_fvr_val>0&&(a=apply_br_tag(a),a+='<li class="pr_text1">무료배송권</li><li class="pr_text2">(-)'+dlv_fvr_val.money()+"원</li>");var g='<li class="fl">총 할인금액</li>';if(g+='<li class="fr"><strong>'+("0"==e.toString().money()?"":"-")+e.toString().money()+"</strong>원</li>",$("#discount").html(g),$("#lottepointSave").empty(),setLottePointSaveDiv(dcamt),0!=totpayamt||void 0!=typeof $("#pntOnlyPay").val()&&""!=$("#pntOnlyPay").val()&&"N"!=$("#pntOnlyPay").val()?($("#div_paytype_void").show(),$("#div_paytype #pay_method").show(),$("#frm_inp input[name=rdo_paytype]:radio:checked").val()==paytype_code_card||$("#frm_inp input[name=rdo_paytype]:radio:checked").val()==paytype_code_lpay?$("#div_paytype #pay_card").show():$("#frm_inp input[name=rdo_paytype]:radio:checked").val()==paytype_code_bank&&$("#div_paytype #pay_bank").show(),$("#h3_paytype_title").show(),$("#payment_method_next_use").show()):($("#div_paytype_void").hide(),$("#div_paytype #pay_method").hide(),$("#div_paytype #pay_card").hide(),$("#div_paytype #pay_bank").hide(),$("#h3_paytype_title").hide(),$("#payment_method_next_use").hide()),$("#submit_btn").show(),$("#totalprice").html("<span></span><strong>"+totpayamt.money()+"</strong>원"),$("#frm_inp input[name=totsttlamt]:hidden").val(totpayamt),"Y"==claim_sale_yn){console.log("청구할인!");var h=""==$("#frm_inp input[name=claim_sale_fvr_val]:hidden").val()?"0":$("#frm_inp input[name=claim_sale_fvr_val]:hidden").val(),i=$("#frm_inp input[name=claim_sale_card_max_amt]:hidden").val(),j=""==j?"0":j,k=$("#frm_inp input[name=paytype]:hidden").val(),l="138425"!=cp_cn&&"137725"!=cp_cn&&"156230"!=cp_cn,m=parseInt(totpayamt)-parseInt(totpayamt)*parseInt(h)*.01,n=10*Math.floor(.1*m);parseInt(i)<parseInt(totpayamt)-parseInt(m)&&(n=parseInt(totpayamt)-parseInt(i)),console.log("청구할인 : "+n+"/"+h),l&&$("#claim_sale_price").html("<strong>"+String(n).money()+"</strong><span>원</span>"),parseInt(totpayamt)>=parseInt(j)&&$("#frm_inp select[name=iscmcd]").val()==claim_sale_card_knd_cd&&(k==PAYTYPE_CODE_CARD||k==PAYTYPE_CODE_LPAY)&&parseInt(totpayamt)>0?l&&fn_formshow():l&&fn_formshow()}}function setLottePointSaveDiv(a){try{var b=$("#frm_send input[name=totRsrvAplyVal]").val();"Y"!=$("#frm_send input[name=includeSaveInstCpn]").val()&&(a=0),Number(b)+Number(a)>0?($("#lottepointSave").html('<p class="lottepointOrange">* L.POINT <span>'+new String(Number(a)+Number(b)).money()+"점</span>이 적립됩니다.</p>"),"0"==$("select[name='coupon']").val()?$("#lottepointSave").hide():$("#lottepointSave").show()):$("#lottepointSave").hide()}catch(c){}}function fn_initPointList(a){("ALL"==a||a==lPoint)&&($("#lpoint_amt").val(""),$("#old_lpoint_amt").val(""),$("#lpoint_amt").attr("disabled",!0),$("#chk_lpoint_all").attr("checked",!1),$("#chk_lpoint_all").prop("checked",!1),$("#chk_lpoint_all").attr("disabled",!0)),("ALL"==a||a==ltPoint)&&($("#lt_point_amt").val(""),$("#old_lt_point_amt").val(""),$("#temp_lt_point_amt").val(""),$("#lt_point_amt").attr("disabled",!0),$("#chk_lt_point_all").attr("checked",!1),$("#chk_lt_point_all").prop("checked",!1),$("#chk_lt_point_all").attr("disabled",!0)),("ALL"==a||a==deposit)&&($("#deposit_amt").val(""),$("#old_deposit_amt").val(""))}function cellphone_confirm(){var a=$("#frm_inp input[name=totsttlamt]:hidden").val();return parseInt(a)>5e5?(alert("휴대폰 결제는 월 50만원까지 결제 가능합니다."),!1):parseInt(a)+parseInt(curMonPhnSttlAmt)>5e5?(alert("휴대폰 결제는 월 50만원까지 결제 가능합니다.(잔여한도:"+(5e5-parseInt(curMonPhnSttlAmt))+")"),!1):!0}function misp_install(){isAndroid?"Y"==tstore_yn?$("#X_ANSIM_FRAME").attr("src","tstore://PRODUCT_VIEW/0000025711/0"):$("#X_ANSIM_FRAME").attr("src","http://mobile.vpay.co.kr/jsp/MISP/andown.jsp"):isIOS?$("#X_ANSIM_FRAME").attr("src","http://itunes.apple.com/kr/app/id369125087?mt=8"):alert("지원되지 않는 운영체제 입니다.")}function misp_exec(){if(isIOS){var a=new Date;setTimeout(function(){new Date-a<3e3&&(window.location.href="http://itunes.apple.com/kr/app/id369125087?mt=8")},1500),top.location.href="ispmobile://?TID="+$("#frm_send input[name=MISP_TID]:hidden").val()}else isAndroid?window.location.href="intent://TID="+$("#frm_send input[name=MISP_TID]:hidden").val()+"#Intent;scheme=ispmobile;package=kvp.jjy.MispAndroid320;end":alert("지원되지 않는 운영체제 입니다.")}function misp_send(){$("#frm_send").attr("action","/misp/toTransData.jsp"),$("#frm_send").attr("method","post"),$("#frm_send").attr("target","X_ANSIM_FRAME"),$("#frm_send").submit()}function misp_create_data(){iscmcd=$("#frm_send input[name=iscmcd]:hidden").val(),"Y"==grockle_yn?(phone_num1=$("#frm_inp [name=grockle_cell1]:enabled").val(),phone_num2=$("#frm_inp input[name=grockle_cell2]").val(),phone_num3=$("#frm_inp input[name=grockle_cell3]").val(),companyCd="SKT",grockle_mbr_no=$("#frm_send input[name=grockle_mbr_no]:hidden").val()):(phone_num1=phone_no1,phone_num2=phone_no2,phone_num3=phone_no3,companyCd=commid,grockle_mbr_no=""),cardinst=$("#frm_send input[name=cardinst]:hidden").val(),cardinstmon=$("#frm_send input[name=cardinstmon]:hidden").val(),totsttlamt=$("#frm_send input[name=totsttlamt]:hidden").val(),goodsnm=$("#frm_send input[name=goodsnm]:hidden").val().replace(/'/gi,"").replace(/&/gi,"").replace(/=/gi,"").replace(/%/gi,""),goodsnm=encodeURIComponent(goodsnm),$.ajax({type:"post",async:!1,url:"/order/misp_confirm.do?"+__commonParam,data:"iscmcd="+iscmcd+"&companyCd="+companyCd+"&cardinst="+cardinst+"&cardinstmon="+cardinstmon+"&phone_num1="+phone_num1+"&phone_num2="+phone_num2+"&phone_num3="+phone_num3+"&totsttlamt="+totsttlamt+"&goodsnm="+goodsnm+"&grockle_yn="+grockle_yn+"&grockle_mbr_no="+grockle_mbr_no,success:function(a){$("#cover").off("click"),$("#cover").on("click",function(){$(this).hide()}),$("#misp_confirm_div").html(a),misp_send()},error:init_misp()})}function init_misp(){$("#frm_send input[name=KVP_NOINT]:hidden").val(""),$("#frm_send input[name=KVP_QUOTA]:hidden").val(""),$("#frm_send input[name=KVP_GOODNAME]:hidden").val(""),$("#frm_send input[name=KVP_PRICE]:hidden").val(""),$("#frm_send input[name=KVP_NOINT_INF]:hidden").val(""),$("#frm_send input[name=KVP_QUOTA_INF]:hidden").val(""),$("#frm_send input[name=MISP_GoodName]:hidden").val(""),$("#frm_send input[name=MISP_Price]:hidden").val(""),$("#frm_send input[name=MISP_NoInt]:hidden").val(""),$("#frm_send input[name=MISP_Noint_Inf]:hidden").val(""),$("#frm_send input[name=MISP_HpNum]:hidden").val(""),$("#frm_send input[name=MISP_MerchantNo]:hidden").val(""),$("#frm_send input[name=MISP_Tcode]:hidden").val(""),$("#frm_send input[name=MISP_TID]:hidden").val("")}function ilkmpi_send(){iscmcd=$("#frm_send input[name=iscmcd]:hidden").val(),pan="",apvl_halbu=$("#frm_send input[name=cardinstmon]:hidden").val(),pay_ansim_price=$("#frm_send input[name=totsttlamt]:hidden").val(),handNum=phone_no1+phone_no2+phone_no3,handNum.length<10&&(handNum="00000000000"),iscmcd==paytype_card_008?pan="4599300000000000":iscmcd==paytype_card_036&&(pan="4539350000000007"),$("#ILKFORM input[name=apvl_halbu]:hidden").val(apvl_halbu),$("#ILKFORM input[name=pay_ansim_price]:hidden").val(pay_ansim_price),$("#ILKFORM input[name=handNum]:hidden").val(handNum),$("#ILKFORM input[name=purchase_amount]:hidden").val(pay_ansim_price),$("#ILKFORM input[name=pan]:hidden").val(pan),$("#ILKFORM").submit()}function go_smartpay(){self.location.href=__sslDomain+"/mylotte/smartpay/smartpay.do?"+__commonParam+"&targetUrl="+encodeURIComponent(window.location.href,"UTF-8")}function alliancePointUse(a){disableItems(!0)}function acthChkNum(a){var b=/^[0-9]+$/,c=event.keyCode,d=String.fromCharCode(c),e=new RegExp(b);8!=c&&46!=c&&(e.test(d)||(event.returnValue=!1))}function nextElement(a){if(varUa>-1){var b=$(a).attr("maxlength"),c=$(a).val(),d="";d="cr_issu_mean_no_phone2"==$(a).attr("name")?"cr_issu_mean_no_phone3":$(a).next("input").attr("name"),c.length==b&&$("#frm_inp input[name="+d+"]").focus()}}function setCashReceiptArea(){var a="",b=$("#chk_lpoint").prop("checked"),c=$("#chk_deposit_all").prop("checked");a=$("#frm_inp input[name=rdo_paytype]:radio").length>0?$("#frm_inp input[name=rdo_paytype]:radio:checked").val():$("#frm_inp input[name=paytype]:hidden").val(),a==PAYTYPE_CODE_BANK||b||c?($("#cash_receipts").show(),setCellNo()):($("#cash_receipts").hide(),$("#pers_value span > input").val(""),$("#co_value p > input").val(""))}function navback(){history.length>0?history.go(-2):alert("이전페이지가 존재하지 않습니다.")}function getPage(){return document.frm_send.pageName.value}function naver_store_map(a,b,c,d,e){if("boolean"!=typeof b||b===!1)return void com.lotte.util.LoadScript("http://map.naver.com/js/naverMap.naver?key=956f6f619b13d3caf5540349078f9593",function(){naver_store_map(a,!0,c,d,e)});$("#cover").css({display:"block",height:"100%",top:0});var f=$(document).scrollTop()-$(".new1025").height()+100,g="position:absolute;width:100%;opacity:1;z-index:999;top:"+f+"px;left:0px;";$("#shop_location").removeClass("shop_location"),$("#shop_location").attr("style",g);var h=e==goods_smp_normal_etc?"Y":"N",i="goods_no="+a+"&smp_entr_no="+c+"&smp_entr_contr_no="+d+"&smp_ecoupon_yn="+h+"&"+__commonParam;$.ajax({type:"post",async:!0,url:"/product/m/mobileNaverMap.do?",data:i,beforeSend:function(){$("#loading").css("display","block")},success:function(a){$("#shop_location").html(a),$("#shop_location").show()},error:function(a){alert("매장위치 조회 중 오류가 발생하였습니다.\n잠시 후 조회해 주세요."),$("#shop_location").hide()},complete:function(){$("#loading").css("display","none")}})}function setMaxDc(){console.log("setMaxDc()...");var a=0,b=0,c=0,d=0,e=0,f="0",g=fn_getDeliCnt();$("#frm_inp select[name=coupon]").find("option").each(function(){var h=$(this).val();"N"!=h?(promcartsn=$("#frm_inp input[name=promcartsn]").eq(h).val(),prommdclcd=$("#frm_inp input[name=prommdclcd]").eq(h).val(),fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd]").eq(h).val(),totdcamt=$("#frm_inp input[name=totdcamt]").eq(h).val(),cpnpromno=$("#frm_inp input[name=cpnpromno]").eq(h).val(),cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn]").eq(h).val(),adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm]").eq(h).val(),cardkndcd=$("#frm_inp input[name=cardkndcd]").eq(h).val(),includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn]").eq(h).val(),"undefined"==$.type($("#frm_inp select[name=dup_coupon]").val())||g>1?parseInt(totdcamt)>=parseInt(b)&&(a=totdcamt,"N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=h,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=h,e=0,maxSaveDupIdx="")):$("#frm_inp select[name=dup_coupon]").find("option").each(function(){var i,j=$(this).val(),k=0;if(v_cpn_crd_dc_amt=0,dup_cpnpromno=$("#frm_inp input[name=cpnpromno_dup]").eq(j).val(),"N"!=j){if(void 0==h||"N"==h?(i=single_prom,k=single_prom_cnt):(i=multi_prom,k=multi_prom_cnt,f="0"==cpnpromno?prommdclcd:cpnpromno),k>0){v_cpn_crd_dc_amt=0,totdupdcamt=0;for(var l=0;l<i.length;l++)if(i[l][0]==f&&i[l][1]==dup_cpnpromno){v_cpn_crd_dc_amt=i[l][2],totdupdcamt=i[l][2];break}parseInt(v_cpn_crd_dc_amt)>0?"N"!=j?(dup_promcartsn=$("#frm_inp input[name=promcartsn_dup]").eq(j).val(),dup_prommdclcd=$("#frm_inp input[name=prommdclcd_dup]").eq(j).val(),dup_fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd_dup]").eq(j).val(),dup_cpnpromno=$("#frm_inp input[name=cpnpromno_dup]").eq(j).val(),dup_cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn_dup]").eq(j).val(),dup_adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm_dup]").eq(j).val(),dup_cardkndcd=$("#frm_inp input[name=cardkndcd_dup]").eq(j).val(),dup_includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn_dup]").eq(j).val(),"10"==prommdclcd&&""!=cardkndcd?("30"==$("#frm_inp input[name=prommdclcd_dup]:eq("+$(this).val()+")").val()&&cardkndcd==$("#frm_inp input[name=cardkndcd_dup]:eq("+$(this).val()+")").val()||""==$("#frm_inp input[name=cardkndcd_dup]:eq("+$(this).val()+")").val())&&parseInt(totdcamt)+parseInt(totdupdcamt)>=parseInt(a)&&(a=parseInt(totdcamt)+parseInt(totdupdcamt),"N"==includeSaveInstCpn&&parseInt(a)>parseInt(b)+parseInt(c)?(b=totdcamt,maxFirstIdx=h,c=totdupdcamt,maxDupIdx=j):"Y"==includeSaveInstCpn&&parseInt(a)>parseInt(d)+parseInt(e)&&(d=totdcamt,maxSaveFirstIdx=h,e=totdupdcamt,maxSaveDupIdx=j)):"27"==prommdclcd||g>1?parseInt(totdcamt)>=parseInt(a)&&("N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=h,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=h,e=0,maxSaveDupIdx="")):parseInt(totdcamt)+parseInt(totdupdcamt)>=parseInt(a)&&(a=parseInt(totdcamt)+parseInt(totdupdcamt),"N"==includeSaveInstCpn&&parseInt(a)>parseInt(b)+parseInt(c)?(b=totdcamt,maxFirstIdx=h,c=totdupdcamt,maxDupIdx=j):"Y"==includeSaveInstCpn&&parseInt(a)>parseInt(d)+parseInt(e)&&(d=totdcamt,maxSaveFirstIdx=h,e=totdupdcamt,maxSaveDupIdx=j))):parseInt(totdcamt)>=parseInt(a)&&(a=totdcamt,"N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=h,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=h,e=0,maxSaveDupIdx=""),promcartsn="",prommdclcd="",fvrpolctpcd="",totdcamt="0",cpnpromno="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn=""):parseInt(totdcamt)>=parseInt(a)&&(a=parseInt(totdcamt),"N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=h,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=h,e=0,maxSaveDupIdx=""),promcartsn="",prommdclcd="",fvrpolctpcd="",totdcamt="0",cpnpromno="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn="")}}else parseInt(totdcamt)>=parseInt(a)&&(a=totdcamt,"N"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(b)?(b=totdcamt,maxFirstIdx=h,c=0,maxDupIdx=""):"Y"==includeSaveInstCpn&&parseInt(totdcamt)>parseInt(d)&&(d=totdcamt,maxSaveFirstIdx=h,e=0,maxSaveDupIdx=""))})):"undefined"!=$.type($("#frm_inp select[name=dup_coupon]").val())&&1==g&&$("#frm_inp select[name=dup_coupon]").find("option").each(function(){var d,g=$(this).val(),i=0;if(v_cpn_crd_dc_amt=0,"N"!=g&&(void 0==h||"N"==h?(d=single_prom,i=single_prom_cnt):(d=multi_prom,i=multi_prom_cnt,f="0"==cpnpromno?prommdclcd:cpnpromno),cpnpromno_dup=$("#frm_inp input[name=cpnpromno_dup]").eq(g).val(),i>0)){for(var j=0;j<d.length;j++)if(d[j][0]==f&&d[j][1]==cpnpromno_dup){v_cpn_crd_dc_amt=d[j][2],totdupdcamt=d[j][2];break}parseInt(v_cpn_crd_dc_amt)>0&&("N"!=g?(promcartsn=$("#frm_inp input[name=promcartsn_dup]").eq(g).val(),prommdclcd=$("#frm_inp input[name=prommdclcd_dup]").eq(g).val(),fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd_dup]").eq(g).val(),cpnpromno=$("#frm_inp input[name=cpnpromno_dup]").eq(g).val(),cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn_dup]").eq(g).val(),adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm_dup]").eq(g).val(),cardkndcd=$("#frm_inp input[name=cardkndcd_dup]").eq(g).val(),includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn_dup]").eq(g).val(),parseInt(v_cpn_crd_dc_amt)>parseInt(a)&&(a=parseInt(v_cpn_crd_dc_amt),b=parseInt(v_cpn_crd_dc_amt),maxFirstIdx=h,parseInt(v_cpn_crd_dc_amt)>0?(c=v_cpn_crd_dc_amt,maxDupIdx=g):(c=0,maxDupIdx="",e=0,maxSaveDupIdx=""))):(promcartsn="",prommdclcd="",fvrpolctpcd="",totdcamt="0",cpnpromno="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn=""))}})}),parseInt(b)+parseInt(c)<parseInt(d)+parseInt(e)&&(maxFirstIdx=maxSaveFirstIdx,maxDupIdx=maxSaveDupIdx),maxFirstIdx=""==maxFirstIdx?"N":maxFirstIdx,maxDupIdx=""==maxDupIdx?"N":maxDupIdx,"N"!=maxFirstIdx&&($("#frm_inp select[name=coupon]").val(maxFirstIdx),$("#frm_inp select[name=coupon]").change(),console.log("maxFirstIdx : "+maxFirstIdx)),"N"!=maxDupIdx&&($("#frm_inp select[name=dup_coupon]").val(maxDupIdx),$("#frm_inp select[name=dup_coupon]").change(),console.log("maxDupIdx : "+maxDupIdx)),"N"==maxFirstIdx&&"N"==maxDupIdx&&("Y"==app_card_only_yn?(console.log("앱카드 전용 이면"),$("#frm_inp select[name=iscmcd]").val(app_card_cd),getCardInsCheck()):0==$("#frm_inp input[name=rdo_paytype]:radio:checked").index()&&0!=$("#frm_inp select[name=iscmcd] option:selected").index()&&(console.log("최대 할인 카드 선택 이면"),getCardInsCheck())),0==maxFirstIdx&&$(".order_tp #lottepointSave .lottepointOrange").hide()}function chkEmpty(a){var b=!1;return(null==$(a).val()||""==$(a).val())&&(b=!0),b}function closeANSPop(){$("#ansimPop,#cover").hide(),$("#cover").off("click")}function showANSPop(){$("#ansimPop,#cover").show(),$("#cover").on("click",function(){closeANSPop()})}function setCellNo(){""!=phone_no1&&""!=phone_no2&&""!=phone_no3&&($("select[name=cr_issu_mean_no_phone1]").val(phone_no1),$("input[name=cr_issu_mean_no_phone2]").val(phone_no2),$("input[name=cr_issu_mean_no_phone3]").val(phone_no3))}function lpayCertInfo(){var a='<option value ="">카드선택</option>',b=lpayCardCdArr;$(".box_Lpay_agree_check").css("display","none"),$.ajax({async:!1,type:"POST",url:"/order/lpay_user_cert_info.do?"+__commonParam,success:function(c){a+=c,$("#frm_inp select[name=iscmcd]").html(a);var d=b.split(":");$("#frm_inp select[name=iscmcd] option").each(function(){var a=0;if(""!=$(this).val()){for(i=0;i<d.length;i++)$(this).val()==d[i]&&a++;0==a&&$(this).remove()}}),getCardInsCheck(),"none"==$(".box_Lpay_agree_check").css("display")&&$("#frm_inp input[name=rdo_paytype]:radio:eq(1)").trigger("click")},error:function(a,b,c){alert("죄송합니다. 잠시 후 다시 이용해 주세요."),$("#frm_inp input[name=rdo_paytype]:radio:eq(1)").trigger("click")}})}function LpayAgreeCheckLayer(){"none"==$(".box_Lpay_agree_check .txt").css("display")?$(".box_Lpay_agree_check").addClass("open"):$(".box_Lpay_agree_check").removeClass("open")}function createLPayCardType(){$("#card_select").show(),$("#no_lpay_card").hide(),lpayCertInfo()}function fn_useLPayLPointCancel(){$(".laver_Lpay_order").hide(),$("#useLottePoint").hide(),1==$("#chk_lt_point").prop("checked")&&$("#chk_lt_point").trigger("click"),3!=$("input[name=temp_paytype]:hidden").val()&&$("#temp_lt_point_amt").val("")}function lpay_card_reg(){$("#X_ANSIM_FRAME").attr("src","/lpay/callDLP.jsp?lpay_id=LP-PM-IAPI-03-002")}function lpay_lnk_app(){$("#X_ANSIM_FRAME").attr("src","https://www.lpay.com/dlp/ldc/appInstall")}function listOpen(a,b,c){function d(){return i?($("#pageCover").hide(),g.css({bottom:-g.height()-12+"px","z-index":0}),h.removeClass("on")):($("#pageCover").show(),g.css({bottom:0,"z-index":"9999"}),h.addClass("on")),!1}$("#sel_deli_cnt").val(b),$("#sel_deli_tab").val(c);var e=$("#sel_deli_cnt").val(),f=$("#deli_"+e+"_"+c+" #li_mine #deli_select_"+e).val();console.log("listOpen, deli_dlvp_sn:"+f),$("input[type=radio][value="+f+"]").trigger("click"),$(".btn_deli_mod").hide();var g=$(".addr_list_layer"),h=$(".addr_list_open"),i=($(".addr_list_bg"),!1);"1"==a?d():"2"==a&&(g=$(".addr_list_layer2"),d()),filterBarScroll=$("#filterType").egScroll(!0,!1),$("#filterType2").egScroll(!0,!1)}function btnComplate(){if(!$('input:radio[name="detail_list"]').is(":checked"))return alert("배송지를 선택해 주세요"),!1;var a=$(".addr_list_layer"),b=$(".addr_list_open"),c=($(".addr_list_bg"),!1);$("#pageCover").hide(),a.css({bottom:-a.height()-12+"px","z-index":0}),b.removeClass("on"),c=!1;var d=$('input:radio[name="detail_list"]:checked'),e=$("#sel_deli_cnt").val(),f=$("#sel_deli_tab").val();if(("000"==d.data("d03")||d.data("d03").length<=0||d.data("d04").length<=0||d.data("d05").length<=0||d.data("d06").length<=0)&&("000"==d.data("d07")||d.data("d07").length<=0||d.data("d08").length<=0||d.data("d09").length<=0||d.data("d10").length<=0))return alert("기존 배송지정보(우편번호/주소)가 유효하지 않습니다.\n새로운 배송지로 입력해 주세요."),$("#deli_"+e+"_"+f+" #li_new > a").click(),$("#deli_"+e+"_"+f+" #li_new [name=inprmitnm]").val(d.data("d02")),$("#deli_"+e+"_"+f+" #li_new select[name=inpcell1]").val(d.data("d13")),$("#deli_"+e+"_"+f+" #li_new input[name=inpcell2]").val(d.data("d14")),void $("#deli_"+e+"_"+f+" #li_new input[name=inpcell3]").val(d.data("d15"));var g=d.data("d13")+d.data("d14")+d.data("d15"),h=/(01[016789])(\d{3}|\d{4})\d{4}$/g;h.test(g)?($("#deli_"+e+"_"+f+" #li_mine #deli_phone_inp_"+e).hide(),$("#deli_"+e+"_"+f+" #li_mine input[name=inpcell2]").hide(),$("#deli_"+e+"_"+f+" #li_mine input[name=inpcell3]").hide(),$("#deli_"+e+"_"+f+" #li_mine #deli_phone_text_"+e).show(),$("#deli_"+e+"_"+f+" #li_mine #deli_phone_text_"+e).html(d.data("d13")+"-"+d.data("d14")+"-"+d.data("d15"))):($.trim(g).length<=0?alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요."):alert("선물 받으시는 분의 휴대폰 번호를 확인해 주세요. ["+g+"]"),$("#deli_"+e+"_"+f+" #li_mine #deli_phone_text_"+e).hide(),$("#deli_"+e+"_"+f+" #li_mine #deli_phone_inp_"+e).show(),$("#deli_"+e+"_"+f+" #li_mine input[name=inpcell2]").show(),$("#deli_"+e+"_"+f+" #li_mine input[name=inpcell3]").show(),$("#deli_"+e+"_"+f+" #li_mine input[name=inpcell2]").focus()),""!=d.data("d07")?$("#deli_"+e+"_"+f+" #deli_addr_text_"+e).html(d.data("d09")+" "+d.data("d10")):$("#deli_"+e+"_"+f+" #deli_addr_text_"+e).html(d.data("d05")+" "+d.data("d06")),$("#deli_"+e+"_"+f+" #li_mine #selectedRmitNmList").html(d.data("d02")+" ("+d.data("d01")+")"),$("#deli_"+e+"_"+f+" #li_mine #deli_select_"+e).val(d.data("d12")),$("#deli_"+e+"_"+f+" #li_mine #deli_selected_no_"+e).val(d.data("d16")),switchDeliOption("mine",e,d.data("d12"),f),sendTclick("order_ClkW_Btn_1")}function btnCancel(){var a=$(".addr_list_layer");$(".addr_list_bg");$("#pageCover").hide(),a.css({bottom:-a.height()-12+"px","z-index":0}),_open=!1}function chImg(a,b){a.src="https://simage.lotte.com/lotte/images/common/product/no_"+b+".gif"}function fn_cardsavegoods(){for(var a=$("#frm_send input[name=goodsno]:hidden").val();a.indexOf(split_gubun_1)>-1;)a=a.replace(split_gubun_1,",");var b=a,c=$("#frm_inp select[name=iscmcd]").val(),d="",e=$("#frm_inp input[name=totsttlamt]:hidden").val();$("#no_discount_items").html('<li><div class="visual"></div><div class="cont"></div></li>'),$.ajax({async:!1,type:"POST",dataType:"json",url:"/order/searchCardSalePromViewList.do",data:{goods_no_list:b,card_knd_cd:c},success:function(a){if(a.length>0){$("#no_discount_items").html("");for(var f=0;f<a.length;f++)d+="<li>",d+='<div class="visual"><img src="https://simage.lotte.com/goods'+a[f].img_path_nm+a[f].goods_no+'_1_100.jpg" alt="#"></div>',d+='<div class="cont"><p class="tit"><strong>',d+="</strong><span>",d+=a[f].goods_nm,d+="</span></p>",null!=a[f].card_knd_nm&&"null"!=a[f].card_knd_nm?(d+='<p class="card_info">',d+=a[f].card_knd_nm+" 청구할인"):(d+='<p class="card_info none">',d+="청구할인 제외상품"),d+="</p></div></li>",$("#frm_inp input[name=card_save_cnt]:hidden").val(a[f].card_save_cnt);$("#no_discount_items").html(d),"카드선택"!=$("#frm_inp select[name=iscmcd] option:selected").text()?($("#card_sale_goods_list_h2").html($("#frm_inp select[name=iscmcd] option:selected").text()+" 청구할인 불가 상품"),$("#ok_card_noti_04").html("<strong>"+$("#frm_inp select[name=iscmcd] option:selected").text()+" 청구할인이 불가한 상품이 있습니다.</strong><br/>청구할인을 원하시면 불가한 상품은 따로 결제해주세요.")):($("#card_sale_goods_list_h2").html("청구할인 불가 상품"),$("#ok_card_noti_04").html("")),fn_formshow()}else $.ajax({async:!1,type:"POST",dataType:"json",url:"/order/searchCardSalePromView2.do",data:{goods_no_list:b,card_knd_cd:c,tot_sttl_amt:e},success:function(a){a.success&&(claim_sale_aply_lmt_amt=a.aplylmtamt,claim_sale_card_knd_cd=a.cardkndcd,claim_sale_fvr_val=a.fvrval,claim_sale_card_max_amt=a.maxfvrval,$("#frm_inp input[name=claim_sale_fvr_val]:hidden").val(a.fvrval),$("#frm_inp input[name=claim_sale_aply_lmt_amt]:hidden").val(a.aplylmtamt),$("#frm_inp input[name=claim_sale_card_max_amt]:hidden").val(a.maxfvrval),$("#frm_inp input[name=claim_sale_card_knd_cd]:hidden").val(a.cardkndcd))},error:function(a,b){}}),fn_formshow()},error:function(a,b){}})}function fn_formshow(){var a=$("#frm_inp input[name=totsttlamt]:hidden").val(),b=($("#frm_inp input[name=paytype]:hidden").val(),$("#frm_inp input[name=card_save_cnt]:hidden").val()),c=$("#frm_inp select[name=iscmcd]").val(),d=$("#frm_inp input[name=claim_sale_fvr_val]:hidden").val(),e=$("#frm_inp input[name=claim_sale_card_max_amt]:hidden").val();console.log(c+"/"+claim_sale_card_knd_cd+" / "+parseInt(a)+"/"+parseInt(claim_sale_aply_lmt_amt)),$("#frm_inp input[name=select_card_payment_yn]:hidden").val("N"),$("#btn_goods_view").attr("style","display:none;"),$("#li_claim_sale_info2").html(""),"N"==claim_sale_yn&&"Y"==card_sale_yn?"카드선택"!=$("#frm_inp select[name=iscmcd] option:selected").text()?parseInt(b)>0?($("#claim_sale_info00").hide(),$("#claim_sale_info01").hide(),$("#claim_sale_info02").hide(),$("#claim_sale_info03").hide(),$("#claim_sale_info05").hide(),$("#claim_sale_info04").show(),$("#btn_goods_view").attr("style",""),parseInt(a)>=parseInt(claim_sale_aply_lmt_amt)&&parseInt(a)>0&&$("#frm_inp input[name=select_card_payment_yn]:hidden").val("Y")):($("#claim_sale_info00").hide(),$("#claim_sale_info01").hide(),$("#claim_sale_info02").hide(),$("#claim_sale_info03").hide(),$("#claim_sale_info05").hide(),$("#claim_sale_info04").hide()):($("#claim_sale_info00").hide(),$("#claim_sale_info01").hide(),$("#claim_sale_info02").show(),$("#claim_sale_info03").hide(),$("#claim_sale_info05").hide(),$("#claim_sale_info04").hide()):"Y"==claim_sale_yn&&"Y"==card_sale_yn?$("#frm_inp select[name=iscmcd]").val()==claim_sale_card_knd_cd&&"카드선택"!=$("#frm_inp select[name=iscmcd] option:selected").text()&&parseInt(a)>=parseInt(claim_sale_aply_lmt_amt)&&parseInt(a)>0?($("#claim_sale_info00").show(),$("#claim_sale_info01").show(),$("#claim_sale_info02").hide(),$("#claim_sale_info03").hide(),$("#claim_sale_info05").hide(),$("#claim_sale_info04").hide()):$("#frm_inp select[name=iscmcd]").val()==claim_sale_card_knd_cd&&"카드선택"!=$("#frm_inp select[name=iscmcd] option:selected").text()&&parseInt(a)<parseInt(claim_sale_aply_lmt_amt)&&parseInt(a)>0?($("#claim_sale_info00").hide(),$("#claim_sale_info01").hide(),$("#claim_sale_info02").hide(),$("#claim_sale_info03").show(),$("#claim_sale_info05").hide(),$("#claim_sale_info04").hide(),$("#li_claim_sale_info2").html("<strong>"+$("#frm_inp select[name=iscmcd] option:selected").text()+String(claim_sale_aply_lmt_amt).money()+"원 이상 결제 시 추가 "+d+"% 청구 할인</strong><br/>(단, 개인별 1일 할인한도 최대 "+String(e).money()+"원)")):"카드선택"==$("#frm_inp select[name=iscmcd] option:selected").text()?($("#claim_sale_info00").hide(),$("#claim_sale_info01").hide(),$("#claim_sale_info02").hide(),$("#claim_sale_info03").hide(),$("#claim_sale_info05").show(),$("#claim_sale_info04").hide()):($("#claim_sale_info00").hide(),$("#claim_sale_info01").hide(),$("#claim_sale_info02").hide(),$("#claim_sale_info03").hide(),$("#claim_sale_info05").hide(),$("#claim_sale_info04").hide()):($("#claim_sale_info00").hide(),$("#claim_sale_info01").hide(),$("#claim_sale_info02").hide(),$("#claim_sale_info03").hide(),$("#claim_sale_info05").hide(),$("#claim_sale_info04").hide())}function limitChars(a,b,c){str=$("#"+a).val(),strlen=str.length;for(var d=0,e=0;e<strlen;e++)if(d+=str.charCodeAt(e)>128?2:1,d>b)return alert("최대 "+b+"byte까지 입력가능합니다."),$("#"+a).val(str.cut(b)),$("#"+c).html(b),!1;return $("#"+c).html(strlen),!0}function getParameter(a){var b="",c=window.location.href;if(c.indexOf("?")>-1)for(var d=c.substr(c.indexOf("?")).toLowerCase(),e=d.split("&"),f=0;f<e.length;f++)if(e[f].indexOf(a.toLowerCase()+"=")>-1){var g=e[f].split("=");b=g[1];break}return unescape(b)}function fn_getServerTimer(){return serverTime}function localStorageReSet(a){if(localStorage)try{var b=localStorage.getItem("myWord"),c=localStorage.getItem("wishGallery"),d=localStorage.getItem("myCateList"),e=localStorage.getItem("family_chk"),f=localStorage.getItem("stamp_chk"),g=localStorage.getItem("viewGoods"),h=localStorage.getItem("wSize"),i=localStorage.getItem("mSize"),j=localStorage.getItem("sSize"),k=localStorage.getItem("renewalEvent"),l=localStorage.getItem("firstStartLotteM");if(a)for(var m=0;m<localStorage.length;m++)0==localStorage.key(m).indexOf(a)&&localStorage.removeItem(localStorage.key(m));b&&localStorage.setItem("myWord",b),c&&localStorage.setItem("wishGallery",c),d&&localStorage.setItem("myCateList",d),e&&localStorage.setItem("family_chk",e),g&&localStorage.setItem("viewGoods",g),h&&localStorage.setItem("wSize",h),i&&localStorage.setItem("mSize",i),j&&localStorage.setItem("sSize",j),k&&localStorage.setItem("renewalEvent",k),l&&localStorage.setItem("firstStartLotteM",l),localStorage.stamp_chk=f}catch(n){}}!function(a,b,c){var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.controller("OrderGiftCtrl",["$scope","$filter","$sce","$http","$window","$log","LotteCommon","LotteUtil",function(a,b,c,d,e,f,g,h){a.showWrap=!0,a.contVisible=!0,a.subTitle=orderSubTitle,a.actionBar=!0,a.isShowThisSns=!1}])}(window,window.angular);var add_dis_impossible_flag=!1,totpayamt,ltPointCert="N",single_prom,single_prom_cnt,multi_prom,multi_prom_cnt,maxFirstIdx="",maxDupIdx="",maxSaveFirstIdx="",maxSaveDupIdx="",filterBarScroll=null;$(window).load(function(){function a(){d.on("focusout",b);var a=$(this);""==a.val()&&(a.val(" "),setTimeout(function(){a.val("")},100))}function b(){d.off("focusout",b),""==$(this).val()&&(d.hide(),$(this).prev().show().children("select").find("option:eq(0)").prop("selected",!0))}jQuery.fn.selectMenu=function(a){function b(){var a=$(this);e.on("focusout",c),a.val(" "),setTimeout(function(){a.val("")},100)}function c(){e.off("focusout",c),""==$(this).val()&&(e.prop("disabled",!0).hide(),d.prop("disabled",!1).parent().show(),d.find("option:eq(0)").prop("selected",!0))}var d=$(this),e=d.parent().next();d.on("change",function(){"직접입력"==d.val()&&(d.prop("disabled",!0).parent().hide(),e.prop("disabled",!1).show().focus(),e.on("click",function(){$(this).focus()}).trigger("click"))}),e.on("focusin",b)},$(".phone_modi").each(function(a){$(this).selectMenu()}),$(".mail_modi").each(function(a){$(this).selectMenu()});var c=$(".del_msg"),d=c.parent().siblings(".txt01.mgb0");c.on("change",function(){"직접입력"==$(this).val()&&($(this).parent().hide(),$(this).parent().next().show().focus().click(function(){$(this).focus();
}).trigger("click"))}),d.on("focusin",a),$(".btn_lotte_point").bind("click",function(){$("#card_no1").val(""),$("#card_no2").val(""),$("#card_no3").val(""),$("#card_no4").val("");var a=$(this).parent().parent().next();if("none"==a.css("display")){if("0"==$("input[name=third_coupon]:radio:checked").val())return void alert("신용카드 결제수단과 L.POINT를 함께 사용하실 수 없습니다.");a.show(),$(this).text("취소하기")}else a.hide(),fn_useLottePointCancel(),$(this).text("본인확인")}),$(".point_cancle").on("click",function(){$(".box_lotte_point").hide(),$(".btn_lotte_point").text("본인확인")}),$(".box_card_noti .tit_agree_check").bind("click",function(){$(this).toggleClass("show").next().toggle()}),$(".box_agree_check .tit_agree_check span").bind("click",function(){$(this).parent().toggleClass("show").next().toggle()}),$("input[name^=gift_pkg_]").change(function(){this.name.replace("gift_pkg_","");this.id.indexOf("1")>0?($(".gift_text textarea").prop("disabled",!1),$(".gift_text textarea").remove("disabled")):($(".gift_text textarea").prop("disabled",!0),$(".gift_text textarea").add("disabled"))}),$("#giftopt1").length>0&&($(".gift_text textarea").prop("disabled",!1),$(".gift_text textarea").remove("disabled")),$("#frm_inp input[name=third_coupon]:radio:first").attr("disabled")||$("#frm_inp input[name=third_coupon]:radio:first").trigger("click"),$("#frm_inp select[name=coupon]").change(function(){var a=$(this).val();maxFirstIdx!=a&&$("#max_dc").prop("checked",!1),$("span[name=dup_span]").each(function(){$(this).html("")}),"N"!=a?(promcartsn=$("#frm_inp input[name=promcartsn]").eq(a).val(),prommdclcd=$("#frm_inp input[name=prommdclcd]").eq(a).val(),fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd]").eq(a).val(),totdcamt=$("#frm_inp input[name=totdcamt]").eq(a).val(),cpnpromno=$("#frm_inp input[name=cpnpromno]").eq(a).val(),cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn]").eq(a).val(),adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm]").eq(a).val(),cardkndcd=$("#frm_inp input[name=cardkndcd]").eq(a).val(),includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn]").eq(a).val(),"27"==prommdclcd?($("#order .safe_num2").show(),$("#cover2").on("click",function(){$("#staffPop2").hide(),$(this).hide()})):($("#order .safe_num2").hide(),$("#cover2").off("click")),$("#dcAmt1").html("(<span class=tBold>"+("Y"==includeSaveInstCpn?"":"-")+String(totdcamt).money()+'</span><span class="no_bold">원'+("Y"==includeSaveInstCpn?" 적립":"")+"</span>)")):(promcartsn="",prommdclcd="",fvrpolctpcd="",totdcamt="",cpnpromno="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn="",$("#order .safe_num2").hide(),$("#dcAmt1").text("("+$(this).find("option").not("[value=N], :disabled").length+"개)")),$("#frm_send input[name=promcartsn]").val(promcartsn),$("#frm_send input[name=prommdclcd]").val(prommdclcd),$("#frm_send input[name=fvrpolctpcd]").val(fvrpolctpcd),$("#frm_send input[name=totdcamt]").val(totdcamt),$("#frm_send input[name=cpnpromno]").val(cpnpromno),$("#frm_send input[name=cpnrscmgmtsn]").val(cpnrscmgmtsn),$("#frm_send input[name=adtncostdtlsctnm]").val(adtncostdtlsctnm),$("#frm_send input[name=cardkndcd]").val(cardkndcd),$("#frm_send input[name=includeSaveInstCpn]").val(includeSaveInstCpn),ord_session_clear(),$("#frm_inp select[name=dup_coupon]").val("N"),$("#frm_inp select[name=dup_coupon]").find("option").each(function(){if($(this).attr("disabled",!1),"10"==prommdclcd&&""!=cardkndcd?"30"==$("#frm_inp input[name=prommdclcd_dup]:eq("+$(this).val()+")").val()&&cardkndcd==$("#frm_inp input[name=cardkndcd_dup]:eq("+$(this).val()+")").val()||""==$("#frm_inp input[name=cardkndcd_dup]:eq("+$(this).val()+")").val()?$(this).attr("disabled",!1):$(this).attr("disabled",!0):$(this).attr("disabled",!1),"27"==prommdclcd||fn_getDeliCnt()>1)"N"!=$(this).val()&&($(this).attr("disabled",!0),$(this).prop("disabled",!0));else if(multi_prom_cnt>0)for(var b=0;b<multi_prom.length;b++)multi_prom[b][0]==cpnpromno&&multi_prom[b][1]==$("#frm_inp input[name=cpnpromno_dup]:eq("+$(this).val()+")").val()&&parseInt(multi_prom[b][2])<1&&$(this).attr("disabled",!0);if("N"!=a&&"N"!=$(this).val()){var c,d="0"==cpnpromno?prommdclcd:cpnpromno,e=$("#frm_inp input[name=cpnpromno_dup]").eq($(this).val()).val(),f=0,g=0;if(void 0==a||"N"==a?(c=single_prom,g=single_prom_cnt):(c=multi_prom,g=multi_prom_cnt,d="0"==cpnpromno?prommdclcd:cpnpromno),Number(g)>0){for(var b=0;b<c.length;b++)if(c[b][0]==d&&c[b][1]==e){f=c[b][2];break}parseInt(f)<=0&&($(this).attr("disabled",!0),$(this).prop("disabled",!0))}}}),$("#frm_inp select[name=dup_coupon]").attr("disabled",!1),$("#frm_inp select[name=dup_coupon]").prop("disabled",!1),init_cpn_info("N","Y","Y"),$("#frm_inp select[name=dup_coupon]").attr("disabled",!1),$("#frm_inp select[name=dup_coupon]").prop("disabled",!1),$("#frm_inp input[name=third_coupon]:radio:last").attr("checked",!0),$("#frm_inp input[name=third_coupon]:radio:last").prop("checked",!0),$("#frm_inp input[name=third_coupon]:radio").each(function(){$(this).attr("disabled",!1),$(this).prop("disabled",!1),"27"==prommdclcd&&($(this).attr("disabled",!0),$(this).prop("disabled",!0))}),$("#frm_inp input[name=third_coupon]:radio:last").attr("disabled",!1),$("#frm_inp input[name=third_coupon]:radio:last").prop("disabled",!1),$("#frm_inp input[name=third_coupon]:radio:last").click(),select_coupon(),0==a?$(".order_tp #lottepointSave .lottepointOrange").hide():$(".order_tp #lottepointSave .lottepointOrange").show()}),$("#frm_inp select[name=dup_coupon]").click(function(){return"27"==$("#frm_send input[name=prommdclcd]").val()?(alert("임직원할인 적용 시 추가할인 및 일시불할인 혜택을 받으실 수 없습니다."),$(this).attr("disabled",!0),$(this).prop("disabled",!0),$(this).val("N"),void $("#frm_inp select[name=dup_coupon]").change()):void 0}),$("#frm_inp select[name=dup_coupon]").change(dup_coupon_select),$("#frm_inp input[name=third_coupon]:radio").click(function(){var a=$(this).val();"N"!=a?(promcartsn=$("#frm_inp input[name=promcartsn_third]").eq(a).val(),prommdclcd=$("#frm_inp input[name=prommdclcd_third]").eq(a).val(),fvrpolctpcd=$("#frm_inp input[name=fvrpolctpcd_third]").eq(a).val(),"35"==prommdclcd?totdcamt=$("#frm_inp input[name=lumpSumFvrVal]").val():totdcamt=$("#frm_inp input[name=totdcamt_third]").eq(a).val(),cpnpromno=$("#frm_inp input[name=cpnpromno_third]").eq(a).val(),cpnrscmgmtsn=$("#frm_inp input[name=cpnrscmgmtsn_third]").eq(a).val(),adtncostdtlsctnm=$("#frm_inp input[name=adtncostdtlsctnm_third]").eq(a).val(),cardkndcd=$("#frm_inp input[name=cardkndcd_third]").eq(a).val(),includeSaveInstCpn=$("#frm_inp input[name=includeSaveInstCpn_third]").eq(a).val(),$("#dcAmt3").html("(-"+String(totdcamt).money()+'<span class="no_bold">원</span>)'),"none"!=$("#useLottePoint").css("display")&&($("#lt_point_amt_btn").click(),fn_useLottePointCancel())):(promcartsn="",prommdclcd="",fvrpolctpcd="",totdcamt="",cpnpromno="",cpnrscmgmtsn="",adtncostdtlsctnm="",cardkndcd="",includeSaveInstCpn="",$("#dcAmt3").text("")),$("#frm_send input[name=promcartsn_third]").val(promcartsn),$("#frm_send input[name=prommdclcd_third]").val(prommdclcd),$("#frm_send input[name=fvrpolctpcd_third]").val(fvrpolctpcd),$("#frm_send input[name=totdcamt_third]").val(totdcamt),$("#frm_send input[name=cpnpromno_third]").val(cpnpromno),$("#frm_send input[name=cpnrscmgmtsn_third]").val(cpnrscmgmtsn),$("#frm_send input[name=adtncostdtlsctnm_third]").val(adtncostdtlsctnm),$("#frm_send input[name=cardkndcd_third]").val(cardkndcd),$("#frm_send input[name=includeSaveInstCpn_third]").val(includeSaveInstCpn),select_third_coupon()}),$("#frm_inp input[name=rdo_cash]:radio").click(function(){cash_val=$(this).val(),$("#pers_select").hide(),$("#pers_value").hide(),$("#co_value").hide(),"1"==cash_val?($("#pers_select").show(),$("#pers_value").show(),$("#co_value p > input").val("")):"2"==cash_val&&($("#co_value").show(),$("#pers_value span > input").val(""))}),$("#frm_inp select[name=cr_issu_mean_sct_cd]").change(function(){sct_cd=$(this).val(),$("#cash_receipts02").hide(),$("#cash_receipts03").hide(),$("#cash_receipts04").hide(),$("#cash_receipts05").hide(),$("#cash_receipts06").hide(),$("#pers_value span > input").val(""),"1"==sct_cd?$("#cash_receipts02").show():"3"==sct_cd?($("#cash_receipts03").show(),setCellNo()):"4"==sct_cd?$("#cash_receipts04").show():"5"==sct_cd?$("#cash_receipts05").show():$("#cash_receipts06").show()}),$("#frm_inp input[name=rdo_paytype]:radio").click(function(){var a=!1;$("#frm_inp input[name=paytype]:hidden").val($(this).val());var b=$("input[name=temp_paytype]:hidden").val();$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_CARD?(sendTclick("order_Clk_Btn_6"),selPayType(1),createCardType(),$("#pay_bank").hide(),$("#pay_card").show(),$("#pay_phone").hide(),$("#no_lpay_card").hide(),$(".box_Lpay_agree_check").hide(),$("#card_select").show(),$("#pay_card > dl").show(),$("input[name=temp_paytype]:hidden").val(0),$("#SHINHAN_CARD_LAYER").hide(),$("input[name='sinhan_point'][type=radio][value=N]").click(),$("#BC_CARD_LAYER").hide(),$("input[name='bc_point'][type=radio][value=N]").click(),$("#SAMSUNG_CARD_LAYER").hide(),$("input[name='samsung_point'][type=radio][value=N]").click(),$("#KB_CARD_LAYER").hide(),$("input[name='kb_point'][type=radio][value=N]").click(),$("#pay_notice_lpay").hide(),$("#pay_notice_card").show(),$("#pay_notice_bank").hide(),$("#pay_notice_phone").hide()):$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_BANK?(sendTclick("order_Clk_Btn_8"),selPayType(2),coupon_cd=$("#frm_send input[name=prommdclcd]").val(),coupon_cardcd=$("#frm_send input[name=cardkndcd]").val(),""!=coupon_cd&&""!=coupon_cardcd&&(alert("카드 할인쿠폰 및 적립쿠폰은 카드로 결제를 하셔야 사용 가능 합니다."),iscmcd=$("#frm_inp select[name=iscmcd]").val(cardkndcd),3==b?($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_LPAY+"']").prop("checked",!0),selPayType(4)):($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").prop("checked",!0),selPayType(1)),a=!0),coupon_cd_dup=$("#frm_send input[name=prommdclcd_dup]").val(),coupon_cardcd_dup=$("#frm_send input[name=cardkndcd_dup]").val(),""!=coupon_cd_dup&&""!=coupon_cardcd_dup&&(alert("중복카드 할인쿠폰은 카드로 결제를 하셔야 사용 가능 합니다."),iscmcd=$("#frm_inp select[name=iscmcd]").val(coupon_cardcd_dup),3==b?($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_LPAY+"']").prop("checked",!0),selPayType(4)):($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").prop("checked",!0),selPayType(1)),a=!0),a?($("#cash_receipts").hide(),$("#pay_card").show(),$("#pay_bank").hide(),$("#pay_phone").show()):($("#cash_receipts").show(),$("#pay_card").hide(),$("#pay_bank").show(),$("#pay_phone").hide(),setCellNo()),$("#pay_notice_lpay").hide(),$("#pay_notice_card").hide(),$("#pay_notice_bank").show(),$("#pay_notice_phone").hide()):$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_PHONE?(sendTclick("order_Clk_Btn_7"),selPayType(3),coupon_cd=$("#frm_send input[name=prommdclcd]").val(),coupon_cardcd=$("#frm_send input[name=cardkndcd]").val(),""!=coupon_cd&&""!=coupon_cardcd&&(alert("카드 할인쿠폰 및 적립쿠폰은 카드로 결제를 하셔야 사용 가능 합니다."),iscmcd=$("#frm_inp select[name=iscmcd]").val(cardkndcd),3==b?($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_LPAY+"']").prop("checked",!0),selPayType(4)):($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").prop("checked",!0),selPayType(1)),a=!0),coupon_cd_dup=$("#frm_send input[name=prommdclcd_dup]").val(),coupon_cardcd_dup=$("#frm_send input[name=cardkndcd_dup]").val(),""!=coupon_cd_dup&&""!=coupon_cardcd_dup&&(alert("중복카드 할인쿠폰은 카드로 결제를 하셔야 사용 가능 합니다."),iscmcd=$("#frm_inp select[name=iscmcd]").val(coupon_cardcd_dup),3==b?($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_LPAY+"']").prop("checked",!0),selPayType(4)):($("#frm_inp input[name=rdo_paytype]:radio[value='"+PAYTYPE_CODE_CARD+"']").prop("checked",!0),selPayType(1)),a=!0),a||($("#pay_card").hide(),$("#pay_bank").hide(),$("#pay_phone").show()),$("#pay_notice_lpay").hide(),$("#pay_notice_card").hide(),$("#pay_notice_bank").hide(),$("#pay_notice_phone").show()):$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY&&(sendTclick("order_Clk_Btn_5"),selPayType(4),$("#pay_card").show(),$("#pay_card_confirm").hide(),$("#pay_bank").hide(),$("#pay_phone").hide(),$("input[name=temp_paytype]:hidden").val(3),$("#SHINHAN_CARD_LAYER").hide(),$("input[name='sinhan_point'][type=radio][value=N]").click(),$("#BC_CARD_LAYER").hide(),$("input[name='bc_point'][type=radio][value=N]").click(),$("#SAMSUNG_CARD_LAYER").hide(),$("input[name='samsung_point'][type=radio][value=N]").click(),$("#KB_CARD_LAYER").hide(),$("input[name='kb_point'][type=radio][value=N]").click(),$("#pay_notice_lpay").show(),$("#pay_notice_card").hide(),$("#pay_notice_bank").hide(),$("#pay_notice_phone").hide(),lpayCertInfo()),setCashReceiptArea(),getCardInsCheck(),""==$("#frm_send input[name=lt_cd_no]:hidden").val()&&($("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY&&"0"!=$("input[name=third_coupon]:radio:checked").val()?($("#useLottePoint").hide(),$("#chk_lt_point").attr("disabled",!1),ltPointCert="Y",$("#lt_point_amt_btn").hide(),$("#lt_point_amt").show(),""!=$("#temp_lt_point_amt").val()&&($("#chk_lt_point").prop("checked",!0),$("#lt_point_amt").val($("#temp_lt_point_amt").val()))):($("#lt_point_amt").val(""),$("#chk_lt_point").prop("checked",!1),$("#chk_lt_point").attr("disabled",!0),ltPointCert="N",$("#lt_point_amt").hide(),$("#lt_point_amt_btn").show()),fn_calcTotalPrice()),$("#laver_Lpay_order").hide(),($("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY||$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_CARD)&&("Y"==card_sale_yn||"Y"==claim_sale_yn)&&fn_cardsavegoods()}),$("#input_lpoint_pw").click(function(){$("#laver_Lpay_order").hide(),$("#lt_point_amt_btn").show(),$("#lt_point_amt").hide(),"none"==$("#useLottePoint").css("display")&&$("#lt_point_amt_btn").trigger("click"),$("html, body").scrollTop($("#pay_info2").offset().top-49),setTimeout(function(){$("#card_passwd").focus()},500)}),$(".safe_num[class*=gift_]").click(function(){var a=$(this).attr("class").match(/\b(gift_).*?\b/),b=".gift_pop."+a;if("gift_wrap"==a[0]){var c=$(this).attr("name"),d=c.substring(c.lastIndexOf("_")+1)-1,e=$(".order_goods input[name=bene_prod_gift_"+d+"]:hidden").val();$(".gift_pop .brand").text(e);var f=d+1,g=$("#frm_inp input[name=free_img_url_"+f+"]:hidden").val();$(".free_img_url_cls").attr("src",g)}return $("#pageCover").show(),$(b).show().css("margin-top",$(b).height()/-2),$(b).find(".gift_con").css("height","auto").height($(b).height()-45),$(".gift_pop .gift_pop_cls").unbind("click").bind("click",function(){return $("#pageCover").hide(),$(b).hide(),!1}),!1});try{sessionStorage.setItem("safe_browsing","Y"),sessionStorage.removeItem("safe_browsing")}catch(e){alert("아이폰 설정을 확인/수정하시기 바랍니다. [설정]>[Safari]>[개인정보 보호 브라우징] 해제")}init(),init_cardinstmon(),$("dd.deli_"+$("input[name=deli_select]").val()).show();var f="deli_"+$("input[name=deli_select]").val(),g=$("#frm_inp input[name="+f+"]:hidden").val();if($("#frm_inp input[name=defaultNm]:hidden").val(g),$("#frm_inp input[name^=gift_yn_]:radio").click(function(){var a=$(this).attr("name"),b=a.substring(a.lastIndexOf("_")+1),c=" 님, 언제나 많은 사랑과 관심에 감사드립니다. 앞으로도 건강하시고 행복하시길 바랍니다.",d=1,e=$("#frm_inp input[name=prodTotalCnt]:hidden").val();if($("#chk_multi_dlvp").prop("checked")||$("#frm_inp input[name=gift_msg_y_index]:hidden").val(b),"1"==$("#frm_inp input[name="+a+"]:radio:checked").val()){var f=0,g=new Array,h=new Array,i="",j=0,k="N";if($("#chk_multi_dlvp").prop("checked")){if($("input[name^=multi_prod_][name$=_"+b+"]").each(function(){f+=$(this).val(),i=$(this).attr("name").replace("multi_prod_",""),g[j]="card_msg_info_"+i,h[j]="happy_call_info_"+i,j++}),1>f)return alert("보낼 상품 수량을 선택해 주세요."),$("#frm_inp input[name="+a+"]:visible:last").prop("checked",!0),void $("#frm_inp input[name="+a+"]:visible:last").click();for(var l="N",m=0;m<g.length;m++)i=g[m].replace("card_msg_info_",""),f=$("input[name=multi_prod_"+i+"]").val(),f>0&&"Y"==$("#"+g[m]).val()&&(l="Y","Y"==$("#"+h[m]).val()&&(c="정겨움과 따스함이 가득한 명절이 되시길 진심으로 기원합니다.",k="Y"));if($("#hpcl_msg_"+b).val(k),"N"==l)return alert("메시지 작성이 가능한 상품이 없습니다."),$("#frm_inp input[name="+a+"]:visible:last").attr("checked",!0),void $("#frm_inp input[name="+a+"]:visible:last").prop("checked",!0)}else"Y"==$("#tot_card_yn").val()&&"Y"==$("#tot_happy_yn").val()&&(c="정겨움과 따스함이 가득한 명절이 되시길 진심으로 기원합니다.",k="Y");if($("#chk_multi_dlvp").prop("checked")){for(var n=2;e>=n;n++)$("#frm_inp #giftMs_"+n).hide(),$("#gift_none_msg_"+n).hide();if("Y"!=grockle_yn){$("dd[name^=gift_msg_form_"+b+"]").show();var o=$("#deli_"+b+" #li_mine input[name=inprmitnm]").val();""!=o&&($("#frm_inp #li_mine input[name=receivename_"+b+"]").val(o+" 님"),$("#sendmessage_"+b).val(("N"==k?o:"")+c));var p=$("#deli_"+b+" #li_new input[name=inprmitnm]").val();""!=p&&($("#frm_inp #li_new input[name=receivename_"+b+"]").val(p+" 님"),$("#sendmessage_"+b).val(("N"==k?p:"")+c)),$("#frm_inp input[name=sendname_"+b+"]").val($("#nameSp").text()+"드림")}else{$("#frm_inp input[name=receivename_"+b+"]").val("");var p=$("#deli_"+b+" input[name=inprmitnm]").val(),q=$("#frm_inp input[name=grockle_name]").val();""!=p&&(p+=" 님",$("#frm_inp input[name=receivename_"+b+"]").val(p),$("#frm_inp textarea[name=sendmessage_"+b+"]").val(("N"==k?p:"")+c)),""!=q&&$("#frm_inp input[name=sendname_"+b+"]").val(q+"드림")}$("dd[name^=gift_msg_form_"+b+"]").show(),$("#gift_none_msg_"+b).hide()}else{$("#frm_inp .gift_msgMultiInsert input[name=gift_yn_1]:radio[value='1']").prop("checked",!0),$("#frm_inp .gift_msgMultiInsert input[name=gift_yn_1]:radio[value='2']").prop("checked",!1);for(var n=2;e>=n;n++)b!=n&&($("#frm_inp .gift_msg_sel_"+n+" input[name^=gift_yn_"+n+"]:radio[value='1']").prop("checked",!0),$("#frm_inp .gift_msg_sel_"+n+" input[name^=gift_yn_"+n+"]:radio[value='2']").prop("checked",!1),$("#frm_inp #giftMs_"+n).hide(),$("#gift_none_msg_"+n).show());if("Y"!=grockle_yn){$("#frm_inp #giftMs_"+b).show(),$("#gift_none_msg_"+b).hide();var o=$("#deli_"+d+" #li_mine input[name=inprmitnm]").val();""!=o&&($("#frm_inp .gift_msgMultiInsert input[name=receivename_1]").val(o+" 님"),$("#frm_inp input[name=receivename_"+b+"]").val(o+" 님"),$(".gift_msgMultiInsert #sendmessage_1").val(("N"==k?o:"")+c),$("#frm_inp textarea[name=sendmessage_"+b+"]").val(("N"==k?o:"")+c));var p=$("#deli_"+d+" #li_new input[name=inprmitnm]").val();""!=p&&($("#frm_inp .gift_msgMultiInsert input[name=receivename_1").val(p+" 님"),$("#frm_inp input[name=receivename_"+b+"]").val(p+" 님"),$(".gift_msgMultiInsert #sendmessage_1").val(("N"==k?p:"")+c),$("#frm_inp textarea[name=sendmessage_"+b+"]").val(("N"==k?p:"")+c)),$("#frm_inp .gift_msgMultiInsert input[name=sendname_1").val($("#nameSp").text()+"드림"),$("#frm_inp input[name=sendname_"+b+"]").val($("#nameSp").text()+"드림")}else{$("#frm_inp .gift_msgMultiInsert input[name=receivename_1").val(""),$("#frm_inp input[name=receivename_"+d+"]").val("");var p=$("#deli_"+d+" input[name=inprmitnm]").val(),q=$("#frm_inp input[name=grockle_name]").val();""!=p&&(p+=" 님",$("#frm_inp .gift_msgMultiInsert input[name=receivename_1").val(p),$("#frm_inp input[name=receivename_"+b+"]").val(p),$("#frm_inp .gift_msgMultiInsert textarea[name=sendmessage_1").val(("N"==k?p:"")+c),$("#frm_inp textarea[name=sendmessage_"+b+"]").val(("N"==k?p:"")+c)),""!=q&&($("#frm_inp .gift_msgMultiInsert input[name=sendname_1").val(q+"드림"),$("#frm_inp input[name=sendname_"+b+"]").val(q+"드림"))}$(".giftMs_"+b+" dd[name^=gift_msg_form_"+b+"]").show(),$("#gift_none_msg_"+b).hide()}}else{if($("#chk_multi_dlvp").prop("checked"))$("#frm_inp input[name=receivename_"+b+"]").val(""),$("#sendmessage_"+b).val(""),$("#frm_inp input[name=sendname_"+b+"]").val(""),$("dd[name^=gift_msg_form_"+b+"]").hide();else{$("#frm_inp .gift_msgMultiInsert input[name=gift_yn_1]:radio[value='1']").prop("checked",!1),$("#frm_inp .gift_msgMultiInsert input[name=gift_yn_1]:radio[value='2']").prop("checked",!0),$("#frm_inp .gift_msgMultiInsert input[name=receivename_1").val(""),$(".gift_msgMultiInsert #sendmessage_1").val(""),$("#frm_inp .gift_msgMultiInsert input[name=sendname_1").val("");for(var r=2;e>=r;r++)$("#frm_inp .gift_msg_sel_"+r+" input[name^=gift_yn_"+r+"]:radio[value='1']").prop("checked",!1),$("#frm_inp .gift_msg_sel_"+r+" input[name^=gift_yn_"+r+"]:radio[value='2']").prop("checked",!0),$("#gift_none_msg_"+r).hide(),$("dd[name^=gift_msg_form_"+r+"]").hide()}$("#gift_none_msg_"+b).hide()}chkSendMsgLimit("sendmessage_"+b,150,"sendmessagebyte_"+b)}),$("#info_agree_check").change(function(){$("#info_agree_check").prop("checked")?$("#ip_asianaNo").prop("disabled",!1):($("#ip_asianaNo").val(""),$("#ip_asianaNo").prop("disabled",!0))}),$("#ocb_agree").change(function(){$("#ocb_agree").prop("checked")?($("#ocb_card_no1").prop("disabled",!1),$("#ocb_card_no2").prop("disabled",!1),$("#ocb_card_no3").prop("disabled",!1),$("#ocb_card_no4").prop("disabled",!1)):($("#ocb_card_no1").val(""),$("#ocb_card_no2").val(""),$("#ocb_card_no3").val(""),$("#ocb_card_no4").val(""),$("#ocb_card_no1").prop("disabled",!0),$("#ocb_card_no2").prop("disabled",!0),$("#ocb_card_no3").prop("disabled",!0),$("#ocb_card_no4").prop("disabled",!0))}),$("#frm_inp select[name=iscmcd]").change(function(){("Y"==card_sale_yn||"Y"==claim_sale_yn)&&fn_cardsavegoods(),getCardInsCheck(),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY&&($("#SHINHAN_CARD_LAYER").hide(),$("input[name='sinhan_point'][type=radio][value=N]").click(),$("#BC_CARD_LAYER").hide(),$("input[name='bc_point'][type=radio][value=N]").click(),$("#SAMSUNG_CARD_LAYER").hide(),$("input[name='samsung_point'][type=radio][value=N]").click(),$("#KB_CARD_LAYER").hide(),$("input[name='kb_point'][type=radio][value=N]").click())}),$("#frm_inp input[name=rdo_cardinst]:radio").click(setcardinstmon),$("#frm_inp input[name=rdo_paytype]:radio").each(function(){$("#frm_inp input[name=paytype]:hidden").val()==$(this).val()&&($(this).attr("checked","checked"),$(this).prop("checked","checked"))}),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_CARD?(createCardType(),$("#pay_card").show()):$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_BANK?$("#pay_bank").show():$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_LPAY&&(lpayCertInfo(),$("#pay_card").show()),$("#frm_inp input[name=paytype]:hidden").val()==PAYTYPE_CODE_BANK&&$("#cash_receipts").show(),$("#max_dc").change(function(){$("#max_dc").prop("checked")?setMaxDc():($("#frm_inp select[name=coupon]").val("N"),$("#frm_inp select[name=coupon]").change())}),$("#max_dc").attr("checked",!0),$("#max_dc").prop("checked",!0),$("#max_dc").change(),$("#frm_inp input[name=third_coupon]:radio").length>0&&"27"!=$("#frm_send input[name=prommdclcd]").val()&&($("#frm_inp input[name=third_coupon]:radio:first").prop("checked",!0),$("#frm_inp input[name=third_coupon]:radio:first").click()),"Y"==$("#frm_send input[name=org_pay_mean_hist_use_yn]").val()){var h=!1,i=$("#frm_inp input[name=op_pay_mean_hist_pay_mean_cd]").val();if($("input[name=rdo_paytype]:radio").each(function(){$(this).val()==i&&(h=!0)}),h&&((i!=PAYTYPE_CODE_CARD||chkEmpty($("#frm_inp select[name=iscmcd]"))||$("#frm_inp select[name=iscmcd]").val()==$("#frm_inp input[name=op_pay_mean_hist_acqr_cd]").val()&&chkEmpty($("#frm_inp select[name=bankno]")))&&(i!=PAYTYPE_CODE_BANK||chkEmpty($("#frm_inp select[name=iscmcd]"))&&chkEmpty($("#frm_inp select[name=bankno]")))?i!=PAYTYPE_CODE_PHONE||chkEmpty($("#frm_inp select[name=iscmcd]"))&&chkEmpty($("#frm_inp select[name=bankno]"))||(h=!1):h=!1),!h)return;$("#frm_inp input[name=rdo_paytype]:radio[value='"+i+"']").prop("checked",!0),$("#frm_inp input[name=rdo_paytype]:radio[value='"+i+"']").trigger("click"),i==PAYTYPE_CODE_CARD?(selPayType(1),$("#frm_inp select[name=iscmcd] > option[value='"+$("#frm_inp input[name=op_pay_mean_hist_acqr_cd]").val()+"']").prop("selected",!0),$("#frm_inp select[name=iscmcd]").trigger("change"),""!=$("#frm_inp input[name=op_pay_mean_hist_card_pay_meth_cd]").val()&&$("#frm_inp input[name=card_confirm_type]:radio[value='"+$("#frm_inp input[name=op_pay_mean_hist_card_pay_meth_cd]").val()+"']").prop("checked",!0)):i==PAYTYPE_CODE_BANK?(selPayType(2),$("#frm_inp select[name=bankno] > option[value='"+$("#frm_inp input[name=op_pay_mean_hist_bnk_cd]").val()+"']").prop("selected",!0),$("#frm_inp select[name=bankno]").trigger("change"),$("#pay_card").hide(),setCellNo()):i==PAYTYPE_CODE_PHONE&&(selPayType(3),$("#pay_card").hide(),$("#pay_bank").hide())}"undefined"!=typeof lpayment&&lpayment.windowLoad()}),String.prototype.zf=function(a){return"0".string(a-this.length)+this},String.prototype.string=function(a){for(var b="",c=0;c++<a;)b+=this;return b},Number.prototype.zf=function(a){return this.toString().zf(a)},Date.prototype.format=function(a){if(!this.valueOf())return"&nbsp;";var b=this;return a.replace(/(yyyy|mm|dd|hh|nn|ss|a\/p)/gi,function(a){switch(a){case"yyyy":return b.getFullYear();case"mm":return(b.getMonth()+1).zf(2);case"dd":return b.getDate().zf(2);case"hh":return b.getHours().zf(2);case"nn":return b.getMinutes().zf(2);case"ss":return b.getSeconds().zf(2);case"a/p":return b.getHours()<12?"a":"p"}})},String.prototype.isNum=function(){var a=/^[0-9]+$/;return a.test(this)},String.prototype.trim=function(){return this.replace(/(^\s+)|(\s+$)/g,"")},String.prototype.bytes=function(){for(var a=this,b=0,c=0;c<a.length;c++)b+=a.charCodeAt(c)>128?2:1;return b},String.prototype.cut=function(a){for(var b=this,c=0,d=0;d<b.length;d++)if(c+=b.charCodeAt(d)>128?2:1,c>a)return b.substring(0,d);return b},String.prototype.money=function(){for(var a=this.trim();/(-?[0-9]+)([0-9]{3})/.test(a);)a=a.replace(/(-?[0-9]+)([0-9]{3})/,"$1,$2");return a},function(){var a=[];$.fn.jsLotteCounter=function(b,c,d){var e=$(this).attr("id");$(this).append('<div class="restDate"></div><div class="timer '+c+'"><div class="hours"><span>0</span><span>0</span></div><div class="min"><span>0</span><span>0</span></div><div class="sec"><span>0</span><span>0</span></div></div>'),$syear=serverTime.slice(0,4),$smon=serverTime.slice(4,6),$sday=serverTime.slice(6,8),$sdate=new Date(1*$syear,1*$smon-1,1*$sday,1*serverTime.slice(8,10),1*serverTime.slice(10,12),1*serverTime.slice(12,14)),$edate=new Date(1*b.slice(0,4),1*b.slice(4,6)-1,1*b.slice(6,8),1*b.slice(8,10),1*b.slice(10,12),1*b.slice(12,14)),$("#"+e+"> .restDate").html($edate-$sdate),changeTimer(e,$edate-$sdate),a.push({idObj:e,funcObj:d}),1==a.length&&startTimer()},startTimer=function(){var b=window.setInterval(function(){if(a.length>0){var c,d,e=0;for(e;e<a.length;e++)c=$("#"+a[e].idObj+"> .restDate"),d=c.html(),d-=1e3,c.html(d),d>=0?a[e].funcObj(a[e].idObj,d):a.splice(e--,1)}else clearInterval(b)},1e3)},changeTimer=function(a,b){var c=Math.floor(b/864e5),d=Math.floor((b-864e5*c)/36e5),e=Math.floor((b-(864e5*c+36e5*d))/6e4),f=(b-(864e5*c+36e5*d+6e4*e))/1e3,g=24*c+d,h=e,i=f;setSpanNumber($("#"+a+"> .timer > .hours > span:eq(0)"),setDigit(g).slice(0,1)),setSpanNumber($("#"+a+"> .timer > .hours > span:eq(1)"),setDigit(g).slice(1,2)),setSpanNumber($("#"+a+"> .timer > .min > span:eq(0)"),setDigit(h).slice(0,1)),setSpanNumber($("#"+a+"> .timer > .min > span:eq(1)"),setDigit(h).slice(1,2)),setSpanNumber($("#"+a+"> .timer > .sec > span:eq(0)"),setDigit(i).slice(0,1)),setSpanNumber($("#"+a+"> .timer > .sec > span:eq(1)"),setDigit(i).slice(1,2))},setDigit=function(a){return(a+"").length<2?"0"+a:a+""},setSpanNumber=function(a,b){a.html(b)}}();