!function(a,b,c){"use strict";var d=b.module("lotteUtil");d.service("StyleRecom",["$window","$http",function(a,b){function d(a){if(a==c)return[];if(a.status===!1)return console.warn(a.message),j(),[];if(a.list==c)return[];var b,d,f,g,h,i=a.list,k=[],l=[];for(d=i.length,b=0;d>b;b++){switch(f=i[b],g=f.category,f.ctgObj=g,f.category=g.code,h=0!=f.sub_category.code?q[f.sub_category.code]:q[f.category],h?(f.ctgName=h.name,f.genOnly=h.gender):(f.ctgName="",f.genOnly=""),f.gender.code){case 1073741824:f.genCd="M";break;case 536870912:f.genCd="F";break;case 1610612736:f.genCd="A";break;default:f.genCd=""}switch(f.score=Math.round(100*f.score),f.rx1=Math.round(1e4*f.rx1)/100,f.rx2=Math.round(1e4*f.rx2)/100,f.ry1=Math.round(1e4*f.ry1)/100,f.ry2=Math.round(1e4*f.ry2)/100,g.code){case 2:case 4:case 1024:f.cx=Math.round(f.rx1+.3*(f.rx2-f.rx1)),f.cy=Math.round(f.ry1+.3*(f.ry2-f.ry1));break;default:f.cx=Math.round(f.rx1+.5*(f.rx2-f.rx1)),f.cy=Math.round(f.ry1+.5*(f.ry2-f.ry1))}f.category==a.sortCate?k.push(f):l.push(f)}return k=k.sort(e),l=l.sort(e),k=k.concat(l)}function e(a,b){var c=a.score,d=b.score;return c>d?-1:d>c?1:0}function f(a){var b=[],c=0;for(c;c<a.length;c++)-1===b.indexOf(a[c])&&b.push(a[c]);return b}function g(a,d){var e=[],g=a.goodsNo;"v1"==k&&(a=a.list);for(var h in a)if(getScope().isValidArray(a[h])){e=a[h];break}if(e==c||0==e.length)return void d([]);for(var i,l=[],m=e.length,o=0;m>o;o++)i=e[o],g&&g==i.product_code||l.push(i.product_code);if(0==l.length)return void d([]);l=f(l);var p=n+"?goods_no="+l.join();"localhost:8082"==location.host&&(p="http://mo2.lotte.com/"+p),b({url:p,method:"GET"}).success(function(a){if(a.prdList!=c){for(var b,e=[],f=a.prdList.length,g=0;f>g;g++)b=a.prdList[g],b.imgUrl2||(b.imgUrl2=b.imgUrl.replace(/_280/g,"_550")),b!=c&&0!=b.price2&&e.push(b);d(e)}else d([])}).error(function(a){j(),d([])})}function h(a,b){try{var c=0;switch(a){case"F":c=536870912;break;case"M":c=1073741824}return c+b}catch(d){}return""}function i(a){var c=getScope(),d="/json/search/m/insertStyleRecoLogInfo.json?call_api="+a.type+"&isApiResult="+a.result+"&isApp="+c.appObj.isApp+"&call_type="+a.screen+"&goods_no="+a.goodsNo;b({url:d,method:"GET"})}function j(){var a=getScope(),b=new Date,c=b.getHours(),d=10>c?"0"+c:""+c,e=a.tClickBase;""!=p&&(e=p),a.sendTclick(e+"ProdDetail_DataError_"+d)}var k="v1",l="LOTT5afb4ffde7d5521fbe52a00cb8191e9dc77d2b0eae5ead382c2d99f9",m="https://dl-api.oddconcepts.kr/"+k+"/",n="/json/search/m/styleRecommProdList.json",o="/json/search/m/styleRecommCateGrpList.json",p="";this.setDotAPIUrl=function(a){},this.setTclickBase=function(a){p=a},this.setSearchItemLimit=function(a){};var q={8:{gender:"F",name:"스커트"},252:{gender:"F",name:"롱스커트"},253:{gender:"F",name:"미디스커트"},254:{gender:"F",name:"미니스커트"},32:{gender:"",name:"아우터"},232:{gender:"",name:"가디건"},233:{gender:"",name:"점퍼"},234:{gender:"",name:"코트"},235:{gender:"",name:"자켓"},236:{gender:"",name:"조끼"},1:{gender:"F",name:"원피스"},4:{gender:"",name:"반바지"},16:{gender:"",name:"상의"},242:{gender:"",name:"셔츠"},243:{gender:"F",name:"뷔스티에"},239:{gender:"",name:"후드"},241:{gender:"F",name:"블라우스"},240:{gender:"",name:"니트"},237:{gender:"",name:"티셔츠"},238:{gender:"",name:"맨투맨"},2:{gender:"",name:"바지"},249:{gender:"",name:"긴바지"},250:{gender:"",name:"7부 바지"},512:{gender:"",name:"수영복상의"},247:{gender:"F",name:"비키니상의"},248:{gender:"",name:"래쉬가드"},1024:{gender:"",name:"수영복하의"},258:{gender:"F",name:"비키니하의"},259:{gender:"M",name:"삼각수영복"},260:{gender:"M",name:"사각수영복"},2048:{gender:"",name:"원피스수영복"},265:{gender:"F",name:"원피스수영복"},266:{gender:"F",name:"모노키니"},267:{gender:"",name:"전신수영복"},2097152:{gender:"",name:"부츠"},274:{gender:"M",name:"부츠"},268:{gender:"F",name:"부티"},269:{gender:"F",name:"앵클부츠"},270:{gender:"",name:"워커"},271:{gender:"F",name:"롱부츠"},272:{gender:"F",name:"하프부츠"},273:{gender:"",name:"레인부츠"},4194304:{gender:"F",name:"구두"},275:{gender:"F",name:"펌프스"},276:{gender:"F",name:"스틸레토힐"},277:{gender:"F",name:"웨지힐"},278:{gender:"F",name:"토오픈힐"},279:{gender:"F",name:"슬링백"},280:{gender:"F",name:"스트랩힐"},8388608:{gender:"",name:"로퍼"},281:{gender:"F",name:"플랫슈즈"},282:{gender:"",name:"로퍼"},283:{gender:"F",name:"블로퍼"},284:{gender:"F",name:"옥스퍼드화"},296:{gender:"M",name:"정장화"},297:{gender:"M",name:"보트슈즈"},16777216:{gender:"",name:"샌들"},298:{gender:"",name:"샌들"},285:{gender:"F",name:"플랫샌들"},286:{gender:"F",name:"플랫폼샌들"},287:{gender:"F",name:"웨지샌들"},288:{gender:"F",name:"글래디에이터"},289:{gender:"F",name:"스트랩샌들"},290:{gender:"",name:"슬리퍼"},291:{gender:"",name:"쪼리"},292:{gender:"F",name:"뮬"},33554432:{gender:"",name:"스니커즈"},293:{gender:"",name:"하이탑"},294:{gender:"",name:"스니커즈"},295:{gender:"",name:"슬립온"},67108864:{gender:"",name:"운동화"},299:{gender:"",name:"등산화"},4096:{gender:"",name:"토트백"},8192:{gender:"",name:"숄더백"},65536:{gender:"",name:"클러치"},131072:{gender:"F",name:"파우치"},16384:{gender:"",name:"백팩"},262144:{gender:"M",name:"서류가방"},1048576:{gender:"",name:"캐리어"},32768:{gender:"",name:"힙색"},524288:{gender:"",name:"스포츠가방"}};this.detect=function(a,b){if(a==c)return console.warn("NO DATA"),!1;if(a.image==c||""==a.image)return console.warn("NO IMAGE"),!1;if(b==c||"function"!=typeof b)return console.warn("NO CALLBACK FUNCTION"),!1;a.type="detect";var e=m+"detect?url="+encodeURIComponent(a.image);a.sendGoodsNo!==!1&&a.goodsNo&&(e+="&product_code="+a.goodsNo),$.ajax({url:e,type:"get",dataType:"json",async:!0,beforeSend:function(a){a.setRequestHeader("apikey",l)},success:function(c){a.sortCate&&(c.sortCate=a.sortCate),b(d(c)),a.result="success",i(a)},error:function(c){a.result="fail",i(a),j(),b([])}}),getScope().sendTclick("DC_StyleReco_Detect")},this.search=function(a,b){if(a.id==c||""==a.id)return console.warn("NO ID"),!1;if(a.sex==c||""==a.sex)return console.warn("NO SEX"),!1;if(a.cate==c)return console.warn("NO CATEGORY"),!1;if(b==c||"function"!=typeof b)return console.warn("NO CALLBACK FUNCTION"),!1;var d=h(a.sex,a.cate);if(""==d)return console.warn("INCORRECT CATEGORY"),!1;a.type="search";var e={id:a.id,category:d,count:300},f={recommcgcd:1};switch(a.sub_cate!=c&&0!=a.sub_cate&&(f.sub_category=a.sub_cate),a.sort){case"order_count":case"reg_date":case"review_count":case"price":e.order_by=a.sort,e.reverse=1;break;case"price2":e.order_by="price"}if(a.subcate!=c||""!=a.subcate){var k=parseInt(a.subcate,10);isNaN(k)||(f.recommcgcd=k)}var n=m+"search/"+a.id+"?"+$.param(e);$.ajax({url:n,type:"POST",data:JSON.stringify(f),dataType:"JSON",async:!0,method:"POST",beforeSend:function(a){a.setRequestHeader("apikey",l),a.setRequestHeader("Content-Type","application/json")},success:function(c){c.goodsNo=a.goodsNo,g(c,b),a.result="success",i(a)},error:function(c){a.result="fail",i(a),j(),b([])}}),getScope().sendTclick("DC_StyleReco_Search")},this.cateList=function(a){$.ajax({url:o,type:"get",dataType:"json",async:!0,success:function(b){a(b.cateGrpList||[])},error:function(b){a([])}})},this.determineSex=function(a,b,c,d){var e=/^F$|^M$/,f=a.genCd;return f=e.test(a.genOnly)?a.genOnly:e.test(b)?b:"5"==c?a.genCd:e.test(a.genCd)?a.genCd:e.test(d)?d:"A"}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("voiceCommerceService",["lotteUrl","lotteUtil"]);d.service("VCBasicInfo",["$http","$q","LotteCommon","LotteStorage",function(a,b,c,d){function e(){g.semanticHistory=[];var a=d.getLocalStorage(h,"json");if(a&&a.length>0){var b=0;for(b=0;b<a.length;b++)a[b].keyword&&a[b].date&&g.semanticHistory.push({keyword:a[b].keyword,date:a[b].date})}}function f(){var a=d.getLocalStorage(i);a?g.lastInputMode=a:g.lastInputMode=""}var g=this,h="vsSemanticKeywordHome";g.semanticHistory=[];var i="vsInputType";g.lastInputMode="",g.initBasicInfo=function(){return g.basicInfo={member_info:{prior_info_chk:!1,base_op_pay_chk:!1,et_mbr_dlvp_chk:!1,card_pay_meth_cd:"",caer_pay_meth_nm:"",bnk_cd:"",pay_mean_cd:"",pay_mean_nm:"",acqr_cd:"",pay_nm:"",dlvp_nm:"",post_no:"",post_addr:"",dtl_addr:"",rmit_nm:"",cell_txno_no:"",cell_sct_no:"",cell_end_no:"",morc_man_nm:"",cbl_tel_rgn_no:"",cbl_tel_txno_no:"",cbl_tel_end_no:"",addr_choc_sct_cd:"",member_no:"",pr_dlvp_chane_chk:"",onlCno:"",pay_card_rcgn_id:""},greeting_info:{user_nm:"",greeting_img_url:"",greeting_txt:""},samada_list:{items:[{list_cate:"",list_cate_bg:"",conts_list:{items:[],total_count:0}}],total_count:0},my_pet_info:{bbc_no:"",bbc_nm:"",worry_yn:"",bbc_cnt:""}},g.basicInfo},g.initBasicInfo(),g.getBasicInfo=function(d){var e=b.defer(),f={};return d&&(f.mbr_no=d),a({url:c.vcInfoData,method:"get",params:f}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;b?(g.basicInfo=b,e.resolve(g.basicInfo)):e.reject(g.basicInfo)}else console.error("보이스 커머스 기본 정보 로드 오류"),g.basicInfo=g.initBasicInfo(),e.reject(g.basicInfo)},function(a){console.error("보이스 커머스 기본 정보 로드 실패"),g.basicInfo=g.initBasicInfo(),e.reject(g.basicInfo)}),e.promise},g.getEvtTxt=function(){var d=b.defer();return a({url:c.vcHelpInfoData,method:"get",params:{conr_no:"75355"}}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;b&&b.help_info_list&&b.help_info_list[0]&&b.help_info_list[0].banner_nm?d.resolve(b.help_info_list[0].banner_nm):d.reject([])}else console.error("햄버거옆 이벤트 정보 데이터 오류"),d.reject([])},function(a){console.error("햄버거옆 이벤트 정보 데이터 오류"),d.reject([])}),d.promise},g.getBgDeco=function(){var d=b.defer();return a({url:c.vcHelpInfoData,method:"get",params:{conr_no:"75059"}}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;b&&b.help_info_list&&b.help_info_list[0]&&b.help_info_list[0].img_url?d.resolve(b.help_info_list[0].img_url):d.reject("")}else d.reject("")},function(a){d.reject("")}),d.promise},e(),g.getSemanticeHistory=function(){return g.semanticHistory};var j=10;g.saveSemanticHistory=function(a){var b=new Date;if(g.semanticHistory){for(var c=g.semanticHistory.length,e=0;c>e;e++)if(a==g.semanticHistory[e].keyword){g.semanticHistory.splice(e,1);break}g.semanticHistory.unshift({keyword:a,date:b.getTime()}),g.semanticHistory.length>j&&(g.semanticHistory=g.semanticHistory.slice(0,j))}else g.semanticHistory=[{keyword:a,date:b.getTime()}];d.setLocalStorage(h,g.semanticHistory,"json")},f(),g.getInputMode=function(){return g.lastInputMode},g.saveInputMode=function(a){("mic"==a||"keyboard"==a)&&d.setLocalStorage(i,a)}}]),d.service("VCStartVoiceInfo",["$http","$q","LotteCommon","$window",function(a,c,d,e){var f=this;f.voiceInfo=[],f.getVoiceInfo=function(){var b=c.defer();return a({url:d.vcStartVoiceInfoData,method:"get"}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var c=a.data.data?a.data.data:null;c&&c.guide_list&&c.guide_list.items?(f.voiceInfo=c.guide_list.items,b.resolve(f.getRandomPick(f.voiceInfo))):b.reject(f.voiceInfo)}else console.error("보이스 커머스 기본 발화 정보 로드 오류"),b.reject(f.voiceInfo)},function(a){console.error("보이스 커머스 기본 발화 정보 로드 실패"),b.reject(f.voiceInfo)}),b.promise},f.getRandomPick=function(a){var c=[],d=b.copy(a);b.forEach(d,function(a,b){"BEST"==a.guide_type&&c.push(a)});for(var e=Math.round(Math.random()*(c.length-1)),f=!1,g=-1,h=-1,i=0;i<d.length;i++)"BEST"==d[i].guide_type&&(0==f?(f=!0,g=i):h=i);return d.splice(g,h-g+1),d.splice(g,0,c[e]),d}}]),d.service("VCHelpInfo",["$http","$q","LotteCommon","LotteStorage",function(a,b,c,d){var e=this;e.helpInfo={home:{conrNo:"",list:[{banner_nm:"여기를 터치해 말해보세요"}]},prod_list:{conrNo:"74755",list:[]},prod_detail:{conrNo:"74756",list:[]},order:{conrNo:"74757",list:[]},cart:{conrNo:"74758",list:[]},wish:{conrNo:"74759",list:[]},best_recommendation:{conrNo:"74755",list:[]},other_customers_item_recommendation:{conrNo:"74755",list:[]},purchase_frequently:{conrNo:"76955",list:[]},mimitoutou_recommendation:{conrNo:"74755",list:[]},my_recommendation:{conrNo:"74755",list:[]},point:{conrNo:"77258",list:[]},recently_viewed_item:{conrNo:"76956",list:[]},situation_recommendation:{conrNo:"74760",list:[]},situation_recommendationList:{conrNo:"74755",list:[]},management_item_recommendation:{conrNo:"74760",list:[]},management_item_recommendationList:{conrNo:"74755",list:[]},style_recommendation:{conrNo:"77255",list:[]},order_inquiry:{conrNo:"77256",list:[]},coupon:{conrNo:"77257",list:[]},purchase_gift:{conrNo:"77259",list:[]},purchase_gift_my:{conrNo:"78755",list:[]},purchase_giftNo:{conrNo:"78756",list:[]},event:{conrNo:"77260",list:[]},event_application_details:{conrNo:"77262",list:[]},billing_discount:{conrNo:"77263",list:[]},interest_free_installment:{conrNo:"77264",list:[]},customer_center:{conrNo:"77265",list:[]},favorite_brands:{conrNo:"74755",list:[]},secret_event:{conrNo:"78155",list:[]},etc:{conrNo:"74760",list:[]}},e.getHelpInfo=function(d){var f=b.defer();if(e.helpInfo[d]&&e.helpInfo[d].list&&e.helpInfo[d].list.length>0)f.resolve(e.helpInfo[d].list);else{e.helpInfo[d]||(d="etc");var g=e.helpInfo[d].conrNo?e.helpInfo[d].conrNo:"74760";a({url:c.vcHelpInfoData,method:"get",params:{conr_no:g}}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;b&&b.help_info_list?(e.helpInfo[d].list=b.help_info_list,f.resolve(e.helpInfo[d].list)):f.reject([])}else console.error("보이스 커머스 도움말 정보 로드 오류",d),f.reject([])},function(a){console.error("보이스 커머스 도움말 정보 로드 실패",d),f.reject([])})}return f.promise}}]),d.service("VCSendMsg",["$http","$q","LotteCommon","VCBasicInfo",function(a,c,d,e){var f=this;f.sendSemanticAnalysis=function(b,g){var h=c.defer(),i={screen:f.screenToHangul(b.screen),qType:"",text:b.text,mbrNo:b.mbrNo?b.mbrNo:null,preReqParam:b.preReqParam?b.preReqParam:null};switch(b.qType){case"mic":i.qType="V";break;case"keyboard":i.qType="I";break;case"click":i.qType="T";break;default:i.qType=""}return i.screen&&""!=i.screen&&""!=i.qType&&i.text&&""!=i.text?(a({url:d.semanticAnalysisData,method:"get",params:i}).then(function(a){if(!g){var c=a.data?a.data:null;a.data&&"00000"==a.data.responseCode?c?(("home"==b.screen||1==b.history)&&e.saveSemanticHistory(b.text),h.resolve(c)):(console.error("의미분석 실패"),h.reject()):"99999"==a.data.responseCode?(console.error("의미분석 실패",a.data.responseMsg),c&&h.resolve(c)):(console.error("의미분석 실패",a.data.responseMsg),h.reject())}},function(a){g||(console.error("의미분석 연동 실패"),h.reject())}),h.promise):(console.log("reject",i,b,i.screen),h.reject(),h.promise)},f.screenToHangul=function(a){var c,d={home:"홈",prod_list:"상품리스트",prod_detail:"상품상세",cart:"장바구니",wish:"위시리스트",order:"주문확정",order_complete:"주문완료",best_recommendation:"베스트추천",purchase_frequently:"자주구매",recently_viewed_item:"최근본상품",style_recommendation:"스타일추천",situation_recommendation:"상황추천",management_item_recommendation:"관리아이템추천",order_inquiry:"주문조회",coupon:"쿠폰",secret_event:"비밀이벤트",point:"포인트",event:"이벤트",event_application_details:"이벤트응모내역",purchase_gift:"구매사은",billing_discount:"청구할인",interest_free_installment:"무이자할부",customer_center:"고객센터",mimitoutou_recommendation:"미미뚜뚜추천",my_recommendation:"마이추천",favorite_brands:"즐겨찾기브랜드",other_customers_item_recommendation:"다른고객들이함께본상품추천"};return b.forEach(d,function(b,d){a==d&&(c=b)}),c}}]),d.service("VCGetPrdInfo",["$http","$q","LotteCommon",function(a,b,c){var d=this;d.getPrdListInfo=function(d){var e=b.defer();return a({url:c.vcPrdInfoData,method:"get",params:d}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;if(b.prd_list&&b.prd_list.items){var c=b;e.resolve(c)}else e.resolve([])}else console.error("상품정보 로드 실패"),e.reject()},function(a){console.error("상품정보 로드 실패"),e.reject()}),e.promise}}]),d.service("VCGetPrdDetailInfo",["$http","$q","LotteCommon",function(a,b,c){var d=this;d.getProdImgInfo=function(d){var e=b.defer();return d||e.reject(),a({url:c.vcPrdImgListData,method:"get",params:{goods_no:d}}).then(function(a){var b=a.data?a.data:null;if(b&&b.data){var c=b.data&&b.data.imgList?b.data.imgList:[];e.resolve(c)}else console.error("상품이미지 리스트 로드 실패"),e.reject()},function(a){console.error("상품이미지 리스트 로드 실패"),e.reject()}),e.promise},d.getPrdDetailListInfo=function(d){var e=b.defer();return d||e.reject(),a({url:c.productProductView2017Data,method:"get",params:{goods_no:d}}).then(function(a){var b=a.data?a.data:null;if(b&&b.data){var c=b.data;e.resolve(c)}else console.error("상품상세정보 로드 실패"),e.reject()},function(a){console.error("상품상세정보 로드 실패"),e.reject()}),e.promise},d.getPrdDetailHtmlInfo=function(d){var e=b.defer();return d||e.reject(),a({url:c.productDetailData,method:"get",params:{goods_no:d}}).then(function(a){var b=a.data;if(b.max){var c=b;e.resolve(c)}else console.error("상품상세 Html 정보 로드 실패"),e.reject()},function(a){console.error("상품상세 Html 정보 로드 실패"),e.reject()}),e.promise}}]),d.service("VCGetProdComment",["$http","$q","LotteCommon",function(a,b,c){var d=this;d.getProdComment=function(d,e){var f=b.defer();return d||f.reject(),a({url:c.vcProductCommentData,method:"get",params:{all_view_yn:"Y",goods_no:d,page:e,sort:"L"}}).then(function(a){var b=a.data?a.data:null;if(b&&b.data){var c=b.data;f.resolve(c)}else console.error("상품평정보 로드 실패"),f.reject()},function(a){console.error("상품평정보 로드 실패"),f.reject()}),f.promise}}]),d.service("VCGetPrdOption",["$http","$q","LotteCommon",function(a,b,c){function d(a){var b=[],c=0;for(c=0;c<a.length;c++)a[c].invQty>0&&!a[c].optStkYn&&b.push(a[c]);return b}var e=this;e.prdOptInfo={goodsNo:null,optInfo:null},e.getPrdOptInfo=function(f){var g=b.defer();return f?e.prdOptInfo.goodsNo==f&&e.prdOptInfo.optInfo?g.resolve(e.prdOptInfo.optInfo):a({url:c.vcPrdOptInfoData,method:"get",params:{goods_no:f}}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data;if(b.data){var c=b.data;if(c.optDtlList&&c.optDtlList.items&&c.optDtlList.items.length>0){var h=d(c.optDtlList.items);h&&h.length>0?(e.prdOptInfo={goodsNo:f,optInfo:{optSelectList:c.optSelectList.items,optItems:h}},g.resolve(e.prdOptInfo.optInfo)):g.resolve(null)}else g.resolve(null)}else console.error("상품 옵션 정보 로드 실패"),g.reject()}else console.error("상품 옵션 정보 로드 실패"),g.reject()},function(a){console.error("상품 옵션 정보 로드 실패"),g.reject()}):g.reject(),g.promise}}]),d.service("VCGetPrdQty",["$http","$q","LotteCommon",function(a,b,c){var d=this;d.chkProdQty=function(d,e){var f=b.defer(),g={};return d?(g.goods_no=d,e&&(g.item_no=e),a({url:c.vcPrdQtyChkData,method:"get",params:g}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;b&&"S"==b.inv_stat_cd?f.resolve(b):(console.error("재고 없음"),f.reject(b))}else console.error("재고 체크 확인 실패"),f.reject()},function(a){console.error("재고 체크 확인 실패"),f.reject()})):f.reject(),f.promise}}]),d.service("VCGetOrderDecide",["$http","$q","LotteCommon","LotteAppChk","commInitData","LotteCookie",function(a,c,d,e,f,g){var h=this;h.getOrderDecide=function(h){var i=c.defer(),j={member_no:"",goods_no:"",goods_cmps_cd:"",site_no:1,uagent:e.appObj.isAndroid?"Y":"N",cp_schema:f.query.schema,cp_v:f.query.v,cp_udid:f.query.udid,chl_no:g.getCookie("CHLNO"),chl_dtl_no:g.getCookie("CHLDTLNO"),infw_disp_no:"5607666",infw_disp_no_sct_cd:"18"};return h&&(j=b.extend(j,h)),j.goods_no?a({url:d.vcPrdOrderDecideData,method:"get",params:j}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;b?i.resolve(b):(console.error("주문확정 정보 확인 실패"),i.reject(b))}else console.error("주문확정 정보 확인 실패"),i.reject(a.data.result.response_msg)},function(a){console.error("주문확정 정보 확인 실패"),i.reject(null)}):i.reject(),i.promise}}]),d.service("VCOrder",["LotteCommon","$window","LotteUtil",function(a,d,e){function f(){if(d.lpay)try{d.lpay.merchantAuth({mchtAuthKey:m,onlCno:n,callback:g})}catch(a){console.log("error",1),q(!1)}else console.log("error",2),q(!1)}function g(a){a==c||"S"!=a.resClac?(console.log("error",3,a),q(!1)):(console.log("error",4),q(!0))}function h(a){if(a==c||"S"!=a.resClac)console.error("Lpay 결제 수단 확인 실패"),r(!1);else{var d={fnCoNm:"",pmtMthdAlias:""};b.forEach(a.pmtMthdList,function(a,b){a.pmtMthdId==o&&(d.fnCoNm=a.fnCoNm,d.pmtMthdAlias=a.pmtMthdAlias)}),r((d.pmtMthdAlias+"").length>0?d:!1)}}var i=this,j="https://web.lpay.com:1452",k="e30f88c2c39f2a82af5d08f4691ba6b6",l="6000002",m="00076790",n=null,o=null,p=a.talkShopOrderFrame,q=function(){},r=function(){};i.initLpay=function(){d.lpay=new Lpay({name:"lpay",url:j,merchantSignKey:k,reqTypeCd:l,style:"1",openMode:"0",closeCallback:function(){console.warn("lpay close")},__iframe:{},popupReturnUrl:""})},i.authLpayMerchant=function(a,b){n=a,b&&(q=b),f()},i.getLpayPaymentInfo=function(a,b){if(b&&(r=b),!a)return r(!1),!1;if(o=a,d.lpay)try{d.lpay.getPaymentMethod({onlCno:n,callback:h})}catch(c){r(!1)}else r(!1)},i.getOrderUrl=function(a,b){var c="";return a&&b&&(c=p+"?talkYN=Y&vc=Y&cart_sn="+a+"&goods_no="+b+"&"+e.getBaseParam()),c}}]),d.service("VCOrderComplete",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.getOrderComplete=function(e){var f=c.defer(),g={member_no:"",ord_no:""};return e&&(g=b.extend(g,e)),g.ord_no&&g.member_no?a({url:d.vcOrdCompleteData,method:"get",params:g}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;b?f.resolve(b):(console.error("주문완료 정보 확인 실패"),f.reject(b))}else console.error("주문완료 정보 확인 실패"),f.reject()},function(a){console.error("주문완료 정보 확인 실패"),f.reject()}):f.reject(),f.promise}}]),d.service("VCAddCart",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.addCart=function(e){var f=c.defer(),g={member_no:null,goods_no:null,item_no:null,ord_qty:1,goods_cmps_cd:null,voice:"Y",infw_disp_no:"5607666",infw_disp_no_sct_cd:"18",cart_page_yn:"N"};return e&&(g=b.extend(g,e)),g.goods_no&&(g.item_no||0===g.item_no)&&g.ord_qty&&g.goods_cmps_cd?a({url:d.vcAddCart,method:"get",params:g}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.result?a.data.result:null;f.resolve(b)}else console.error("장바구니 담기 실패"),f.reject(a.data.result)},function(a){console.error("장바구니 담기 연동 실패"),f.reject(a)}):f.reject(),f.promise}}]),d.service("VCUpdateCart",["$http","$q","LotteCommon",function(a,b,c){var d=this;d.updateCart=function(d){var e=b.defer(),f={cart_sn:d.cart_sn,ord_qty:d.ord_qty,item_no:d.item_no,update_ck:d.update_ck?!0:!1,goods_no:d.goods_no,goods_cmps_cd:d.goods_cmps_cd};return f.cart_sn&&f.ord_qty&&(f.item_no||0===f.item_no)&&f.goods_no&&f.goods_cmps_cd?a({url:c.cartUpdateOptionData,method:"post",params:f}).then(function(a){e.resolve(a)},function(a){console.error("장바구니 업데이트 연동 실패"),e.reject()}):e.reject(),e.promise}}]),d.service("VCAddWish",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.addWish=function(e){var f=c.defer(),g={member_no:null,goods_no:null};return e&&(g=b.extend(g,e)),g.goods_no&&g.member_no?a({url:d.vcAddWish,method:"get",params:g}).then(function(a){a.data.result&&"00000"==a.data.result.response_code?f.resolve(a.data.result.response_code):a.data.result&&"00001"==a.data.result.response_code?f.resolve(a.data.result.response_code):(console.error("위시 담기 오류"),f.reject())},function(a){console.error("위시 담기 연동 실패"),f.reject()}):f.reject(),f.promise}}]),d.service("VCDeliveryInfo",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.getDeliveryInfo=function(e){var f=c.defer(),g={goods_no:null};return e&&(g=b.extend(g,e)),g.goods_no?a({url:d.vcDeliveryInfoData,method:"get",params:g}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b=a.data.data?a.data.data:null;b?f.resolve(b):(console.error("배송 정보 확인 오류"),f.reject())}else console.error("배송 정보 확인 오류"),f.reject()},function(a){console.error("배송 정보 확인 연동 실패"),f.reject()}):f.reject(),f.promise}}]),d.service("VCHotKeywordInfo",["$http","$q","LotteCommon",function(a,b,c){var d=this;d.getHotKeyword=function(){var d=b.defer();return a({url:c.srhBestData,method:"get"}).then(function(a){a.data.searchPopList&&a.data.searchPopList.result_best&&a.data.searchPopList.result_best.items&&a.data.searchPopList.result_best.items.length>0?d.resolve(a.data.searchPopList.result_best.items):(console.error("인기검색어 데이터 오류"),d.reject())},function(a){console.error("인기검색어 연동 실패"),d.reject()}),d.promise}}]),d.service("VCCouponInfo",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.getCouponList=function(e){var f=c.defer(),g={};return e&&(g=b.extend(g,e)),a({url:d.vcCoupon,method:"get",params:g}).then(function(a){a.data.data?f.resolve(a.data.data):(console.error("쿠폰 기본 정보 로드 오류"),f.reject())},function(a){console.error("쿠폰 연동 실패"),f.reject()}),f.promise}}]),d.service("VCPointCloverInfo",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.getPointCloverList=function(e){var f=c.defer(),g={};return e&&(g=b.extend(g,e)),a({url:d.pointInfoData,method:"get",params:g}).then(function(a){var b={item:[{name:"L.point",pointType:"lpoint",pointcount:a.data.max.lt_point},{name:"L-money",pointType:"lmoney",pointcount:a.data.max.l_point},{name:"보관금",pointType:"deposit",pointcount:a.data.max.deposit},{name:"클로버",pointType:"clover",pointcount:a.data.max.clover_cnt}]};b.item?(f.resolve(b.item),console.log(b.item)):(console.error("포인트 기본 정보 로드 오류"),f.reject())},function(a){console.error("포인트 연동 실패"),f.reject()}),f.promise}}]),d.service("VCMyRecommend",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.getMyRecommendList=function(e){var f=c.defer(),g={};return e&&(g=b.extend(g,e)),g.size=100,g.url=d.rec_good+"&size="+g.size+"&iids="+g.iids+"&_reco=M_detail_voice&callback=JSON_CALLBACK",a.jsonp(g.url).success(function(a){console.log(a),f.resolve(a.results)}).error(function(a){f.reject()}),f.promise}}]),d.service("VCOthersHaveSee",["$http","$q","LotteCommon","LotteCookie",function(a,c,d,e){var f=this;f.getOthersHaveList=function(f){var g=c.defer(),h={};f&&(h=b.extend(h,f)),h.size=40;var i,j=e.getCookie("_ga").charAt(e.getCookie("_ga").length-1),i=d.rec_good+"&size="+h.size+"&iids="+h.iids+"&_reco=M_detail_voice_recent";return j%2==0&&(i=d.salebestlist_url_ds+"?format=jsonp&size="+h.size+"&iids="+h.iids),h.url=i+"&callback=JSON_CALLBACK",a.jsonp(h.url).success(function(a){g.resolve(a.results)}).error(function(a){g.reject()}),g.promise}}]),d.service("VCCounselorInfo",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.getCounselorList=function(e){var f=c.defer(),g={};return e&&(g=b.extend(g,e)),a({url:d.counselorList,method:"get",params:g}).then(function(a){a.data?f.resolve(a.data):(console.error("고객센터 기본 정보 로드 오류"),f.reject())},function(a){console.error("고객센터 연동 실패"),console.log(a),f.reject()}),f.promise}}]),d.service("VCSaunInfo",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.SAUN_CARD_DATA=null,e.getSaunList=function(e){var f=c.defer(),g={};return e&&(g=b.extend(g,e)),a({url:d.eventSaunListData,method:"get",params:g}).then(function(a){if(a.data.saunList){var b;"mysaun_list"==e.listType?(b=a.data.saunList.mysaun_list.items,f.resolve(b)):"saun_list"==e.listType?(b=a.data.saunList.saun_list.items,f.resolve(b)):(b=a.data.saunList.saun_list.items,f.resolve(b))}else console.error("구매사은이벤트 기본 정보 로드 오류"),f.reject()},function(a){console.error("구매사은이벤트 연동 실패"),f.reject()}),f.promise},e.listSumMysaun=function(a){for(var b=[],c=0;c<a.length;c++)"003"==a[c].eventStatus&&(a[c].aleady="Y",b.push(a[c]));return b},e.registeSaunAll=function(e){var f=c.defer(),g={};return e&&(g=b.extend(g,e)),a({url:d.saunRegistAll,method:"get",params:g}).then(function(a){"00000"==a.data.result.response_code?f.resolve(a.data.data):(console.error("구매사은이벤트 전체 등록 로드 오류"),f.reject())},function(a){console.error("구매사은이벤트 전체 등록 연동 실패"),f.reject()}),f.promise},e.detailSaun=function(e){var f=c.defer(),g={};return e&&(g=b.extend(g,e)),a({url:d.eventSaunMainData,method:"get",params:g}).then(function(a){a.data.saun?f.resolve(a.data.saun):(console.error("구매사은 상세 로드 오류"),f.reject())},function(a){console.error("구매사은 상세 연동 실패"),f.reject()}),f.promise}}]),d.service("VCEventInfo",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.getEventList=function(e){var f=c.defer(),g={};return g.dispNo=5570119,e&&(g=b.extend(g,e)),a({url:d.mainContentData,method:"get",params:g}).then(function(a){if(a.data.moduleData){for(var b=[],c=0;c<a.data.moduleData.length;c++)if("M2059"==a.data.moduleData[c].moduleId){b=a.data.moduleData[c].items;break}f.resolve(b)}else console.error("이벤트 기본 정보 로드 오류"),f.reject()},function(a){console.error("이벤트 연동 실패"),f.reject()}),f.promise},e.getEventApplyList=function(e){var f=c.defer(),g={};return e&&(g=b.extend(g,e)),a({url:d.eventGumeData,method:"get",params:g}).then(function(a){a.data&&a.data.eventInfoList?f.resolve(a.data.eventInfoList):(console.error("이벤트 응모내역 로드 오류"),f.reject())},function(a){console.error("이벤트 응모내역 연동 실패"),f.reject()}),f.promise}}]),d.service("VCSaleInfo",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.SALE_CARD_DATA=null,e.getSaleList=function(f){var g=c.defer(),h={};return f&&(h=b.extend(h,f)),a({url:d.cardSaleListData,method:"get",params:h}).then(function(a){a.data.result&&"00000"==a.data.result.response_code?(g.resolve(a.data.data.cardList.items),e.SALE_CARD_DATA=a.data.data.cardList.items):(console.error("청구할인/무이자 기본 정보 로드 오류"),g.reject())},function(a){console.error("청구할인/무이자 연동 실패"),g.reject()}),g.promise},e.getCardList=function(a){var c=[];return b.forEach(e.SALE_CARD_DATA,function(b,c){a==b.acqrCd&&this.push(b)},c),c}}]),d.service("VCLocalLate",["$http","$q","LotteCommon","LotteStorage","commInitData",function(a,c,d,e,f){
var g=this,h="latelyGoods";g.setLateList=function(a){var c=a,d=e.getLocalStorage(h),f=[],g={},i="",j="";if(null!=d){f=d.split("|"),g.goods_no=[];for(var k=0;k<f.length;k++)g.goods_no.push(f[k]);g.goods_no.indexOf(c)<0&&g.goods_no.push(c),b.forEach(g,function(a,b){a.length>20&&a.splice(0,a.length-20),""!=i&&(i+="|"),i+=a.join("|")}),j=i,localStorage.setItem("latelyGoods",j)}else e.setLocalStorage(h,c)},g.getLateList=function(){var a=e.getLocalStorage(h);return a&&(a=a.replace(/\|/gi,",")),a}}]),d.service("VCPurchaseInfo",["$http","$q","LotteCommon",function(a,c,d){var e=this;e.getPurchaseList=function(f){var g=c.defer(),h={};return f&&(h=b.extend(h,f)),a({url:d.purchaseList,method:"get",params:h}).then(function(a){if(a.data.result&&"00000"==a.data.result.response_code){var b;"2"==h.vc_ord_search_gu?"OPT"==h.change_type?b=e.searchGuData(a.data.result.purchase_list,"opt_change_psb_yn"):"DLV"==h.change_type&&(b=e.searchGuData(a.data.result.purchase_list,"dlv_change_psb_yn")):b="3"==h.vc_ord_search_gu?e.searchGuData(a.data.result.purchase_list,"cancel_psb_yn"):"4"==h.vc_ord_search_gu?e.searchGuData(a.data.result.purchase_list,"exchange_psb_yn"):"5"==h.vc_ord_search_gu?e.searchGuData(a.data.result.purchase_list,"return_psb_yn"):a.data.result.purchase_list,g.resolve(b)}else console.error("주문내역 기본 정보 로드 오류"),g.reject()},function(a){console.error("주문내역 연동 실패"),g.reject()}),g.promise},e.searchGuData=function(a,c){var d=[];return b.forEach(a,function(a,b){"Y"==a[c]&&this.push(a)},d),d}}]),d.service("VCPageMove",["LotteCommon","LotteUtil","$window","$location","$timeout",function(c,d,e,f,g){var h=this,i=500,j={goLogin:{url:c.loginForm,needLogin:!1},goChangePayment:{url:c.talkShopPayment,param:{vc:"Y"},needLogin:!0},actionChangeDelivery:{url:c.talkShopDelevery,param:{vc:"Y"},needLogin:!0},goPurchaseList:{url:c.ordLstUrl,needLogin:!0},goCoupon:{url:c.myCouponUrl,param:{point_div:"coupon"},needLogin:!0},goPoint:{url:c.myCouponUrl,param:{point_div:"lt_point"},needLogin:!0},goWish:{url:c.wishLstUrl,needLogin:!0},goEvent:{url:c.eventGumeUrl,param:{search_div:"event"},needLogin:!0},goPurchaseGiftList:{url:c.eventSaunUrl,needLogin:!0},goTalkAdvice:{url:c.talkUrl,needLogin:!0},goCiritOut:{url:c.critViewUrl,needLogin:!0},goInqList:{url:c.mylotteReinquiryListUrl,needLogin:!0},goInquire:{url:c.cscenterAnswerUrl,needLogin:!0},goPresent:{url:c.presentListUrl,needLogin:!0},goExchange:{url:c.smartPickListUrl,needLogin:!0},goSmartPay:{url:c.smartpayUrl,needLogin:!0},goLmoney:{url:c.myCouponUrl,param:{point_div:"l_point"},needLogin:!0},goDeposit:{url:c.myCouponUrl,param:{point_div:"deposit"},needLogin:!0},goClover:{url:c.myCouponUrl,param:{point_div:"clover"},needLogin:!0},goCenterQue:{url:c.questionUrl,needLogin:!0},goFrequentlyPurchaseProduct:{url:c.oftenProdUrl,needLogin:!0},goMimitoutou:{url:c.mimiRegistUrl,needLogin:!0},goCenterTalk:{url:c.talkUrl,needLogin:!0},goCloverUseInfo:{url:c.cloverUrl,needLogin:!0},goMembership:{url:c.gdBenefitUrl,needLogin:!0},goMyLotte:{url:c.mylotteUrl,needLogin:!0},goCart:{url:c.cateLstUrl,needLogin:!1},goRecently:{url:c.lateProdUrl,needLogin:!1},goMallMimitoutou:{url:c.petMallMainUrl,needLogin:!1},goMallSpecialTasty:{url:c.specialMallUrl,param:{dispNo:"5558814"},needLogin:!1},goMallStyleshop:{url:c.styleShopMainUrl,param:{dispNo:"5550415"},needLogin:!1},goMallLottebrand:{url:c.specialMallUrl,param:{dispNo:"5553048"},needLogin:!1},goMallKshop:{url:c.specialMallUrl,param:{dispNo:"5535841"},needLogin:!1},goMallScalp:{url:c.specialMallUrl,param:{dispNo:"5569995"},needLogin:!1},goMallTVoutlet:{url:c.specialMallUrl,param:{dispNo:"5565610"},needLogin:!1},goMallBook:{url:c.bookshopUrl,needLogin:!1},goMallTenbyten:{url:c.tenbytenUrl,needLogin:!1},goMallVine:{url:c.vineUrl,needLogin:!1},goMain:{url:c.mainUrl,needLogin:!1},goMainBest:{url:c.mainUrl,param:{dispNo:"5572537"},needLogin:!1},goMainGift:{url:c.mainUrl,param:{dispNo:"5570117"},needLogin:!1},goMainEvent:{url:c.mainUrl,param:{dispNo:"5570119"},needLogin:!1},goDirectAttend:{url:c.directAttendUrl,needLogin:!1},goPurchaseGift:{url:c.eventSaunListUrl,needLogin:!1},goReceiptList:{url:c.receiptEvtUrl,needLogin:!1}};h.go=function(a,k){if(j[a]&&j[a].url){var l="";if(l=j[a].url+"?"+d.getBaseParam(),j[a].param&&b.forEach(j[a].param,function(a,b){l+="&"+b+"="+a}),j[a].needLogin&&!k)-1==(l+"").indexOf("http")&&(l=f.protocol()+"://"+f.host()+l),l=c.loginForm+"?"+d.getBaseParam()+"&targetUrl="+encodeURIComponent(l);else if("goLogin"==a)return void h.goLogin();g(function(){e.location.href=l},i)}},h.goLogin=function(a){var b=c.voiceCommerceUrl+"?"+d.getBaseParam();b+=a?"&lastCommand="+a:"&isLogin=Y",g(function(){e.location.href=c.loginForm+"?"+d.getBaseParam()+"&targetUrl="+encodeURIComponent(b)},i)},h.goPrdDetail=function(a){var b="5607666",f="17";if(a){var h=c.productviewUrl+"?"+d.getBaseParam()+"&goods_no="+a+"&curDispNo="+b+"&curDispNoSctCd="+f;g(function(){e.location.href=h},i)}},h.goMain=function(){var a=c.mainUrl+"?"+d.getBaseParam();g(function(){e.location.href=a},i)},h.goCart=function(){var a=c.cartLstUrl+"?"+d.getBaseParam();g(function(){e.location.href=a},i)},h.voiceUnableOrder=function(a){return a?void g(function(){e.location.href=c.orderFormUrl+"?"+d.getBaseParam()+"&cartSn="+a},i):!1},h.goSaunDetail=function(a){return a?void g(function(){e.location.href=c.eventSaunMain+"?"+d.getBaseParam()+"&evt_no="+a},i):!1},h.goEventDetail=function(b,c){return b?void(c?a.open(b):g(function(){e.location.href=b},i)):!1},h.goEventResult=function(a){return a?void g(function(){e.location.href=c.eventDetailUrl+"?"+d.getBaseParam()+"&evt_no="+a},i):!1},h.goPurchaseView=function(a){return a?void g(function(){e.location.href=c.purchaseViewUrl+"?"+d.getBaseParam()+"&orderNo="+a},i):!1},h.goStyleView=function(a,b,f,h,j){return a?void g(function(){e.location.href=c.styleRecomUrl+"?"+d.getBaseParam()+"&img="+a+"&cate="+b+"&sortCate="+f+"&prdGen="+h+"&goods_no="+j},i):!1}}]),d.service("VCAppApi",["LotteAppChk","$window","VCPageMove","$timeout","$interval",function(a,b,c,d,e){function f(c){a.appObj.isAndroid?b.location.href=c:(i.push(c),k||(k=e(g,j)))}function g(){if(!h.isEnable)return!1;if(i.length<=0&&k)e.cancel(k),k=null;else{var a=i.pop();b.location.href=a}}var h=this,i=[],j=200,k=null;h.isEnable=!1,a.appObj.isApp&&(a.appObj.isAndroid&&a.appObj.verNumber>400||a.appObj.isIOS&&a.appObj.verNumber>4e3)&&(h.isEnable=!0),h.styleAppChk=function(){return a.appObj.isApp&&(a.appObj.isAndroid&&a.appObj.verNumber>=418||a.appObj.isIOS&&a.appObj.verNumber>=4150)?!0:!1},h.getSilentMode=function(){return console.log("talkshop://getSilentMode",h.isEnable),h.isEnable?void f("talkshop://getSilentMode"):!1},h.activatedSpeaker=function(a){var b=a?"Y":"N";return console.log("talkshop://activatedSpeaker?sound="+b),h.isEnable?void f("talkshop://activatedSpeaker?sound="+b):!1},h.hideHeader=function(){return console.log("talkshop://hideHeader"),h.isEnable?void(a.appObj.isIOS&&f("talkshop://hideHeader")):!1},h.IOSCheckPermission=function(a){if(!h.isEnable||!a)return!1;var b=a;f("talkshop://queryPermission?action="+b)},h.exit=function(){if(console.log("talkshop://endTalk"),h.isEnable&&navigator.userAgent.indexOf("mlotte001")>-1)try{b.location.href="talkshop://endTalk"}catch(a){c.go("goMain")}else c.go("goMain")},h.startTTS=function(a){return console.log("talkshop://startTTS?text="+a),h.isEnable&&a?void f("talkshop://startTTS?text="+a):!1},h.stopTTS=function(){return console.log("talkshop://stopTTS"),h.isEnable?void f("talkshop://stopTTS"):!1},h.startSTT=function(a){l=!0;return console.log("talkshop://startSTT?sound="+a),h.isEnable?void f("talkshop://startSTT?sound="+a):!1},h.stopSTT=function(a){l=!1;return console.log("talkshop://stopSTT?sound="+a),h.isEnable?void f("talkshop://stopSTT?sound="+a):!1};var l=!1;h.isSilentModeCallbackFunc=function(){},h.setIsSilentModeCallback=function(a){"function"==typeof a&&(h.isSilentModeCallbackFunc=a)},h.BackKeyCallbackFunc=function(){},h.setBackKeyCallback=function(a){"function"==typeof a&&(h.BackKeyCallbackFunc=a)},h.TTSEndCallbackFunc=function(){},h.setTTSEndCallback=function(a){"function"==typeof a&&(h.TTSEndCallbackFunc=a)},h.STTTextCallbackFunc=function(){},h.setSTTTextCallback=function(a){"function"==typeof a&&(h.STTTextCallbackFunc=a)},h.STTTEndCallbackFunc=function(){},h.setSTTEndCallback=function(a){"function"==typeof a&&(h.STTTEndCallbackFunc=a)},h.VCPermisionCallbackFunc=function(){},h.setPermisionCallback=function(a){"function"==typeof a&&(h.VCPermisionCallbackFunc=a)},b.isSilentMode=function(a){console.log("[APP] isSilentMode",a),h.isSilentModeCallbackFunc(a)},b.backKeyClicked=function(){console.log("[APP] backKeyClicked"),h.BackKeyCallbackFunc()},b.ttsEndCallback=function(){console.log("[APP] ttsEndCallback"),h.TTSEndCallbackFunc()};var m=null,n="",o=600;b.setSTTText=function(a){n=a,h.STTTextCallbackFunc(n)},b.sttEndCallback=function(a){if(l){m&&d.cancel(m);var b=getScope();m=d(function(){console.log("[APP] sttEndCallback1",a,n),b.isValidString(n)?h.STTTEndCallbackFunc(n):b.isValidString(a)?h.STTTEndCallbackFunc(a):(console.log("마이크 업"),"mic"==b.pageUI.inputMode&&b.actionInput(null,"keepMic")),console.log("[APP] sttEndCallback2",a,n),n=""},o)}},b.VCPermisionCallback=function(a,b,c){h.VCPermisionCallbackFunc(a,b,c)}}]),d.service("VDShareApp",["LotteAppChk","$window",function(c,d){var e=this;e.shareDataSet=function(c){c||(c={});var d={goodsNo:c.goodsNo,goodsNm:c.goodsNm,shareUrl:location.protocol+"//"+location.hostname+"/product/m/product_view.do",noCdnUrl:"",shareImg:"http://image.lotte.com/lotte/mobile/common/share_img_common.jpg",urlParam:{},shareTitle:"[롯데닷컴 이거어때?]\n",kakaoTitle:"[롯데닷컴]"};return a.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,b,c){d.urlParam[b]=c}),b.isDefined(c.shareImg)&&(d.shareImg=c.shareImg),d.noCdnUrl=d.shareUrl+"?goods_no="+d.goodsNo+"&cn=123624",d},e.sendAppShare=function(a,b){var c=e.shareDataSet(a),d="";console.log("shareData",c);var f="2929723",g="2929720",h="2929722",i="2929725",j="2929721",k="2929719";switch(b){case"sms":d=c.noCdnUrl+"&cdn="+i;break;case"kakaotalk":d=c.noCdnUrl+"&cdn="+f;break;case"kakaostory":d=c.noCdnUrl+"&cdn="+h;break;case"facebook":d=c.noCdnUrl+"&cdn="+j;break;case"twitter":d=c.noCdnUrl+"&cdn="+g;break;case"url_copy":d=c.noCdnUrl+"&cdn="+k;break;case"url_copy_voice":d=c.noCdnUrl+"&cdn="+k}if("kakaotalk"!=b)var l={url:d,title:e.getShareTitle(c.shareTitle,c.goodsNm).replace(/#/gi,""),imageUrl:c.shareImg};else{var l={type:"default",title:c.kakaoTitle,imageUrl:c.shareImg,url:d,buttons:[{title:"바로가기",url:d}]};"kakaotalk"==b?l.desc=(c.goodsNm+"").replace(/#/gi,""):l.desc=e.getShareTitle(c.shareTitle,c.goodsNm).replace(/#/gi,"")}e.shareAppCall(b,l)},e.getShareTitle=function(a,b){var c=a+b;try{c=c.replace("[[","["),c=c.replace("]]","]")}catch(d){console.log("shareTitle replace err")}return c},e.shareAppCall=function(a,b){console.info(a),console.info(b),c.appObj.isAndroid?d.lotteshare.callAndroid("lotteshare://"+a+"/query?"+JSON.stringify(b)):c.appObj.isIOS&&(d.location="lotteshare://"+a+"/query?"+JSON.stringify(b))}}]),d.service("VCMsgData",["$filter",function(a){var c=this;c.getMsgData=function(a,b,c){return{txt:a,voice:b,position:c}},c.getMsgRepeatDiscountDataLogin=function(c,d,e,f,g){var h="";if(h+="지금 "+f+"님이 자주 사용하시는 ",1==c.length)h+=g?e+"로  "+a("number")(c[0].tgtAmt)+"원 이상 결제하시면 "+c[0].fvrVal+"퍼센트 청구할인 받으 실 수 있어요.":e+"로  "+a("number")(c[0].tgtAmt)+"원 이상 결제하시면 "+c[0].fvrVal+"% 청구할인 받으실 수 있어요.";else{for(var i=b.copy(c),j=-1,k=0;k<i.length;k++)i[k].acqrCd==d&&(j=k);var l;if(j>=0&&(l=i.splice(j,1),h+=g?e+"로  "+a("number")(l[0].tgtAmt)+"원 이상 결제하시면 "+l[0].fvrVal+"퍼센트.":e+"로  "+a("number")(l[0].tgtAmt)+"원 이상 결제하시면 "+l[0].fvrVal+"%,"),i.length>0){h+=" 그밖에 ";for(var m=0;m<i.length;m++)h+=g?i[m].acqrNm+"로  "+a("number")(i[m].tgtAmt)+"원 이상 결제하시면 "+i[m].fvrVal+"퍼센트":i[m].acqrNm+"로  "+a("number")(i[m].tgtAmt)+"원 이상 결제하시면 "+i[m].fvrVal+"%",m<i.length-1&&(h+=g?". ":", ")}h+=g?" 청구할인 받으 실 수 있어요. ":" 청구할인 받으실 수 있어요."}return h},c.getMsgRepeatDiscountData=function(b,c,d,e){var f="";c&&(f+=e?d+"는 청구할인을 진행하고 있지 않아요. ":d+"는 청구할인을 진행하고 있지 않아요.<br />"),f+="지금 ";for(var g=0;g<b.length;g++)f+=e?b[g].acqrNm+"로  "+a("number")(b[g].tgtAmt)+"원 이상 결제하시면 "+b[g].fvrVal+"퍼센트":b[g].acqrNm+"로  "+a("number")(b[g].tgtAmt)+"원 이상 결제하시면 "+b[g].fvrVal+"%",b.length>1&&g!=b.length-1&&(f+=e?" . ":" , ");return f+=e?" 청구할인 받으 실 수 있어요.":" 청구할인 받으실 수 있어요."},c.getMsgRepeatSaleDataSearch=function(b,c,d,e,f){var g="";c&&(g+=e+"는 무이자할부를 진행하고 있지 않습니다. "),d||(g+=f?"현재 무이자할부 진행중인 카드는. ":"현재 무이자할부 진행중인 카드는 ");for(var h=0;h<b.length;h++)c||1==b.length&&(g+=b[h].acqrNm+"는 "+a("number")(b[h].minAmt)+"원 이상 최대 "+b[h].minMm+"개월, "+a("number")(b[h].maxAmt)+"원 이상 최대 "+b[h].maxMm+"개월 무이자할부 진행 중"),d||(g+=b[h].acqrNm),h<b.length-1&&1!=b.length&&(g+=f?". ":", ");return g+="입니다."},c.getMsgRepeatSaleData=function(a){var b="";return b+="현재 무이자할부 진행중인 카드에요"},c.getMsgRepeatPoint=function(b){for(var c="",d=[],e=0;e<b.length;e++)"0"!=b[e].pointcount&&0!=b[e].pointcount&&d.push(e);for(var e=0;e<b.length;e++)("0"!=b[e].pointcount||0!=b[e].pointcount)&&(c+="L.point"==b[e].name?"엘포인트 "+a("number")(b[e].pointcount):"L-money"==b[e].name?"엘머니 "+a("number")(b[e].pointcount):b[e].name+" "+a("number")(b[e].pointcount),b.length-1!=e&&(c+=", ")),d.length>1?b.length-1==e&&"clover"==b[e].pointType&&"0"!=b[e].pointcount&&0!=b[e].pointcount?c+="개를":b.length-1==e&&"clover"!=b[e].pointType&&"0"!=b[e].pointcount&&0!=b[e].pointcount&&(c+="점을"):1==d.length&&("clover"==b[e].pointType&&"0"!=b[e].pointcount?c+="개를":"clover"!=b[e].pointType&&"0"!=b[e].pointcount&&(c+="점을"));return c+=" 가지고 있어요.",1==d.length&&(c=c.replace(", ","")),c},c.msg={unknown:{txt:"아직 제가 할 수 없는 일이에요.",voice:"아직 제가 할쑤 없는 일이에요.",position:"q"},nowLogin:{txt:"이미 로그인하셨습니다.",voice:"이미 로그인하셨습니다.",position:"q"},needLogin:{txt:"로그인이 필요해요.",voice:"로그인이 필요해요.",position:"voice"},needLoginYesNo:{txt:"로그인이 필요해요~ 로그인 하시겠어요?",voice:"로그인이 필요해요~ 로그인 하시겠어요?",position:"q"},bestKeyword:{txt:"인기있는 {} 추천해드려요.",voice:"인기있는 {} 추천해드려요.",position:"top"},prdDataEmpty:{txt:"어쩌죠? 원하시는 상품이 없어요..<br />아래 인기 키워드를 말해보는건 어떠세요?​",voice:"어쩌죠? 원하시는 상품이 없어요.. 아래 인기 키워드를 말해보는건 어떠세요?​",position:"top"},isHome:{txt:"첫 화면이에요.",voice:"첫 화면이에요.",position:"q"},homeMore:{txt:"무엇을 더 보여드릴까요?",voice:"무엇을 더 보여드릴까요?",position:"q"},prdListEnd:{txt:"지금 보시는 상품이 마지막이에요~",voice:"지금 보시는 상품이 마지막이에요~",position:"voice"},prdListEndList:{txt:"여기가 마지막이에요~",voice:"여기가 마지막이에요~",position:"voice"},prdStyleListEnd:{txt:"직접 터치해주세요!",voice:"직접 터치해주세요!",position:"voice"},notVoiceOrder:{txt:"죄송해요. 직접 터치해서 주문해주세요.",voice:"죄송해요. 직접 터치해서 주문해주세요.",position:"voice"},notMobileOrder:{txt:"죄송해요, PC에서 주문해주세요~",voice:"죄송해요, PC에서 주문해주세요~",position:"voice"},notVoiceWish:{txt:"죄송해요. 직접 터치해서 위시리스트에 담아주세요.",voice:"죄송해요. 직접 터치해서 위시리스트에 담아주세요.",position:"voice"},notVoiceCart:{txt:"죄송해요. 터치해서 찜해주세요.",voice:"죄송해요. 터치해서 찜해주세요.",position:"voice"},notSimpleMemberCartWish:{txt:"죄송해요. 엘포인트 통합회원만 구매 가능해요.",voice:"죄송해요. 엘포인트 회원만 구매 가능해요.",position:"q"},prdComment:{txt:"상품평 보여드릴게요~",voice:"상품평 보여드릴게요~",position:"q"},notPrdComment:{txt:"상품평이 없는 상품이에요~",voice:"상품평이 없는 상품이에요~",position:"q"},notPrdOption:{txt:"옵션이 없어요.",voice:"옵션이 없어요.",position:"q"},notPrdOptionHome:{txt:"옵션이 없어요.",voice:"옵션이 없어요.",position:"home"},prdOptShow:{txt:"옵션을 보여드릴까요?",voice:"옵션을 보여드릴까요?",position:"q"},prdDeliveryFree:{txt:"무료배송이에요~",voice:"무료배송이에요~",position:"q"},prdDeliveryCharge:{txt:"배송비는 {}원이고, {}원 이상 무료배송이에요~",voice:"배송비는 {}원이고, {}원 이상 무료배송이에요~",position:"q"},prdDeliveryDateSmart:{txt:"{}에서 픽업하는 상품입니다",voice:"{}에서 픽업하는 상품입니다",position:"q"},prdDeliveryDateRese:{txt:"지금 주문하시면 {} {} 되어요",voice:"지금 주문하시면? {} {} 되어요",position:"q"},prdDeliveryDateSet:{txt:"{}해 드려요",voice:"{}해 드려요",position:"q"},prdDeliveryDateRental:{txt:"{}드려요",voice:"{}드려요",position:"q"},prdDeliveryDate:{txt:"지금 주문하시면 {} {}이에요",voice:"지금 주문하시면? {} {}이에요",position:"q"},prdDeliveryDateCou:{txt:"{} 가능해요",voice:"{} 가능해요",position:"q"},prdDeliveryHolidayDate:{txt:"명절 기간으로 택배사별로 배송일이 달라요~",voice:"명절 기간으로 택배사별로 배송일이 달라요~",position:"q"},prdPrev:{txt:"이전 20개 상품 보여드릴게요.",voice:"이전 20개 상품 보여드릴게요.",position:"top"},prdNext:{txt:"다음 {}개 상품 보여드릴게요.",voice:"다음 {}개 상품 보여드릴게요.",position:"top"},alreadyWish:{txt:"이미 담은 상품이에요.",voice:"이미 담은 상품이에요.",position:"voice"},getWish:{txt:"위시리스트에 담았어요.",voice:"위시리스트에 담았어요.",position:"voice"},cartShow:{txt:"장바구니에 {}개의 상품이 있어요. 20개씩 보여드릴게요.",voice:"장바구니에 {}개의 상품이 있어요. 20개씩 보여드릴게요.",position:"top"},cartShowUnder:{txt:"장바구니에 {}개의 상품이 있어요.",voice:"장바구니에 {}개의 상품이 있어요.",position:"top"},cartNone:{txt:"찜한 상품이 없어요. &#x1F62E;",voice:"찜한 상품이 없어요.",position:"home"},wishShow:{txt:"위시리스트에 {}개의 상품이 있어요. 20개씩 보여드릴게요.",voice:"위시리스트에 {}개의 상품이 있어요. 20개씩 보여드릴게요.",position:"top"},wishShowUnder:{txt:"위시리스트에 {}개의 상품이 있어요.",voice:"위시리스트에 {}개의 상품이 있어요.",position:"top"},wishNone:{txt:"담긴 상품이 없어요. &#x1F62E;",voice:"담긴 상품이 없어요.",position:"home"},priceQuest:{txt:"원하는 가격대가 있으면 말해주세요.",voice:"원하는 가격대가 있으면 말해주세요.",position:"q"},helpQuest:{txt:'도움이 필요하시면 "도와줘!" 라고 말해보세요.',voice:'도움이 필요하시면 "도와줘!" 라고 말해보세요.',position:"q"},chkInventory:{txt:"{} {}부터 구매가능한 상품이에요~",voice:"{} {}부터 구매가능한 상품이에요~",position:"q"},notInventory:{txt:"죄송해요. 재고가 부족해요~",voice:"죄송해요. 잭오가 부족해요~",position:"q"},orderDecide:{txt:"선택하신 상품의 주문내역이에요.",voice:"결제를 진행할까요?",position:"top"},orderDecideDiscount:{txt:"{}원이 할인된 {}원에 결제 하실 수 있어요. 결제를 진행할까요?",voice:"결제를 진행할까요?",position:"top"},orderDecideHelp:{txt:'"응, 아니"라고 말해보세요',voice:"으으응. 또는. 아니 라고 말해보세요",position:"q"},orderProgress:{txt:'"직접 터치해서 결제 진행해주세요?',voice:"직접 터치해서 결제 진행해주세요?",position:"voice"},changeMyInfo:{txt:"변경 버튼을 눌러주세요",voice:"변경 버튼을 눌러주세요",position:"voice"},regiMydlvpPay:{txt:"배송지와 결제수단을 먼저 등록해주세요",voice:"배송지와 결제수단을 먼저 등록해주세요",position:"voice"},regiMydlvp:{txt:"배송지를 먼저 등록해주세요",voice:"배송지를 먼저 등록해주세요",position:"voice"},regiMypay:{txt:"결제수단을 먼저 등록해주세요",voice:"결제수단을 먼저 등록해주세요",position:"voice"},ispCancel:{txt:"ISP 결제가 취소되었습니다",voice:"ISP 결제가 취소되었습니다",position:"q"},errMinLmtQty:{txt:"최소 {}개부터 구매 가능한 상품입니다.",voice:"최소 {}개부터 구매 가능한 상품입니다.",position:"q"},errMxnLmtQty:{txt:"최대 {}개까지 구매 가능한 상품입니다.",voice:"최대 {}개까지 구매 가능한 상품입니다.",position:"q"},oftenShow:{txt:"자주 구매하는 {}개 상품입니다. 20개씩 보여드릴게요.",voice:"자주 구매하는 {}개 상품입니다. 20개씩 보여드릴게요.",position:"top"},oftenShowUnder:{txt:"자주 구매하는 {}개의 상품이 있어요.",voice:"자주 구매하는 {}개의 상품이 있어요.",position:"top"},oftenNone:{txt:"자주 구매한 상품이 없어요.<br />지금 쇼핑하고, 다음 구매 시 추천을 받아보세요!",voice:"자주 구매한 상품이 없어요! 지금 쇼핑하고! 다음 구매 시 추천을 받아보세요!",position:"home"},lateLoginedShow:{txt:"최근에 {}님이 본 상품이에요.",voice:"최근에 {}님이 본 상품이에요.",position:"top"},lateShow:{txt:"최근 본 {}개의 상품이 있어요.",voice:"최근 본 {}개의 상품이 있어요.",position:"top"},lateNone:{txt:"최근 본 상품이 없어요. &#x1F62E;",voice:"최근 본 상품이 없어요.",position:"home"},couponShow:{txt:"총 {}장의 쿠폰이 있어요.",voice:"사용 가능한 쿠폰이에요.",position:"top"},couponNone:{txt:"사용 가능한 쿠폰 내역이 없어요. &#x1F62E;",voice:"사용 가능한 쿠폰 내역이 없어요.",position:"home"},couponDown:{txt:"다운로드 가능한 쿠폰이 있어요! <br> 지금 받으러 갈까요?",voice:"다운로드 가능한 쿠폰이 있어요! 지금 받으러 갈까요?",position:"q"},couponHowToUse:{txt:"쿠폰을 마이롯데의 쿠폰에서 확인할 수 있으며, 주문서 작성 페이지에서 사용 가능한 쿠폰이 자동적으로 보이게 됩니다.",voice:"쿠폰을 마이롯데의 쿠폰에서 확인할 수 있으며, 주문서 작성 페이지에서 사용 가능한 쿠폰이 자동적으로 보이게 됩니다.",position:"home"},saunShow:{txt:"신청진행 중인 구매사은 이벤트에요.",voice:"신청진행 중인 구매 사은 이벤트에요.",position:"top"},saunNone:{txt:"신청진행 중인 이벤트가 없어요. &#x1F62E;",voice:"신청진행 중인 이벤트가 없어요.",position:"home"},saunMyShow:{txt:"신청한 구매사은 이벤트에요.",voice:"신청한 구매 사은 이벤트에요.",position:"top"},saunMyNone:{txt:"신청한 구매사은 이벤트가 없어요. &#x1F62E;",voice:"신청한 구매 사은 이벤트가 없어요.",position:"home"},saunApplySuccess:{txt:"신청 완료되었어요.",voice:"신청 완료되었어요.",position:"q"},saunApplyAlready:{txt:"이미 신청이 완료된 이벤트에요.",voice:"이미 신청이 완료된 이벤트에요.",position:"q"},saunApplyNotTarget:{txt:"신청 가능한 대상이 아니세요~",voice:"신청 가능한 대상이 아니세요~",position:"q"},saunApplyFail:{txt:"이벤트 조건이 충족되지 않았네요!",voice:"이벤트 조건이 충족되지 않았네요!",position:"q"},saunAllApply:{txt:"신청가능한 구매사은 이벤트는 {}개이며, 모두 신청 완료되었어요.",voice:"{}개 신청 완료되었어요.",position:"top"},saunAllApplyNone:{txt:"신청가능한 구매사은 이벤트가 없어요. 결제 금액을 더 채워보세요! &#x1F62E;",voice:"신청가능한 구매 사은이 없어요. 결제 금액을 더 채워보세요!",position:"home"},saunMoreShow:{txt:"신청가능한 구매사은이벤트가 있어요.<br>지금 신청하러 갈까요?",voice:"신청가능한 구매 사은 이벤트가 있어요. 지금 신청하러 갈까요?",position:"q"},saleCardNone:{txt:"현재 무이자할부 진행중인 카드가 없습니다. &#x1F62E;",voice:"현재 무이자할부 진행중인 카드가, 없습니다.",position:"home"},discountNone:{txt:"현재 청구할인 진행중인 카드가 없습니다. &#x1F62E;",voice:"현재 청구할인 진행중인 카드가 없습니다.",position:"home"},pointCloverNone:{txt:"{} 없어요...",voice:"{} 없어요.",position:"top"},pointShow:{txt:"{} {}점 가지고 있어요.",voice:"{} {}점 가지고 있어요.",position:"top"},cloverShowUnder:{txt:"갖고계신 클로버는 총 {}개입니다.",voice:"갖고계신 클로버는 총 {}개입니다.",position:"top"},cloverShowOver:{txt:"갖고계신 클로버는 총 {}개입니다. 혜택으로 교환하러 갈까요?",voice:"갖고계신 클로버는 총 {}개입니다. 혜택으로 교환하러 갈까요?",position:"top"},cloverShowMil:{txt:"갖고계신 클로버는 총 {}개입니다. L-money 1,000점을로 교환하러 갈까요?",voice:"갖고계신 클로버는 총 {}개입니다. L-money 1,000점을로 교환하러 갈까요?",position:"top"},useCloverShow:{txt:"혜택으로 교환하러 갈까요?",voice:"혜택으로 교환하러 갈까요?",position:"q"},useCloverShowMil:{txt:"L-money 1,000점으로 교환하러 갈까요?",voice:"L-money 1,000점으로 교환하러 갈까요?",position:"q"},mimiWorryShow:{txt:"지금 {}에게 필요한 것들이에요.",voice:"지금 {}에게 필요한 것들이에요.",position:"top"},mimiNoRegist:{txt:"등록된 우리 아이가 없어요.",voice:"등록된 우리 아이가 없어요.",position:"home"},mimiNoRegistQ:{txt:"아이 등록하러 미미뚜뚜 매장으로 이동할까요?",voice:"아이 등록하러 미미뚜뚜 매장으로 이동할까요?",position:"q"},mimiWorryNone:{txt:"지금 {} 나이에 챙겨줘야 할 것들이에요.",voice:"지금 {} 나이에 챙겨줘야 할 것들이에요.",position:"top"},mimiNone:{txt:"추천해줄 상품이 없어요. &#x1F62E;",voice:"추천해줄 상품이 없어요.",position:"home"},myRecommendShow:{txt:"고객님을 위한 추천입니다.",voice:"고객님을 위한 추천입니다.",position:"top"},myRecommendOnly:{txt:"오직 {}님만을 위한 추천입니다.",voice:"오직{}님만을 위한 추천입니다.",position:"top"},myRecommendNone:{txt:"추천 상품이 없네요. 더 많은 상품을 보고, 담을수록 추천이 풍성해집니다.",voice:"추천 상품이 없네요. 더 많은 상품을 보고, 담을수록 추천이 풍성해집니다.",position:"home"},eventShow:{txt:"진행중인 대표 이벤트에요.",voice:"진행중인 대표 이벤트에요.",position:"top"},eventNone:{txt:"진행중인 대표 이벤트가 없어요.",voice:"진행중인 대표 이벤트가 없어요.",position:"home"},eventApplyShow:{txt:"이벤트 응모내역이에요.",voice:"이벤트 응모내역이에요.",position:"top"},eventApplyShowNone:{txt:"이벤트 응모내역이 없어요. &#x1F62E;",voice:"이벤트 응모내역이 없어요.",position:"home"},favorBrandShow:{txt:"{} 신상품이 나왔어요.",voice:"{} 신상품이 나왔어요.",position:"top"},favorBrandNone:{txt:"즐겨찾는 브랜드가 없네요. 좋아하는 브랜드를 즐겨찾기 해보세요.",voice:"즐겨찾는 브랜드가 없네요. 좋아하는 브랜드를 즐겨찾기 해보세요.",position:"home"},cartSaleShow:{txt:"고객님을 기다리고 있는 할인 상품이에요. 상품이 사라지기 전에 서두르세요!",voice:"고객님을 기다리고 있는 할인 상품이에요. 상품이 사라지기 전에 서두르세요!",position:"top"},cartSaleNone:{txt:"가격 인하 중인 장바구니 상품이 없어요. &#x1F62E;",voice:"가격 인하 중인 장바구니 상품이 없어요.",position:"home"},centerCounseling:{txt:"아래와 같이 말해보세요. 상담으로 바로 연결돼요.",voice:"아래와 같이 말해보세요. 상담으로 바로 연결돼요.",position:"top"},centerCounselingOtherTime:{txt:"지금은 상담이 불가능한 시간이에요... 일대일 문의로 이동할까요?",voice:"지금은 상담이 불가능한 시간이에요... 일대일 문의로 이동할까요?",position:"top"},centerUseQna:{txt:"공휴일을 제외한 평일 오전 9시~오후6시에 다시 찾아주세요.",voice:"공휴일을 제외한, 평일 오전 9시부터, 오후6시 사이에 다시 찾아주세요.",position:"q"},centerTalkOtherTime:{txt:"현재, 채팅상담 가능시간이 아닙니다. 그래도 이동할까요?",voice:"채팅상담 가능시간이 아닙니다. 그래도 이동할까요?",position:"top"},centerTalkQna:{txt:"현재 일대일 문의만 가능합니다.",voice:"현재 일대일 문의만 가능합니다.",position:"q"},centerQnaYn:{txt:"응, 아니라고 말해보세요.",voice:"으으응. 또는. 아니라고 말해보세요.",position:"q"},centerCall:{txt:"아래와 같이 말해보세요. 상담으로 바로 연결돼요.",voice:"직접 통화 버튼을 터치해주세요?",position:"voice"},centerCallOtherTime:{txt:"현재, 고객센터 연결 가능 시간이 아닙니다. 일대일 문의로 이동할까요?",voice:"현재 고객센터 연결 가능 시간이 아닙니다. 일대일 문의로 이동할까요?",position:"top"},centerCallQue:{txt:"직접 문의 내용 입력해주세요?",voice:"직접 무니 내용 입력해주세요?",position:"voice"},secretListNone:{txt:"오늘은 비밀상점 물건이 없어요..<br>내일 또 찾아주시겠어요?",voice:"오늘은 비밀상점 물건이 없어요. 내일 또 찾아주시겠어요?",position:"home"},purchaseNone:{txt:"최근에 주문하신 적이 없어요.<br>주문배송조회로 이동할까요?",voice:"최근에 주문하신적이 없어요. 주문배송조회로 이동할까요?",position:"home"},purchaseNoneQnaYn:{txt:"응, 아니라고 말해보세요.",voice:"으으응. 또는. 아니라고 말해보세요.",position:"q"},purchaseDefaultShow:{txt:"최근 2주 동안 주문하신 상품이에요.",voice:"최근 2주 똥안 주문하신 상품이에요.",position:"top"},purchaseShow:{txt:"{} 주문하신 상품이에요.",voice:"{} 주문하신 상품이에요.",position:"top"},purchaseNameShow:{txt:"{}님의 주문 현황입니다.",voice:"{}님의 주문 현황입니다.",position:"top"},purchaseSendShow:{txt:"상품이 발송 되었습니다.",voice:"상품이 발송 되었습니다.",position:"q"},purchaseSendShowTop:{txt:"상품이 발송 되었습니다.",voice:"상품이 발송 되었습니다.",position:"top"},purchaseSendShowSended:{txt:"배송이 완료 되었습니다.",voice:"배송이 완료 되었습니다.",position:"q"},purchaseSendShowSendedTop:{txt:"배송이 완료 되었습니다.",voice:"배송이 완료 되었습니다.",position:"top"},purchaseExecShow:{txt:"{}가능한 주문이에요.",voice:"{}가능한 주문이에요.",position:"top"},purchaseExecNone:{txt:"{}가능한 주문이 없어요.<br>고객센터로 문의 부탁드려요.",voice:"{}가능한 주문이 없어요. 고객센터로 무니 부탁드려요.",position:"q"},purchaseSelectNone:{txt:"{}할 수 없는 주문상태에요.<br>고객센터로 문의 부탁드려요.",voice:"{}할 수 없는 주문상태에요. 고객센터로 무니 부탁드려요.",position:"q"},purchaseExecNoneHome:{txt:"{}가능한 주문이 없어요.<br>고객센터로 문의 부탁드려요.",voice:"{}가능한 주문이 없어요. 고객센터로 무니 부탁드려요.",position:"home"},purchaseDoingShow:{txt:"{} 및 {} 진행중인 내역이에요.",voice:"{} 및 {} 진행중인 내역이에요.",position:"top"},purchaseDoingNone:{txt:"최근에 {} 및 {} 진행중인 주문이 없어요. &#x1F62E;",voice:"최근에 {} 및 {} 진행중인 주문이 없어요.",position:"home"},purchaseCancleShow:{txt:"주문취소 내역이에요.",voice:"주문취소 내역이에요.",position:"top"},purchaseCancleNone:{txt:"최근에 취소한 주문이 없어요. &#x1F62E",voice:"최근에 취소한 주문이 없어요.",position:"home"},purchaseDetailLike:{txt:'"1번 자세히"처럼 말해주시겠어요?',voice:"1번 자세히,처럼 말해주시겠어요?",position:"q"},purchaseCancleLike:{txt:'"1번 취소해줘"처럼 말해주시겠어요?',voice:"1번 취소해줘,처럼 말해주시겠어요?",position:"q"},purchaseExchangeLike:{txt:'"1번 교환해줘"처럼 말해주시겠어요?',voice:"1번 교환해줘,처럼 말해주시겠어요?",position:"q"},purchaseReturnLike:{txt:'"1번 반품해줘"처럼 말해주시겠어요?',voice:"1번 반품해줘,처럼 말해주시겠어요?",position:"q"},purchaseOptionLike:{txt:'"1번 옵션 변경해줘"처럼 말해주시겠어요?',voice:"1번 옵션 변경해줘,처럼 말해주시겠어요?",position:"q"},purchaseDeliverLike:{txt:'"1번 배송지 변경해줘"처럼 말해주시겠어요?',voice:"1번 배송지 변경해줘,처럼 말해주시겠어요?",position:"q"},purchaseChangeLike:{txt:'"1번 옵션 변경해줘" 혹은 "1번 배송지 변경해줘"처럼 말해주시겠어요?',voice:"1번 옵션 변경해줘, 혹은 1번 배송지 변경해줘,처럼 말해주시겠어요?",position:"q"},styleRecomShow:{txt:"비슷한 {} 추천해드릴게요.",voice:"비슷한 {} 추천해드릴게요.",position:"top"},styleRecomNone:{txt:"이 상품은 추천이 어려워요...패션 상품 중 스타일 추천 아이콘이 있는 상품으로 시도해주세요!",voice:"이 상품은 추천이 어려워요...",position:"q"},styleRecomStateNone:{txt:"죄송해요.. {} 상품은 스타일 추천이 어려워요!",voice:"죄송해요... {} 상품은 스타일 추천이 어려워요...",position:"q"},styleOtherQue:{txt:"더 자세한 스타일 추천 화면으로 이동할까요?",voice:"더 자세한 스타일 추천 화면으로 이동할까요?",position:"q"},styleSizeFail:{txt:"이 사진은 용량이 커 추천이 어려워요... {}MB 아래로 업로드 부탁드려요!",voice:"이 사진은 용량이 커 추천이 어려워요...",position:"q"},styleUploadFail:{txt:"사진 업로드에 실패했어요. 다시 시도해주세요.",voice:"사진 업로드에 실패했어요. 다시 시도해주세요.",position:"q"},styleSearchFail:{txt:"이 사진은 추천이 어려워요! 다른 사진으로 시도해주세요!",voice:"이 사진은 추천이 어려워요..",position:"q"},styleHasIconSearchFail:{txt:"추천 상품을 준비중이에요..다른 상품으로 시도해주세요!",voice:"추천 상품을 준비중이에요..",position:"q"},othersHave:{txt:"다른 고객들이 함께 본 상품이에요.",voice:"다른 고객들이 함께 본 상품이에요.",position:"top"},othersHaveNone:{txt:"추천상품이 없어요...",voice:"추천상품이 없어요...",position:"home"},networkError:{txt:"앗, 현재 네트워크 연결이 불안정해요. 잠시 후에 시도해주세요.",voice:"앗, 현재 네트워크 연결이 불안정해요. 잠시 후에 시도해주세요.",position:"q"}}}]),d.service("VCDevMode",[function(){var a=this;a.DEV_COMMAND=[{name:"남들은뭘봤지",command:"getOthersHaveSeen"},{name:"마이추천",command:"getRecommendMy"},{name:"구매사은지급적립",command:"getPurchaseGiftInformation"},{name:"스타일추천",command:"getStyle"},{name:"카메라호출",command:"actionCamera"},{name:"미디어호출",command:"actionAlbum"},{name:"취소해줘",command:"actionCancel",data:{commandNumber:100}},{name:"옵션변경",command:"actionProdOptChange",data:{commandNumber:1}},{name:"배송지변경",command:"actionChangeDelivery",data:{commandNumber:1}},{name:"actionDetail",command:"actionDetail",data:{commandNumber:1}},{name:"이전",command:"actionBack"},{name:"주문내역",command:"getOrderList",data:{commandPeriod:"지지난주"}},{name:"주문내역언제와",command:"getOrderInquire"},{name:"주문내역반품",command:"actionReturn"},{name:"주문내역교환",command:"actionExchange"},{name:"주문내역배송지변경",command:"getOrderChangeShipping"},{name:"주문내역옵션변경",command:"getOrderChangeOption"},{name:"주문내역취소",command:"getOrderCancle"},{name:"교환중인 주문 내역",command:"getExchangeInProgressOrder"},{name:"반품중인 주문 내역",command:"getReturnInProgressOrder"},{name:"취소한 주문 내역",command:"getCancelOrder"},{name:"주문 방문 일자 정보 변경",command:"getOrderExchangeVisitInformation"},{name:"다음",command:"actionNext"},{name:"더보여줘",command:"actionMore"},{name:"위로",command:"actionUp"},{name:"아래로",command:"actionDown"},{name:"상황추천",command:"situation_recommendation",data:{goodsNoList:"5522725,5523769",commandBrand:"구찌",preReqParam:"&talk_id=2&keyword=브랜드&searchType=T",recommendData:"{}"}},{name:"비밀이벤트",command:"getSecretEvent",data:{goodsNoList:"5522725,5523769",commandBrand:"구찌",preReqParam:"&talk_id=2&keyword=브랜드&searchType=S",recommendData:"{}"}},{name:"즐겨찾기브랜드",command:"getNewProduct",data:{goodsNoList:"5522725,5523769",commandBrand:"구찌",preReqParam:"&talk_id=2&keyword=브랜드&searchType=T"}},{name:"쿠폰",command:"getCoupon"},{name:"쿠폰이용방법",command:"getCouponHowToUse"},{name:"포인트",command:"getPoint",data:{commandPoint:"point"}},{name:"포인트_엘포인트",command:"getLPoint",data:{commandPoint:"lpoint"}},{name:"포인트_엘머니",command:"getLMoney",data:{commandPoint:"lmoney"}},{name:"포인트_보관금",command:"getDeposit",data:{commandPoint:"deposit"}},{name:"포인트_클로버",command:"getPoint",data:{commandPoint:"clover"}},{name:"포인트_엘포인트상세",command:"actionPointDetail"},{name:"포인트_엘머니상세",command:"actionMoneyDetail"},{name:"포인트_보관금상세",command:"actionDepositDetail"},{name:"포인트_클로버상세",command:"actionCloverDetail"},{name:"이벤트",command:"getEvent"},{name:"이벤트응모내역",command:"getEventApplicationDetail"},{name:"구매사은이벤트",command:"getPurchaseGift"},{name:"구매사은신청한거",command:"getPurchaseGiftInformation"},{name:"구매사은신청1번",command:"actionApply",data:{commandNumber:"2"}},{name:"구매사은모두신청",command:"getPurchaseGiftApply"},{name:"청구할인",command:"getDiscount"},{name:"청구할인(카드선택)",command:"getDiscount",data:{commandCard:"026"}},{name:"청구할인(카드없음)",command:"getDiscount",data:{commandCard:"030"}},{name:"무이자",command:"getInProgressInterestFreeInstallment"},{name:"무이자(카드선택)",command:"getInterestFreeInstallment",data:{commandCard:"026"}},{name:"무이자(카드없음)",command:"getInterestFreeInstallment",data:{commandCard:"031"}},{name:"고객센터",command:"getCenter"},{name:"톡상담",command:"goCenterTalk"},{name:"전화연결",command:"goCenterCall"},{name:"1:1문의",command:"goCenterQue"},{name:"자주구매상품",command:"getOftenList"},{name:"최근본상품",command:"getLately"},{name:"주문언제와",command:"getOrderInquire"},{name:"주문취소",command:"getOrderCancle"},{name:"E쿠폰 재발송",command:"getOrderECouponResend"},{name:"미미뚜뚜",command:"getMimitoutou"},{name:"상품평관리",command:"goCiritOut"},{name:"상품내역문의",command:"goInqList"},{name:"일대일 문의/답변",command:"goInquire"},{name:"교환권",command:"goPresent"},{name:"스마트페이관련",command:"goSmartPay"},{name:"영수증이벤트",command:"goReceiptList"},{name:"자주구매상품이동",command:"goFrequentlyPurchaseProduct"},{name:"할인중인장바구니",command:"getDiscountedShoppingCart"},{name:"다른사람이본상품",command:"getOthersHaveSeen"},{name:"actionHelp",command:"actionHelp"},{name:"actionYesNo",command:"actionYesNo",data:{commandVal:"Y"}},{name:"getCart",command:"getCart"},{name:"getWish",command:"getWish"},{name:"getRecom",command:"getRecom",data:{goodsNoList:"1234,444",topScreenMent:"aaaa",preReqParam:"&talk_id=2&keyword=%EB%82%98%EC%9D%B4%ED%82%A4+%EC%97%AC%EC%84%B1",recommendData:'{"ageValue":null,"ageLabel":null,"age":null,"genderValue":null,"genderLabel":null,"gender":null,"priceVariableName":null,"priceVariableValue":null,"priceMin":0,"priceMax":0,"priceOnly":false,"itemValue":"원피스","nameValue":null,"preItemValue":null,"mGrpNo":"7112","ctgNo":"5415550","dsCtgDepth":"2","itemCombination":false,"brandValue":null,"brandNo":null,"keyword":null,"ner":null,"colorValue":null,"colorLabel":null,"color":null,"colorOnly":false,"sort":null,"freeDeliYN":null,"freeInstYN":null,"pointYN":null,"pkgYN":null,"delTdarYN":null,"delQuickYN":null,"deliveryAndBenefitOnly":false,"multiCondition":false,"deliveryAndBenefit":false,"searchType":"C"}'}}]}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","voiceCommerceService","angular-carousel","lotteSlider"]);d.controller("VoiceCommerceHeaderCtrl",["$scope","LotteCommon","commInitData","VCAppApi","LotteAppChk",function(a,b,c,d,e){a.toggleSound=function(b){a.pageUI.app.soundFlag=b,d.activatedSpeaker(a.pageUI.app.soundFlag),b?(a.setVCAnalysis("소리_ON"),a.setGATag("공통_상단영역","소리_ON",null,"click")):(a.setVCAnalysis("소리_OFF"),a.setGATag("공통_상단영역","소리_OFF",null,"click"));
},a.toggleHelp=function(b){a.setVCAnalysis("도움말"),a.VCCtrl.loadChangehelp({actionHelp:"open"},null,"click")},a.exit=function(b){"btn"==b&&(a.setVCAnalysis("닫기"),a.setGATag("공통_상단영역","닫기",null,"click")),d.exit()}}]),d.directive("voiceHeader",[function(){return{templateUrl:"/lotte/resources_dev/talk/voiceCommerce_header.html",replace:!0,controller:"VoiceCommerceHeaderCtrl",link:function(a,b,c){}}}]),d.controller("VoiceCommerceSideNavCtrl",["$scope","$window","LotteCommon","commInitData","LotteUserService","VCBasicInfo","VCOrder","LotteStorage","$timeout",function(a,c,d,e,f,g,h,i,j){function k(b){var c=null;a.loginInfo.isLogin&&a.loginInfo.mbrNo&&(c=a.loginInfo.mbrNo),a.pageLoading=!0,g.getBasicInfo(c).then(function(b){a.pageLoading=!1,a.basicInfo=b,"40"==a.basicInfo.member_info.pay_mean_cd&&(h.initLpay(),h.authLpayMerchant(a.basicInfo.member_info.onlCno,function(b){b?h.getLpayPaymentInfo(a.basicInfo.member_info.pay_card_rcgn_id,function(b){b?(a.basicInfo.member_info.fnCoNm=b.fnCoNm,a.basicInfo.member_info.pmtMthdAlias=b.pmtMthdAlias):(console.error("결제 수단 확인 실패"),a.basicInfo.member_info.base_op_pay_chk=!1)}):(console.error("Lpay 인증 실패"),a.basicInfo.member_info.base_op_pay_chk=!1)}))})["catch"](function(b){a.basicInfo=g.initBasicInfo()})["finally"](function(){a.pageLoading=!1}),"Y"!=i.getSessionStorage(a.EVT_TXT_SESSIONSTORAGE_FLAG)?(a.pageLoading=!0,g.getEvtTxt().then(function(b){a.pageUI.evtTxt=b,"home"==a.pageUI.state&&(a.pageUI.evtTxtShowFlag=!0,a.setVCAnalysis("햄버거이벤트"))})["catch"](function(){})["finally"](function(){a.pageLoading=!1})):a.pageUI.evtTxtShowFlag=!1,i.setSessionStorage(a.EVT_TXT_SESSIONSTORAGE_FLAG,"Y"),a.pageLoading=!0,g.getBgDeco().then(function(b){a.isValidString(b)&&(a.pageUI.bgDecoStyle="background-image:url("+b+")")})["catch"](function(){})["finally"](function(){a.pageLoading=!1})}a.basicInfo=g.initBasicInfo(),a.SemanticHistory=g.getSemanticeHistory(),a.EVT_TXT_IONSTORAGE_FLAG="vcEvtTxtHideFlag",a.toggleSideNav=function(c){a.pageUI.evtTxtShowFlag&&a.hideEvtTxt(),a.pageUI.sideNavOpenFlag=c,b.element("#myinfoWrap").scrollTop(0),c?(a.setVCAnalysis("햄버거"),a.setGATag("공통_상단영역","햄버거",null,"click")):a.setGATag("햄버거_공통","닫기",null,"click")},a.toggleSideNavGuide=function(c,d){a.pageUI.sideNavGuideOpenFlag=c,b.element("#guideWrap").scrollTop(0),c?a.setGATag("햄버거_가이드","전체보기",null,"click"):"back"==d?a.setGATag("햄버거_가이드","뒤로",null,"click"):a.setGATag("햄버거_가이드","닫기",null,"click")},f.promiseLoginInfo()["finally"](function(a){j(function(){k(a)},100)}),a.hideEvtTxt=function(){a.pageUI.evtTxtShowFlag&&a.setGATag("햄버거이벤트","햄버거이벤트",null,"click"),a.pageUI.evtTxtShowFlag&&(a.pageUI.evtTxtShowFlag=!1,i.setSessionStorage(a.EVT_TXT_SESSIONSTORAGE_FLAG,"Y"))},a.sendHistory=function(b){a.sendSemantic("click",b.replace(/\"/gi,""),!0),a.setGATag("햄버거_히스토리","클릭",null,"click"),a.pageUI.sideNavOpenFlag=!1}}]),d.directive("voiceNav",["VCPageMove","$window",function(a,c){return{templateUrl:"/lotte/resources_dev/talk/voiceCommerce_sidenav.html",replace:!0,controller:"VoiceCommerceSideNavCtrl",link:function(d,e,f,g){d.speechBoxTabIdx=0,d.voiceInfoLayer=!1,d.voiceNavVCPageMove=function(b){"actionChangeDelivery"==b?1==d.basicInfo.member_info.et_mbr_dlvp_chk?d.setGATag("햄버거_등록변경","배송지",null,"click"):d.setGATag("햄버거_등록","배송지",null,"click"):"goChangePayment"==b&&(1==d.basicInfo.member_info.base_op_pay_chk?d.setGATag("햄버거_등록변경","결제수단",null,"click"):d.setGATag("햄버거_등록","결제수단",null,"click")),a.go(b,d.loginInfo.isLogin)},d.samandaListController=null,d.getSamadaListControl=function(a){d.samandaListController=a},d.samadaListSwiperEnd=function(a){d.speechBoxTabIdx=a,d.setGATag("햄버거_가이드","탭이동",null,"click")},d.speechBoxTabSelect=function(a){d.samandaListController.moveIndex(a)},d.toggleVoiceInfoLayer=function(a){d.voiceInfoLayer=!d.voiceInfoLayer,d.voiceInfoLayer?(b.element(c).on("click.voiceInfoLayer",function(){b.element(c).off("click.voiceInfoLayer"),d.toggleVoiceInfoLayer()}),d.setGATag("햄버거_공통","인포",null,"click")):b.element(c).off("click.voiceInfoLayer"),a&&a.stopPropagation()},d.infoLayerClick=function(a){a.stopPropagation()},b.element(".myinfo_side_wrap .guide_wrap").on("scroll touchmove mousewheel",function(){d.setGATag("햄버거_가이드","스크롤",null,"click")})}}}]),d.controller("VoiceCommerceCtrl",["$scope","commInitData","VCDevMode","VCBasicInfo","$timeout","VCMsgData","VCAppApi","LotteGA","LotteCommon","$window","LotteStorage","$location","StyleRecom","VCSendMsg",function(a,c,d,e,f,g,h,i,j,k,l,m,n,o){a.showWrap=!0,a.contVisible=!0,a.pageLoading=!0,a.pageSaunLoading=!1,a.pageUI={testCamera:"",referrerUrl:null,curDispNo:"5607666",curDispNoSctCd:"17",state:"home",orderState:"",stateHistory:[{state:"home",msgTop:""}],semanticFlag:!1,voiceGuideInfo:[],curVoiceGuideIdx:0,evtTxtShowFlag:!1,evtTxt:"",sideNavOpenFlag:!1,sideNavGuideOpenFlag:!1,showHotKeyword:!1,hotKeyword:[],showShare:!1,showMsg:{guide:!0,home:!1,top:!1,q:!1},msg:{home:"",top:"",q:""},showHelp:!1,showAlert:!1,alertType:"",showPrdImgDetail:!1,showPrdComment:!1,showPrdOpt:!1,showPrd10:!1,showPrd20:!1,showPrdEnd:!1,showOrder:!1,app:{nowTTS:!1,mowSTT:!1,soundFlag:!1},inputMode:"",lastInputMode:"",activeVoice:!1,inputTxt:"",micVoiceTxt:"듣고 있어요",appSchemaDelay:300,centerKind:"",centerYn:"",curPrdSwiperIdx:0,curPage:1,totalCnt:0,prdList:[],prdSecretTextList:null,preReqParam:null,preReqParamObj:null,curPrdInfo:null,curPrdDetailInfo:null,rowsPerPage:20,rowsMaxNum:40,prodImgInfo:[],couponListInfo:null,recobellInfo:null,eventListInfo:null,eventApplyInfo:null,eventApplyInfoScrollTop:0,eventApplyInfoTotal:null,counselorInfo:null,saunListInfo:null,saunListInfoMyType:"list",saleListInfo:null,pointCloverListInfo:null,purchaseList:null,optInfo:{isOpt:!1,optType:"",goodsNo:null,prdOptStepCnt:0,prdOptInfo:[],prdOptList:[],curOptValArr:[],selectedOptItemInfo:null,selectedOptItemNo:null,curOptStep:0,curLayerOptValArr:[],optSelectDelayTime:1e3},orderInfo:{cart_sn:null,deliver_info:null,discount_amt:0,discount_list:null,goods_list:null,pay_info:null,total_amt:0,total_price:0,total_deli_amt:0,orderCnt:0,termLayerFlag:!1},orderCompleteInfo:{goods_list:null,deliver_info:null,total_amt:0,discount_amt:0,total_price:0,send_due_code:null,send_due_date:null,send_due_month:null,send_due_day:null,send_due_week:null,ord_no:null,saun_info:{evt_txt_view_yn:"N",evt_txt_gbn:"1",evt_add_pay_amt:"0",evt_add_pay_pnt:"",evt_as_pay_pnt:"",evt_card_nm:"",evt_saun_no:"",areadyEnter:null}},helpInfo:[],prodComment:[],prodCommentPageIndex:1,prodCommentAjaxLoadFlag:!1,prodCommentLastPage:!1,starScoreOpen:!0,customerSatisOpen:!0,devCommand:d.DEV_COMMAND,jsonLoading:!1,isChangeCommandState:!0,curPrdHtmlInfo:{},bgDecoStyle:"",soundEndData:{},saleCardInfo:{"002":{name:"광주카드",className:""},"008":{name:"하나카드",className:""},"010":{name:"전북카드",className:""},"011":{name:"제주카드",className:""},"016":{name:"KB국민카드",className:"kb"},"017":{name:"수협카드",className:""},"018":{name:"NH카드",className:"nh"},"021":{name:"우리카드",className:""},"026":{name:"비씨카드",className:"bc"},"029":{name:"신한카드",className:"shinhan"},"031":{name:"삼성카드",className:"samsung"},"036":{name:"씨티카드",className:""},"047":{name:"롯데카드",className:"lotte"},"048":{name:"현대카드",className:"hyundai"},"051":{name:"저축은행카드",className:""},"054":{name:"우체국체크카드",className:""}},situationData:{question:"",answer:[]},stateSelectorObj:{purchase_gift:{txt:"구매사은"},billing_discount:{txt:"청구할인"},interest_free_installment:{txt:"무이자할부"},event:{txt:"이벤트"}},stateSelectorViewInfo:!1,stateSelectorViewClass:!0,stateSelector:[],autoSlideInterval:null,autoSlideTime:3e3,styleSelectedImageUrl:"",styleSelectedImageCate:"",styleSelectedImageSortCate:"",styleSelectedImageGen:"",devMode:!1,testMode:!1},a.coachMarkVisibility=!1,"Y"!=l.getLocalStorage("vcCoachMark")&&(a.coachMarkVisibility=!0),a.hideCoachMark=function(){l.setLocalStorage("vcCoachMark","Y"),a.coachMarkVisibility=!1},a.getSaleCardClass=function(c){var d,e=c;return b.forEach(a.pageUI.saleCardInfo,function(a,b){b==e&&(d=a.className)}),d?d:""},a.setVCAnalysis=function(b){console.log("클릭 이벤트 태깅 : ",b),o.sendSemanticAnalysis({screen:a.pageUI.state,qType:"click",text:b,mbrNo:a.loginInfo.isLogin?a.loginInfo.mbrNo:null},!0)},a.setGATag=function(b,c,d,e,f){var g=a.appObj.isApp?"APP_샬롯_":"MO_샬롯_",h=b?b:"",j=c?c:"",k=d?d:"-",l=e?e:"-",m=a.pageUI.state;switch("purchase_gift"==a.pageUI.state&&(m="list"==a.pageUI.saunListInfoMyType?"purchase_gift":"myList"==a.pageUI.saunListInfoMyType?"purchase_gift_myList":"noGift"==a.pageUI.saunListInfoMyType?"purchase_gift_noGift":"purchase_gift"),"customer_center"==a.pageUI.state&&(m="N"==a.pageUI.centerYn?"customer_center_fail":"customer_center"),f&&(m=f),m){case"home":g+="홈";break;case"prod_list":g+="상품리스트";break;case"prod_detail":g+="상품상세";break;case"wish":g+="위시리스트";break;case"cart":g+="장바구니";break;case"order":g+="주문확정";break;case"order_complete":g+="주문완료";break;case"best_recommendation":g+="베스트추천";break;case"purchase_frequently":g+="자주구매리스트";break;case"recently_viewed_item":g+="최근본상품리스트";break;case"style_recommendation":g+="스타일추천";break;case"situation_recommendation":g+="상황리스트";break;case"management_item_recommendation":g+="관리리스트";break;case"order_inquiry":g+="주문조회";break;case"coupon":g+="쿠폰";break;case"secret_event":g+="비밀이벤트";break;case"point":g+="포인트";break;case"event":g+="이벤트";break;case"event_application_details":g+="이벤트응모";break;case"purchase_gift":g+="구매사은진행중";break;case"purchase_gift_list":g+="구매사은진행중";break;case"purchase_gift_myList":g+="구매사은신청완료";break;case"purchase_gift_noGift":g+="구매사은신청없음";break;case"billing_discount":g+="청구할인";break;case"interest_free_installment":g+="무이자할부";break;case"customer_center":g+="고객센터";break;case"customer_center_fail":g+="고객센터불가";break;case"mimitoutou_recommendation":g+="미미뚜뚜리스트";break;case"my_recommendation":g+="마이추천";break;case"favorite_brands":g+="즐찾브랜드신상리스트";break;case"other_customers_item_recommendation":g+="남들은뭘봤지";break;default:g+="홈"}switch(e){case"mic":l="음성";break;case"click":l="터치";break;case"keyboard":l="키패드"}i.evtTag(g,h,j,k,l)};var p=document.referrer;"localhost"==m.host()&&(p="http://"+m.host()+(m.port()?":"+m.port():"")+"/main/main_2018_dev.html?udid=&v=&cn=&cdn=&schema="),p&&-1==(p+"").indexOf(j.talkShopPayment)&&-1==(p+"").indexOf(j.talkShopDelevery)&&-1==(p+"").indexOf(j.voiceCommerceUrl)&&(a.pageUI.referrerUrl=p);var q="vcSession",r=a.appObj.isAndroid?"unload":"pagehide";if(b.element(k).on(r,function(){l.setSessionStorage(q,a.pageUI,"json")}),a.isSessionChk=!1,p&&(p+"").indexOf(j.talkShopPayment)>-1||(p+"").indexOf(j.talkShopDelevery)>-1||c.query&&c.query.lastCommand&&(p+"").indexOf(j.loginForm)>-1||c.query&&"Y"==c.query.isLogin&&(p+"").indexOf(j.loginForm)>-1||c.query&&"Y"==c.query.isp||history.state&&"voiceCommerce"==history.state.name){var s=l.getSessionStorage(q,"json");s&&(a.pageUI=s,a.isSessionChk=!0,a.pageUI.showMsg.q=!1)}else"Y"==l.getSessionStorage("vcLastCommandFlag")&&l.setSessionStorage("vcLastCommandFlag","N"),(null==history.state||"voiceCommerce"!=history.state.name)&&history.replaceState({name:"voiceCommerce"},"voiceCommerce")}]),d.controller("LotteContainerCtrl",["$scope","$window","$timeout","LotteCommon","VCPageMove","VCAppApi","VCGetPrdInfo","LotteCookie","VCGetPrdDetailInfo","VCHelpInfo","VCGetPrdOption","VCMsgData","VCGetProdComment","VCGetPrdQty","VCGetOrderDecide","VCOrder","VCOrderComplete","commInitData","VDShareApp","VCAddCart","VCAddWish","VCDeliveryInfo","$filter","VCHotKeywordInfo","VCStartVoiceInfo","$interval","$http","LotteUtil","LotteStorage","VCUpdateCart","VCCouponInfo","VCSaunInfo","VCSaleInfo","VCLocalLate","VCPointCloverInfo","VCEventInfo","VCPurchaseInfo","VCMyRecommend","VCCounselorInfo","StyleRecom","VCOthersHaveSee",function(c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R){function S(){"home"==c.pageUI.state?c.pageUI.showMsg.top=!1:c.pageUI.showMsg.top=!0,c.pageUI.showMsg.home=!1}function T(a){ka.autoSlideRun(a)}function U(a,b,c){var d=a.scrollY||document.documentElement.scrollTop,e=b-d,f=0,g=20,h=function(){f+=g;var b=V(f,d,e,c);a.scrollTo(0,b),c>f&&setTimeout(h,g)};h()}function V(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:(a-=1,-c/2*(a*(a-2)-1)+b)}function W(){if(c.pageUI.sideNavOpenFlag||c.pageUI.sideNavGuideOpenFlag||c.pageUI.showShare||c.pageUI.showHelp||c.pageUI.showPrdImgDetail||c.pageUI.showPrdComment||c.pageUI.showOrder||c.pageSaunLoading)c.pageUI.sideNavOpenFlag=!1,c.pageUI.sideNavGuideOpenFlag=!1,c.pageUI.showShare=!1,c.pageUI.showHelp=!1,c.pageUI.showPrdImgDetail=!1,c.pageUI.showPrdComment=!1,c.pageUI.showOrder=!1,c.pageSaunLoading=!1;else if(c.pageUI.showPrdOpt)0!=c.pageUI.optInfo.curOptStep?(c.pageUI.optInfo.curOptStep--,c.pageUI.optInfo.curLayerOptValArr.pop()):c.pageUI.showPrdOpt=!1;else if("mic"==c.pageUI.inputMode)c.pageUI.inputMode="",h.stopSTT();else if(c.pageUI.showMsg.q)c.pageUI.showMsg.q=!1,e.cancel(qa),qa=null;else if("home"==c.pageUI.state)h.exit();else if("order_complete"==c.pageUI.state){var a=c.pageUI.stateHistory.length-1;for(a;a>=0&&"home"!=c.pageUI.stateHistory[a].state;a--)c.pageUI.stateHistory.pop();ka.stateHistoryBack(!0)}else if(c.checkListState(c.pageUI.state)||c.checkListStateVertical(c.pageUI.state)){var a=c.pageUI.stateHistory.length-1;for(a;a>=0&&"home"!=c.pageUI.stateHistory[a].state;a--)c.pageUI.stateHistory.pop();ka.stateHistoryBack(!0)}else"order"==c.pageUI.state?ka.stateHistoryBack():ka.stateHistoryBack()}function X(a){return c.pageLoading=!1,"string"==typeof a&&(a=JSON.parse(a)),"000"!=a.rsltCode?(ka.showMsg(o.msg.networkError),console.error("스타일 추천 화일 업로드 실패"),void c.setGATag("스타일추천","네티워크불안정메시지노출",null,null)):void(a.styleUpImgInfo&&c.getStyleRecom(a.styleUpImgInfo))}function Y(){c.pageLoading=!1,ka.showMsg(o.msg.styleUploadFail),c.setGATag("스타일추천","사진업로드실패메시지노출",null,null)}function Z(a,b){var c=new FileReader;c.onload=function(c){var d=new DataView(c.target.result);if(65496!=d.getUint16(0,!1))return b(-2,a);for(var e=d.byteLength,f=2;e>f;){var g=d.getUint16(f,!1);if(f+=2,65505==g){if(1165519206!=d.getUint32(f+=2,!1))return b(-1,a);var h=18761==d.getUint16(f+=6,!1);f+=d.getUint32(f+4,h);var i=d.getUint16(f,h);f+=2;for(var j=0;i>j;j++)if(274==d.getUint16(f+12*j,h))return b(d.getUint16(f+12*j+8,h),a)}else{if(65280!=(65280&g))break;f+=d.getUint16(f,!1)}}return b(-1,a)},c.readAsArrayBuffer(a)}function _(a,b){c.uploadFileImage(a,b)}function aa(){var a=b.element(".voice_mic .mic_guide:visible");if(0!=a.length){var c=a.height(),d=a.parent().height(),e=Math.round((d-c)/2);a.css("top",e)}}function ba(){c.pageUI.curVoiceGuideIdx>=c.pageUI.voiceGuideInfo.length-1?c.pageUI.curVoiceGuideIdx=0:c.pageUI.curVoiceGuideIdx++}function ca(){c.pageUI.showMsg.guide&&""==c.pageUI.inputMode&&(c.voiceGuideActive?ma==na&&(ma=0,c.voiceGuideActive=!c.voiceGuideActive,c.voiceGuideActive||e(ba,500)):c.voiceGuideActive=!c.voiceGuideActive,ma++)}function da(){c.pageUI.showOrder=!0;var a=s.getOrderUrl(c.pageUI.orderInfo.cart_sn,c.pageUI.orderInfo.goods_list.goods_no);b.element("#ordIframe").prop("src",a)}function ea(){c.pageUI.helpInfo.length>1?(c.iptGuideHideIdx=c.iptGuideActiveIdx,c.iptGuideActiveIdx<c.pageUI.helpInfo.length-1?c.iptGuideActiveIdx++:c.iptGuideActiveIdx=0):(c.iptGuideActiveIdx=0,c.iptGuideHideIdx=-1)}function fa(){oa&&(C.cancel(oa),oa=null),oa=C(ea,pa)}function ga(){b.element(d).off(".qMsg").on("touchstart.qMsg",function(a){b.element(d).off(".qMsg"),c.pageUI.showMsg.q=!1,qa&&(e.cancel(qa),qa=null),c.findQuestionEqual(c.viewInfoTemp.txt)&&(wa=!0)})}function ha(){var a=c.loginInfo.isLogin&&c.basicInfo.member_info.et_mbr_dlvp_chk&&c.basicInfo.member_info.base_op_pay_chk;return a||(c.basicInfo.member_info.et_mbr_dlvp_chk||c.basicInfo.member_info.base_op_pay_chk?c.basicInfo.member_info.et_mbr_dlvp_chk?c.basicInfo.member_info.base_op_pay_chk||ka.showMsg(o.msg.regiMypay):ka.showMsg(o.msg.regiMydlvp):ka.showMsg(o.msg.regiMydlvpPay),c.toggleSideNav(!0)),a}function ia(a){c.pageLoading=!0,G.updateCart({cart_sn:a.cart_sn,ord_qty:c.pageUI.orderInfo.orderCnt,item_no:a.item_no,update_ck:!1,goods_no:a.goods_no,goods_cmps_cd:a.goods_cmps_cd}).then(function(b){g.voiceUnableOrder(a.cart_sn)})["catch"](function(){console.error("장바구니 옵션 업데이트 실패"),c.alert_2016("장바구니 옵션 반영 오류 발생")})["finally"](function(){c.pageLoading=!1})}function ja(){c.isSessionChk||(c.pageLoading=!0,B.getVoiceInfo().then(function(a){var b=-1,d=K.getLateList();if(null!=d&&""!=d&&d.split(",").length>3)for(var e=0;e<a.length;e++)"BEST"==a[e].guide_type&&(b=e+1);b>0&&a.splice(b,0,{guide_cd:"",guide_cont:"마이추천해줘",guide_type:"MY",guide_rank:b}),c.pageUI.voiceGuideInfo=a,c.pageUI.voiceGuideInfo.length>0&&c.pageUI.voiceGuideInfo[0].guide_cont&&c.VCCtrl.showMsg(o.getMsgData(c.pageUI.voiceGuideInfo[0].guide_cont,c.pageUI.voiceGuideInfo[0].guide_cont,"voice"))})["catch"](function(){console.error("추천 발화가이드 없음")})["finally"](function(){c.pageLoading=!1}),c.voiceGuideActive=!0,ka.loadChangehelp({actionHelp:"home"})),"home"==c.pageUI.state&&1==c.pageUI.showMsg.guide&&c.startVoiceGuide(),e(fa,1e3),c.checkListState(c.pageUI.state)&&c.pageUI.prdList.length>0&&c.prdSwiperCtrl&&c.pageUI.curPrdSwiperIdx>0&&e(function(){try{c.prdSwiperCtrl.moveSpeedIndex(c.pageUI.curPrdSwiperIdx,10),b.element(d).trigger("scroll")}catch(a){console.warn(a)}},500);var a=u.query;if("Y"==a.isp){var f=a.resCode,g=decodeURIComponent(a.resMsg),h=decodeURIComponent(a.ord_no);"9999"==f?c.pageUI.showOrder=!1:c.talkOrderCallBack(f,g,h)}if(a.lastCommand&&"Y"==F.getSessionStorage("vcLastCommandFlag")){F.setSessionStorage("vcLastCommandFlag","N");var i=JSON.parse(F.getSessionStorage("vcLastCommandData"));i||(i={}),F.setSessionStorage("vcLastCommandData",""),e(function(){ka.commandExec(a.lastCommand,i,i.sendTxt,i.iptType)},500)}}var ka=this;ka.checkUseState=function(a){var c=["home","prod_list","prod_detail","cart","wish","order","order_complete","best_recommendation","purchase_frequently","recently_viewed_item","style_recommendation","situation_recommendation","management_item_recommendation","order_inquiry","coupon","secret_event","point","event","event_application_details","purchase_gift","billing_discount","interest_free_installment","customer_center","mimitoutou_recommendation","my_recommendation","favorite_brands","other_customers_item_recommendation"],d=!1;return b.forEach(c,function(b,c){b==a&&(d=!0)}),d},c.checkListState=function(a,c){var d=["prod_list","cart","wish","best_recommendation","purchase_frequently","recently_viewed_item","style_recommendation","mimitoutou_recommendation","my_recommendation","favorite_brands","situation_recommendation","management_item_recommendation","secret_event","other_customers_item_recommendation"],e=!1,f=[];return b.forEach(d,function(b,c){b==a&&(e=!0,f=b)}),c&&b.forEach(c,function(a,b){a==f&&(e=!1)}),e},c.checkListStateVertical=function(a){var c=["order_inquiry","coupon","purchase_gift","event","event_application_details","billing_discount","interest_free_installment"],d=!1;return b.forEach(c,function(b,c){b==a&&(d=!0)}),d},ka.stateSelectorView=function(a){c.pageUI.stateSelector=[];var d=!1;b.forEach(c.pageUI.stateSelectorObj,function(b,c){c==a&&(d=!0)}),d&&(b.forEach(c.pageUI.stateSelectorObj,function(b,c){c!=a&&this.push(b)},c.pageUI.stateSelector),c.pageUI.stateSelector.length>0&&(ka.stateSelectorReset(),c.pageUI.stateSelectorViewInfo=!0))},ka.stateSelectorReset=function(){var a=0;$("#stateSelectorSlider li").each(function(b,c){a+=$(c).width()+6}),$("#stateSelectorSlider .selectorSlider").width(a),e(function(){$("#stateSelectorSlider").scrollLeft(0),$("#stateSelectorSlider").length>0&&b.element("#stateSelectorSlider").scope().reset()},100)},ka.stateHistoryBack=function(a){if(("cart"==c.pageUI.state||"wish"==c.pageUI.state||"purchase_frequently"==c.pageUI.state)&&c.pageUI.curPage>1)return void c.swipeListPrev();var d=c.pageUI.stateHistory[c.pageUI.stateHistory.length-1].selectorViewInfo,f=c.pageUI.stateHistory[c.pageUI.stateHistory.length-1].stateSelector;c.pageUI.stateHistory.length>0&&!a&&c.pageUI.stateHistory.pop(),c.pageUI.stateHistory.length>=0&&(ka.changeState(c.pageUI.stateHistory[c.pageUI.stateHistory.length-1].state,null,!0),"home"!=c.pageUI.state&&(c.pageUI.msg.top=c.pageUI.stateHistory[c.pageUI.stateHistory.length-1].msgTop)),"home"==c.pageUI.state?c.startVoiceGuide():c.checkListState(c.pageUI.state)&&(("situation_recommendation"==c.pageUI.state||"management_item_recommendation"==c.pageUI.state)&&(c.pageUI.stateSelectorViewInfo=d,c.pageUI.stateSelector=f),c.pageUI.curPrdSwiperIdx>-1&&c.prdSwiperCtrl&&(b.element(".prod_list_wrap").css("opacity",0),e(function(){c.prdSwiperCtrl.init(),c.prdSwiperCtrl.moveSpeedIndex(c.pageUI.curPrdSwiperIdx,10),b.element(".prod_list_wrap").css("opacity",1)},300)))},c.copyTextToClipboard=function(b){var d=a.getSelection(),e=document.querySelector("#accountNumber");e.innerHTML=b,d.removeAllRanges();var f=document.createRange();f.selectNode(e),d.addRange(f);try{document.execCommand("copy"),c.setGATag("계좌번호 복사","계좌복사",null,"click"),c.setVCAnalysis("계좌복사"),c.pageUI.alertType="copy_account",ka.showAlert()}catch(g){console.log("execCommand Error",g)}d.removeAllRanges()},ka.startAutoSlide=function(a){return c.pageUI.autoSlideInterval&&C.cancel(c.pageUI.autoSlideInterval),"list"==a&&"style_recommendation"==c.pageUI.state&&c.pageUI.prdList.length-1==c.pageUI.curPrdSwiperIdx?(ka.showMsg(o.msg.prdStyleListEnd),void c.goStyleMore()):(c.pageUI.autoSlideInterval=C(function(){T(a)},c.pageUI.autoSlideTime),ka.autoSlideRun(a),void b.element(d).on("touchend.autoSlide",function(){ka.autoSlideDestroy()}))},ka.autoSlideRun=function(e,f){"list"==e?c.pageUI.prdList.length-1>c.pageUI.curPrdSwiperIdx?c.prdSwiperCtrl.moveIndex(c.pageUI.curPrdSwiperIdx+1):ka.autoSlideDestroy():"vertical"==e&&("up"==f?(U(a,b.element(d).scrollTop()-2*a.innerHeight/3,200),b.element(d).scrollTop()<=0&&ka.autoSlideDestroy()):(U(a,b.element(d).scrollTop()+2*a.innerHeight/3,200),b.element(d).scrollTop()>=document.body.scrollHeight-a.innerHeight&&ka.autoSlideDestroy()))},ka.autoSlideDestroy=function(){b.element(d).off("touchend.autoSlide"),c.pageUI.autoSlideInterval&&C.cancel(c.pageUI.autoSlideInterval)},c.pageUI.prestate="",ka.changeState=function(a,e,f){0!=ka.checkUseState(a)&&(c.pageUI.showHotKeyword=!1,c.pageUI.hotKeyword=[],"home"==c.pageUI.state?e&&e.guideFlag?c.startVoiceGuide():c.stopVoiceGuide():ka.allHideLayer(),c.pageUI.state==a||f||("prod_detail"==a&&(c.pageUI.msg.top=""),c.pageUI.stateHistory.push({state:a,msgTop:c.pageUI.msg.top,selectorViewInfo:c.pageUI.stateSelectorViewInfo,stateSelector:c.pageUI.stateSelector})),c.pageUI.prestate=c.pageUI.state,c.pageUI.state=a,"home"!=c.pageUI.state?ka.loadChangehelp({actionHelp:"change"}):ka.loadChangehelp({actionHelp:"home"}),"home"!=a&&c.hideEvtTxt(),c.soundEndData={},c.pageUI.stateSelectorViewInfo=!1,c.pageUI.stateSelector=[],S(),ka.stateSelectorView(c.pageUI.state),"home"==c.pageUI.state?c.startVoiceGuide():c.checkListState(c.pageUI.state,["cart","wish"])?c.prodListQuantity=-1:"prod_detail"==c.pageUI.state?c.prodListQuantity=-1:"order"==c.pageUI.state&&(c.prodListQuantity=-1),"purchase_gift"!=c.pageUI.state&&(c.pageUI.saunListInfoMyType="list"),"customer_center"!=c.pageUI.state&&(c.pageUI.centerYn="N"),b.element(d).scrollTop(0),b.element(d).trigger("scroll"))},ka.loadChangehelp=function(a,b,d){if("home"==c.pageUI.state&&(!a||"home"!=a.actionHelp)||"order_complete"==c.pageUI.state&&"open"==a.actionHelp)c.pageUI.sideNavGuideOpenFlag=!c.pageUI.sideNavGuideOpenFlag,c.setGATag("공통_상단영역","도움말",b,d);else{var e=c.pageUI.state;"purchase_gift"==e?"myList"==c.pageUI.saunListInfoMyType?e="purchase_gift_my":"noGift"==c.pageUI.saunListInfoMyType&&(e="purchase_giftNo"):"management_item_recommendation"==e?c.pageUI.prdList.length&&(e="management_item_recommendationList"):"situation_recommendation"==e&&c.pageUI.prdList.length&&(e="situation_recommendationList"),c.pageLoading=!0,m.getHelpInfo(e).then(function(b){c.pageUI.helpInfo=b,"open"==a.actionHelp?(ka.allHideLayer(),c.pageUI.showHelp=!0):"change"==a.actionHelp&&ea()})["catch"](function(){console.error("도움말 코너 정보 연동 실패")})["finally"](function(){c.pageLoading=!1}),(d||!a)&&c.setGATag("공통_상단영역","도움말",b,d)}},ka.allHideLayer=function(){c.pageUI.sideNavOpenFlag=!1,c.pageUI.sideNavGuideOpenFlag=!1,c.pageUI.showShare=!1,c.pageUI.showMsg.guide=!1,c.pageUI.showMsg.q=!1,c.pageUI.showHelp=!1,c.pageUI.showAlert=!1,c.pageUI.inputMode="",c.pageUI.showPrdImgDetail=!1,c.pageUI.showPrdComment=!1,c.pageUI.showPrdOpt=!1,c.pageUI.showOrder=!1},ka.chkShowLayer=function(){var a=!1;return(c.pageUI.sideNavOpenFlag||c.pageUI.sideNavGuideOpenFlag||c.pageUI.showShare||c.pageUI.showHelp||c.pageUI.showPrdImgDetail||c.pageUI.showPrdComment||c.pageUI.showPrdOpt||c.pageUI.showOrder)&&(c.pageUI.sideNavOpenFlag=!1,c.pageUI.sideNavGuideOpenFlag=!1,c.pageUI.showShare=!1,c.pageUI.showHelp=!1,c.pageUI.showPrdImgDetail=!1,c.pageUI.showPrdComment=!1,c.pageUI.showPrdOpt=!1,c.pageUI.showOrder=!1,a=!0),a},ka.startAppTTS=function(a){c.pageUI.app.nowTTS=!0,h.startTTS(a)},ka.stopAppTTS=function(){c.pageUI.app.nowTTS&&(h.stopTTS(),c.pageUI.app.nowTTS=!1)},ka.startAppSTT=function(){c.pageUI.app.nowSTT=!0,h.startSTT(c.pageUI.app.soundFlag)},ka.stopAppSTT=function(){c.pageUI.app.nowSTT=!1,h.stopSTT(c.pageUI.app.soundFlag)},h.setIsSilentModeCallback(function(a){c.isSessionChk||(c.pageUI.app.soundFlag=a===!0||"true"==a?!1:!0),ja()}),h.getSilentMode(),h.setBackKeyCallback(W),h.setTTSEndCallback(function(){if(c.pageUI.app.nowTTS=!1,!c.pageUI.showPrdComment)if(c.soundEndData&&c.soundEndData.txt)ka.showMsg(c.soundEndData),c.soundEndData={};else{e.cancel(qa),qa=null,c.pageUI.showMsg.q=!1;var a=!1;null!=c.viewInfoTemp&&(c.findQuestionEqual(c.viewInfoTemp.txt)&&(a=!0,wa=!0),c.viewInfoTempMicCheck&&(a=!0),a&&(c.viewInfoTempMicCheck=!1,c.pageUI.inputMode="","keyboard"==c.pageUI.lastInputMode?c.actionInput(null,"reKeyBoard"):c.actionInput(null)))}}),c.findQuestionEqual=function(a){var b=!1;switch(a){case o.msg.needLoginYesNo.txt:case o.msg.prdOptShow.txt:case o.msg.orderDecideHelp.txt:case o.msg.couponDown.txt:case o.msg.useCloverShow.txt:case o.msg.useCloverShowMil.txt:case o.msg.mimiNoRegistQ.txt:case o.msg.saunMoreShow.txt:case o.msg.centerQnaYn.txt:case o.msg.styleOtherQue.txt:case o.msg.centerCounselingOtherTime.txt:case o.msg.centerTalkOtherTime.txt:case o.msg.centerCallOtherTime.txt:case o.msg.purchaseNone.txt:b=!0}return b},h.setSTTTextCallback(function(a){c.pageUI.micVoiceTxt=a,c.pageUI.activeVoice=!0}),h.setSTTEndCallback(function(a){c.pageUI.micVoiceTxt=a,c.pageUI.activeVoice=!1,a&&c.sendSemantic("mic",a),e(function(){c.pageUI.app.nowSTT=!1,c.pageUI.micVoiceTxt="듣고 있어요"},1500)}),h.setPermisionCallback(function(a,b,d){b&&(c.appObj.isIOS||c.appObj.isIpad?c.fileAttachOpen(a):c.createImageFile(a,d))}),c.createImageFile=function(a,b){var d=new Image;d.onload=function(){var b=document.createElement("canvas");b.width=d.width,b.height=d.height,b.getContext("2d").drawImage(d,0,0),b.toBlob(function(b){c.styleDetectFile(a,b)},"image/jpeg")},d.src="data:image/jpeg;base64,"+b},c.styleAppCheckAndCommand=function(a,b,d){"recom"==a?c.getStyleRecom(d):"open"==a&&(c.appObj.isIOS||c.appObj.isIpad?h.IOSCheckPermission("media"):h.IOSCheckPermission(b))},c.styleAppCheckShowAlert=function(){var a="사진을 찍고 원하는 스타일을<br/>말로 추천받고 싶으시다면<br>앱 업데이트를 해주세요.<br>지금 업데이트 하시겠어요?",b={label:{ok:"확인",cancel:"취소"},callback:function(a){a&&(c.appObj.isIOS||c.appObj.isIpad?location.href="http://itunes.apple.com/app/id376622474?mt=8":location.href="market://details?id=com.lotte")}};c.confirm_2016(a,b)},c.fileAttachOpen=function(a){"camera"==a?b.element("#fileAttachCamera").click():"media"==a&&b.element("#fileAttachMedia").click()},c.actionStyleClick=function(a){c.styleAppCheckAndCommand("recom",null,a),c.setGATag("음성명령어","스타일추천",null,"click")},c.styleDetectFile=function(a,b){var d,e,f=8,g=1e3*f*1e3;return b?d=b:"camera"==a?d=document.querySelector("#fileAttachCamera").files[0]:"media"==a&&(d=document.querySelector("#fileAttachMedia").files[0]),e=d.size,e>g?void ka.showMsg(o.msg.styleSizeFail,[f]):(c.pageLoading=!0,void Z(d,_))},c.uploadFileImage=function(a,b){var d=new FormData;d.append("file",b,"style.jpeg"),d.append("rote_code",a);var e="http://www.lotte.com/display/insertStyleRecoUploadImage.lotte";"camera"==c.pageUI.testCamera&&(c.pageUI.testCamera="",e="https://secure.lotte.com/display/insertStyleRecoUploadImage.lotte"),$.ajax({type:"post",data:d,async:!1,cache:!1,url:e,success:X,error:Y,contentType:!1,processData:!1})},c.getStyleRecom=function(a,d){c.pageLoading=!0;var e={};a&&a.img_url&&(e.image=a.img_url,c.pageUI.styleSelectedImageUrl=e.image),a&&a.style_recomm_cate_grp_cd&&(c.pageUI.styleSelectedImageCate=a.style_recomm_cate_grp_cd),a&&a.goods_no&&(e.goodsNo=a.goods_no,c.pageUI.styleSelectedGoodsNo=a.goods_no),c.pageUI.styleSelectedImageGen=a.style_gen_cd,e.screen="voiceCommerce",Q.detect(e,function(f){if(f.length>0){var g=f[0].category,h=Q.determineSex(f[0],a.style_gen_cd,a.style_recomm_cate_grp_cd,c.loginInfo.genSctCd),i={id:f[0].id,sex:h,cate:g,subcate:a.style_recomm_cate_grp_cd,sortCate:f[0].category,count:10,screen:"voiceCommerce"};c.pageUI.styleSelectedImageSortCate=f[0].category,e.goods_no&&(i.goodsNo=e.goods_no),f[0].sub_category.score>.2&&(i.sub_cate=f[0].sub_category.code),Q.search(i,function(a){c.pageLoading=!1;var d="",e=a;e.length>10&&(e.length=10),b.forEach(e,function(a,b){a.goodsNo&&(d+=a.goodsNo+",")}),ka.commandExec("getStyleList",{goodsNoList:d.slice(0,d.length-1),styleObj:{ctgName:f[0].ctgName}})},100)}else c.pageLoading=!1,d?ka.showMsg(o.msg.styleHasIconSearchFail):ka.showMsg(o.msg.styleSearchFail),c.setGATag("스타일추천","실패메시지노출",null,null)})},c.goStyleMore=function(a){var b={imageUrl:c.pageUI.styleSelectedImageUrl?c.pageUI.styleSelectedImageUrl:"",cate:c.pageUI.styleSelectedImageCate?c.pageUI.styleSelectedImageCate:"",sortcate:c.pageUI.styleSelectedImageSortCate?c.pageUI.styleSelectedImageSortCate:"",gen:c.pageUI.styleSelectedImageGen?c.pageUI.styleSelectedImageGen:"",goodsNo:c.pageUI.styleSelectedGoodsNo?c.pageUI.styleSelectedGoodsNo:""};g.goStyleView(b.imageUrl,b.cate,b.sortcate,b.gen,b.goodsNo),"clk"==a&&(c.setGATag("음성명령어","더보여줘",null,"click"),c.setVCAnalysis("더보여줘"))},C(aa,50),ka.shareDataSet=function(){var a={},b=ka.getCurProdInfo();return b&&(a.goodsNo=b.goods_no,a.goodsNm=b.goods_nm,a.shareImg=b.img_url),a};var la=null,ma=0,na=10;c.showAlertHide=!1,ka.showAlert=function(){c.pageUI.showAlert=!0,e(function(){c.showAlertHide=!0,e(function(){c.pageUI.showAlert=!1,c.showAlertHide=!1},500)},2500)},c.startVoiceGuide=function(){c.pageUI.curVoiceGuideIdx=0,c.voiceGuideActive=!0,c.pageUI.showMsg.guide=!0,la&&C.cancel(la),la=C(ca,500)},c.stopVoiceGuide=function(){c.pageUI.showMsg.guide=!1,C.cancel(la)},c.stateSelectorOpenCloseM=function(a){c.pageUI.stateSelectorViewClass=a},c.stateSelectorOpenClose=function(a){c.pageUI.stateSelectorViewClass=a,1==c.pageUI.stateSelectorViewClass?("situation_recommendation"==c.pageUI.state||"management_item_recommendation"==c.pageUI.state?c.setGATag("공통_추천","더보기",null,"click"):c.setGATag("키워드","더보기",null,"click"),c.setVCAnalysis("더보기")):("situation_recommendation"==c.pageUI.state||"management_item_recommendation"==c.pageUI.state?c.setGATag("공통_추천","닫기",null,"click"):c.setGATag("키워드","닫기",null,"click"),c.setVCAnalysis("닫기"))},ka.getCurProdInfo=function(){var a=null;return c.pageUI.prdList&&c.pageUI.curPrdSwiperIdx>-1&&(a=c.pageUI.prdList[c.pageUI.curPrdSwiperIdx]),a},ka.initProdOpt=function(){c.pageUI.optInfo={isOpt:!1,optType:"",goodsNo:null,prdOptStepCnt:0,prdOptInfo:[],prdOptList:[],curOptValArr:[],selectedOptItemInfo:null,selectedOptItemNo:null,curOptStep:0,curLayerOptValArr:[]}},ka.showOpt=function(a){var b=ka.getCurProdInfo();"Y"!=b.vic_ord_psb_yn?c.checkListState(c.pageUI.state,["cart"])?g.goPrdDetail(b.goods_no):"cart"==c.pageUI.state&&("Y"==b.smp_only_yn||"Y"==b.input_option_yn?g.goCart():(c.pageUI.optInfo.curOptStep=0,c.pageUI.optInfo.curLayerOptValArr=[],ka.getOpt(a,!0))):"cart"==c.pageUI.state&&"Y"==b.smpick_yn?g.goCart():(c.pageUI.optInfo.curOptStep=0,c.pageUI.optInfo.curLayerOptValArr=[],ka.getOpt(a,!0))},ka.getOpt=function(a,b,d,e){ka.allHideLayer();
var f=ka.getCurProdInfo();if(f&&f.goods_no){var g=f.goods_no;a?c.pageUI.optInfo.optType=a:c.pageUI.optInfo.optType="",c.pageUI.optInfo.goodsNo==g?ka.prdOptLoadComplete(b,d,e):(c.pageLoading=!0,n.getPrdOptInfo(g).then(function(a){if(c.pageUI.optInfo.isOpt=!1,c.pageUI.optInfo.prdOptStepCnt=0,c.pageUI.optInfo.prdOptInfo=[],c.pageUI.optInfo.prdOptList=[],a){var f=a.optSelectList,h=a.optItems;f&&f.length>0&&h&&h.length>0&&(c.pageUI.optInfo.isOpt=!0,c.pageUI.optInfo.prdOptStepCnt=f.length,c.pageUI.optInfo.prdOptInfo=f,c.pageUI.optInfo.prdOptList=h)}c.pageUI.optInfo.curOptValArr=[],c.pageUI.optInfo.goodsNo=g,ka.prdOptLoadComplete(b,d,e)})["catch"](function(){console.log("상품 옵션정보 오류")})["finally"](function(){c.pageLoading=!1}))}else console.log("현재 선택된 상품 번호 없음")},ka.chkNowStepOptSoldout=function(){var a=0,b=0,d="",e=c.pageUI.optInfo.curLayerOptValArr.length,f=null,g=ka.getCurProdInfo();if(c.pageUI.optInfo.prdOptInfo.length-1<e)return!1;for(a=0;a<c.pageUI.optInfo.curLayerOptValArr.length;a++)d+=c.pageUI.optInfo.curLayerOptValArr[a].item.optValCd+" x ";for(a=0;a<c.pageUI.optInfo.prdOptInfo[e].itemList.items.length;a++)for(f=new RegExp("^"+d+c.pageUI.optInfo.prdOptInfo[e].itemList.items[a].optValCd+"([^0-9]|$)"),c.pageUI.optInfo.prdOptInfo[e].itemList.items[a].isSoldout=!0,b=0;b<c.pageUI.optInfo.prdOptList.length;b++)if(f.exec(c.pageUI.optInfo.prdOptList[b].optValCd+"")){c.pageUI.optInfo.prdOptList[b].invQty>=g.min_lmt_qty?c.pageUI.optInfo.prdOptInfo[e].itemList.items[a].isSoldout=!1:c.pageUI.optInfo.prdOptInfo[e].itemList.items[a].isSoldout=!0;break}},ka.prdOptLoadComplete=function(a,b,d){if(c.pageUI.optInfo.prdOptInfo.length>0){if(!c.pageUI.optInfo.curOptValArr||0==c.pageUI.optInfo.curOptValArr.length){ka.chkNowStepOptSoldout();var e=ka.getCurProdInfo(),f=0,g=0,h=(c.pageUI.optInfo.prdOptList[0].optValCd+"").split(" x ");for(f=0;f<c.pageUI.optInfo.prdOptList.length;f++)if(parseInt(e.min_lmt_qty)<=c.pageUI.optInfo.prdOptList[f].invQty){h=(c.pageUI.optInfo.prdOptList[f].optValCd+"").split(" x ");break}for(f=0;f<c.pageUI.optInfo.prdOptInfo.length;f++)for(g=0;g<c.pageUI.optInfo.prdOptInfo[f].itemList.items.length;g++)if(h[f]==c.pageUI.optInfo.prdOptInfo[f].itemList.items[g].optValCd){c.pageUI.optInfo.curOptValArr.push({name:c.pageUI.optInfo.prdOptInfo[f].optNm,item:c.pageUI.optInfo.prdOptInfo[f].itemList.items[g]});break}ka.setSelectedProdOptItemInfo()}a&&(c.pageUI.optInfo.curOptStep=0,c.pageUI.showPrdOpt=!0,ka.showMsg(o.getMsgData("원하는 "+c.pageUI.optInfo.prdOptInfo[c.pageUI.optInfo.curOptStep].optNm+" 번호를 말해보세요","원하는 "+c.pageUI.optInfo.prdOptInfo[c.pageUI.optInfo.curOptStep].optNm+" 번호를 말해보세요","q"),null,!0)),d&&ka.addCartProgress()}else b?d&&ka.addCartProgress():ka.showMsg(o.msg.notInventory)},ka.chkOpt=function(){var a=ka.getCurProdInfo(),b=!1;return a?(a.option_yn&&"Y"==(a.option_yn+"").toUpperCase()||"Y"==a.input_option_yn)&&(b=!0):(c.pageUI.optInfo.selectedOptItemInfo=null,c.pageUI.optInfo.selectedOptItemNo=0),b},ka.setSelectedProdOptItemInfo=function(){var a="",b=0;if(c.pageUI.optInfo.curOptValArr&&c.pageUI.optInfo.curOptValArr.length>0){for(b=0;b<c.pageUI.optInfo.curOptValArr.length;b++)0!=b&&(a+=" x "),a+=c.pageUI.optInfo.curOptValArr[b].item.optValCd;for(b=0;b<c.pageUI.optInfo.prdOptList.length;b++)if(c.pageUI.optInfo.prdOptList[b].optValCd==a){c.pageUI.optInfo.selectedOptItemInfo=c.pageUI.optInfo.prdOptList[b],c.pageUI.optInfo.selectedOptItemNo=c.pageUI.optInfo.prdOptList[b].itemNo;break}}else console.error("선택된 옵션에 대한 매칭 옵션 없음")},ka.getProdDetailInfo=function(a){var b=ka.getCurProdInfo();b&&b.goods_no&&("Y"==b.vic_ord_psb_yn?(ka.getOpt(!1,!1,!0),c.pageLoading=!0,l.getPrdDetailListInfo(b.goods_no).then(function(a){c.pageUI.curPrdDetailInfo=a,c.pageUI.orderInfo.orderCnt=parseInt(b.min_lmt_qty)>0?parseInt(b.min_lmt_qty):1,K.setLateList(b.goods_no),ka.changeState("prod_detail")})["catch"](function(){ka.showMsg(o.msg.networkError),console.error("상품상세 정보 없음")})["finally"](function(){c.pageLoading=!1}),c.pageLoading=!1,l.getPrdDetailHtmlInfo(b.goods_no).then(function(a){c.pageUI.curPrdHtmlInfo=a})["catch"](function(){console.error("상품상세 Html 정보 없음")})["finally"](function(){c.pageLoading=!1})):(ka.showMsg(o.msg.notVoiceOrder),g.goPrdDetail(b.goods_no)))},ka.addCart=function(a){return"default"==a?void(ka.chkOpt()?ka.getOpt(!1,!1,!1,!0):ka.addCartProgress()):void(ka.chkOpt()?ka.showOpt("cart"):ka.addCartProgress())},ka.addCartProgress=function(){var a=ka.getCurProdInfo();c.pageLoading=!0,q.chkProdQty(a.goods_no,c.pageUI.optInfo.selectedOptItemNo).then(function(a){var b=ka.getCurProdInfo();parseInt(c.pageUI.orderInfo.orderCnt)<parseInt(b.min_lmt_qty)&&parseInt(b.min_lmt_qty)>0?c.pageUI.orderInfo.orderCnt=parseInt(b.min_lmt_qty):parseInt(c.pageUI.orderInfo.orderCnt)>parseInt(b.max_lmt_qty)&&parseInt(b.max_lmt_qty)>0&&(c.pageUI.orderInfo.orderCnt=parseInt(b.max_lmt_qty)),c.pageUI.optInfo.selectedOptItemNo||0===c.pageUI.optInfo.selectedOptItemNo||(c.pageUI.optInfo.selectedOptItemNo=0),c.pageLoading=!0,w.addCart({member_no:c.loginInfo.mbrNo,goods_no:b.goods_no,item_no:c.pageUI.optInfo.selectedOptItemNo,ord_qty:c.pageUI.orderInfo.orderCnt,goods_cmps_cd:b.goods_cmps_cd,voice:"Y",cart_page_yn:"N"}).then(function(a){c.pageUI.alertType="cart",ka.showAlert()})["catch"](function(a){console.error("장바구니 담기 실패"),a.response_code&&"00000"!=a.response_code&&a.response_msg&&""!=a.response_msg&&c.alert_2016("["+a.response_code+"] "+a.response_msg)})["finally"](function(){c.pageLoading=!1})})["catch"](function(){console.error("재고 없음"),ka.showMsg(o.msg.notInventory)})["finally"](function(){c.pageLoading=!1})},ka.addWish=function(){var a=ka.getCurProdInfo();c.pageLoading=!0,x.addWish({member_no:c.loginInfo.mbrNo,goods_no:a.goods_no}).then(function(a){"00000"==a?(c.pageUI.alertType="wish",ka.showAlert()):(c.pageUI.alertType="wish_duplicate",ka.showAlert())})["catch"](function(){ka.showMsg(o.msg.networkError),console.error("위시 담기 연동 실패")})["finally"](function(){c.pageLoading=!1})},ka.orderDecide=function(a,b,d){if(!c.loginInfo.isLogin||!c.basicInfo.member_info.et_mbr_dlvp_chk||!c.basicInfo.member_info.base_op_pay_chk)return!1;var e=ka.getCurProdInfo();return parseInt(c.pageUI.orderInfo.orderCnt)<parseInt(e.min_lmt_qty)&&parseInt(e.min_lmt_qty)>0?(c.pageUI.orderInfo.orderCnt=parseInt(e.min_lmt_qty),ka.showMsg(o.msg.errMinLmtQty,[parseInt(e.min_lmt_qty)]),!1):parseInt(c.pageUI.orderInfo.orderCnt)>parseInt(e.max_lmt_qty)&&parseInt(e.max_lmt_qty)>0?(c.pageUI.orderInfo.orderCnt=parseInt(e.max_lmt_qty),ka.showMsg(o.msg.errMxnLmtQty,[parseInt(e.max_lmt_qty)]),!1):(c.pageLoading=!0,void q.chkProdQty(e.goods_no,c.pageUI.optInfo.selectedOptItemNo).then(function(f){var g={member_nm:c.loginInfo.name,member_no:c.loginInfo.mbrNo,goods_no:e.goods_no,goods_cmps_cd:e.goods_cmps_cd};a&&b?(g.cart_sn=a,e.ord_qty!=c.pageUI.orderInfo.orderCnt?g.ord_qty=c.pageUI.orderInfo.orderCnt:g.ord_qty=e.ord_qty):a&&d?(g.cart_sn=a,e.item_no!=c.pageUI.optInfo.selectedOptItemNo?g.item_no=c.pageUI.optInfo.selectedOptItemNo:g.item_no=e.item_no):(g.item_no=c.pageUI.optInfo.selectedOptItemNo,g.ord_qty=c.pageUI.orderInfo.orderCnt),c.pageLoading=!0,r.getOrderDecide(g).then(function(a){c.pageUI.orderInfo.cart_sn=a.cart_sn?a.cart_sn:null,c.pageUI.orderInfo.deliver_info=a.deliver_info?a.deliver_info:null,c.pageUI.orderInfo.discount_amt=a.discount_amt?a.discount_amt:0,c.pageUI.orderInfo.discount_list=a.discount_list&&a.discount_list.items?a.discount_list.items:null,c.pageUI.orderInfo.goods_list=a.goods_list.items&&a.goods_list.items[0]?a.goods_list.items[0]:null,c.pageUI.orderInfo.pay_info=a.pay_info?a.pay_info:null,c.pageUI.orderInfo.total_amt=a.total_amt?a.total_amt:0,c.pageUI.orderInfo.total_price=a.total_price?a.total_price:0,c.pageUI.orderInfo.total_deli_amt=a.total_deli_amt?a.total_deli_amt:0,c.pageUI.orderInfo.cart_sn&&c.pageUI.orderInfo.deliver_info&&c.pageUI.orderInfo.goods_list&&c.pageUI.orderInfo.total_amt&&c.pageUI.orderInfo.total_price&&(ka.changeState("order"),c.pageUI.orderInfo.discount_amt>0?ka.showMsg(o.msg.orderDecideDiscount,[c.pageUI.orderInfo.discount_amt,c.pageUI.orderInfo.total_price]):ka.showMsg(o.msg.orderDecide),c.soundEndData=o.msg.orderDecideHelp,c.setGATag("샬롯질의","주문동의메시지노출",null,null),c.setVCAnalysis("주문동의메시지노출"))})["catch"](function(a){console.error("주문확정 정보 오류")})["finally"](function(){c.pageLoading=!1})})["catch"](function(a){a?console.error(a.inv_stat_cd,a.inv_stat_msg):console.error("재고 체크 오류")})["finally"](function(){c.pageLoading=!1}))},ka.order=function(){return c.loginInfo.isLogin&&c.basicInfo.member_info.et_mbr_dlvp_chk&&c.basicInfo.member_info.base_op_pay_chk?(ka.showMsg(o.msg.orderProgress),void("40"==c.basicInfo.member_info.pay_mean_cd?s.authLpayMerchant(c.basicInfo.member_info.onlCno,function(a){a?s.getLpayPaymentInfo(c.basicInfo.member_info.pay_card_rcgn_id,function(a){a?(c.basicInfo.member_info.fnCoNm=a.fnCoNm,c.basicInfo.member_info.pmtMthdAlias=a.pmtMthdAlias,da()):(console.error("결제 수단 확인 실패"),c.basicInfo.member_info.base_op_pay_chk=!1)}):(console.error("Lpay 인증 실패"),c.basicInfo.member_info.base_op_pay_chk=!1)}):da())):!1},c.talkOrderCallBack=function(a,d,e){function f(){h.hideHeader()}"0000"==a?(c.pageLoading=!0,t.getOrderComplete({member_no:c.loginInfo.mbrNo,ord_no:e}).then(function(a){c.pageUI.orderCompleteInfo.ord_no=a.ord_no?a.ord_no:null,c.pageUI.orderCompleteInfo.ord_no||(c.pageUI.orderCompleteInfo.ord_no=e),c.pageUI.orderCompleteInfo.saun_info=a.saun_info,c.pageUI.orderCompleteInfo.goods_list=a.goods_list&&a.goods_list.items&&a.goods_list.items[0]?a.goods_list.items[0]:null,c.pageUI.orderCompleteInfo.deliver_info=a.deliver_info?a.deliver_info:null,c.pageUI.orderCompleteInfo.total_amt=a.total_amt?a.total_amt:0,c.pageUI.orderCompleteInfo.discount_amt=a.discount_amt?a.discount_amt:0,c.pageUI.orderCompleteInfo.total_price=a.total_price?a.total_price:0,c.pageUI.orderCompleteInfo.send_due_code=a.send_due_code?a.send_due_code:null,c.pageUI.orderCompleteInfo.send_due_date=a.send_due_date?a.send_due_date:null,c.pageUI.orderCompleteInfo.send_due_month=a.send_due_month?a.send_due_month:null,c.pageUI.orderCompleteInfo.send_due_day=a.send_due_day?a.send_due_day:null,c.pageUI.orderCompleteInfo.send_due_week=a.send_due_week?a.send_due_week:null,c.pageUI.showOrder=!1,ka.changeState("order_complete");var b=z("number")(parseInt(c.pageUI.orderCompleteInfo.total_price))+"원에 결제가 완료되었어요.<br />",d=z("number")(parseInt(c.pageUI.orderCompleteInfo.total_price))+"원에 결제가 완료되었어요.";"01"==c.pageUI.orderCompleteInfo.send_due_code?(b+="<strong>"+c.pageUI.orderCompleteInfo.send_due_month+"월 "+c.pageUI.orderCompleteInfo.send_due_day+"일 도착 예정</strong>이며,<br />",d+=c.pageUI.orderCompleteInfo.send_due_month+"월 "+c.pageUI.orderCompleteInfo.send_due_day+"일 도착 예정이며,"):"02"==c.pageUI.orderCompleteInfo.send_due_code?(b+="<strong>"+c.pageUI.orderCompleteInfo.send_due_month+"월 "+c.pageUI.orderCompleteInfo.send_due_day+"일 발송 예정</strong>이며,<br />",d+=c.pageUI.orderCompleteInfo.send_due_month+"월 "+c.pageUI.orderCompleteInfo.send_due_day+"일 발송 예정이며,"):"03"==c.pageUI.orderCompleteInfo.send_due_code&&(b+="",d+=""),b+="자세한 주문정보는 주문배송조회에서 확인하실 수 있어요.",d+="자세한 주문정보는 주문배송조회에서 확인하실 수 있어요.",ka.showMsg(o.getMsgData(b,d,"top")),c.pageUI.orderCompleteInfo.saun_info.areadyEnter=null,"Y"==c.pageUI.orderCompleteInfo.saun_info.evt_txt_view_yn&&I.detailSaun({evt_no:c.pageUI.orderCompleteInfo.saun_info.evt_saun_no}).then(function(a){"Y"==a.areadyEnter||1==a.areadyEnter?c.pageUI.orderCompleteInfo.saun_info.areadyEnter="Y":(c.pageUI.orderCompleteInfo.saun_info.areadyEnter="N",("3"==c.pageUI.orderCompleteInfo.saun_info.evt_txt_gbn||"4"==c.pageUI.orderCompleteInfo.saun_info.evt_txt_gbn)&&(c.soundEndData=o.msg.saunMoreShow,c.setGATag("샬롯질의","구매사은질의메시지노출",null,null)))})["catch"](function(){console.log("구매사은 이벤트 상세 실패")})})["catch"](function(){console.log("결제 실패 - 결제정보 없음"),c.pageUI.showOrder=!1})["finally"](function(){c.pageLoading=!1})):(c.alert_2016("["+a+"] "+d),c.pageUI.showOrder=!1,b.element("#ordIframe").prop("src","")),f()},d.talkOrderCallBack=c.talkOrderCallBack,c.iptGuideActiveIdx=0,c.iptGuideHideIdx=-1;var oa=null,pa=3e3;ka.needLoginCommand=function(a,b){F.setSessionStorage("vcLastCommandFlag","Y"),b&&F.setSessionStorage("vcLastCommandData",b),g.goLogin(a)};var qa=null,ra=5e3;c.viewInfoTemp=null,c.viewInfoTempMicCheck=!1,ka.showMsg=function(a,d,f){if(a&&"mic"!=c.pageUI.inputMode&&(""==c.pageUI.inputMode||"q"!=a.position)){"q"==a.position||("top"==a.position?(c.pageUI.showMsg.guide=!1,c.pageUI.showMsg.home=!1):"home"==a.position&&(c.pageUI.showMsg.top=!1,c.pageUI.showMsg.guide=!1));var g=b.copy(a);if(d&&d.length>0){var i=0;for(i=0;i<d.length;i++){var j;j=Number(d[i])?z("number")(d[i]):d[i],g.txt=(g.txt+"").replace("{}",j),g.voice=(g.voice+"").replace("{}",j)}}switch(g.position){case"home":c.stopVoiceGuide(),c.pageUI.msg.home=g.txt,c.pageUI.showMsg.home=!0;break;case"top":c.pageUI.msg.top=g.txt,c.pageUI.stateHistory[c.pageUI.stateHistory.length-1].msgTop=g.txt,c.pageUI.showMsg.top=!0;break;case"q":c.pageUI.showMsg.q=!0,c.pageUI.inputMode="",c.pageUI.msg.q=g.txt,c.viewInfoTemp=g,f&&(c.viewInfoTempMicCheck=!0),qa&&(e.cancel(qa),qa=null),ga();break;case"voice":c.viewInfoTemp=g,f&&(c.viewInfoTempMicCheck=!0)}ka.stopAppTTS(),c.pageUI.app.soundFlag?(c.pageUI.inputMode="",e(function(){ka.startAppTTS(g.voice)},200)):qa=e(function(){h.TTSEndCallbackFunc()},ra),g.voice&&ka.showToast(g.voice)}},c.devToastMsg="",c.devToastMsgShowFlag=!1,ka.showToast=function(a){c.devToastMsg=a,c.devToastMsgShowFlag=!0,e(function(){c.devToastMsgShowFlag=!1},3e3)},ka.semanticMsgShow=function(a){a.topScreenMent?ka.showMsg(o.getMsgData(a.topScreenMent,a.basicVoiceMent,"top")):a.queryMent?ka.showMsg(o.getMsgData(a.queryMent,a.basicVoiceMent,"q")):a.homeScreenMent&&ka.showMsg(o.getMsgData(a.homeScreenMent,a.basicVoiceMent,"home"))};var sa=!1,ta=!1,ua=!1,va=!1;c.styleOtherQue=!1;var wa=!1;c.prodListQuantity=-1,c.prdSwiperMoveCommand="",c.listClickState=!1,ka.commandExec=function(a,m,n,q){switch(b.element(d).off("scroll.eventDetail"),ka.autoSlideDestroy(),c.pageUI.isChangeCommandState=!1,c.listClickState?c.pageUI.isChangeCommandState=!1:("getCart"==a||"getWish"==a||"getOftenList"==a||"getEventApplicationDetail"==a)&&(c.pageUI.curPage=1,c.pageUI.isChangeCommandState=!0),c.listClickState=!1,a){case"talk":case"prohibit":if("talk"==a?c.setGATag("공통_일상대화","일상대화",n,q):c.setGATag("공통_금칙어","금칙어",n,q),m&&(m.homeScreenMent||m.queryMent)){ka.changeState("home");var r=m.homeScreenMent||m.queryMent,s="home";!m.homeScreenMent&&m.queryMent&&(s="q");var t=r.replace(/(\\n|\n)/g,"<br />"),u=m.basicVoiceMent.replace(/(\\n|\n)/g,"");ka.showMsg(o.getMsgData(t,u,s))}break;case"goLogin":$(".myinfo_side_wrap").hasClass("open")?c.setGATag("햄버거_공통","로그인",null,"click"):c.setGATag("공통_로그인","로그인",n,q),c.loginInfo.isLogin?ka.showMsg(o.msg.nowLogin):g.goLogin();break;case"goChangePayment":c.loginInfo.isLogin?c.setGATag("공통_정보변경","결제수단 변경",n,q):(ka.showMsg(o.msg.needLogin),c.setGATag("햄버거_등록","결제수단",n,q)),g.go(a,c.loginInfo.isLogin);break;case"actionChange":"order_inquiry"==c.pageUI.state&&ka.showMsg(o.msg.purchaseChangeLike),c.setGATag("음성명령어","변경해줘",n,q);break;case"actionChangeDelivery":if("order_inquiry"==c.pageUI.state){if(!m||!m.commandNumber){ka.showMsg(o.msg.purchaseDeliverLike);break}var w=m.commandNumber;if(c.pageUI.purchaseList.length>=w){w-=1,"Y"==c.pageUI.purchaseList[w].dlv_change_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["배송지 변경"]);break}if(c.pageUI.purchaseList.length<w){ka.showMsg(o.msg.unknown);break}}else c.loginInfo.isLogin?c.setGATag("공통_정보변경","배송지 변경",n,q):(c.setGATag("햄버거_등록","배송지",n,q),ka.showMsg(o.msg.needLogin)),g.go(a,c.loginInfo.isLogin);break;case"goPurchaseList":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","주문배송조회 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goCoupon":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","쿠폰 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goPoint":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","엘포인트 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goLmoney":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","엘머니 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goDeposit":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","보관금 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goClover":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","클로버 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goCloverUseInfo":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),("voice"==q||"keyboard"==q)&&c.setGATag("자세히","클로버이용안내",n,q),g.go(a,c.loginInfo.isLogin);break;case"goWish":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","위시리스트 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goEvent":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","이벤트응모내역 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goPurchaseGiftList":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","구매사은 신청내역보기",n,q),g.go(a,c.loginInfo.isLogin);break;case"goMembership":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","멤버십 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goCenterQue":c.loginInfo.isLogin?ka.showMsg(o.msg.centerCallQue):ka.showMsg(o.msg.needLogin),c.setGATag("공통_고객센터","1:1문의 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goTalkAdvice":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_고객센터","톡상담 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goMimitoutou":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","미미뚜뚜 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goMyLotte":c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_이동","마이롯데 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goCart":c.setGATag("공통_이동","장바구니 이동",n,q),g.go(a);break;case"goRecently":c.setGATag("공통_이동","최근본상품 이동",n,q),g.go(a);break;case"goMallMimitoutou":c.setGATag("공통_이동","미미뚜뚜 이동",n,q),g.go(a);break;case"goMallSpecialTasty":c.setGATag("공통_이동","특별한맛남이동",n,q),g.go(a);break;case"goMallStyleshop":c.setGATag("공통_이동","스타일샵 이동",n,q),g.go(a);break;case"goMallLottebrand":c.setGATag("공통_이동","롯데브랜드관 이동",n,q),g.go(a);break;case"goMallKshop":c.setGATag("공통_이동","케이샵 이동",n,q),g.go(a);break;case"goMallScalp":c.setGATag("공통_이동","두피전문관 이동",n,q),g.go(a);break;case"goMallTVoutlet":c.setGATag("공통_이동","tv아울렛 이동",n,q),g.go(a);break;case"goMallBook":c.setGATag("공통_이동","도서 이동",n,q),g.go(a);break;case"goMallTenbyten":c.setGATag("공통_이동","텐바이텐 이동",n,q),g.go(a);break;case"goMallVine":c.setGATag("공통_이동","바인 이동",n,q),g.go(a);break;case"goMain":c.setGATag("공통_이동","홈 이동",n,q),g.go(a);break;case"goMainBest":c.setGATag("공통_이동","베스트 이동",n,q),g.go(a);break;case"goMainGift":c.setGATag("공통_이동","기프트 이동",n,q),g.go(a);break;case"goMainEvent":c.setGATag("공통_이동","이벤트쿠폰 이동",n,q),g.go(a);break;case"goDirectAttend":c.setGATag("공통_이동","출석체크 이동",n,q),g.go(a);break;case"goPurchaseGift":c.setGATag("공통_이동","구매사은 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goCiritOut":c.setGATag("공통_이동","상품평 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goInqList":c.setGATag("공통_이동","상품문의내역 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goInquire":c.setGATag("공통_이동","1:1문의답변 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goPresent":c.setGATag("공통_이동","선물함 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goExchange":c.setGATag("공통_이동","교환권 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goSmartPay":c.setGATag("공통_이동","스마트페이 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"goReceiptList":c.setGATag("공통_이동","영수증 이벤트 이동",n,q),g.go(a);break;case"goFrequentlyPurchaseProduct":c.setGATag("공통_이동","자주구매 이동",n,q),g.go(a,c.loginInfo.isLogin);break;case"actionHelp":ka.loadChangehelp({actionHelp:"open"},n,q);break;case"actionChangeMyInfo":c.pageUI.sideNavOpenFlag=!0,ka.showMsg(o.msg.changeMyInfo),c.setGATag("공통_정보변경","내정보 변경",n,q);break;case"actionBack":"home"==c.pageUI.state?(c.setGATag("음성명령어","이전",n,q),ka.commandExec("actionFirst")):"cart"==c.pageUI.state||"wish"==c.pageUI.state||"purchase_frequently"==c.pageUI.state?c.pageUI.curPage>1?c.swipeListPrev():W():"customer_center"==c.pageUI.state?(c.setGATag("음성명령어","이전",n,q),ka.commandExec("actionFirst")):(c.setGATag("음성명령어","이전",n,q),W());break;case"actionMore":if(c.pageUI.stateSelectorViewInfo&&c.pageUI.stateSelector.length>0&&0==c.pageUI.stateSelectorViewClass){c.stateSelectorOpenCloseM(!0),"situation_recommendation"==c.pageUI.state||"management_item_recommendation"==c.pageUI.state?c.setGATag("공통_추천","더보기",n,q):c.setGATag("키워드","더보기",n,q);break}if(c.checkListState(c.pageUI.state))"style_recommendation"!=c.pageUI.state&&c.pageUI.prdList.length-1==c.pageUI.curPrdSwiperIdx?"wish"==c.pageUI.state||"cart"==c.pageUI.state||"purchase_frequently"==c.pageUI.state?ka.commandExec("actionNext"):"cart"==c.pageUI.state||"wish"==c.pageUI.state||"purchase_frequently"==c.pageUI.state?ka.showMsg(o.msg.prdListEndList):ka.showMsg(o.msg.prdListEnd):ka.startAutoSlide("list");else if("prod_detail"==c.pageUI.state){var x=b.element(d).scrollTop()+b.element(d).height();b.element("html, body").stop().animate({scrollTop:x},300,"swing")}else c.checkListStateVertical(c.pageUI.state)&&ka.startAutoSlide("vertical");c.setGATag("음성명령어","더보여줘",n,q);break;case"actionNext":if("home"==c.pageUI.state)c.pageUI.showHotKeyword=!1,c.pageUI.showMsg.top=!1,c.pageUI.showMsg.guide=!0,c.pageUI.showMsg.home=!1,ka.showMsg(o.msg.homeMore),c.setGATag("음성명령어","다음",n,q);else if(c.checkListState(c.pageUI.state))c.pageUI.prdList.length-1>c.pageUI.curPrdSwiperIdx?(c.prdSwiperCtrl.moveIndex(c.pageUI.curPrdSwiperIdx+1),c.setGATag("음성명령어","다음",E.setDigit(c.pageUI.curPrdSwiperIdx+1),q)):c.pageUI.curPage<c.getTotalRowPerPage()?c.swipeListNext():("cart"==c.pageUI.state||"wish"==c.pageUI.state||"purchase_frequently"==c.pageUI.state?ka.showMsg(o.msg.prdListEndList):ka.showMsg(o.msg.prdListEnd),c.setGATag("음성명령어","다음",E.setDigit(c.pageUI.curPrdSwiperIdx+1),q));else if("prod_detail"==c.pageUI.state){var x=b.element(d).scrollTop()+b.element(d).height();b.element("html, body").stop().animate({scrollTop:x},300,"swing"),c.setGATag("음성명령어","다음",n,q)}else"order"==c.pageUI.state||"order_complete"==c.pageUI.state?c.setGATag("음성명령어","다음",n,q):c.checkListStateVertical(c.pageUI.state)&&(ka.autoSlideRun("vertical"),c.setGATag("음성명령어","다음",n,q));break;case"actionFirst":"home"==c.pageUI.state?(0==c.pageUI.showHotKeyword&&ka.showMsg(o.msg.isHome),c.pageUI.showHotKeyword=!1,c.pageUI.showMsg.top=!1,c.pageUI.showMsg.guide=!0,c.pageUI.showMsg.home=!1,c.setGATag("음성명령어","처음으로",n,q)):(c.pageUI.showMsg.top=!1,c.setGATag("음성명령어","처음으로",n,q),ka.changeState("home",{guideFlag:!0},!0));break;case"actionUp":"prod_detail"==c.pageUI.state?b.element("html, body").stop().animate({scrollTop:0},300,"swing"):c.checkListStateVertical(c.pageUI.state)&&ka.autoSlideRun("vertical","up"),c.setGATag("음성명령어","위로",n,q);break;case"actionDown":if("prod_detail"==c.pageUI.state){var x=b.element(d).scrollTop()+b.element(d).height();b.element("html, body").stop().animate({scrollTop:x},300,"swing")}else c.checkListStateVertical(c.pageUI.state)&&ka.autoSlideRun("vertical","down");c.setGATag("음성명령어","아래로",n,q);break;case"actionClose":if(c.pageUI.showPrdOpt&&c.setGATag("옵션레이어","닫기",n,q),c.pageUI.showShare&&("voice"==q||"keyboard"==q)&&c.setGATag("공유레이어","닫기",n,q),!ka.chkShowLayer()){if(c.pageUI.stateSelectorViewInfo&&c.pageUI.stateSelectorViewClass){c.stateSelectorOpenCloseM(!1),"situation_recommendation"==c.pageUI.state||"management_item_recommendation"==c.pageUI.state?c.setGATag("공통_추천","닫기",n,q):c.setGATag("키워드","닫기",n,q);break}c.setGATag("음성명령어","닫기",n,q),c.exit()}break;case"actionUnknown":ka.showMsg(o.msg.unknown),c.setGATag("음성명령어","의미분석실패",n,q);break;case"actionOrder":case"goPayment":if("home"==c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}var B=ka.getCurProdInfo(),C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1,D=m&&m.commandQuantity?parseInt(m.commandQuantity):0,F=!1;if(D>=1){if("order"==c.pageUI.state){c.pageUI.orderInfo.orderCnt=D,B.cart_sn?ka.orderDecide(B.cart_sn,!0):ka.orderDecide(),c.setGATag("음성명령어","수량 변경 주문",n,q);break}F=!0,c.pageUI.orderInfo.orderCnt=D,c.setGATag("음성명령어","수량 변경 주문",n,q)}else c.prodListQuantity>0?c.pageUI.orderInfo.orderCnt=c.prodListQuantity:c.pageUI.orderInfo.orderCnt=parseInt(B.min_lmt_qty);if(c.pageUI.orderInfo.orderCnt<parseInt(B.min_lmt_qty)){ka.showMsg(o.msg.errMinLmtQty,[parseInt(B.min_lmt_qty)]),c.pageUI.orderInfo.orderCnt=parseInt(B.min_lmt_qty);break}if(c.pageUI.orderInfo.orderCnt>parseInt(B.max_lmt_qty)){ka.showMsg(o.msg.errMxnLmtQty,[parseInt(B.max_lmt_qty)]),c.pageUI.orderInfo.orderCnt=parseInt(B.min_lmt_qty);break}if(c.checkListState(c.pageUI.state))if(C>-1&&c.pageUI.prdList.length>C&&(c.pageUI.curPrdSwiperIdx=C,c.prdSwiperCtrl.moveSpeedIndex(C,10),B=ka.getCurProdInfo()),"cart"==c.pageUI.state||"purchase_frequently"==c.pageUI.state)if("Y"==B.vic_ord_psb_yn){if(ha()){if(c.pageUI.optInfo.selectedOptItemNo=B.item_no,ka.chkOpt()&&B.goods_option){c.pageUI.optInfo.curOptValArr=[];var G=B.goods_option,Q=[],S=null,T=0;for("Y"==B.input_option_yn&&B.goods_input_option&&(G+=", "+B.goods_input_option),Q=(G+"").split(", "),T=0;T<Q.length;T++)S=null,S=(Q[T]+"").split(" : "),2==S.length&&c.pageUI.optInfo.curOptValArr.push({name:S[0],item:{optValue:S[1]}})}!F&&B.ord_qty&&(c.pageUI.orderInfo.orderCnt=B.ord_qty),B.cart_sn&&"Y"==B.smpick_yn?F?ia(B):(g.voiceUnableOrder(B.cart_sn),ka.showMsg(o.msg.notVoiceOrder)):ka.orderDecide(B.cart_sn,F)}}else"Y"!=B.m_sale_possible_yn?ka.showMsg(o.msg.notMobileOrder):B.cart_sn?F?ia(B):(ka.showMsg(o.msg.notVoiceOrder),g.voiceUnableOrder(B.cart_sn)):(ka.showMsg(o.msg.notVoiceOrder),g.goPrdDetail(B.goods_no));else"Y"==B.vic_ord_psb_yn?ha()&&(ka.chkOpt()?ka.showOpt("order"):ka.orderDecide()):(ka.showMsg(o.msg.notVoiceOrder),g.goPrdDetail(B.goods_no));else"prod_detail"==c.pageUI.state?ha()&&ka.orderDecide():"order"==c.pageUI.state&&ha()&&ka.order();c.checkListState(c.pageUI.state)?c.setGATag("유닛노출명령어","주문해줘",n,q):"prod_detail"==c.pageUI.state&&c.setGATag("상품상세노출명령어","주문해줘",n,q);break;case"actionDetail":if(c.checkListState(c.pageUI.state,["order_inquiry"])){var C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1;C>-1&&c.pageUI.prdList.length>C&&(c.pageUI.curPrdSwiperIdx=C,c.prdSwiperCtrl.moveSpeedIndex(C,10),B=c.VCCtrl.getCurProdInfo()),ka.getProdDetailInfo()}else if("prod_detail"==c.pageUI.state){var U=b.element("#prodDescription").offset().top-b.element("header").outerHeight();b.element("html, body").stop().animate({scrollTop:U},300,"swing"),c.setGATag("음성명령어","자세히",n,q)}else if("order_inquiry"==c.pageUI.state)m&&m.commandNumber?ka.commandExec("getOrderDetailView",{commandNumber:m.commandNumber}):ka.showMsg(o.msg.purchaseDetailLike),c.setGATag("주문배송조회상세이동","자세히",n,q);else if("event"==c.pageUI.state){if(m&&m.commandNumber){var V=c.pageUI.eventListInfo[m.commandNumber-1];c.eventDetail("mic",V.linkUrl,V.isOutLink)}c.setGATag("이벤트","자세히",n,q)}else if("purchase_gift"==c.pageUI.state){if(m&&m.commandNumber){var V=c.pageUI.saunListInfo[m.commandNumber-1];c.saunDetail("mic",V.evtNo)}"list"!=c.pageUI.saunListInfoMyType?c.setGATag("구매사은신청완료","자세히",n,q,"purchase_gift_myList"):c.setGATag("구매사은진행중","자세히",n,q)}else c.setGATag("음성명령어","자세히",n,q);break;case"actionLPointDetail":case"actionLMoneyDetail":case"actionDepositDetail":case"actionCloverDetail":"point"==c.pageUI.state&&("actionLPointDetail"==a?(c.setGATag("자세히","엘포인트",n,q),d.location.href=f.pointInfoUrl+"?"+c.baseParam+"&point_div=lt_point&tclick=m_mylayer_ltmoney"):"actionLMoneyDetail"==a?(c.setGATag("자세히","엘머니",n,q),d.location.href=f.pointInfoUrl+"?"+c.baseParam+"&point_div=l_point&tclick=m_mylayer_lmoney"):"actionDepositDetail"==a?(c.setGATag("자세히","보관금",n,q),d.location.href=f.pointInfoUrl+"?"+c.baseParam+"&point_div=deposit&tclick=m_mylayer_deposit"):"actionCloverDetail"==a&&(c.setGATag("자세히","클로버",n,q),d.location.href=f.cloverUrl+"?"+c.baseParam+"&tclick=m_DC_clover_Clk_Btn_01"));break;case"actionCancel":if("order_inquiry"==c.pageUI.state)if(m&&m.commandNumber){if(c.pageUI.purchaseList.length<m.commandNumber){ka.showMsg(o.msg.unknown),c.setGATag("음성명령어","취소해줘",n,q);break}var X=c.pageUI.purchaseList[m.commandNumber-1];if("Y"!=X.cancel_psb_yn){ka.showMsg(o.msg.purchaseSelectNone,["취소"]),c.setGATag("음성명령어","취소해줘",n,q);break}ka.commandExec("getOrderDetailView",{commndOrdNo:X.ord_no})}else ka.showMsg(o.msg.purchaseCancleLike);c.setGATag("음성명령어","취소해줘",n,q);break;case"actionAddWish":if(c.checkListState(c.pageUI.state,["wish"])){if(c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}var C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1;C>-1&&c.pageUI.prdList.length>C&&(c.pageUI.curPrdSwiperIdx=C,c.prdSwiperCtrl.moveSpeedIndex(C,10));var B=ka.getCurProdInfo();"Y"==B.vic_ord_psb_yn?c.loginInfo.isLogin?ka.addWish():(ta=!0,ka.showMsg(o.msg.needLoginYesNo)):c.loginInfo.isLogin?"Y"!=B.m_sale_possible_yn?ka.showMsg(o.msg.notMobileOrder):"Y"==B.limit_age_yn?"prod_list"==c.pageUI.state?g.goPrdDetail(B.goods_no):"cart"==c.pageUI.state&&ka.addWish():"Y"==B.gfct_yn&&c.loginInfo.isSimple?ka.showMsg(o.msg.notSimpleMemberCartWish):ka.addWish():(ta=!0,ka.showMsg(o.msg.needLoginYesNo))}else if("wish"==c.pageUI.state){if(c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}c.pageUI.alertType="wish_duplicate",ka.showAlert(),ka.showMsg(o.msg.alreadyWish)}else"prod_detail"==c.pageUI.state&&(c.loginInfo.isLogin?ka.addWish():(ta=!0,ka.showMsg(o.msg.needLoginYesNo)));c.setGATag("음성명령어","위시리스트 담기",n,q);break;case"actionAddCart":if(c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}var B=ka.getCurProdInfo(),C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1,D=m&&m.commandQuantity?parseInt(m.commandQuantity):0,F=!1;if(D>=1?(F=!0,c.pageUI.orderInfo.orderCnt=D):c.prodListQuantity>0?c.pageUI.orderInfo.orderCnt=c.prodListQuantity:c.pageUI.orderInfo.orderCnt=parseInt(B.min_lmt_qty),c.pageUI.orderInfo.orderCnt<parseInt(B.min_lmt_qty)){ka.showMsg(o.msg.errMinLmtQty,[parseInt(B.min_lmt_qty)]),c.pageUI.orderInfo.orderCnt=parseInt(B.min_lmt_qty);break}if(c.pageUI.orderInfo.orderCnt>parseInt(B.max_lmt_qty)){ka.showMsg(o.msg.errMxnLmtQty,[parseInt(B.max_lmt_qty)]),c.pageUI.orderInfo.orderCnt=parseInt(B.min_lmt_qty);break}c.checkListState(c.pageUI.state,["cart"])?(C>-1&&c.pageUI.prdList.length>C&&(c.pageUI.curPrdSwiperIdx=C,c.prdSwiperCtrl.moveSpeedIndex(C,10)),"Y"==B.vic_ord_psb_yn?ka.addCart("default"):"Y"!=B.m_sale_possible_yn||"Y"==B.smp_only_yn||"Y"==B.rental_yn||"Y"==B.limit_age_yn||"Y"==B.sale_promotion_yn||"Y"==B.input_option_yn?(ka.showMsg(o.msg.notVoiceCart),g.goPrdDetail(B.goods_no)):"Y"==B.gfct_yn?c.loginInfo.isLogin?c.loginInfo.isSimple?ka.showMsg(o.msg.notSimpleMemberCartWish):ka.addCart("default"):(ua=!0,ka.showMsg(o.msg.needLoginYesNo)):ka.addCart("default")):"cart"==c.pageUI.state?(c.pageUI.alertType="cart_duplicate",ka.showAlert()):"prod_detail"==c.pageUI.state&&ka.addCartProgress(),c.checkListState(c.pageUI.state)?c.setGATag("유닛노출명령어","찜",n,q):"prod_detail"==c.pageUI.state&&c.setGATag("상품상세노출명령어","찜",n,q);break;case"actionShare":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}var C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1;C>-1&&c.pageUI.prdList.length>C&&"prod_detail"!=c.pageUI.state&&(c.pageUI.curPrdSwiperIdx=C,c.prdSwiperCtrl.moveSpeedIndex(C,10),B=c.VCCtrl.getCurProdInfo()),ka.allHideLayer(),c.pageUI.showShare=!0,c.checkListState(c.pageUI.state)?c.setGATag("유닛노출명령어","공유",n,q):"prod_detail"==c.pageUI.state&&("mic"==q||"keyboard"==q?c.setGATag("음성명령어","공유",n,q):c.setGATag("공유레이어","공유",n,q));break;case"actionShareKakao":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}v.sendAppShare(ka.shareDataSet(),"kakaotalk"),"click"==q?(c.setGATag("공유레이어","카카오톡",n,q),c.setVCAnalysis("카카오톡")):c.setGATag("SNS공유함께발화","카카오톡",n,q);break;case"actionShareKaKaoStory":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){
ka.showMsg(o.msg.unknown);break}v.sendAppShare(ka.shareDataSet(),"kakaostory"),"click"==q?(c.setGATag("공유레이어","카카오스토리",n,q),c.setVCAnalysis("카카오스토리")):c.setGATag("SNS공유함께발화","카카오스토리",n,q);break;case"actionShareTwitter":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}v.sendAppShare(ka.shareDataSet(),"twitter"),"click"==q?(c.setGATag("공유레이어","트위터",n,q),c.setVCAnalysis("트위터")):c.setGATag("SNS공유함께발화","트위터",n,q);break;case"actionShareSMS":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}v.sendAppShare(ka.shareDataSet(),"sms"),"click"==q?(c.setGATag("공유레이어","문자",n,q),c.setVCAnalysis("문자")):c.setGATag("SNS공유함께발화","문자",n,q);break;case"actionShareFacebook":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}v.sendAppShare(ka.shareDataSet(),"facebook"),"click"==q?(c.setGATag("공유레이어","페이스북",n,q),c.setVCAnalysis("페이스북")):c.setGATag("SNS공유함께발화","페이스북",n,q);break;case"actionShareURL":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}v.sendAppShare(ka.shareDataSet(),"url_copy_voice"),c.pageUI.alertType="copy",ka.showAlert(),"click"==q?(c.setGATag("공유레이어","url복사",n,q),c.setVCAnalysis("url복사")):c.setGATag("SNS공유함께발화","url복사",n,q);break;case"actionProdImg":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}ka.allHideLayer();var Y=ka.getCurProdInfo();c.pageLoading=!0,l.getProdImgInfo(Y.goods_no).then(function(a){a&&a.length>0?(c.pageUI.prodImgInfo=a,c.pageUI.showPrdImgDetail=!0,b.element(".img_layer_wrap .pop_layer .img_area").scrollTop(0)):console.error("상품이미지 정보 없음")})["catch"](function(){console.error("상품 이미지 정보 로드 오류")})["finally"](function(){c.pageLoading=!1}),c.setGATag("음성명령어","상품이미지보여줘",n,q);break;case"actionProdComment":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state||c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}if(c.checkListState(c.pageUI.state)||"prod_detail"==c.pageUI.state){var Y=ka.getCurProdInfo();if(c.checkListState(c.pageUI.state)){var C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1;C>-1&&c.pageUI.prdList.length>C&&(c.pageUI.curPrdSwiperIdx=C,c.prdSwiperCtrl.moveSpeedIndex(C,100),Y=ka.getCurProdInfo())}Y&&Y.goods_no&&(Y.pmg_gdas_cnt>0?(c.pageUI.prodCommentPageIndex=1,c.pageLoading=!0,p.getProdComment(Y.goods_no,c.pageUI.prodCommentPageIndex).then(function(a){c.pageUI.prodComment=a,ka.allHideLayer(),c.pageUI.starScoreOpen=!0,c.pageUI.customerSatisOpen=!0,c.pageUI.showPrdComment=!0,ka.showMsg(o.msg.prdComment)})["catch"](function(){console.error("상품평 정보 없음."),ka.showMsg(o.msg.notPrdComment)})["finally"](function(){c.pageLoading=!1})):ka.showMsg(o.msg.notPrdComment))}c.setGATag("음성명령어","상품평 보여줘",n,q);break;case"actionProdOptShow":if(c.checkListState(c.pageUI.state)||"prod_detail"==c.pageUI.state){if(c.checkListState(c.pageUI.state)){var B,C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1;C>-1&&c.pageUI.prdList.length>C&&(c.pageUI.curPrdSwiperIdx=C,c.prdSwiperCtrl.moveSpeedIndex(C,10),B=c.VCCtrl.getCurProdInfo())}ka.chkOpt()?ka.showOpt():c.pageUI.prdList.length<1?ka.showMsg(o.msg.unknown):ka.showMsg(o.msg.notPrdOption),c.setGATag("음성명령어","옵션 보여줘",n,q)}break;case"actionProdOptChange":if("prod_detail"==c.pageUI.state)ka.chkOpt()?(ka.showOpt(),c.setGATag("상품상세노출명령어","옵션 변경해줘",n,q)):ka.showMsg(o.msg.notPrdOption);else if(c.checkListState(c.pageUI.state,["cart","purchase_frequently"]))ka.chkOpt()?(sa=!0,ka.showMsg(o.msg.prdOptShow)):c.pageUI.prdList.length<1?ka.showMsg(o.msg.unknown):ka.showMsg(o.msg.notPrdOption),c.setGATag("음성명령어","옵션 변경해줘",n,q);else if("cart"==c.pageUI.state||"purchase_frequently"==c.pageUI.state)ka.chkOpt()?ka.showOpt():c.pageUI.prdList.length<1?ka.showMsg(o.msg.unknown):ka.showMsg(o.msg.notPrdOption),c.setGATag("음성명령어","옵션 변경해줘",n,q);else if("order"==c.pageUI.state)ka.chkOpt()?ka.showOpt("order"):ka.showMsg(o.msg.notPrdOption),c.setGATag("음성명령어","옵션 변경해줘",n,q);else if("home"==c.pageUI.state)ka.showMsg(o.msg.unknown),c.setGATag("음성명령어","옵션 변경해줘",n,q);else if("order_inquiry"==c.pageUI.state)if(m&&m.commandNumber){var w=m.commandNumber;c.pageUI.purchaseList.length>=w?(w-=1,"Y"==c.pageUI.purchaseList[w].opt_change_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["옵션 변경"])):c.pageUI.purchaseList.length<w&&ka.showMsg(o.msg.unknown)}else ka.showMsg(o.msg.purchaseOptionLike);break;case"actionYesNo":if(!wa)break;var Z=m?"Y"==(m.commandVal+"").toUpperCase():!1;if((c.checkListState(c.pageUI.state,["cart"])||"prod_detail"==c.pageUI.state)&&Z&&sa)sa=!1,ka.chkOpt()?ka.showOpt():ka.showMsg(o.msg.notPrdOption);else if("cart"==c.pageUI.state&&Z&&sa){sa=!1;var Y=ka.getCurProdInfo();"Y"==Y.limit_age_yn||"Y"==Y.input_option_yn||"Y"==Y.smpick_yn?(ka.showMsg(o.msg.notVoiceCart),g.goPrdDetail(Y.goods_no)):"Y"==Y.gfct_yn?ka.showMsg(o.msg.notSimpleMemberCartWish):ka.showOpt()}else(c.checkListState(c.pageUI.state,["wish"])||"prod_detail"==c.pageUI.state)&&Z&&ta?(ta=!1,ka.needLoginCommand("actionAddWish")):c.checkListState(c.pageUI.state,["cart"])&&Z&&ua?(ua=!1,ka.needLoginCommand("actionAddCart")):"order"==c.pageUI.state&&1==Z?(c.setGATag("샬롯질의","주문동의",n,q),c.setVCAnalysis("주문동의"),ka.order()):"order"==c.pageUI.state&&0==Z?(c.setGATag("샬롯질의","주문동의거부",n,q),c.setVCAnalysis("주문동의거부")):"coupon"==c.pageUI.state&&1==Z?(c.setGATag("샬롯질의","쿠폰동의",n,q),g.go("goMembership",c.loginInfo.isLogin)):"coupon"==c.pageUI.state&&0==Z?c.setGATag("샬롯질의","쿠폰거부",n,q):"point"==c.pageUI.state&&1==Z?(c.setGATag("샬롯질의","클로버동의",n,q),g.go("goDirectAttend")):"point"==c.pageUI.state&&0==Z?c.setGATag("샬롯질의","클로버거부",n,q):"customer_center"==c.pageUI.state&&"customer"==c.pageUI.centerKind&&1==Z?(c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("샬롯질의","1:1문의이동동의",n,q,"customer_center_fail"),g.go("goCenterQue",c.loginInfo.isLogin)):"customer_center"==c.pageUI.state&&"customer"==c.pageUI.centerKind&&0==Z?(ka.showMsg(o.msg.centerUseQna),c.setGATag("샬롯질의","1:1문의이동거부",n,q,"customer_center_fail")):"customer_center"==c.pageUI.state&&"talk"==c.pageUI.centerKind&&1==Z?(c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("샬롯질의","톡상담이동동의",n,q,"customer_center_fail"),g.go("goTalkAdvice",c.loginInfo.isLogin)):"customer_center"==c.pageUI.state&&"talk"==c.pageUI.centerKind&&0==Z?(ka.showMsg(o.msg.centerTalkQna),c.setGATag("샬롯질의","톡상담이동거부",n,q,"customer_center_fail")):"customer_center"==c.pageUI.state&&"call"==c.pageUI.centerKind&&1==Z?(c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("샬롯질의","1문의이동동의",n,q),g.go("goCenterQue",c.loginInfo.isLogin,"customer_center_fail")):"customer_center"==c.pageUI.state&&"call"==c.pageUI.centerKind&&0==Z?(ka.showMsg(o.msg.centerUseQna),c.setGATag("샬롯질의","1:1문의이동거부",n,q,"customer_center_fail")):"order_complete"==c.pageUI.state&&1==Z?(c.setGATag("샬롯질의","구매사은신청동의",n,q),g.goSaunDetail(c.pageUI.orderCompleteInfo.saun_info.evt_saun_no)):"order_complete"==c.pageUI.state&&0==Z?c.setGATag("샬롯질의","구매사은신청거부",n,q):"order_inquiry"==c.pageUI.state&&1==Z?g.go("goPurchaseList",c.loginInfo.isLogin):"mimitoutou_recommendation"==c.pageUI.state&&1==Z&&va?(va=!1,ka.commandExec("goMimitoutou",c.loginInfo.isLogin)):"style_recommendation"==c.pageUI.state&&1==Z&&c.styleOtherQue?(c.styleOtherQue=!1,c.setGATag("샬롯질의","이동동의",n,q),c.goStyleMore()):"style_recommendation"==c.pageUI.state&&0==Z&&c.setGATag("샬롯질의","이동거부",n,q);break;case"actionNumber":if(c.checkListState(c.pageUI.state)||"prod_detail"==c.pageUI.state||"order"==c.pageUI.state){var C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1;if(C>-1)if(c.pageUI.showPrdOpt){var _=z("filter")(c.pageUI.optInfo.prdOptInfo[c.pageUI.optInfo.curOptStep].itemList.items,{isSoldout:!1});_.length>C?(c.selectOptItem(_[C].idx,!0),"voice"==q?c.setGATag("옵션레이어","옵션선택",n,q):"keyboard"==q&&c.setGATag("옵션레이어","옵션선택",n,q)):ka.showMsg(o.msg.unknown)}else c.prdSwiperCtrl&&c.pageUI.prdList.length>C&&c.prdSwiperCtrl.moveIndex(C)}else ka.showMsg(o.msg.unknown);break;case"answerDeliveryFee":case"answerDeliveryTime":if(c.checkListState(c.pageUI.state)&&c.pageUI.prdList.length<1){ka.showMsg(o.msg.unknown);break}if(c.checkListState(c.pageUI.state)||"prod_detail"==c.pageUI.state){var B=ka.getCurProdInfo();B&&B.goods_no?(c.pageLoading=!0,y.getDeliveryInfo({goods_no:B.goods_no}).then(function(b){if("answerDeliveryFee"==a)0==parseInt(b.dlvFee)?ka.showMsg(o.msg.prdDeliveryFree):ka.showMsg(o.msg.prdDeliveryCharge,[b.dlvFee,b.stdAmt]),c.setGATag("음성명령어","배송비 얼마야",n,q);else{var d,e,f;"99"==b.gubunCd?ka.showMsg(o.msg.prdDeliveryHolidayDate):"1"==b.gubunCd?"cart"==c.pageUI.state&&"Y"==B.smpick_yn?ka.showMsg(o.msg.prdDeliveryDateSmart,[B.smp_dlv_area]):ka.showMsg(o.msg.prdDeliveryDateSmart,[b.smp_dlv_area]):"2"==b.gubunCd?"cart"==c.pageUI.state&&"Y"==B.smpick_yn?ka.showMsg(o.msg.prdDeliveryDateSmart,[B.smp_dlv_area]):(d=z("replaceString")(o.msg.prdDeliveryDateRese.txt,[b.dlvDate2,b.dlvDesc]),e=z("replaceString")(o.msg.prdDeliveryDateRese.voice,[b.dlvDate,b.dlvDesc]),f=o.msg.prdDeliveryDateRese.position,ka.showMsg(o.getMsgData(d,e,f))):"3"==b.gubunCd?"cart"==c.pageUI.state&&"Y"==B.smpick_yn?ka.showMsg(o.msg.prdDeliveryDateSmart,[B.smp_dlv_area]):(d=z("replaceString")(o.msg.prdDeliveryDateSet.txt,[b.dlvDate2]),e=z("replaceString")(o.msg.prdDeliveryDateSet.voice,[b.dlvDate]),f=o.msg.prdDeliveryDateSet.position,ka.showMsg(o.getMsgData(d,e,f))):"4"==b.gubunCd?(d=z("replaceString")(o.msg.prdDeliveryDateRental.txt,[b.dlvDate2]),e=z("replaceString")(o.msg.prdDeliveryDateRental.voice,[b.dlvDate]),f=o.msg.prdDeliveryDateRental.position,ka.showMsg(o.getMsgData(d,e,f))):"5"==b.gubunCd?(d=z("replaceString")(o.msg.prdDeliveryDate.txt,[b.dlvDate2,b.dlvDesc]),e=z("replaceString")(o.msg.prdDeliveryDate.voice,[b.dlvDate,b.dlvDesc]),f=o.msg.prdDeliveryDate.position,ka.showMsg(o.getMsgData(d,e,f))):"6"==b.gubunCd||"7"==b.gubunCd||"8"==b.gubunCd?"cart"==c.pageUI.state&&"Y"==B.smpick_yn?ka.showMsg(o.msg.prdDeliveryDateSmart,[B.smp_dlv_area]):(d=z("replaceString")(o.msg.prdDeliveryDate.txt,[b.dlvDate2,b.dlvDesc]),e=z("replaceString")(o.msg.prdDeliveryDate.voice,[b.dlvDate,b.dlvDesc]),f=o.msg.prdDeliveryDate.position,ka.showMsg(o.getMsgData(d,e,f))):"9"==b.gubunCd?"cart"==c.pageUI.state&&"Y"==B.smpick_yn?ka.showMsg(o.msg.prdDeliveryDateSmart,[B.smp_dlv_area]):(d=z("replaceString")(o.msg.prdDeliveryDateCou.txt,[b.dlvDate2]),e=z("replaceString")(o.msg.prdDeliveryDateCou.voice,[b.dlvDate]),f=o.msg.prdDeliveryDateCou.position,ka.showMsg(o.getMsgData(d,e,f))):"10"==b.gubunCd?"cart"==c.pageUI.state&&"Y"==B.smpick_yn?ka.showMsg(o.msg.prdDeliveryDateSmart,[B.smp_dlv_area]):(d=z("replaceString")(o.msg.prdDeliveryDate.txt,[b.dlvDate2,b.dlvDesc]),e=z("replaceString")(o.msg.prdDeliveryDate.voice,[b.dlvDate,b.dlvDesc]),f=o.msg.prdDeliveryDate.position,ka.showMsg(o.getMsgData(d,e,f))):(d=z("replaceString")(o.msg.prdDeliveryDate.txt,[b.dlvDate2]),e=z("replaceString")(o.msg.prdDeliveryDate.voice,[b.dlvDate]),f=o.msg.prdDeliveryDate.position,ka.showMsg(o.getMsgData(d,e,f)))}})["catch"](function(){console.error("배송정보 확인 오류")})["finally"](function(){c.pageLoading=!1})):console.error("상품정보 오류")}break;case"getRecommendMy":c.setGATag("공통_마이추천보기","마이추천보기",n,q);var aa={goodsNoList:"",searchType:"G"},ba={},ca=K.getLateList();if(!ca){aa.searchType="M",ka.commandExec("getRecommendMyReceive",aa);break}ba.iids=(ca+"").trim(),c.pageLoading=!0,O.getMyRecommendList(ba).then(function(a){a&&a.length>0?(b.forEach(a,function(a,b){aa.goodsNoList+=a.itemId+","}),aa.goodsNoList=aa.goodsNoList.slice(0,aa.goodsNoList.length-1),ka.commandExec("getRecommendMyReceive",aa)):(aa.searchType="M",ka.commandExec("getRecommendMyReceive",aa))})["catch"](function(){aa.searchType="M",ka.commandExec("getRecommendMyReceive",aa)})["finally"](function(){c.pageLoading=!1});break;case"getOtherHaveSeen":if(!c.checkListState(c.pageUI.state)||!ka.getCurProdInfo()){ka.showMsg(o.msg.unknown);break}var aa={goodsNoList:""},B=ka.getCurProdInfo(),ba={};ba.iids=B.goods_no,c.pageLoading=!0,R.getOthersHaveList(ba).then(function(a){a&&a.length>0?(b.forEach(a,function(a,b){aa.goodsNoList+=a.itemId+","}),aa.goodsNoList=aa.goodsNoList.slice(0,aa.goodsNoList.length-1),ka.commandExec("getOthersHaveSeenReceive",aa)):(c.pageUI.prdList=[],ka.changeState("other_customers_item_recommendation"),ka.showMsg(o.msg.othersHaveNone))})["catch"](function(){console.error("남들은뭘봣지 확인 오류")})["finally"](function(){c.pageLoading=!1});break;case"getSituationKeyword":case"getManagementItem":case"getSecretEvent":case"getCart":case"getDiscountedShoppingCartProduct":case"getWish":case"getOftenList":case"getLately":case"getMimitoutou":case"getRecom":case"getNewProduct":case"getStyleList":case"getRecommendMyReceive":case"getOthersHaveSeenReceive":var ba={};if(ba.siteNo=1,ba.adultYn=!1,ba.chlNo=k.getCookie("CHLNO"),ba.chlDtlNo=k.getCookie("CHLDTLNO"),ba.priceDisYn="N",c.loginInfo.isLogin&&(ba.mbrNo=c.loginInfo.mbrNo,ba.gradeCd=c.loginInfo.gradeCd,ba.adultYn=c.loginInfo.isAdult?!0:!1),"getCart"==a)ba.searchType="J",ba.page=c.pageUI.curPage,ba.rowsPerPage=c.pageUI.rowsPerPage,c.setGATag("공통_장바구니보기","장바구니보기",n,q);else if("getDiscountedShoppingCartProduct"==a){if(m&&"goLogin"==m.goLogin||c.setGATag("공통_장바구니할인상품보기","장바구니할인상품보기",n,q),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}ba.searchType="J",ba.priceDisYn="Y",ba.page=c.pageUI.curPage,ba.rowsPerPage=c.pageUI.rowsPerPage}else if("getWish"==a){if(m&&"goLogin"==m.goLogin||c.setGATag("공통_위시리스트보기","위시리스트보기",n,q),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}ba.searchType="W",ba.page=c.pageUI.curPage,ba.rowsPerPage=c.pageUI.rowsPerPage}else if("getOftenList"==a){if(m&&"goLogin"==m.goLogin||c.setGATag("공통_자주구매보기","자주구매보기",n,q),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}ba.searchType="O",ba.page=c.pageUI.curPage,ba.rowsPerPage=c.pageUI.rowsPerPage}else if("getLately"==a){var ca=K.getLateList();if(null==ca||""==ca){c.pageUI.prdList=[],ka.changeState("recently_viewed_item"),ka.showMsg(o.msg.lateNone),c.setGATag("공통_최근본상품보기","최근본상품보기",n,q,c.pageUI.prestate);break}ba.searchType="G",ba.page=1,ba.rowsPerPage=c.pageUI.rowsPerPage,ba.goodsNo=(ca+"").trim(),c.setGATag("공통_최근본상품보기","최근본상품보기",n,q)}else if("getMimitoutou"==a){if(m&&"goLogin"==m.goLogin||c.setGATag("공통_미미뚜뚜추천보기","미미뚜뚜추천보기",n,q),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand("getMimitoutou",ea);break}if(""==c.basicInfo.my_pet_info.bbc_no||"0"==c.basicInfo.my_pet_info.bbc_no){va=!0,c.pageUI.prdList=[],ka.changeState("mimitoutou_recommendation"),ka.showMsg(o.msg.mimiNoRegist),c.soundEndData=o.msg.mimiNoRegistQ;break}ba.bbc_no=c.basicInfo.my_pet_info.bbc_no,ba.worry_yn="N",ba.searchType="P","Y"==c.basicInfo.my_pet_info.worry_yn&&(ba.searchType="P",ba.page=c.pageUI.curPage,ba.rowsPerPage=c.pageUI.rowsPerPage,ba.worry_yn="Y")}else if("getSituationKeyword"==a||"getManagementItem"==a){c.pageUI.preReqParam=m.preReqParam?m.preReqParam:null,c.pageUI.preReqParamObj=null,c.pageUI.preReqParam&&(c.pageUI.preReqParamObj=z("convertParamToObject")(c.pageUI.preReqParam));var fa,ga=JSON.parse(m.recommendData);m.preReqParam&&(fa=z("convertParamToObject")(m.preReqParam));var ja=[2==fa.talkId?"1차":"2차",ga.situationKeyword?ga.situationKeyword:"",c.pageUI.preReqParamObj.firstManagementItem?c.pageUI.preReqParamObj.firstManagementItem:"",ga.keyword?ga.keyword:""],la=[2==fa.talkId?"1차":"2차",ga.situationKeyword?ga.situationKeyword:"",c.pageUI.preReqParamObj.firstManagementItem?c.pageUI.preReqParamObj.firstManagementItem:"",ga.keyword?ga.keyword:"",c.pageUI.preReqParamObj.combinationSearchWord?c.pageUI.preReqParamObj.combinationSearchWord:"",fa.priceValue?"가격대":"",ga.freeDeliYN?"무료배송":"",ga.freeInstYN?"무이자혜택":"",ga.delQuickYN?"퀵배송":"",ga.pointYN?"포인트적립":"",ga.delTdarYN?"오늘도착":"",ga.pkgYN?"무료선물포장":"",ga.color?"컬러":"",ga.sort?"정렬":""],ma=[],na=[];for(i=0;i<ja.length;i++)""!=ja[i]&&ma.push(ja[i]);for(i=0;i<la.length;i++)""!=la[i]&&na.push(la[i]);if(("C"==fa.searchType||"T"==fa.searchType)&&("getSituationKeyword"==a?2==fa.talkId?c.setGATag("공통_추천","상황_"+ma.join("_"),n,q):c.setGATag("공통_추천","상황_"+na.join("_"),n,q):"getManagementItem"==a&&(2==fa.talkId?c.setGATag("공통_추천","관리_"+ma.join("_"),n,q):c.setGATag("공통_추천","관리_"+na.join("_"),n,q))),c.viewInfoTempMicCheck=!1,!m||!m.goodsNoList){if(c.pageUI.prdList=[],"getSituationKeyword"==a?ka.changeState("situation_recommendation"):"getManagementItem"==a&&ka.changeState("management_item_recommendation"),!m.homeScreenMent){c.pageLoading=!0,A.getHotKeyword().then(function(a){a&&(c.setGATag("공통_추천","상품결과없음",n,q),c.pageUI.situationData.question="",c.pageUI.showMsg.guide=!1,c.pageUI.showHotKeyword=!0,c.pageUI.hotKeyword=a,ka.showMsg(o.msg.prdDataEmpty))})["catch"](function(){console.error("인기키워드 오류")})["finally"](function(){c.pageLoading=!1});break}var oa=m.homeScreenMent.split("@");oa.length>1&&(c.pageUI.situationData.question=oa[0],c.pageUI.situationData.answer=oa[1].split("#"),c.pageUI.showMsg.top=!1,c.pageUI.showMsg.home=!1,ka.showMsg(o.getMsgData(m.basicVoiceMent,m.basicVoiceMent,"voice"),null,!0));break}ba.goodsNo=(m.goodsNoList+"").trim(),ba.searchType="G"}else if("getSecretEvent"==a)ba.searchType="S",ba.conrNo="78156",ba.dispNo="5607666",c.setGATag("공통_이벤트","비밀이벤트",n,q);else if("getRecommendMyReceive"==a)m&&m.searchType&&(ba.searchType=m.searchType),m&&m.goodsNoList&&(ba.goodsNo=(m.goodsNoList+"").trim());else if("getStyleList"==a)ba.searchType="G",ba.goodsNo=(m.goodsNoList+"").trim(),c.setGATag("스타일추천","스타일추천성공",null,q);else if("getNewProduct"==a)ba.searchType="T",m&&m.commandNewProductName&&(ba.keyword=m.commandNewProductName),ba.sort="DATE,1",m&&m.goodsNoList&&(ba.goodsNo=(m.goodsNoList+"").trim());else if("getOthersHaveSeenReceive"==a)ba.searchType="G",m&&m.goodsNoList&&(ba.goodsNo=(m.goodsNoList+"").trim());else{if(!m){console.error("상품 추천 데이터 없음"),c.setGATag("공통_추천","상품결과없음",n,q);break}if(c.pageUI.preReqParam=m.preReqParam?m.preReqParam:null,c.pageUI.preReqParamObj=null,c.pageUI.preReqParam&&(c.pageUI.preReqParamObj=z("convertParamToObject")(c.pageUI.preReqParam)),!(m.goodsNoList&&m.goodsNoList.length>0)){if(c.pageUI.preReqParamObj&&c.pageUI.preReqParamObj.talkId&&"2"==c.pageUI.preReqParamObj.talkId){c.pageUI.prdList=[],c.pageLoading=!0,A.getHotKeyword().then(function(a){a&&(c.setGATag("공통_추천","상품결과없음",n,q),ka.changeState("prod_list"),c.pageUI.showMsg.guide=!1,c.pageUI.showHotKeyword=!0,c.pageUI.hotKeyword=a,ka.showMsg(o.msg.prdDataEmpty))})["catch"](function(){console.error("인기키워드 오류")})["finally"](function(){c.pageLoading=!1});break}if(c.pageUI.preReqParamObj&&c.pageUI.preReqParamObj.talkId>"2"){c.setGATag("공통_추천","상품결과없음",n,q),m.queryMent&&m.basicVoiceMent&&ka.semanticMsgShow(m);break}c.setGATag("공통_추천","상품결과없음",n,q),m.queryMent&&m.basicVoiceMent&&ka.semanticMsgShow(m);break}ba.searchType="G",ba.goodsNo=(m.goodsNoList+"").trim()}ka.initProdOpt(),c.pageLoading=!0,j.getPrdListInfo(ba).then(function(d){if(!(d.prd_list&&d.prd_list.items&&d.prd_list.items.length>0))return c.pageUI.prdList=[],void("getCart"==a?(ka.changeState("cart"),ka.showMsg(o.msg.cartNone)):"getWish"==a?(ka.changeState("wish"),ka.showMsg(o.msg.wishNone)):"getOftenList"==a?(ka.changeState("purchase_frequently"),ka.showMsg(o.msg.oftenNone)):"getLately"==a?(ka.changeState("recently_viewed_item"),ka.showMsg(o.msg.lateNone)):"getMimitoutou"==a?(ka.changeState("mimitoutou_recommendation"),ka.showMsg(o.msg.mimiNone)):"getNewProduct"==a?(ka.changeState("favorite_brands"),ka.showMsg(o.msg.favorBrandNone)):"getDiscountedShoppingCartProduct"==a?(ka.changeState("cart"),ka.showMsg(o.msg.cartSaleNone)):"getSecretEvent"==a?(ka.changeState("secret_event"),ka.showMsg(o.msg.secretListNone)):"getSituationKeyword"==a||"getManagementItem"==a||("getRecommendMyReceive"==a?(ka.changeState("my_recommendation"),ka.showMsg(o.msg.myRecommendNone)):"getOthersHaveSeenReceive"==a&&(ka.changeState("other_customers_item_recommendation"),ka.showMsg(o.msg.othersHaveNone))));if(c.pageUI.prdList=d.prd_list.items,c.pageUI.showPrd10=!1,c.pageUI.showPrd20=!1,c.pageUI.showPrdEnd=!1,"getCart"==a)c.pageUI.totalCnt=d.total_cnt,ka.changeState("cart"),c.pageUI.isChangeCommandState&&(c.pageUI.totalCnt>c.pageUI.rowsPerPage?ka.showMsg(o.msg.cartShow,[c.pageUI.totalCnt]):c.pageUI.totalCnt>0?ka.showMsg(o.msg.cartShowUnder,[c.pageUI.totalCnt]):0==c.pageUI.totalCnt&&ka.showMsg(o.msg.cartNone));else if("getDiscountedShoppingCartProduct"==a)ka.changeState("cart"),ka.showMsg(o.msg.cartSaleShow);else if("getWish"==a)c.pageUI.totalCnt=d.total_cnt,ka.changeState("wish"),c.pageUI.isChangeCommandState&&(c.pageUI.totalCnt>c.pageUI.rowsPerPage?ka.showMsg(o.msg.wishShow,[c.pageUI.totalCnt]):c.pageUI.totalCnt>0?ka.showMsg(o.msg.wishShowUnder,[c.pageUI.totalCnt]):0==c.pageUI.totalCnt&&ka.showMsg(o.msg.wishNone));else if("getOftenList"==a)c.pageUI.totalCnt=d.total_cnt,ka.changeState("purchase_frequently"),c.pageUI.isChangeCommandState&&(c.pageUI.totalCnt>c.pageUI.rowsPerPage?ka.showMsg(o.msg.oftenShow,[c.pageUI.totalCnt]):c.pageUI.totalCnt>0?ka.showMsg(o.msg.oftenShowUnder,[c.pageUI.totalCnt]):0==c.pageUI.totalCnt&&ka.showMsg(o.msg.oftenNone));else if("getLately"==a)c.pageUI.totalCnt=d.total_cnt?d.total_cnt:d.prd_list.total_count,ka.changeState("recently_viewed_item"),c.pageUI.totalCnt>0?c.loginInfo.isLogin?ka.showMsg(o.msg.lateLoginedShow,[c.loginInfo.name]):ka.showMsg(o.msg.lateShow,[c.pageUI.totalCnt]):0==c.pageUI.totalCnt&&ka.showMsg(o.msg.lateNone);else if("getMimitoutou"==a)c.pageUI.totalCnt=d.total_cnt,ka.changeState("mimitoutou_recommendation"),"N"==c.basicInfo.my_pet_info.worry_yn?ka.showMsg(o.msg.mimiWorryNone,[c.basicInfo.my_pet_info.bbc_nm]):ka.showMsg(o.msg.mimiWorryShow,[c.basicInfo.my_pet_info.bbc_nm]);else if("getNewProduct"==a)c.setGATag("공통_브랜드신상품보기","브랜드신상품보기",n,q),ka.changeState("favorite_brands"),ka.showMsg(o.msg.favorBrandShow,[m.commandNewProductName]);else if("getSecretEvent"==a)ka.changeState("secret_event"),ka.showMsg(o.getMsgData(d.set_nm,d.set_nm,"top")),d.secret_text_list&&d.secret_text_list.items&&(c.pageUI.prdSecretTextList=d.secret_text_list.items);else if("getRecommendMyReceive"==a)ka.changeState("my_recommendation"),c.loginInfo.isLogin?ka.showMsg(o.msg.myRecommendOnly,[c.loginInfo.name]):ka.showMsg(o.msg.myRecommendShow);else if("getOthersHaveSeenReceive"==a)ka.changeState("other_customers_item_recommendation"),ka.showMsg(o.msg.othersHave);else if("getSituationKeyword"==a||"getManagementItem"==a)"getSituationKeyword"==a?ka.changeState("situation_recommendation"):"getManagementItem"==a&&ka.changeState("management_item_recommendation"),ka.semanticMsgShow(m),c.pageUI.preReqParamObj.keyword&&c.pageUI.preReqParamObj.combinationSearchWord&&(c.pageUI.stateSelector=[],b.forEach(c.pageUI.preReqParamObj.combinationSearchWord.split(","),function(a,b){a!=c.pageUI.preReqParamObj.keyword&&this.push({txt:a})},c.pageUI.stateSelector),c.pageUI.stateSelector.length>0&&(ka.stateSelectorReset(),c.pageUI.stateSelectorViewInfo=!0));else if("getStyleList"==a)ka.changeState("style_recommendation"),ka.showMsg(o.msg.styleRecomShow,[m.styleObj.ctgName]);else{var f,g=JSON.parse(m.recommendData);m.preReqParam&&(f=z("convertParamToObject")(m.preReqParam));var h=[2==f.talkId?"1차":"2차",g.itemValue?"아이템":"",f.keyword?"아이템":"",g.brandNo?"브랜드":"",f.priceValue?"가격대":"",g.freeDeliYN?"무료배송":"",g.freeInstYN?"무이자혜택":"",g.delQuickYN?"퀵배송":"",g.pointYN?"포인트적립":"",g.delTdarYN?"오늘도착":"",g.pkgYN?"무료선물포장":"",g.color?"컬러":"",g.sort?"정렬":""],j=[2==f.talkId?"1차":"2차",f.priceValue?"가격대":"",g.freeDeliYN?"무료배송":"",g.freeInstYN?"무이자혜택":"",g.delQuickYN?"퀵배송":"",g.pointYN?"포인트적립":"",g.delTdarYN?"오늘도착":"",g.pkgYN?"무료선물포장":"",g.color?"컬러":"",g.sort?"정렬":""],k=[],l=[];for(i=0;i<h.length;i++)""!=h[i]&&k.push(h[i]);for(i=0;i<j.length;i++)""!=j[i]&&l.push(j[i]);"R"==f.searchType&&g.gender&&g.age?c.setGATag("공통_추천","베스트_"+g.gender+"_"+g.age,n,q):"R"==f.searchType&&g.gender?c.setGATag("공통_추천","베스트_"+g.gender,n,q):"R"==f.searchType&&g.age&&c.setGATag("공통_추천","베스트_"+g.age,n,q),("C"==f.searchType||"T"==f.searchType)&&(2==f.talkId?c.setGATag("공통_추천","일반_"+k.join("_"),n,q):c.setGATag("공통_추천","일반_"+l.join("_"),n,q)),c.pageUI.preReqParamObj&&"R"==c.pageUI.preReqParamObj.searchType?ka.changeState("best_recommendation"):ka.changeState("prod_list"),ka.semanticMsgShow(m)}c.prdSwiperCtrl&&(b.element(".prod_list_wrap").css("opacity",0),c.prdSwiperCtrl.init(),e(function(){c.pageUI.curPrdSwiperIdx=0,c.prdSwiperCtrl.setIndex(0),b.element(".prod_list_wrap").css("opacity",1)},300))})["catch"](function(b){c.pageUI.prdList=[],"getCart"==a?(ka.changeState("cart"),ka.showMsg(o.msg.cartNone)):"getWish"==a?(ka.changeState("wish"),ka.showMsg(o.msg.wishNone)):"getOftenList"==a?(ka.changeState("purchase_frequently"),ka.showMsg(o.msg.oftenNone)):"getLately"==a?(ka.changeState("recently_viewed_item"),ka.showMsg(o.msg.lateNone)):"getMimitoutou"==a?(ka.changeState("mimitoutou_recommendation"),ka.showMsg(o.msg.mimiNone)):"getNewProduct"==a?(ka.changeState("favorite_brands"),ka.showMsg(o.msg.favorBrandNone)):"getDiscountedShoppingCartProduct"==a?(ka.changeState("cart"),ka.showMsg(o.msg.cartSaleNone)):"getSecretEvent"==a?(ka.changeState("secret_event"),ka.showMsg(o.msg.secretListNone)):"getSituationKeyword"==a||"getManagementItem"==a||("getRecommendMyReceive"==a?(ka.changeState("my_recommendation"),ka.showMsg(o.msg.myRecommendNone)):"getOthersHaveSeenReceive"==a&&(ka.changeState("other_customers_item_recommendation"),ka.showMsg(o.msg.othersHaveNone)))})["finally"](function(){c.pageLoading=!1});break;case"actionQuantity":case"actionQuantityChange":case"actionQuantityMore":case"actionOrderMore":var B=ka.getCurProdInfo(),D=m&&m.commandQuantity?parseInt(m.commandQuantity):0;("actionQuantityMore"==a||"actionOrderMore"==a)&&("actionQuantityMore"==a?c.setGATag("음성명령어","수량 늘리기",n,q):"actionOrderMore"==a&&c.setGATag("음성명령어","수량 늘리기 주문",n,q),"prod_detail"==c.pageUI.state?(c.prodListQuantity<1&&(c.prodListQuantity=1),D=c.prodListQuantity+D):"order"==c.pageUI.state&&(D=c.pageUI.orderInfo.orderCnt+D)),D>0&&D>=parseInt(B.min_lmt_qty)&&D<=parseInt(B.max_lmt_qty)?"prod_detail"==c.pageUI.state?(c.prodListQuantity=D,"actionQuantityMore"==a||"actionOrderMore"==a||c.setGATag("음성명령어","수량 변경",n,q),"actionOrderMore"==a&&(c.pageUI.orderInfo.orderCnt=D,ka.orderDecide())):"order"==c.pageUI.state?(c.pageUI.orderInfo.orderCnt=D,"actionQuantityMore"==a||"actionOrderMore"==a||c.setGATag("음성명령어","수량 변경",n,q),B.cart_sn?ka.orderDecide(B.cart_sn,!0):ka.orderDecide()):ka.showMsg(o.msg.unknown):D<parseInt(B.min_lmt_qty)?ka.showMsg(o.msg.errMinLmtQty,[parseInt(B.min_lmt_qty)]):D>parseInt(B.max_lmt_qty)&&ka.showMsg(o.msg.errMxnLmtQty,[parseInt(B.max_lmt_qty)]);break;case"actionCamera":case"actionAlbum":if(0==h.styleAppChk()){c.styleAppCheckShowAlert();break}"actionCamera"==a?(c.setGATag("공통_스타일추천","스타일추천 카메라 이동",n,q),c.styleAppCheckAndCommand("open","camera")):"actionAlbum"==a&&(c.setGATag("공통_스타일추천","스타일추천 앨범 이동",n,q),c.styleAppCheckAndCommand("open","media"));break;case"actionCameraTest":if(0==h.styleAppChk()){c.styleAppCheckShowAlert();break}c.pageUI.testCamera="camera",c.setGATag("공통_스타일추천","스타일추천 카메라 이동",n,q),c.styleAppCheckAndCommand("open","camera");break;case"getStyle":if(!c.checkListState(c.pageUI.state)&&"prod_detail"!=c.pageUI.state&&"order"!=c.pageUI.state&&"order_complete"!=c.pageUI.state){ka.showMsg(o.msg.unknown);break}c.setGATag("음성명령어","스타일추천",n,q);var C=m&&m.commandNumber?parseInt(m.commandNumber)-1:-1,B=c.VCCtrl.getCurProdInfo();if(!B){console.error("스타일 추천 상품 선택이 없습니다"),ka.showMsg(o.msg.unknown);break}if(C>-1&&c.pageUI.prdList.length>C&&(c.pageUI.curPrdSwiperIdx=C,c.prdSwiperCtrl.moveSpeedIndex(C,10),B=c.VCCtrl.getCurProdInfo()),"Y"!=B.style_recomm_yn){ka.showMsg(o.msg.styleRecomNone),c.setGATag("스타일추천","추천불가메시지노출",null,null);break}if("prod_detail"==c.pageUI.state){var pa={};pa.style_recomm_cate_grp_cd=B.style_recomm_cate_grp_cd,pa.img_url=c.pageUI.curPrdDetailInfo.imgInfo.imgList[c.prdDetailSwiperCtrl.getIndex()],0==c.prdDetailSwiperCtrl.getIndex()&&(pa.goods_no=B.goods_no),pa.style_gen_cd=B.style_gen_cd,c.getStyleRecom(pa,!0)}else c.getStyleRecom(B,!0);break;case"getOrderExchangeVisitInformation":ka.showMsg(o.msg.unknown),m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("공통_주문조회","주문 방문일자변경+날짜",n,q):c.setGATag("공통_주문조회","주문 방문일자변경",n,q);break;case"getOrderDetailView":if(m&&"order_inquiry"==c.pageUI.state)if(m.commandNumber){if(c.pageUI.purchaseList.length<m.commandNumber){ka.showMsg(o.msg.unknown);break}g.goPurchaseView(c.pageUI.purchaseList[m.commandNumber-1].ord_no)}else m.commndOrdNo&&g.goPurchaseView(m.commndOrdNo);break;case"actionExchange":if("order_inquiry"==c.pageUI.state)if(m&&m.commandNumber){var w=m.commandNumber;c.pageUI.purchaseList.length>=w?(w-=1,"Y"==c.pageUI.purchaseList[w].exchange_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["교환"])):c.pageUI.purchaseList.length<w&&ka.showMsg(o.msg.unknown)}else ka.showMsg(o.msg.purchaseExchangeLike);c.setGATag("음성명령어","교환해줘",n,q);break;case"actionReturn":if("order_inquiry"==c.pageUI.state)if(m&&m.commandNumber){var w=m.commandNumber;c.pageUI.purchaseList.length>=w?(w-=1,"Y"==c.pageUI.purchaseList[w].return_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["반품"])):c.pageUI.purchaseList.length<w&&ka.showMsg(o.msg.unknown),c.setGATag("공통_주문조회",m.commandNumber+"번 주문 반품",n,q)}else ka.showMsg(o.msg.purchaseReturnLike);c.setGATag("음성명령어","반품해줘",n,q);break;case"getCancelOrder":case"getExchangeInProgressOrder":case"getReturnInProgressOrder":case"getOrderReturn":case"getOrderExchange":case"getOrderChangeShipping":case"getOrderChangeOption":case"getOrderCancle":case"getOrderInquire":case"getOrderList":if("getOrderInquire"==a&&m&&m.commandNumber){var w=m.commandNumber;if("order_inquiry"==c.pageUI.state&&c.pageUI.purchaseList.length>=w){w-=1;var qa=c.pageUI.purchaseList[w];qa.send_due_date?"발송완료"==qa.ord_step_str?ka.showMsg(o.getMsgData(qa.ord_step_msg,qa.ord_step_msg,"q")):ka.showMsg(o.getMsgData(qa.send_due_date+qa.send_due_word,qa.send_due_date+qa.send_due_word,"q")):qa.ord_step_msg?"17"==qa.ord_dtl_stat_cd&&qa.ord_step_msg.search(qa.inv_no)>0?"발송완료"==qa.ord_step_str?ka.showMsg(o.msg.purchaseSendShow):"배송완료"==qa.ord_step_str?ka.showMsg(o.msg.purchaseSendShowSended):ka.showMsg(o.msg.purchaseSendShow):ka.showMsg(o.getMsgData(qa.ord_step_msg,qa.ord_step_msg,"q")):ka.showMsg(o.msg.purchaseNameShow,[c.loginInfo.name]),c.setGATag("음성명령어","언제와",n,q);break}}if("getOrderReturn"==a)if("order_inquiry"==c.pageUI.state&&m&&m.commandNumber){var w=m.commandNumber;if(c.pageUI.purchaseList.length>=w){w-=1,"Y"==c.pageUI.purchaseList[w].return_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["반품"]);break}if(c.pageUI.purchaseList.length<w){ka.showMsg(o.msg.unknown);break}}else if(!("order_inquiry"!=c.pageUI.state||"return"!=c.pageUI.orderState||m.commandDate||m.commandDayOfWeek||m.commandMonth||m.commandNumber||m.commandPeriod)){ka.showMsg(o.msg.purchaseReturnLike);break}if("getOrderExchange"==a)if("order_inquiry"==c.pageUI.state&&m&&m.commandNumber){var w=m.commandNumber;if(c.pageUI.purchaseList.length>=w){w-=1,"Y"==c.pageUI.purchaseList[w].exchange_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["교환"]);break}if(c.pageUI.purchaseList.length<w){ka.showMsg(o.msg.unknown);break}}else if(!("order_inquiry"!=c.pageUI.state||"exchange"!=c.pageUI.orderState||m.commandDate||m.commandDayOfWeek||m.commandMonth||m.commandNumber||m.commandPeriod)){
ka.showMsg(o.msg.purchaseExchangeLike);break}if("getOrderCancle"==a)if("order_inquiry"==c.pageUI.state&&m&&m.commandNumber){var w=m.commandNumber;if(c.pageUI.purchaseList.length>=w){w-=1,"Y"==c.pageUI.purchaseList[w].cancel_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["취소"]);break}if(c.pageUI.purchaseList.length<w){ka.showMsg(o.msg.unknown);break}}else if(!("order_inquiry"!=c.pageUI.state||"cancle"!=c.pageUI.orderState||m.commandDate||m.commandDayOfWeek||m.commandMonth||m.commandNumber||m.commandPeriod)){ka.showMsg(o.msg.purchaseCancleLike);break}if("getOrderChangeOption"==a)if("order_inquiry"==c.pageUI.state&&m&&m.commandNumber){var w=m.commandNumber;if(c.pageUI.purchaseList.length>=w){w-=1,"Y"==c.pageUI.purchaseList[w].opt_change_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["옵션 변경"]);break}if(c.pageUI.purchaseList.length<w){ka.showMsg(o.msg.unknown);break}}else if(!("order_inquiry"!=c.pageUI.state||"option"!=c.pageUI.orderState||m.commandDate||m.commandDayOfWeek||m.commandMonth||m.commandNumber||m.commandPeriod)){ka.showMsg(o.msg.purchaseOptionLike);break}if("getOrderChangeShipping"==a)if("order_inquiry"==c.pageUI.state&&m&&m.commandNumber){var w=m.commandNumber;if(c.pageUI.purchaseList.length>=w){w-=1,"Y"==c.pageUI.purchaseList[w].dlv_change_psb_yn?c.orderDetail(c.pageUI.purchaseList[w].ord_no):ka.showMsg(o.msg.purchaseSelectNone,["배송지 변경"]);break}if(c.pageUI.purchaseList.length<w){ka.showMsg(o.msg.unknown);break}}else if(!("order_inquiry"!=c.pageUI.state||"delivery"!=c.pageUI.orderState||m.commandDate||m.commandDayOfWeek||m.commandMonth||m.commandNumber)){ka.showMsg(o.msg.purchaseDeliverLike);break}if(m&&"goLogin"==m.goLogin||("getOrderList"==a?m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("공통_주문조회","주문 보기+날짜",n,q):c.setGATag("공통_주문조회","주문 보기",n,q):"getOrderInquire"==a?"order_inquiry"==c.pageUI.prestate?m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("음성명령어","주문 언제와+날짜",n,q):c.setGATag("음성명령어","주문 언제와",n,q):m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("공통_주문조회","주문 언제와+날짜",n,q):c.setGATag("공통_주문조회","주문 언제와",n,q):"getOrderCancle"==a?m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("공통_주문조회","주문 취소+날짜",n,q):c.setGATag("공통_주문조회","주문 취소",n,q):"getOrderChangeOption"==a?m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("공통_주문조회","주문 옵션변경+날짜",n,q):c.setGATag("공통_주문조회","주문 옵션변경",n,q):"getOrderChangeShipping"==a?m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("공통_주문조회","주문 배송지변경+날짜",n,q):c.setGATag("공통_주문조회","주문 배송지변경",n,q):"getOrderExchange"==a?m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("공통_주문조회","주문 교환+날짜",n,q):c.setGATag("공통_주문조회","주문 교환",n,q):"getOrderReturn"==a?m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth?c.setGATag("공통_주문조회","주문 반품+날짜",n,q):c.setGATag("공통_주문조회","주문 반품",n,q):"getExchangeInProgressOrder"==a?c.setGATag("공통_주문조회","주문 교환중",n,q):"getReturnInProgressOrder"==a?c.setGATag("공통_주문조회","주문 반품중",n,q):"getCancelOrder"==a&&c.setGATag("공통_주문조회","주문 취소완료",n,q)),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}c.pageUI.orderState="";var ba={};ba.vc_ord_search_gu=1,"getOrderCancle"==a?("cancle"==c.pageUI.orderState,ba.vc_ord_search_gu=3):"getExchangeInProgressOrder"==a?ba.vc_ord_search_gu=7:"getReturnInProgressOrder"==a?ba.vc_ord_search_gu=8:"getCancelOrder"==a?ba.vc_ord_search_gu=6:"getOrderChangeOption"==a?("option"==c.pageUI.orderState,ba.change_type="OPT",ba.vc_ord_search_gu=2):"getOrderChangeShipping"==a?("delivery"==c.pageUI.orderState,ba.vc_ord_search_gu=2,ba.change_type="DLV"):"getOrderExchange"==a?(c.pageUI.orderState="exchange",ba.vc_ord_search_gu=4):"getOrderReturn"==a?(c.pageUI.orderState="return",ba.vc_ord_search_gu=5):"getOrderList"==a&&(ba.vc_ord_search_gu=1);var ra=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],xa=["오늘","어제","이번 주","지난 주","지지난 주","한달"];m?(""!=m.commandDate&&(2!=m.commandDate.length?ba.date_search_val="0"+m.commandDate:ba.date_search_val=m.commandDate),""!=m.commandDayOfWeek&&b.forEach(ra,function(a,b){a==m.commandDayOfWeek&&(ba.date_search_gu="VC5",ba.day_search_val=b+1)}),""!=m.commandPeriod&&b.forEach(xa,function(a,b){a==m.commandPeriod&&(ba.date_search_gu="VC"+b)}),""!=m.commandMonth&&(2!=m.commandMonth.length?ba.date_search_val="0"+m.commandMonth+ba.date_search_val:ba.date_search_val=m.commandMonth+ba.date_search_val)):ba.date_search_gu="VC6",c.pageLoading=!0,N.getPurchaseList(ba).then(function(b){if(ka.changeState("order_inquiry"),b&&b.length>0)if(c.pageUI.purchaseList=b,"getOrderList"==a)if(m.commandDate||m.commandDayOfWeek||m.commandPeriod||m.commandMonth){var d="";m.commandDate&&(d=m.commandDate+"일, "+ra[new Date(z("strToDate5")(c.pageUI.purchaseList[0].ord_date)).getDay()]+"에"),m.commandDayOfWeek&&(d=m.commandDayOfWeek+"에"),m.commandPeriod&&(d=m.commandPeriod),m.commandMonth&&(d=m.commandMonth+"월 "+d),ka.showMsg(o.msg.purchaseShow,[d])}else ka.showMsg(o.msg.purchaseDefaultShow);else"getOrderInquire"==a?c.pageUI.purchaseList[0].send_due_date?"발송완료"==c.pageUI.purchaseList[0].ord_step_str?ka.showMsg(o.getMsgData(c.pageUI.purchaseList[0].ord_step_msg,c.pageUI.purchaseList[0].ord_step_msg,"top")):ka.showMsg(o.getMsgData(c.pageUI.purchaseList[0].send_due_date+c.pageUI.purchaseList[0].send_due_word,c.pageUI.purchaseList[0].send_due_date+c.pageUI.purchaseList[0].send_due_word,"top")):c.pageUI.purchaseList[0].ord_step_msg?"17"==c.pageUI.purchaseList[0].ord_dtl_stat_cd&&c.pageUI.purchaseList[0].ord_step_msg.search(c.pageUI.purchaseList[0].inv_no)>0?"발송완료"==c.pageUI.purchaseList[0].ord_step_str?ka.showMsg(o.msg.purchaseSendShowTop):"배송완료"==c.pageUI.purchaseList[0].ord_step_str?ka.showMsg(o.msg.purchaseSendShowSendedTop):ka.showMsg(o.msg.purchaseSendShowTop):ka.showMsg(o.getMsgData(c.pageUI.purchaseList[0].ord_step_msg,c.pageUI.purchaseList[0].ord_step_msg,"top")):ka.showMsg(o.msg.purchaseNameShow,[c.loginInfo.name]):"getOrderCancle"==a?ka.showMsg(o.msg.purchaseExecShow,["주문취소가 "]):"getOrderChangeOption"==a?ka.showMsg(o.msg.purchaseExecShow,["옵션변경 "]):"getOrderChangeShipping"==a?ka.showMsg(o.msg.purchaseExecShow,["배송지 변경 "]):"getOrderExchange"==a?ka.showMsg(o.msg.purchaseExecShow,["교환"]):"getOrderReturn"==a?ka.showMsg(o.msg.purchaseExecShow,["반품"]):"getExchangeInProgressOrder"==a?ka.showMsg(o.msg.purchaseDoingShow,["교환","교환"]):"getReturnInProgressOrder"==a?ka.showMsg(o.msg.purchaseDoingShow,["반품","반품"]):"getCancelOrder"==a&&ka.showMsg(o.msg.purchaseCancleShow);else c.pageUI.orderState="",c.pageUI.purchaseList=[],"getOrderList"==a||"getOrderInquire"==a?(c.setGATag("주문배송조회결과없음","주문 보기 없음",n,q),ka.showMsg(o.msg.purchaseNone),c.soundEndData=o.msg.purchaseNoneQnaYn):"getOrderCancle"==a?(ka.showMsg(o.msg.purchaseExecNoneHome,["주문취소 "]),c.setGATag("주문배송조회결과없음","주문 취소 없음",n,q)):"getOrderChangeOption"==a?(ka.showMsg(o.msg.purchaseExecNoneHome,["옵션변경"]),c.setGATag("주문배송조회결과없음","주문 옵션변경 없음",n,q)):"getOrderChangeShipping"==a?(ka.showMsg(o.msg.purchaseExecNoneHome,["배송지 변경"]),c.setGATag("주문배송조회결과없음","주문 배송지 변경 없음",n,q)):"getOrderExchange"==a?(ka.showMsg(o.msg.purchaseExecNoneHome,["교환"]),c.setGATag("주문배송조회결과없음","주문 교환 없음",n,q)):"getOrderReturn"==a?(ka.showMsg(o.msg.purchaseExecNoneHome,["반품"]),c.setGATag("주문배송조회결과없음","주문 반품 없음",n,q)):"getExchangeInProgressOrder"==a?(ka.showMsg(o.msg.purchaseDoingNone,["교환","교환"]),c.setGATag("주문배송조회결과없음","주문 교환중 없음",n,q)):"getReturnInProgressOrder"==a?(ka.showMsg(o.msg.purchaseDoingNone,["반품","반품"]),c.setGATag("주문배송조회결과없음","주문 반품중 없음",n,q)):"getCancelOrder"==a&&(ka.showMsg(o.msg.purchaseCancleNone),c.setGATag("주문배송조회결과없음","주문 취소완료 없음",n,q))})["catch"](function(){console.error("주문내역 정보 로드 오류"),ka.showMsg(o.msg.networkError)})["finally"](function(){c.pageLoading=!1});break;case"getCouponHowToUse":ka.changeState("home",null,!0),ka.showMsg(o.msg.couponHowToUse),c.setGATag("공통_이벤트","쿠폰 이용방법",n,q);break;case"getCoupon":if(m&&"goLogin"==m.goLogin||c.setGATag("공통_이벤트","쿠폰 보기",n,q),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}c.pageLoading=!0,H.getCouponList().then(function(a){ka.changeState("coupon"),a.coupondownlist&&a.coupondownlist.items&&a.coupondownlist.items.length>0?(c.pageUI.couponListInfo=a.coupondownlist.items,ka.showMsg(o.msg.couponShow,[c.pageUI.couponListInfo.length])):(c.pageUI.couponListInfo=[],ka.showMsg(o.msg.couponNone),console.error("쿠폰 정보 없음"));var b=!1;"N"==a.couponzonelist.mbrDownYn&&(b=!0);for(var d=a.couponzonelist.items,e=0;e<d.length;e++)"N"==d[e].cpnDownYn&&(b=!0);b?c.soundEndData=o.msg.couponDown:"",b&&c.setGATag("샬롯질의","쿠폰동의메시지노출",null,null)})["catch"](function(){ka.showMsg(o.msg.networkError),console.error("쿠폰 정보 로드 오류")})["finally"](function(){c.pageLoading=!1});break;case"getOrderECouponResend":ka.showMsg(o.msg.unknown),c.setGATag("음성명령어","재발송해줘",n,q);break;case"getPoint":case"getLPoint":case"getLMoney":case"getDeposit":case"getClover":c.pageLoading=!0;var ba={};if("getPoint"==a?ba.pointType="point":"getLPoint"==a?ba.pointType="lpoint":"getLMoney"==a?ba.pointType="lmoney":"getDeposit"==a?ba.pointType="deposit":"getClover"==a&&(ba.pointType="clover"),m&&"goLogin"==m.goLogin||("point"==ba.pointType?c.setGATag("공통_이벤트","포인트 보기",n,q):"getLPoint"==a?c.setGATag("공통_이벤트","포인트_엘포인트 보기",n):"getLMoney"==a?c.setGATag("공통_이벤트","포인트_엘머니 보기",n,q):"getDeposit"==a?c.setGATag("공통_이벤트","포인트_보관금 보기",n,q):"getClover"==a&&c.setGATag("공통_이벤트","포인트_클로버 보기",n,q)),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}L.getPointCloverList(ba).then(function(b){ka.changeState("point"),c.pageUI.pointCloverListInfo=z("findItemAndGetFront")(b,"pointType",ba.pointType);for(var d,e,f,g,h=0;h<b.length;h++)"lpoint"==b[h].pointType?d=b[h].pointcount:"lmoney"==b[h].pointType?e=b[h].pointcount:"deposit"==b[h].pointType?f=b[h].pointcount:"clover"==b[h].pointType&&(g=b[h].pointcount);"point"==ba.pointType?0==d&&0==e&&0==f&&0==g?ka.showMsg(o.msg.pointCloverNone,["포인트가"]):ka.showMsg(o.getMsgData(o.getMsgRepeatPoint(c.pageUI.pointCloverListInfo),o.getMsgRepeatPoint(c.pageUI.pointCloverListInfo),"top")):"getLPoint"==a?d?ka.showMsg(o.msg.pointShow,["엘포인트",d]):ka.showMsg(o.msg.pointCloverNone,["엘포인트가"]):"getLMoney"==a?e?ka.showMsg(o.msg.pointShow,["엘머니",e]):ka.showMsg(o.msg.pointCloverNone,["엘머니가"]):"getDeposit"==a?f?ka.showMsg(o.msg.pointShow,["보관금",f]):ka.showMsg(o.msg.pointCloverNone,["보관금이"]):"getClover"==a&&(g?(1e3>g?ka.showMsg(o.msg.cloverShowUnder,[g]):g>999&&1e4>g?ka.showMsg(o.msg.cloverShowOver,[g]):g>9999&&ka.showMsg(o.msg.cloverShowMil,[g]),g>999&&1e4>g?(c.soundEndData=o.msg.useCloverShow,c.setGATag("샬롯질의","클로버동의메시지노출",n,q)):g>9999&&(c.soundEndData=o.msg.useCloverShowMil,c.setGATag("샬롯질의","클로버동의메시지노출",n,q))):ka.showMsg(o.msg.pointCloverNone,["클로버가"]))})["catch"](function(){ka.showMsg(o.msg.networkError),console.error("포인트 정보 로드 오류")})["finally"](function(){c.pageLoading=!1});break;case"getEventApplicationDetail":if(m&&"goLogin"==m.goLogin||c.setGATag("공통_이벤트","이벤트 응모내역보기",n,q),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}var ba={};ba.pageIdx=c.pageUI.curPage,c.pageLoading=!0,M.getEventApplyList(ba).then(function(a){ka.changeState("event_application_details"),c.pageUI.isChangeCommandState?c.pageUI.eventApplyInfo=a.items:(c.pageUI.eventApplyInfo=c.pageUI.eventApplyInfo.concat(a.items),b.element(d).scrollTop(c.pageUI.eventApplyInfoScrollTop)),c.pageUI.eventApplyInfoTotal=a.total_count,c.pageUI.eventApplyInfo.length>0?(b.element(d).on("scroll.eventDetail",function(){if(c.pageLoading||c.pageUI.eventApplyInfo.length>c.pageUI.eventApplyInfoTotal)return void b.element(d).off("scroll.eventDetail");var a=b.element(d),e=b.element("body"),f=a.height(),g=e[0].scrollHeight;a.scrollTop()+f>=g-(f+f/10)&&(c.listClickState=!0,c.pageUI.curPage=c.pageUI.curPage+1,c.pageUI.eventApplyInfoScrollTop=a.scrollTop(),ka.commandExec("getEventApplicationDetail"))}),1==c.pageUI.curPage&&ka.showMsg(o.msg.eventApplyShow)):ka.showMsg(o.msg.eventApplyShowNone)})["catch"](function(){ka.showMsg(o.msg.networkError),console.error("이벤트 응모내역 로드 오류")})["finally"](function(){c.pageLoading=!1});break;case"getEvent":var ba={};c.loginInfo.isLogin&&(ba.age=c.loginInfo.mbrAge?c.loginInfo.mbrAge:"",ba.gender=c.loginInfo.genSctCd?c.loginInfo.genSctCd:""),c.pageLoading=!0,c.pageUI.stateSelectorViewInfo?"click"==q?c.setGATag("키워드","이벤트",null,q):c.setGATag("키워드","이벤트",n,q):c.setGATag("공통_이벤트","이벤트 보기",n,q),M.getEventList(ba).then(function(a){ka.changeState("event"),c.pageUI.eventListInfo=a,c.pageUI.eventListInfo.length?ka.showMsg(o.msg.eventShow):ka.showMsg(o.msg.eventNone)})["catch"](function(){ka.showMsg(o.msg.networkError),console.error("이벤트 로드 오류")})["finally"](function(){c.pageLoading=!1});break;case"actionApply":case"getPurchaseGiftApply":if(m&&"goLogin"==m.goLogin||("actionApply"==a||"getPurchaseGiftApply"==a)&&("purchase_gift"==c.pageUI.state?c.setGATag("구매사은진행중","신청해줘",n,q):c.setGATag("공통_이벤트","구매사은 신청해줘",n,q)),!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}if(c.pageUI.saunListInfoMyType&&("myList"==c.pageUI.saunListInfoMyType||"noGift"==c.pageUI.saunListInfoMyType)){console.log("구매사은 신청 불가 페이지");break}c.pageSaunLoading=!0,I.registeSaunAll().then(function(a){c.pageSaunLoading&&(a.reg_cnt>0?(ka.commandExec("getAppliedPurchaseGift",{applyCount:a.reg_cnt}),c.setGATag("구매사은진행중","신청완료",n,q,"purchase_gift")):(c.pageUI.saunListInfoMyType="noGift",ka.changeState("purchase_gift"),c.pageUI.saunListInfo=[],ka.showMsg(o.msg.saunAllApplyNone),c.setGATag("구매사은진행중","신청불가",n,q,"purchase_gift")))})["catch"](function(){console.error("구매사은 이벤트 신청 로드 오류"),ka.showMsg(o.msg.networkError)})["finally"](function(){c.pageSaunLoading=!1});break;case"getPurchaseGiftInformation":case"getAppliedPurchaseGift":case"getPurchaseGift":if(m&&"goLogin"==m.goLogin||("getAppliedPurchaseGift"==a?c.setGATag("공통_이벤트","구매사은 신청내역보기",n,q):"getPurchaseGiftInformation"==a&&c.setGATag("공통_이벤트","구매사은 포인트 지급일",n,q)),("getAppliedPurchaseGift"==a||"getPurchaseGiftInformation"==a)&&!c.loginInfo.isLogin){ka.showMsg(o.msg.needLogin);var da=b.copy(m);da.sendTxt=n,da.iptType=q,da.goLogin="goLogin";var ea=JSON.stringify(da);ka.needLoginCommand(a,ea);break}var ba={};"getPurchaseGift"==a?(ba.listType="saun_list",c.pageUI.stateSelectorViewInfo?"click"==q?c.setGATag("키워드","구매사은",null,q):c.setGATag("키워드","구매사은",n,q):c.setGATag("공통_이벤트","구매사은 보기",n,q)):"getPurchaseGiftInformation"==a?ba.listType="mysaun_list":"getAppliedPurchaseGift"==a&&(ba.listType="mysaun_list"),c.pageLoading=!0,I.getSaunList(ba).then(function(b){if(ka.changeState("purchase_gift"),"getPurchaseGift"==a?c.pageUI.saunListInfoMyType="list":"getAppliedPurchaseGift"==a?c.pageUI.saunListInfoMyType="myList":"getPurchaseGiftInformation"==a&&(c.pageUI.saunListInfoMyType="myList"),c.pageUI.saunListInfo=b,"getPurchaseGift"==a)b&&b.length>0?ka.showMsg(o.msg.saunShow):(console.error("구매사은 이벤트 정보 없음"),ka.showMsg(o.msg.saunNone));else if("getAppliedPurchaseGift"==a)b&&b.length>0?m&&m.applyCount?ka.showMsg(o.msg.saunAllApply,[m.applyCount]):ka.showMsg(o.msg.saunMyShow):(console.error("신청한 구매사은 이벤트 정보 없음"),ka.showMsg(o.msg.saunMyNone));else if("getPurchaseGiftInformation"==a)if(b&&b.length>0){var d="",e="",f=b[0];"002"==f.eventStatus||"003"==f.eventStatus?(d="신청하신 "+f.evtNm+" 구매사은 이벤트의 지급일은 "+z("strToDate4")(f.pmgSndDt)+"입니다.",e="신청하신 이벤트의 지급일은 "+z("strToDate4")(f.pmgSndDt)+"입니다.",ka.showMsg(o.getMsgData(d,e,"top"))):"004"==f.eventStatus||"005"==f.eventStatus||"006"==f.eventStatus?(d="신청하신 "+f.evtNm+" 구매사은 이벤트는 "+z("strToDate4")(f.pmgSndDt)+" 지급 준비 중입니다. 조금만 기다려주세요",e="신청하신 이벤트는 "+z("strToDate4")(f.pmgSndDt)+" 지급 준비 중입니다. 조금만 기다려주세요.",ka.showMsg(o.getMsgData(d,e,"top"))):("007"==f.eventStatus||"008"==f.eventStatus)&&(d=f.evtNm+" 구매사은 이벤트는 "+z("strToDate4")(f.pmgSndDt)+" 지급완료 되었습니다.",e="이벤트는 "+z("strToDate4")(f.pmgSndDt)+" 지급완료 되었습니다.",ka.showMsg(o.getMsgData(d,e,"top")))}else console.error("신청한 구매사은 이벤트 정보 없음"),ka.showMsg(o.msg.saunMyNone)})["catch"](function(){ka.showMsg(o.msg.networkError),console.error("구매사은 이벤트 정보 로드 오류")})["finally"](function(){c.pageLoading=!1});break;case"getDiscount":case"getInProgressInterestFreeInstallment":case"getInterestFreeInstallment":c.pageLoading=!0;var ba={};"getDiscount"==a?(ba.searchType="D",c.loginInfo.isLogin&&c.basicInfo.member_info.acqr_cd&&(ba.acgrCd=c.basicInfo.member_info.acqr_cd,ba.userCard=!0),m.commandCard?c.pageUI.stateSelectorViewInfo?c.setGATag("키워드","청구할인 카드보기",n,q):c.setGATag("공통_이벤트","청구할인 카드보기",n,q):c.pageUI.stateSelectorViewInfo?"click"==q?c.setGATag("키워드","청구할인",null,q):c.setGATag("키워드","청구할인",n,q):c.setGATag("공통_이벤트","청구할인 보기",n,q)):("getInProgressInterestFreeInstallment"==a||"getInterestFreeInstallment"==a)&&(ba.searchType="C"),m&&m.commandCard&&(ba.userCard=!1),J.getSaleList(ba).then(function(d){if(d&&d.length>0){var e,f,g;"getDiscount"==a&&m.commandCard?c.pageUI.saleListInfo=J.getCardList(m.commandCard):c.pageUI.saleListInfo=d,"getDiscount"==a?(ka.changeState("billing_discount"),ba.userCard?J.getCardList(ba.acgrCd).length>0?(b.forEach(c.pageUI.saleCardInfo,function(a,b){b==ba.acgrCd&&(f=a.name)}),g=c.basicInfo.greeting_info.user_nm,e=o.getMsgData(o.getMsgRepeatDiscountDataLogin(c.pageUI.saleListInfo,ba.acgrCd,f,g,!1),o.getMsgRepeatDiscountDataLogin(c.pageUI.saleListInfo,ba.acgrCd,f,g,!0),"top")):(c.pageUI.saleListInfo=d,e=o.getMsgData(o.getMsgRepeatDiscountData(c.pageUI.saleListInfo),o.getMsgRepeatDiscountData(c.pageUI.saleListInfo,!1,!1,!0),"top")):m.commandCard?(b.forEach(c.pageUI.saleCardInfo,function(a,b){b==m.commandCard&&(f=a.name)}),c.pageUI.saleListInfo.length>0?e=o.getMsgData(o.getMsgRepeatDiscountData(c.pageUI.saleListInfo),o.getMsgRepeatDiscountData(c.pageUI.saleListInfo,!1,!1,!0),"top"):(c.pageUI.saleListInfo=d,e=o.getMsgData(o.getMsgRepeatDiscountData(c.pageUI.saleListInfo,!0,f),o.getMsgRepeatDiscountData(c.pageUI.saleListInfo,!0,f,!0),"top"))):e=o.getMsgData(o.getMsgRepeatDiscountData(c.pageUI.saleListInfo),o.getMsgRepeatDiscountData(c.pageUI.saleListInfo,!1,!1,!0),"top")):("getInProgressInterestFreeInstallment"==a||"getInterestFreeInstallment"==a)&&(c.pageUI.stateSelectorViewInfo?"click"==q?c.setGATag("키워드","무이자할부",null,q):m.commandCard?c.setGATag("키워드","무이자할부 카드보기",n,q):c.setGATag("키워드","무이자할부 보기",n,q):m.commandCard?c.setGATag("공통_이벤트","무이자할부 카드보기",n,q):c.setGATag("공통_이벤트","무이자할부 보기",n,q),ka.changeState("interest_free_installment"),e=m.commandCard?J.getCardList(m.commandCard).length>0?o.getMsgData(o.getMsgRepeatSaleDataSearch(J.getCardList(m.commandCard),!1,!0),o.getMsgRepeatSaleDataSearch(J.getCardList(m.commandCard),!1,!0,!0),"top"):o.getMsgData(o.getMsgRepeatSaleDataSearch(c.pageUI.saleListInfo,!0,!1,f),o.getMsgRepeatSaleDataSearch(c.pageUI.saleListInfo,!0,!1,f,!0),"top"):o.getMsgData(o.getMsgRepeatSaleData(c.pageUI.saleListInfo),o.getMsgRepeatSaleData(c.pageUI.saleListInfo),"top")),ka.showMsg(e)}else console.error("청구할인 무이자 할부 정보 없음"),c.pageUI.saleListInfo=[],ka.changeState("interest_free_installment"),"getDiscount"==a?ka.showMsg(o.msg.discountNone):("getInProgressInterestFreeInstallment"==a||"getInterestFreeInstallment"==a)&&ka.showMsg(o.msg.saleCardNone)})["catch"](function(){console.error("청구할인 무이자 할부 정보 로드 오류"),ka.showMsg(o.msg.networkError)})["finally"](function(){c.pageLoading=!1});break;case"getCenter":case"goCenterTalk":case"goCenterCall":c.pageLoading=!0,P.getCounselorList().then(function(b){var d=new Date,e=d.getHours();"getCenter"==a?(ka.changeState("customer_center"),c.pageUI.centerKind="customer","Y"==b.data.psb_yn&&"N"==b.data.holiday_cd||"M"==b.data.holiday_cd&&e>8&&18>e?(c.pageUI.centerYn="Y",c.setGATag("공통_고객센터","고객센터 이동",n,q,c.pageUI.prestate),ka.showMsg(o.msg.centerCounseling)):("N"==b.data.psb_yn||"W"==b.data.holiday_cd||"H"==b.data.holiday_cd)&&(c.pageUI.centerYn="N",c.setGATag("공통_고객센터불가","고객센터 이동",n,q,c.pageUI.prestate),c.soundEndData=o.msg.centerQnaYn,ka.showMsg(o.msg.centerCounselingOtherTime))):"goCenterTalk"==a?(c.pageUI.centerKind="talk","Y"==b.data.psb_yn&&"N"==b.data.holiday_cd||"M"==b.data.holiday_cd&&e>8&&18>e?(c.loginInfo.isLogin||ka.showMsg(o.msg.needLogin),c.setGATag("공통_고객센터","톡상담 이동",n,q,c.pageUI.prestate),g.go(a,c.loginInfo.isLogin)):("N"==b.data.psb_yn||"W"==b.data.holiday_cd||"H"==b.data.holiday_cd)&&(ka.changeState("customer_center"),c.pageUI.centerYn="N",c.setGATag("공통_고객센터불가","톡상담 이동",n,q,c.pageUI.prestate),c.soundEndData=o.msg.centerQnaYn,ka.showMsg(o.msg.centerTalkOtherTime))):"goCenterCall"==a&&("Y"==b.data.psb_yn&&"N"==b.data.holiday_cd||"M"==b.data.holiday_cd&&e>8&&18>e?(c.setGATag("공통_고객센터","고객센터전화 연결",n,q,c.pageUI.prestate),ka.showMsg(o.msg.centerCall),document.location.href="tel:1577-1110"):("N"==b.data.psb_yn||"W"==b.data.holiday_cd||"H"==b.data.holiday_cd)&&(c.pageUI.centerKind="call",ka.changeState("customer_center"),c.pageUI.centerYn="N",c.setGATag("공통_고객센터불가","고객센터전화 연결",n,q,c.pageUI.prestate),c.soundEndData=o.msg.centerQnaYn,ka.showMsg(o.msg.centerCallOtherTime)))})["catch"](function(){ka.showMsg(o.msg.networkError),console.error("마이추천 정보 로드 오류")})["finally"](function(){c.pageLoading=!1});break;case"getKeyword":c.pageUI.stateSelectorViewInfo?(c.stateSelectorOpenCloseM(!0),"situation_recommendation"==c.pageUI.state||"management_item_recommendation"==c.pageUI.state?c.setGATag("공통_추천","더보기",n,q):c.setGATag("키워드","더보기",n,q)):ka.showMsg(o.msg.unknown)}"actionUnknown"!=a&&("actionProdOptChange"!=a?sa=!1:"actionAddWish"!=a?ta=!1:"addCartLoginFlag"!=a?ua=!1:"getMimitoutou"!=a&&(va=!1),c.styleOtherQue=!1,wa=!1)},-1==navigator.userAgent.indexOf("mlotte001")&&ja(),c.VCCtrl=ka}]),d.directive("lotteContainer",["LotteCommon","commInitData","$timeout","VCSendMsg","VCBasicInfo","VCPageMove","$window","VCMsgData","LotteUtil","LotteGA","VCUpdateCart","$filter","VCAppApi",function(c,d,e,f,g,h,i,j,k,l,m,n,o){return{templateUrl:"/lotte/resources_dev/talk/voiceCommerce_container.html",replace:!0,controller:"LotteContainerCtrl",link:function(l,p,q,r){function s(){b.element(i).off(".actionInput").on("touchend.actionInput",function(a){var c=l.pageUI.inputMode,d=b.element(a.target);if(!(d.hasClass("voice_mic")||d.parents(".voice_mic").length>0||"keyboard"!=c&&"mic"!=c)){b.element(i).off(".actionInput");var e=d.attr("id");"iptSendTxt"!=e&&"btnMic"!=e&&"btnKeyboard"!=e&&(r.stopAppSTT(),b.element("#iptSendTxt").blur(),l.pageUI.inputMode="",l.pageUI.inputTxt="")}})}function t(){if(l.pageUI.optInfo.prdOptStepCnt==l.pageUI.optInfo.curLayerOptValArr.length){var a=l.pageUI.optInfo.curOptValArr;if(l.pageUI.optInfo.curOptValArr=l.pageUI.optInfo.curLayerOptValArr,r.setSelectedProdOptItemInfo(),null!=l.pageUI.optInfo.selectedOptItemNo){if("order"==l.pageUI.optInfo.optType){var c=r.getCurProdInfo();r.orderDecide(c.cart_sn,!1,!0)}else if("cart"==l.pageUI.optInfo.optType)r.addCartProgress();else if("cart"==l.pageUI.state){var c=r.getCurProdInfo(),d=l.pageUI.optInfo.selectedOptItemNo;l.pageLoading=!0,m.updateCart({cart_sn:c.cart_sn,item_no:d,ord_qty:c.ord_qty,update_ck:!0,goods_no:c.goods_no,goods_cmps_cd:c.goods_cmps_cd}).then(function(a){var d=[];b.forEach(l.pageUI.optInfo.curOptValArr,function(a,b){d.push(a.name+" : "+a.item.optValue)}),c.goods_option=d.join(", ")})["catch"](function(){console.error("장바구니 옵션 업데이트 실패"),l.alert_2016("장바구니 옵션 반영 오류 발생")})["finally"](function(){l.pageLoading=!1})}else r.getProdDetailInfo();l.pageUI.showPrdOpt=!1}else l.pageUI.optInfo.curOptValArr=a}else l.pageUI.optInfo.curOptStep++,r.showMsg(j.getMsgData("원하는 "+l.pageUI.optInfo.prdOptInfo[l.pageUI.optInfo.curOptStep].optNm+" 번호를 말해보세요","원하는 "+l.pageUI.optInfo.prdOptInfo[l.pageUI.optInfo.curOptStep].optNm+" 번호를 말해보세요","q"),null,!0)}l.DEV_MODE="Y"==d.query.dev_mode,l.pageUI.devMode="Y"==d.query.dev_mode,"m.lotte.com"==location.host&&(l.DEV_MODE=!1,l.pageUI.devMode=!1),l.toggleDevMode=function(){l.pageUI.testMode=!l.pageUI.testMode},l.execCommand=function(a,b){r.commandExec(a,b,"개발테스트모드","mic")};var u=0,v=!1;"iPhone"==l.appObj.iOsType&&(v=!0);var w=!1;b.element("#iptSendTxt").bind("blur",function(c){b.element("#voiceMain").removeClass("disableScroll"),v&&"prod_detail"==l.pageUI.state&&e(function(){$(a).scrollTop(u)},10),"keyboard"==l.pageUI.inputMode&&(l.pageUI.inputMode=""),w=!0,e(function(){w=!1},50)}),b.element("#iptSendTxt").bind("focus",function(c){v&&"prod_detail"==l.pageUI.state&&(u=$(a).scrollTop(),b.element("#voiceMain").addClass("disableScroll"))}),l.showDevToast=function(a){r.showToast(a)},l.actionInput=function(a,b){switch(w&&(l.pageUI.inputMode="keyboard"),l.viewInfoTempMicCheck=!1,l.pageUI.inputMode){case"mic":l.pageUI.inputTxt="","keepMic"==b?(l.pageUI.inputMode="",l.setGATag("공통_마이크기능","마이크_ON",null,"click")):(l.pageUI.inputMode="keyboard",l.setGATag("공통_마이크기능","키패드_전환",null,"click")),r.stopAppSTT();break;case"keyboard":l.pageUI.inputTxt="",l.pageUI.inputMode="mic",r.stopAppTTS(),l.setGATag("공통_마이크기능","마이크_전환",null,"click"),l.pageUI.micVoiceTxt="듣고 있어요",e(function(){r.startAppSTT()},l.pageUI.appSchemaDelay);break;default:"keyboard"==l.pageUI.lastInputMode?("keepBlank"!=b&&("reKeyBoard"==b?(l.pageUI.inputTxt="",l.pageUI.inputMode=""):l.pageUI.inputMode="keyboard",l.setGATag("공통_마이크기능","키패드_ON",null,"click")),r.stopAppSTT()):(l.pageUI.inputTxt="",l.pageUI.inputMode="mic",r.stopAppTTS(),l.setGATag("공통_마이크기능","마이크_ON",null,"click"),l.pageUI.micVoiceTxt="듣고 있어요",e(function(){r.startAppSTT()},l.pageUI.appSchemaDelay))}s(),l.pageUI.lastInputMode=l.pageUI.inputMode,"reKeyBoard"==b&&(l.pageUI.lastInputMode="keyboard")},l.getDoubleQuotationMarks=function(a){var b=(a+"").match(/\".+\"/gi);return b&&b.length>0&&(b=b[0]),!b&&a&&(b=a),b?b:""},l.enterSendSemantic=function(a,b,c){a&&13==a.keyCode&&l.sendSemantic(b,c)},l.sendSemantic=function(a,c,d){var e="",h="";"mic"==a||"click"==a?e=c:"keyboard"==a&&(e=l.pageUI.inputTxt,l.setGATag("공통_마이크기능","키패드_전송",null,"click")),l.prdSwiperMoveCommand=a,l.loginInfo.isLogin&&(l.pageUI.preReqParamObj||(l.pageUI.preReqParamObj={}),l.pageUI.preReqParamObj.loginGender=l.loginInfo.genSctCd),h=n("convertObjectToParam")(l.pageUI.preReqParamObj),"mic"!=a&&"keyboard"!=a&&"click"!=a||!e||("mic"==a?(l.pageUI.inputMode="",l.pageUI.inputTxt=""):"keyboard"==a&&(l.pageUI.inputMode="",l.pageUI.inputTxt="",b.element("#iptSendTxt").blur()),l.pageUI.semanticFlag||(l.pageUI.semanticFlag=!0,l.pageLoading=!0,f.sendSemanticAnalysis({screen:l.pageUI.state,qType:a,text:e,history:d,mbrNo:l.loginInfo.isLogin?l.loginInfo.mbrNo:null,preReqParam:h}).then(function(b){r.commandExec(b.command,b,e,a)})["catch"](function(){l.VCCtrl.showMsg(j.msg.networkError)})["finally"](function(){l.SemanticHistory=g.getSemanticeHistory(),"mic"==a?(l.pageUI.inputMode="",l.pageUI.inputTxt=""):"keyboard"==a&&(l.pageUI.inputMode="",l.pageUI.inputTxt="",b.element("#iptSendTxt").blur()),l.pageUI.semanticFlag=!1,l.pageLoading=!1})))},l.prdgetRecomrCtrl=null,l.getPrdDetailSwiperControl=function(a){l.prdDetailSwiperCtrl=a},l.prdDetailSwiperEnd=function(a){l.setVCAnalysis("상품이미지 스와이프")},l.getPrdSwiperControl=function(a){l.prdSwiperCtrl=a,l.pageUI.curPrdSwiperIdx>0&&e(function(){l.pageUI.curPrdSwiperIdx=l.pageUI.curPrdSwiperIdx,l.prdSwiperCtrl.moveSpeedIndex(l.pageUI.curPrdSwiperIdx,10)},10)},l.prdSwiperStart=function(a){l.prdSwiperMoveCommand=""},l.prdSwiperEnd=function(a){l.pageUI.curPrdSwiperIdx!=a&&(r.initProdOpt(),l.pageUI.curPrdSwiperIdx=a,"mic"==l.prdSwiperMoveCommand||"keyboard"==l.prdSwiperMoveCommand||("touch"==l.prdSwiperMoveCommand||""==l.prdSwiperMoveCommand)&&l.setGATag("유닛스와이프","유닛스와이프",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"),l.prdSwiperMoveCommand=""),"prod_list"==l.pageUI.state||"management_item_recommendation"==l.pageUI.state||"favorite_brands"==l.pageUI.state||"situation_recommendation"==l.pageUI.state&&l.pageUI.preReqParamObj&&"R"!=l.pageUI.preReqParamObj.searchType?l.pageUI.preReqParamObj&&l.pageUI.preReqParamObj.talkId&&"2"==l.pageUI.preReqParamObj.talkId?l.pageUI.prdList.length-1>10?9==l.pageUI.curPrdSwiperIdx?l.pageUI.showPrd10||(l.VCCtrl.showMsg(j.msg.priceQuest),l.pageUI.showPrd10=!0,l.setGATag("샬롯재질의","가격재질의",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click")):19==l.pageUI.curPrdSwiperIdx?l.pageUI.showPrd20||(l.VCCtrl.showMsg(j.msg.helpQuest),l.pageUI.showPrd20=!0,l.setGATag("샬롯재질의","도와줘재질의",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click")):l.pageUI.prdList.length-1<20&&l.pageUI.prdList.length-1==l.pageUI.curPrdSwiperIdx&&(l.pageUI.showPrdEnd||(l.VCCtrl.showMsg(j.msg.helpQuest),l.pageUI.showPrdEnd=!0,l.setGATag("샬롯재질의","도와줘재질의",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"))):l.pageUI.prdList.length-1>1&&l.pageUI.prdList.length-1==l.pageUI.curPrdSwiperIdx&&(l.pageUI.showPrdEnd||(l.VCCtrl.showMsg(j.msg.priceQuest),l.pageUI.showPrdEnd=!0,l.setGATag("샬롯재질의","가격재질의",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"))):l.pageUI.prdList.length-1>10?9==l.pageUI.curPrdSwiperIdx&&(l.pageUI.showPrd10||(l.VCCtrl.showMsg(j.msg.helpQuest),l.pageUI.showPrd10=!0,l.setGATag("샬롯재질의","도와줘재질의",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"))):l.pageUI.prdList.length-1>1&&l.pageUI.prdList.length-1<=10&&l.pageUI.prdList.length-1==l.pageUI.curPrdSwiperIdx&&(l.pageUI.showPrdEnd||(l.VCCtrl.showMsg(j.msg.helpQuest),l.pageUI.showPrdEnd=!0,l.setGATag("샬롯재질의","도와줘재질의",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"))):"style_recommendation"==l.pageUI.state&&(l.pageUI.curPrdSwiperIdx!=l.pageUI.prdList.length-1||l.styleOtherQue||(l.styleOtherQue=!0,l.VCCtrl.showMsg(j.msg.styleOtherQue))),l.setVCAnalysis("유닛스와이프")},l.setInfo=function(a){l.setGATag("상품이미지 스와이프","상품이미지 스와이프",null,"click"),l.setVCAnalysis("상품이미지 스와이프")},l.swipeListPrev=function(a){l.pageUI.curPage--,l.pageUI.curPage<1&&(l.pageUI.curPage=1),l.listClickState=!0,l.pageUI.curPage>=1&&("cart"==l.pageUI.state?r.commandExec("getCart"):"wish"==l.pageUI.state?r.commandExec("getWish"):"purchase_frequently"==l.pageUI.state&&r.commandExec("getOftenList")),r.showMsg(j.msg.prdPrev),"pervClick"==a&&(l.setGATag("음성명령어","이전",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"),l.setVCAnalysis("이전"))},l.swipeListNext=function(a){l.listClickState=!0,l.pageUI.curPage++;var b=0;l.pageUI.curPage>Math.ceil(l.pageUI.totalCnt/l.pageUI.rowsPerPage)&&(l.pageUI.curPage=Math.ceil(l.pageUI.totalCnt/l.pageUI.rowsPerPage)),b=l.pageUI.totalCnt,"cart"==l.pageUI.state?r.commandExec("getCart"):"wish"==l.pageUI.state?r.commandExec("getWish"):"purchase_frequently"==l.pageUI.state&&r.commandExec("getOftenList"),l.pageUI.curPage<l.getTotalRowPerPage()?b=l.pageUI.rowsPerPage:(b%=l.pageUI.rowsPerPage,0==b&&(b=l.pageUI.rowsPerPage)),r.showMsg(j.msg.prdNext,[b]),"nextClick"==a&&(l.setGATag("음성명령어","다음",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"),l.setVCAnalysis("더보여줘"))},l.getTotalRowPerPage=function(){var a;return a=Math.ceil(l.pageUI.totalCnt/l.pageUI.rowsPerPage),"wish"!=l.pageUI.state&&"cart"!=l.pageUI.state&&"purchase_frequently"!=l.pageUI.state&&(a=1),a},l.prevBtnShow=function(){var a=!1;return l.pageUI.prdList&&l.pageUI.curPage>1&&0==l.pageUI.curPrdSwiperIdx&&(a=!0),a},l.nextBtnShow=function(){var a,b=!1;return l.pageUI.curPrdSwiperIdx+1==l.pageUI.rowsPerPage&&(1<l.getTotalRowPerPage()?(b=!0,a=Math.ceil(l.pageUI.totalCnt/(l.pageUI.rowsPerPage*l.pageUI.curPage)),1==a&&(b=!1)):b=!1),b},l.prdStarBG=function(a){return{width:20*a+"%"}},l.goTalkAdvice=function(){h.go("goTalkAdvice",l.loginInfo.isLogin)},l.customerTel=function(){document.location.href="tel:1577-1110",l.setGATag("공통_고객센터","고객센터전화 연결",null,"click")},l.centerQue=function(){l.setGATag("공통_고객센터","1:1문의 이동",null,"click"),h.go("goCenterQue",l.loginInfo.isLogin);
},l.centerTalk=function(){l.setGATag("공통_고객센터","톡상담 이동",null,"click"),h.go("goTalkAdvice",l.loginInfo.isLogin)},l.goPrdDetailPage=function(a){var b=r.getCurProdInfo();b&&b.goods_no&&h.goPrdDetail(b.goods_no)},l.prdShare=function(a){l.pageUI.curPrdSwiperIdx=a,l.prdSwiperCtrl.moveSpeedIndex(a,10),r.commandExec("actionShare",null,null,"click"),l.setVCAnalysis("공유")},l.orderDetail=function(a){a&&(l.setGATag("주문배송조회상세이동","자세히",null,"click"),l.setVCAnalysis("자세히"),r.commandExec("getOrderDetailView",{commndOrdNo:a}))},l.cloverGuide=function(){r.commandExec("goCloverUseInfo",l.loginInfo.isLogin),l.setGATag("자세히","클로버이용안내",null,"click"),l.setVCAnalysis("클로버이용안내")},l.prdShareHide=function(){r.commandExec("actionClose",null,null,"click"),l.setGATag("공유레이어","닫기",null,"click"),l.setVCAnalysis("닫기"),l.showLayerHide=!0,l.pageUI.showShare=!1,e(function(){l.showLayerHide=!1},2e3)},l.prdCart=function(a){l.pageUI.curPrdSwiperIdx=a,l.prdSwiperCtrl.moveSpeedIndex(a,10),r.commandExec("actionAddCart",null,null,"click"),l.setVCAnalysis("찜")},l.addCart=function(){r.commandExec("actionAddCart",null,null,"click"),l.setVCAnalysis("찜")},l.prdOrder=function(a){l.pageUI.curPrdSwiperIdx=a,l.prdSwiperCtrl.moveSpeedIndex(a,10),r.commandExec("actionOrder",null,null,"click"),l.setVCAnalysis("주문해줘")},l.order=function(){r.commandExec("actionOrder",null,null,"click"),l.setVCAnalysis("주문해줘")},l.prdDetail=function(a){a>=0&&l.checkListState(l.pageUI.state)&&(l.pageUI.curPrdSwiperIdx=a,l.prdSwiperCtrl.moveSpeedIndex(a,10),r.commandExec("actionDetail",null,null,"click"),l.setVCAnalysis("자세히"))},l.saunDetail=function(a,b){b&&(h.goSaunDetail(b),"click"==a&&("list"!=l.pageUI.saunListInfoMyType?l.setGATag("구매사은신청완료","자세히",null,"click","purchase_gift_myList"):l.setGATag("구매사은진행중","자세히",null,"click"),l.setVCAnalysis("자세히")))},l.eventDetail=function(a,b,c){b&&(h.goEventDetail(b,c),"click"==a&&(l.setGATag("이벤트","자세히",null,"click"),l.setVCAnalysis("자세히")))},l.pointDetail=function(a){a&&("lpoint"==a?(h.go("goPoint",l.loginInfo.isLogin),l.setGATag("자세히","엘포인트",null,"click"),l.setVCAnalysis("엘포인트")):"lmoney"==a?(h.go("goLmoney",l.loginInfo.isLogin),l.setGATag("자세히","엘머니",null,"click"),l.setVCAnalysis("엘머니")):"deposit"==a?(h.go("goDeposit",l.loginInfo.isLogin),l.setGATag("자세히","보관금",null,"click"),l.setVCAnalysis("보관금")):"clover"==a&&(h.go("goClover",l.loginInfo.isLogin),l.setGATag("자세히","클로버",null,"click"),l.setVCAnalysis("클로버")))},l.eventResult=function(a){a&&h.goEventResult(a)},l.keywordSendSemantic=function(a){a&&(l.viewInfoTempMicCheck=!1,l.soundEndData=null,l.viewInfoTemp=null,o.stopSTT(l.pageUI.app.soundFlag),l.sendSemantic("click",l.getDoubleQuotationMarks(a)))},l.closePrdOptLayer=function(){l.pageUI.showPrdOpt=!1,l.setVCAnalysis("닫기")};var x=null;l.selectOptItem=function(a,b){var c=l.pageUI.optInfo.prdOptInfo[l.pageUI.optInfo.curOptStep].optNm,d=l.pageUI.optInfo.prdOptInfo[l.pageUI.optInfo.curOptStep].itemList.items;if(a<d.length){var f=d[a];if(l.pageUI.optInfo.curLayerOptValArr.length==l.pageUI.optInfo.curOptStep)l.pageUI.optInfo.curLayerOptValArr.push({name:c,item:f}),1==b||l.setGATag("옵션레이어","옵션선택",k.setDigit(a+1),"click");else{if(l.pageUI.optInfo.curLayerOptValArr.length-1!=l.pageUI.optInfo.curOptStep)return l.pageUI.optInfo.curOptStep=0,l.pageUI.optInfo.curLayerOptValArr=[],!1;l.pageUI.optInfo.curLayerOptValArr.pop(),l.pageUI.optInfo.curLayerOptValArr.push({name:c,item:f})}r.chkNowStepOptSoldout(),x&&(e.cancel(x),x=null),x=e(t,l.pageUI.optInfo.optSelectDelayTime),l.setVCAnalysis("옵션선택")}},l.helpInfoClick=function(a){l.sendSemantic("click",l.getDoubleQuotationMarks(a)),l.pageUI.showHelp=!1},l.helpInfoHide=function(){l.pageUI.showHelp=!1},l.goCommentLayer=function(){r.commandExec("actionProdComment",null,null,"click")},l.commentLayerHide=function(){l.pageUI.showPrdComment=!1,l.setGATag("상품평레이어","닫기",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"),l.setVCAnalysis("닫기")},l.goProdImgLayer=function(){r.commandExec("actionProdImg",null,null,"click")},l.backPrdList=function(){r.stateHistoryBack(),l.setGATag("음성명령어","이전",null,"click"),l.setVCAnalysis("이전")},l.changeProdOpt=function(){r.commandExec("actionProdOptChange",null,null,"click"),l.setVCAnalysis("옵션 변경해줘")},l.prodImgLayerHide=function(){l.pageUI.showPrdImgDetail=!1,l.setGATag("이미지레이어","닫기",k.setDigit(l.pageUI.curPrdSwiperIdx+1),"click"),l.setVCAnalysis("닫기")},l.toggleOrderTermLayer=function(){l.pageUI.orderInfo.termLayerFlag=!l.pageUI.orderInfo.termLayerFlag},l.ts_clause={visible:!1,index:0},l.ts_clause.index=0,l.ts_clause.visible=!1,l.showHideClause=function(a){l.ts_clause.visible=a,a&&(0==l.ts_clause.index?e(function(){l.loadClause(1)},10):e(function(){l.loadClause(l.ts_clause.index)},10))},l.loadClause=function(a){l.ts_clause.index=a;var d="";switch(a){case 1:d=c.clauseECommerce;break;case 2:d=c.clausePIUse;break;case 3:d=c.clausePIConsign;break;default:return}b.element(".ts_clause_cont > div").scrollTop(0),b.element(".ts_clause_cont > div").scrollLeft(0),b.element("#clauseHolder").load(d+" .clause_wrap")},l.ordLayerHide=function(){l.pageUI.showOrder=!1,l.setGATag("닫기","닫기",null,"click"),l.setVCAnalysis("닫기")},l.shareSNS=function(a){switch(a){case"sms":r.commandExec("actionShareSMS",null,null,"click");break;case"kakaotalk":r.commandExec("actionShareKakao",null,null,"click");break;case"kakaostory":r.commandExec("actionShareKaKaoStory",null,null,"click");break;case"facebook":r.commandExec("actionShareFacebook",null,null,"click");break;case"twitter":r.commandExec("actionShareTwitter",null,null,"click");break;case"url_copy_voice":r.commandExec("actionShareURL",null,null,"click")}}}}}]),d.directive("vcPrdDetailInfo",["$window",function(a){return{templateUrl:"/lotte/resources_dev/talk/voiceCommerce_dtl_info.html",replace:!0,scope:{curPrdHtmlInfo:"=curPrdHtmlInfo"},link:function(c,d,e){c.defenseBadHtml=function(a,b){a=a?a:"",a=a.replace(/<link(.*?)>/gi,""),a=a.replace(/<meta(.*?)>/gi,""),a=a.replace(/<script/gi,"<noscript"),a=a.replace(/<\/script/gi,"</noscript"),b.html(a),b.find("style, object, embed, noscript").remove()},c.prdDetailInfoModified=function(c,d){return c&&d?void d.each(function(d,e){var f=b.element(a),g=null,h=null,i=null,j=null,k=null,l=0,m=!1,n=50,o=1,p=0,q=0,r=0,s=f.width(),t=function(){},u=function(){},v=function(){};"TABLE"==e.tagName?(g=b.element('<div class="prddetail_scrollwrap"></div>'),h=b.element(e),i=b.element('<div class="prddetail_scrollbox"></div>'),j=b.element('<span class="scroll_arrow left">&lt;</span>'),k=b.element('<span class="scroll_arrow right">&gt;</span>'),t=function(){var a=i.scrollLeft();q=h.outerWidth(),a>5?(j.stop().css("opacity",0).show().animate({opacity:1},1e3),g.addClass("left_scroll")):(g.removeClass("left_scroll"),j.hide()),a+5<q-i.width()?(k.stop().css("opacity",0).show().animate({opacity:1},1e3),g.addClass("right_scroll")):(g.removeClass("right_scroll"),k.hide())},u=function(){h.after(g),g.append(i.append(h),j,k),i.on("scroll",t),v(),t()},v=function(){return s==f.width()?!1:(s=f.width(),q=h.outerWidth(),r=h.outerHeight(),m?(j.css("top",r/2-j.height()/2),k.css("top",r/2-k.height()/2)):(j.css("top",n),k.css("top",n)),void(h.width()>s-l?(i.attr("style","max-width:100%;overflow-x:scroll;width:"+(s-l)+"px !important"),j.show(),k.show()):(i.removeAttr("style"),j.hide(),k.hide())))}):"IFRAME"==e.tagName&&(g=b.element('<div class="resizer"></div>'),h=b.element(e),u=function(){h.after(g),g.append(h)},v=function(){o=c.width()/h.width(),p=h.height()*o,1>o&&(h.css({"-transform-origin":"0 0",transform:"scale("+o+", "+o+")"}),g.attr("style","overflow:hidden;height:"+Math.round(p)+"px !important"))}),u(),v(),f.on("resize.prdDetailInfoModified",v)}):!1},c.defenseBadHtml(c.curPrdHtmlInfo.max,b.element("#detailLayout")),c.prdDetailInfoModified(b.element("#detailLayout"),b.element("#detailLayout iframe, #detailLayout #sizeGuideTable .tabel_list_wrap >table"))}}}]),d.filter("timeChange",[function(){return function(a){var b=new Date(a),c=b.getHours(),d="오전";c>12&&(d="오후",c-=12);var e,f=new Date;return f.getMonth()-b.getMonth()==0?f.getDate()-b.getDate()==0?e=b.getMinutes()<10?d+" "+c+":0"+b.getMinutes():d+" "+c+":"+b.getMinutes():f.getDate()-b.getDate()==1?e="어제":f.getDate()-b.getDate()>1&&(e=b.getMonth()+1+"월"+b.getDate()+"일"):e=b.getMonth()+1+"월"+b.getDate()+"일",e}}]),d.filter("ceil",function(){return function(a){return Math.ceil(a)}}),d.filter("strToDate",[function(){return function(a){return null==a||""==a?"":a.substr(0,4)+"."+a.substr(5,2)+"."+a.substr(8,2)}}]),d.filter("strToDate2",[function(){return function(a){return null==a||""==a?"":a.substr(0,4)+"."+a.substr(4,2)+"."+a.substr(6,2)}}]),d.filter("strToDate3",[function(){return function(a){return a.substr(0,4)+"년 "+a.substr(4,2)+"월 "+a.substr(6,2)+"일"}}]),d.filter("strToDate4",[function(){return function(a){return null==a||""==a?"":a.substr(4,2)+"월 "+a.substr(6,2)+"일"}}]),d.filter("strToDate5",[function(){return function(a){return null==a||""==a?"":a.substr(0,4)+"/"+a.substr(5,2)+"/"+a.substr(8,2)}}]),d.filter("strCutdate",[function(){return function(a){return null==a||""==a?"":a.substr(0,4)+"-"+a.substr(5,2)+"-"+a.substr(8,2)}}]),d.filter("numToManwon",[function(){return function(a){if(null==a||""==a)return"";var b=a.replace(/,/gi,"");return b.length<5?a:b.slice(0,-4)+"만원"}}]),d.filter("findItemAndGetFront",[function(){return function(a,b,c){for(var d=-1,e=0;e<a.length;e++)if(a[e][b]==c){d=e;break}if(-1!=d){var f=a.splice(d,1);a.unshift(f[0])}return a}}]),d.filter("starScorePolicy",function(){return function(a,b){if(!a)return 0;var d=5,e=Math.ceil(2*a)/2;return b!=c&&(e=e/d*b),e}}),d.filter("brToComma",function(){return function(a){return a?String(a).replace(/<br\/>/gm,", "):""}}),d.filter("convertParamToObject",function(){return function(a){var b=(a+"").replace(/^\&|\?/i,""),c=b.split("&"),d={};if(c&&c.length>0){var e=0,f=null;for(e=0;e<c.length;e++)f=null,f=c[e].split("="),f&&2==f.length&&(d[f[0]]=f[1])}return d}}),d.filter("convertObjectToParam",function(){return function(a,c){var d="";return b.forEach(a,function(a,b){d+=c?b+"%3D"+a+"%26":b+"="+a+"&"}),d.slice(0,d.length-1)}}),d.filter("replaceString",function(){return function(a,b){var c=a;if(b&&b.length>0){var d=0;for(d=0;d<b.length;d++){var e;e=Number(b[d])?$filter("number")(b[d]):b[d],c=(c+"").replace("{}",e)}}return c}}),d.directive("moreScroll",["$window","$timeout","VCGetProdComment",function(a,c,d){return function(c,e,f){var g=e[0],h=b.element(a),i=0,j=h.height(),k=!0;e.bind("scroll",function(){if(k&&(i=b.element(g).children().height(),k=!1,c.pageUI.prodCommentPageIndex++),i<=g.scrollTop+j&&!c.pageUI.prodCommentAjaxLoadFlag&&!c.pageUI.prodCommentLastPage){c.pageUI.prodCommentAjaxLoadFlag=!0,c.pageUI.jsonLoading=!0;var a=c.VCCtrl.getCurProdInfo();a&&a.goods_no&&(c.pageLoading=!0,d.getProdComment(a.goods_no,c.pageUI.prodCommentPageIndex).then(function(a){if(a.critList.total_count>0)for(var b=0;b<a.critList.items.length;b++)c.pageUI.prodComment.critList.items.push(a.critList.items[b]);else c.pageUI.prodCommentLastPage=!0;c.pageUI.prodCommentAjaxLoadFlag=!1,c.pageUI.jsonLoading=!0,k=!0})["catch"](function(){console.error("상품평 정보 없음."),c.pageUI.prodCommentAjaxLoadFlag=!1,c.pageUI.jsonLoading=!0})["finally"](function(){c.pageLoading=!1}))}})}}]),d.directive("ngTouchstart",function(){return{controller:function(a,b,c){function d(c){var d=b.attr("ng-touchstart");a.$event=c,a.$apply(d)}b.bind("touchstart",d)}}})}(window,window.angular);