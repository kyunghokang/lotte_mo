!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteSns"]);d.controller("evtTesterCtrl",["$http","$scope","$window","commInitData","LotteCommon","LotteUtil","LotteCookie",function(d,e,f,g,h,i,j){e.showWrap=!0,e.contVisible=!0,e.subTitle="테스터 이벤트 신청하기",e.pageLoading=!0,e.isShowThisSns=!0,e.evtNo="",e.TesterApplyFlag=!1;var k=j.getCookie("SIMPLESIGNYN"),l=i.getLoginSeed().toUpperCase(),m="";m=""==e.schema?encodeURIComponent(a.location.href,"UTF-8"):a.location.href.replace(/^http(s)?/,e.schema);var n;g.query.evtNo!=c&&(e.evtNo=g.query.evtNo),e.roadData=function(){d.get(h.beautyEvtTesterData+"?evt_no="+e.evtNo).success(function(a){e.evtData=a.tester_evt,e.select_addr=a.user_addr_info.addr_list[0],e.dlvp_sn=e.select_addr.dlvp_sn,e.evtData.evtStrDate=e.evtData.evtStrDate.replace(/(\d{4})(\d{2})/,"$1.$2."),e.evtData.evtEndDate=e.evtData.evtEndDate.replace(/(\d{4})(\d{2})/,"$1.$2."),e.evtData.winDate=e.evtData.winDate.replace(/(\d{4})(\d{2})/,"$1.$2."),n=h.changeMyInfoUrl+"?sid="+l+"&returnurl="+m+"&custid="+e.evtData.seedCustId+"&loginid="+j.getCookie("LOGINID")+"&pageflag=I&opentype=P&sch="+e.schema,e.pageLoading=!1}).error(function(a){e.pageLoading=!1})},e.roadData(),e.testerPrdClk=function(a){var b=h.prdviewUrl+"?goods_no="+a+"&"+e.baseParam;location.href=b},e.memeberChange=function(){if(e.loginInfo.isLogin){if("Y"==k)return alert("간편회원의 정보변경은 PC에서만 가능합니다."),!1;e.appObj.isApp&&e.appObj.isIOS?outLink(n):(outLink(n),e.popupClose())}else alert("로그인 후 이용 가능합니다.")},e.tstSubmit=function(){var a=b.element("#request_agree");if(""==e.evt_tit||e.evt_tit==c)return alert("제목을 작성해주세요."),!1;if(e.evt_tit.length<4)return alert("제목을 한글 3자 이상 입력하세요."),!1;if(""==e.evt_con||e.evt_con==c)return alert("사연을 반드시 등록해주세요."),!1;if(e.loginInfo.isSimple)return alert("응모 가능 회원 구분이 아닙니다.\nL.POINT 통합 회원으로 가입해주세요."),!1;if(!a.is(":checked"))return confirm("개인정보 활용에 동의하셔야만\n이벤트에 응모하실 수 있습니다.")&&a.prop("checked",!0),!1;var d={evt_no:e.evtNo,bbc_tit_nm:e.evt_tit,bbc_fcont:e.evt_con,dlvp_sn:e.dlvp_sn};$.ajax({type:"post",async:!1,url:h.beautyEvtTesterSave,data:d,success:function(a){a.indexOf("0000")>-1?(e.TesterApplyFlag=!0,e.dimmedOpen({target:"finish_pop",callback:this.popupClose})):a.indexOf("dup.err")>-1&&(alert("이미 신청하셨습니다."),e.TesterApplyFlag=!1)}})},e.popupClose=function(){e.TesterApplyFlag=!1,location.replace(h.cateMidBeauty+"?"+e.baseParam)},e.goBeautyMainClick=function(){f.location.href=h.cateMidBeauty+"?"+e.baseParam}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/category/m/beauty_evt_tester_container.html",replace:!0,link:function(a,b,c){}}})}(window,window.angular);