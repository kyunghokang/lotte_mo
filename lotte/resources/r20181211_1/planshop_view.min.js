!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteSns","lotteProduct","lotteNgSwipe","lotteMainPop"]);d.controller("EventPlanshopCtrl",["$scope","$http","$window","$timeout","$sce","$location","LotteCommon","LotteStorage","commInitData","LotteLink",function(c,d,e,f,g,h,i,j,k,l){function m(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function n(a){return 10>a?"0"+a:a+""}function o(a,b,c,d,e,f){var g=new Date(a,b,c,d,e,f);return a&&b&&c&&(g.setFullYear(a),g.setMonth(b-1),g.setDate(c),d&&g.setHours(d),e&&g.setMinutes(e),f&&g.setSeconds(f)),g.getTime()}function p(a){var b=0;return b=o(a.substring(0,4),a.substring(4,6)?a.substring(4,6):1,a.substring(6,8)?a.substring(6,8):1,a.substring(8,10),a.substring(10,12),a.substring(12,14))}function q(){c.cate_first==c.itemCateDataList[1].divObjNm?c.firstcate_flag=!1:c.firstcate_flag=!0}c.ct_ver="20170517",c.showWrap=!0,c.contVisible=!0,c.subTitle="이벤트",c.screenID="event",c.isShowThisSns=!0,c.isProductLoading=!0,c.planShopSns=!0,c.productMoreScroll=!0,c.isLoading=!0,c.dataLoadingFinish=!1,c.allProductOpenFlag=!1,c.cateViewFlag=!1,c.allProductFlag=!0,c.upplanshopMainData=[],c.itemCateDataList=[],c.sortCateTop,c.bottomBannerClick=function(){var a=c.tClickBase+c.screenID+"_Clk_Prd_Clk_Ban_1";e.location.href=i.baseUrl+c.bottomDate.lnk_url_addr+"&tclick="+a},c.benefitBnrClick=function(){var a=c.tClickBase+c.screenID+"_Clk_Prd_Clk_Ban_1";e.location.href=i.baseUrl+c.benefitBnr.linkUrl+"&tclick="+a},c.dispNoParam=m("spdp_no"),""==m("divObjNo")?c.divObjNoParam="":c.divObjNoParam=m("divObjNo"),c.paramTitle=m("divObjTitle"),c.divItemParam=m("divItem"),c.productList=[],c.pageSize=60,c.product_tot_cnt=0,c.thisPage=0,c.divName="전체상품",c.paramTitle.length>=1&&(c.divName=c.paramTitle);var r=new Date,s=r.getFullYear()+n(r.getMonth()+1)+n(r.getDate()),t=r.getTime();if(k.query.testDate){k.query.testDate;s=k.query.testDate,t=p(s)}t>=o(2018,10,1)&&(c.appPushFlag="10"),t>=o(2018,11,1)&&(c.appPushFlag="11"),t>=o(2018,11,5)&&(c.appPushFlag=""),c.param_cn=m("cn"),c.goApppush_Event2=function(){setTimeout(function(){if("pnhZkYs9a5U="==getCookie("MBRSCTCD"))alert("간편계정 회원의 경우 응모가 불가합니다.\nL.POINT 통합회원 가입 후 신청해주세요.");else if(c.loginInfo.isLogin)$.ajax({type:"post",async:!1,url:"/event/regAppPush.do",data:{evt_no:""},success:function(a){if(a.indexOf("|")>-1){var b=a.split("|"),c=b[1];if("S"==b[0])return void(t>=o(2018,11,1)&&t<o(2018,11,5)?alert("금주 ["+c+"]회 L-point 10점 적립 응모 완료! 7회 응모시 총 100점(차주 화요일 지급)\n11월 4일 이벤트 종료!\ncoming soon!!"):alert("금주 ["+c+"]회 L-point 10점 적립 응모 완료! 7회 응모시 총 100점(차주 화요일 지급)\n11월 4일 이벤트 종료!\ncoming soon!!"));if("D"==b[0])return void alert("오늘은 이미 적립하셨네요.\n금주 ["+c+"]회 적립 응모 완료")}}});else if(confirm("로그인 후 적립하실 수 있습니다.")){var a="targetUrl="+encodeURIComponent(location.href,"UTF-8");location.href="/login/m/loginForm.do?"+a}},500)},c.goApppush_Event3=function(){setTimeout(function(){if("pnhZkYs9a5U="==getCookie("MBRSCTCD"))alert("간편계정 회원의 경우 응모가 불가합니다.\nL.POINT 통합회원 가입 후 신청해주세요.");else if(c.loginInfo.isLogin)$.ajax({type:"post",async:!1,url:"/event/regAppPush.do",data:{evt_no:""},success:function(a){if(a.indexOf("|")>-1){var b=a.split("|"),c=b[1];if("S"==b[0])return void(t>=o(2018,10,1)&&t<o(2018,10,8)?alert("금주 ["+c+"]회 L-point 10점 적립 응모 완료! 7회 응모시 총 100점(차주 월요일 지급)\nL-point 1만점 추가찬스(11월 발표)"):t>=o(2018,10,8)&&t<o(2018,10,22)?alert("금주 ["+c+"]회 L-point 10점 적립 응모 완료! 7회 응모시 총 100점(차주 화요일 지급)\nL-point 1만점 추가찬스(11월 발표)"):t>=o(2018,10,22)&&t<o(2018,10,29)?alert("금주 ["+c+"]회 L-point 10점 적립 응모 완료! 7회 응모시 총 100점(차주 목요일 지급)\nL-point 1만점 추가찬스(11월 발표)"):alert("금주 ["+c+"]회 L-point 10점 적립 응모 완료! 7회 응모시 총 100점(차주 화요일 지급)\nL-point 1만점 추가찬스(11월 발표)"));if("D"==b[0])return void alert("오늘은 이미 적립하셨네요. 내일 또 만나요^^\n금주 ["+c+"]회 적립 응모 완료")}}});else if(confirm("로그인 후 적립하실 수 있습니다.")){var a="targetUrl="+encodeURIComponent(location.href,"UTF-8");location.href="/login/m/loginForm.do?"+a}},500)},c.loadedListTemplate=function(a){f(function(){c.$apply(function(){c.templateType=a,f(function(){c.dataLoadingFinish=!0})})})},c.firstcate_flag=!1,c.swipefnc=function(){setTimeout(function(){c.$apply(function(){var a=parseInt($("#swipe_indi").attr("val")),d=c.findfirstCate(c.productList[0].divObjNo);if(0==a)c.cate_first=d.divObjNm,c.cate_count=d.goodsCnt;else{var e=b.element(".prod_list_03 > li").eq(a);c.cate_first=e.attr("item_nm"),c.cate_count=e.attr("item_cnt")}q()})},300)},c.findfirstCate=function(a){var d={divObjNo:"",divObjNm:"",goodsCnt:0};return b.forEach(c.itemCateDataList,function(b,c){b.divObjNo==a&&(d=b)}),d},c.getProductDataLoad=function(){c.thisPage++,c.productListLoading=!0;try{d.get(i.planshopData+"?spdpNo="+c.dispNoParam+"&divObjNo="+c.divObjNoParam).success(function(a){if(c.share_img=a.max.autoProductEntity.img_url_550,"0000"==a.max.resultCode){c.page_end=parseInt(a.max.page_end),c.product_tot_cnt=a.max.productCount;var d=[];if("1"==c.thisPage){switch(c.maxitemData=a.max.productCount,null==a.max.linkSpdpList?(c.categoryData=[],c.categoryData.total_count="0"):c.categoryData=a.max.linkSpdpList,null==a.max.stsLst?c.stroyShopData=[]:c.stroyShopData=a.max.stsLst.items,null==a.max.ctgList?(c.itemCateData=[],c.itemCateDataList=[]):null==a.max.ctgList.items?(c.itemCateData=[],c.itemCateDataList=[]):(c.itemCateData=a.max.ctgList,c.itemCateDataList=a.max.ctgList.items),c.subTitle=a.max.spdp_nm,c.planshopNumber=a.max.spdpNo,c.topHtml=a.max.topHtml,null==a.max.benefitBnr||""==a.max.benefitBnr?c.benefitData="":c.benefitData=a.max.benefitBnr,""==a.max.auto_pfcn_yn?"10"==a.max.spdp_tp_cd?c.autoBanner="Y":c.autoBanner="N":c.autoBanner=a.max.auto_pfcn_yn,c.autoBannerData=a.max.autoProductEntity,null==a.max.mo_spdp_bnr_img?c.bannerImgData="":c.bannerImgData=a.max.mo_spdp_bnr_img,c.bannerNameData=a.max.spdp_nm,"11"!=a.max.spdp_tp_cd&&"24"!=a.max.spdp_tp_cd?"Y"==c.storyParam?c.planKindData="SS":"superchance"==a.max.superChaceSpdpTpCd?c.planKindData="superchance":c.planKindData="10":c.planKindData=a.max.spdp_tp_cd,null==a.max.topConr?c.upplanshopMainData="0":"0"==a.max.topConr.items.length?c.upplanshopMainData="0":c.upplanshopMainData=a.max.topConr,null==a.max.topConr?c.promotionData="0":c.promotionData=a.max.topConr.promotion,c.lastProData=a.max.recentPrdLst,c.prv_banner_list=a.max.prv_banner_list,c.templateType){case"image":c.loadedListTemplate("image");break;case"list":c.loadedListTemplate("list");break;case"swipe":c.loadedListTemplate("swipe");break;default:null==a.max.mbl_goods_disp_lst_tp_cd?c.loadedListTemplate("image"):"10"==a.max.mbl_goods_disp_lst_tp_cd?c.loadedListTemplate("image"):"20"==a.max.mbl_goods_disp_lst_tp_cd?c.loadedListTemplate("list"):"30"==a.max.mbl_goods_disp_lst_tp_cd?c.loadedListTemplate("swipe"):c.loadedListTemplate("image")}if(null==a.max.prdLst)c.productList=[];else{var e=[],f=a.max.prdLst.items[0];c.cid=1,c.cate_first=f.divObjNm,c.cate_count=c.itemCateDataList[c.cid].goodsCnt,q();for(var g=c.cate_count,h=0;h<a.max.prdLst.items.length;h++)f=a.max.prdLst.items[h],d.length<3&&d.push(f.goods_no+""||""),f.divObjNo&&h>0&&f.divObjNo!=a.max.prdLst.items[h-1].divObjNo&&(c.cid++,c.itemCateDataList[c.cid].goodsCnt&&(g=c.itemCateDataList[c.cid].goodsCnt),e.push({cateflag:!0,divObjNm:f.divObjNm,count:g,id:c.cid})),f.cnt=g,e.push(f);c.productList=e}c.product_tot_cnt<c.thisPage*c.pageSize?c.productMoreScroll=!1:c.productMoreScroll=!0,c.productListLoading=!1}else{var g=0;c.productList[c.productList.length-1]&&(g=c.productList[c.productList.length-1].cnt),b.forEach(a.max.prdLst.items,function(a,b){a.divObjNo&&c.productList.length>0&&c.productList[c.productList.length-1].divObjNo&&a.divObjNo!=c.productList[c.productList.length-1].divObjNo&&c.cid<c.itemCateDataList.length-1&&(c.cid++,c.itemCateDataList[c.cid].goodsCnt&&(g=c.itemCateDataList[c.cid].goodsCnt),c.productList.push({cateflag:!0,divObjNm:a.divObjNm,count:g,id:c.cid})),a.cnt=g,c.productList.push(a)}),c.product_tot_cnt<c.thisPage*c.pageSize?c.productMoreScroll=!1:c.productMoreScroll=!0,c.productListLoading=!1}c.productListLoading=!1}else c.contents={},c.subTitle="기획전",c.noData=!0,c.productListLoading=!1;c.isLoading=!1}).error(function(a,b,c,d){console.log("Error Data : ",b,c,d)})}catch(a){c.contents={},c.subTitle="기획전",c.noData=!0,c.isLoading=!1,c.productListLoading=!1}},c.gotoPrepageSide=function(){c.sendTclick("m_side_new_pre"),history.go(-1)},f(function(){c.moreListClick=function(){c.sendTclick(c.tClickBase+"Event_Scl_Prd_page"+c.divObjNoParam),c.getProductDataLoad()}}),c.surpriseEventBannerClick=function(){var a="&tclick="+c.tClickBase+"m_Suprise_Ban01";e.location.href=i.baseUrl+c.surpriseEventBanner.linkUrl+a},c.allProductClick=function(){c.sendTclick(c.tClickBase+"Event_Clk_Btn_1"),c.allProductOpenFlag=!c.allProductOpenFlag},c.benefitClick=function(){var a="&tclick="+c.tClickBase+"Event_Clk_Btn_1";e.location.href=i.baseUrl+c.benefitData.linkUrl+a+"&"+c.baseParam},c.closeProClick=function(){c.allProductOpenFlag=!1},c.changeTemplate=function(a){c.sendTclick(c.tClickBase+"Event_Clk_Pico_"+a),c.firstcate_flag=!1;var b=c.findfirstCate(c.productList[0].divObjNo);c.cate_first=b.divObjNm,c.cate_count=b.goodsCnt,q(),c.templateType=a,j.setSessionStorage(c.screenID+"Loc",h.absUrl()),setCookie(c.screenID+"TemplateType",c.templateType)},c.closeCateClick=function(){c.cateViewFlag=!1},c.cateViewClick=function(){return"Y"==c.storyParam?(c.sendTclick("m_DC_Event_Clk_Btn_8"),"0"==c.stroyShopData.total_count?!1:(c.cateViewFlag=!c.cateViewFlag,!1)):(c.sendTclick(c.tClickBase+"Event_Clk_Btn_8"),"0"==c.categoryData.total_count?!1:"10"==c.planKindData?"0"==c.categoryData?(c.cateViewFlag=!1,!1):(c.cateViewFlag=!1,!1):(c.cateViewFlag=!c.cateViewFlag,!1))},c.gotoPrepage=function(){c.sendTclick("m_RDC_header_new_pre")},c.goGoodsDetail=function(b,d,e){var f=e+1;if("Y"==b.limit_age_yn||"19"==b.pmg_byr_age_lmt_cd){if(""==scope.$parent.loginInfo.isAdult)return alert("이 상품은 본인 인증 후 이용하실 수 있습니다."),scope.$parent.goAdultSci(),!1;if(!scope.$parent.loginInfo.isAdult)return alert("이 상품은 법률규정에 의하여 만 19세 이상 성인만 조회 및 구매가 가능합니다."),!1}var g="";b.curDispNo&&(g="&curDispNo="+b.curDispNo);var h="";if(b.curDispNoSctCd&&(h="&curDispNoSctCd="+b.curDispNoSctCd),"recent"==d)var j="_Clk_Prd_1";else if("norUp"==d)var j="_Swp_Prd_A"+f;else if("spUp"==d)var j="_Swp_Prd_"+f;var k=c.tClickBase+"Event"+j;a.location.href=i.prdviewUrl+"?"+c.baseParam+"&goods_no="+b.goods_no+g+h+"&tclick="+k},c.sortCateClick=function(a,g,l){var m=l+1;c.sendTclick(c.tClickBase+"Event_ClkW_Rst_A"+m);var n={};c.dataLoadingFinish=!1,c.divObjNoParam=a,c.divName=g,c.thisPage="1",c.productList=[],c.isLoading=!1,c.isProductLoading=!0,c.allProductOpenFlag=!1,d.get(i.planshopData+"?spdpNo="+c.dispNoParam+"&divItem="+c.divItemParam).success(function(a){$("#curcatenm").text(c.divName),c.page_end=parseInt(a.max.page_end),c.product_tot_cnt=a.max.productCount,c.cid=1;var d=c.findfirstCate(a.max.prdLst.items[0].divObjNo),e=d.goodsCnt;b.forEach(a.max.prdLst.items,function(a,b){a.divObjNo&&b>0&&c.productList[b-1].divObjNo&&a.divObjNo!=c.productList[c.productList.length-1].divObjNo&&(c.cid++,c.itemCateDataList[c.cid].goodsCnt&&(e=c.itemCateDataList[c.cid].goodsCnt),c.productList.push({cateflag:!0,divObjNm:a.divObjNm,count:e,id:c.cid})),a.cnt=e,c.productList.push(a)}),c.cate_first=d.divObjNm,c.cate_count=d.goodsCnt,q(),c.product_tot_cnt<c.thisPage*c.pageSize?c.productMoreScroll=!1:c.productMoreScroll=!0,c.productListLoading=!1,c.maxitemData=a.max.productCount,"image"==c.templateType?c.loadedListTemplate("image"):"list"==c.templateType?c.loadedListTemplate("list"):"swipe"==c.templateType&&c.loadedListTemplate("swipe"),c.isProductLoading=!0}).error(function(a,b,c,d){console.log("Error Data : ",b,c,d)}),f(function(){n.subTitle=c.subTitle,n.allProductOpenFlag=c.allProductOpenFlag,n.cateViewFlag=c.cateViewFlag,n.allProductFlag=c.allProductFlag,n.upplanshopMainData=c.upplanshopMainData,n.itemCateDataList=c.itemCateDataList,n.dispNoParam=c.dispNoParam,n.divObjNoParam=c.divObjNoParam,n.storyParam=c.storyParam,n.productList=c.productList,n.pageSize=c.pageSize,n.product_tot_cnt=c.product_tot_cnt,n.divName=c.divName,n.thisPage=c.thisPage,n.page_end=c.page_end,n.maxitemData=c.maxitemData,n.categoryData=c.categoryData,n.itemCateData=c.itemCateData,n.itemCateDataList=c.itemCateDataList,n.planshopNumber=c.planshopNumber,n.topHtml=c.topHtml,n.autoBanner=c.autoBanner,n.autoBannerData=c.autoBannerData,n.bannerImgData=c.bannerImgData,n.bannerNameData=c.bannerNameData,n.planKindData=c.planKindData,n.promotionData=c.promotionData,n.templateType=c.templateType,n.benefitData=c.benefitData,!k.query.localtest&&c.leavePageStroage&&(j.setSessionStorage(c.screenID+"Loc",h.absUrl()),j.setSessionStorage(c.screenID+"Data",n,"json"),j.setSessionStorage(c.screenID+"ScrollY",b.element(e).scrollTop())),$("#curcatenm").text(c.divName)},2e3)},c.goPlanshopClick=function(a){var b=c.tClickBase+"Event_ClkW_Rst_B"+c.divObjNoParam;e.location.href=i.prdlstUrl+"?"+c.baseParam+"&curDispNo="+a+"&tclick="+b},f(function(){c.getPlanSwipeSize=function(){if(c.itemCateDataList.length){var a=parseInt(c.itemCateDataList.length/5);return c.itemCateDataList.length%5!=0&&a++,new Array(a)}return new Array}},2e3),c.getPlanSwipeSize=function(){if(c.itemCateDataList.length){var a=parseInt(c.itemCateDataList.length/5);return c.itemCateDataList.length%5!=0&&a++,new Array(a)}return new Array},f(function(){c.getStorySwipeSize=function(){return c.stroyShopData.length?new Array(parseInt(c.stroyShopData.length/5+.9)):new Array}},2e3);var u=j.getSessionStorage(c.screenID+"Loc"),v=j.getSessionStorage(c.screenID+"Data"),w=j.getSessionStorage(c.screenID+"ScrollY"),x=getCookie(c.screenID+"TemplateType");if(c.StoredScrollY=w,u==a.location.href&&c.locationHistoryBack){var y=JSON.parse(v);c.isLoading=!1,c.dataLoadingFinish=!1,c.subTitle=y.subTitle,c.allProductOpenFlag=y.allProductOpenFlag,c.cateViewFlag=y.cateViewFlag,c.allProductFlag=y.allProductFlag,c.upplanshopMainData=y.upplanshopMainData,c.itemCateDataList=y.itemCateDataList,c.dispNoParam=y.dispNoParam,c.divObjNoParam=y.divObjNoParam,c.planShopGubunParam=y.planShopGubunParam,c.recentParam=y.recentParam,c.productList=y.productList,c.pageSize=y.pageSize,c.product_tot_cnt=y.product_tot_cnt,c.divName=y.divName,c.thisPage=y.thisPage,c.page_end=y.page_end,c.maxitemData=y.maxitemData,c.categoryData=y.categoryData,c.itemCateData=y.itemCateData,c.itemCateDataList=y.itemCateDataList,c.planshopNumber=y.planshopNumber,c.topHtml=y.topHtml,c.autoBanner=y.autoBanner,c.autoBannerData=y.autoBannerData,c.bannerImgData=y.bannerImgData,c.bannerNameData=y.bannerNameData,c.planKindData=y.planKindData,c.promotionData=y.promotionData,c.templateType=x,c.benefitData=y.benefitData,"list"==c.templateType?c.loadedListTemplate("list"):"swipe"==c.templateType?c.loadedListTemplate("swipe"):c.loadedListTemplate("image"),c.product_tot_cnt<c.thisPage*c.pageSize?c.productMoreScroll=!1:c.productMoreScroll=!0,f(function(){b.element(e).scrollTop(w);var a=c.findfirstCate(c.productList[0].divObjNo);c.cate_first=a.divObjNm,c.cate_count=a.goodsCnt,q(),$("#curcatenm").text(c.divName)},800)}else c.StoredScrollY=0,c.templateType=x,c.getProductDataLoad();b.element(e).on("unload",function(a){0==c.allProductOpenFlag,0==c.cateViewFlag,0==c.allProductFlag;var d={};d.subTitle=c.subTitle,d.allProductOpenFlag=c.allProductOpenFlag,d.cateViewFlag=c.cateViewFlag,d.allProductFlag=c.allProductFlag,d.upplanshopMainData=c.upplanshopMainData,d.itemCateDataList=c.itemCateDataList,d.dispNoParam=c.dispNoParam,d.divObjNoParam=c.divObjNoParam,d.planShopGubunParam=c.planShopGubunParam,d.recentParam=c.recentParam,d.productList=c.productList,d.pageSize=c.pageSize,d.product_tot_cnt=c.product_tot_cnt,d.divName=c.divName,d.thisPage=c.thisPage,d.page_end=c.page_end,d.maxitemData=c.maxitemData,d.categoryData=c.categoryData,d.itemCateData=c.itemCateData,d.itemCateDataList=c.itemCateDataList,d.planshopNumber=c.planshopNumber,d.topHtml=c.topHtml,d.autoBanner=c.autoBanner,d.autoBannerData=c.autoBannerData,d.bannerImgData=c.bannerImgData,d.bannerNameData=c.bannerNameData,d.planKindData=c.planKindData,d.promotionData=c.promotionData,d.templateType=c.templateType,d.benefitData=c.benefitData,!k.query.localtest&&c.leavePageStroage&&(j.setSessionStorage(c.screenID+"Loc",h.absUrl()),j.setSessionStorage(c.screenID+"Data",d,"json"),j.setSessionStorage(c.screenID+"ScrollY",b.element(e).scrollTop()))})}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/planshop/m/planshop_container.html",replace:!0,link:function(a,b,c){}}}),d.directive("sortCate",["$window","$timeout","$location",function(a,c,d){return{templateUrl:"/lotte/resources_dev/product/m/product_list_select_container2.html",replace:!0,link:function(d,e,f){var g;d.fixflag=!1,d.sortPosition=function(){g=b.element(".unitWrap").offset().top-d.headerHeight-54,d.$parent.$parent.sortCateTop=g,b.element(a).scrollTop(d.$parent.$parent.StoredScrollY).scroll()},b.element(a).on("scroll",function(a){if(d.productList.length>0){var c=b.element("#headerSpace");if(g=b.element(".unitWrap").offset().top-d.headerHeight-54,this.pageYOffset>g?(c.css("height","37px"),e[0].style.cssText="position:fixed;top:45px;",d.fixflag=!0):(c.css("height","0px"),e[0].style.cssText="",d.fixflag=!1),"swipe"!=d.templateType&&""==d.divObjNoParam){var f=1,h=0,i=0,j=174,k=d.screenType,l=0;"image"==d.templateType&&(j=parseInt($(".prod_list_02 > li:first-child").height()),k+=1);for(var m=[0];h<d.productList.length;h++)d.productList[h].cateflag?(m.push(i),i+=49,l=0):(0==l&&(i+=j),l+=1,l>=k&&(l=0));for(h=0;h<m.length;h++)this.pageYOffset-g>m[h]&&(f=h+1);d.fixflag||(f=0),f<d.itemCateDataList.length&&(d.divName=d.itemCateDataList[f].divObjNm,$("#curcatenm").text(d.divName))}}}),c(function(){if(d.productList.length>0){var a=b.element(".plan_bannerWrap img,.prd_swipe img");0!=a.length?(a.load(function(){c(function(){d.sortPosition()},900)}),c(function(){d.sortPosition()},900)):c(function(){d.sortPosition()},900)}},1500)}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteUnit",["lotteUtil"]);d.directive("commUnit",[function(){return{templateUrl:"/lotte/resources_dev/unit/comm_unit.html",replace:!0,link:function(a,b,c){var d="";c.curdispno&&(d=c.curdispno);var e="";c.curdispnosctcd&&(e=c.curdispnosctcd);var f="";c.tclick&&(f=c.tclick),a.clickUnit=function(){a.item.curDispNo=d,a.item.curDispNoSctCd=e,a.productView(a.item,d,e,f)}}}}]),d.directive("planUnit",function(){return{templateUrl:"/lotte/resources_dev/unit/plan_unit.html",replace:!0,link:function(a,b,c){var d="";c.curdispno&&(d=c.curdispno);var e="";c.curdispnosctcd&&(e=c.curdispnosctcd);var f="";c.tclick&&(f=c.tclick),a.clickUnit=function(){a.item.curDispNo=d,a.item.curDispNoSctCd=e,a.productView(a.item,d,e,f)}}}}),d.directive("commUnitDeal01",["LotteLink",function(a){return{templateUrl:"/lotte/resources_dev/unit/comm_unit_deal01.html",replace:!0,link:function(b,c,d){var e="";d.curdispno&&(e=d.curdispno);var f="";d.curdispnosctcd&&(f=d.curdispnosctcd);var g="";d.tclick&&(g=d.tclick),b.clickUnit=function(){if(b.item.outlnk&&""!=b.item.outlnk)if("LECS"==b.item.outlnkMall){if(confirm("공식 온라인 몰로 이동 후 구입 할 수 있습니다.")){b.sendTclick(g);try{console.log("TCLICK : "+g)}catch(c){}a.goOutLink(b.item.outlnk,b.item.outlnkMall)}}else{b.sendTclick(g);try{console.log("TCLICK : "+g)}catch(c){}a.goOutLink(b.item.outlnk,b.item.outlnkMall)}else b.item.curDispNo=e,b.item.curDispNoSctCd=f,b.productView(b.item,e,f,g)}}}}]),d.directive("lotteUnit01ImgSrc",["$http","LotteCommon",function(a,b){return{link:function(a,b,c){"19"==a.item.byrAgelmt&&!a.loginInfo||!a.loginInfo.isAdult&&"19"==a.item.byrAgelmt?c.$set("src",a.imgPath+"/lotte/mobile/sub/img_19_280x280.png"):c.$set("src",c.lotteUnit01ImgSrc),b.on("error",function(b){c.src!=a.imgPath+"/lotte/images/common/product/no_280.gif"&&c.$set("src",a.imgPath+"/lotte/images/common/product/no_280.gif")})}}}]),d.directive("commUnitType01",["$http","LotteUtil","LotteCommon","LotteLink","LotteStorage",function(a,b,c,d,e){return{templateUrl:"/lotte/resources_dev/unit/comm_unit_type01.html",replace:!0,link:function(a,b,c){a.addWishFlag=!1;var f="";c.curdispno&&(f=c.curdispno);var g="";c.curdispnosctcd&&(g=c.curdispnosctcd);var h="";c.tclick&&(h=c.tclick),a.clickUnit=function(){if(a.item.outlnk&&""!=a.item.outlnk){if("LECS"==a.item.outlnkMall){if(confirm("공식 온라인 몰로 이동 후 구입 할 수 있습니다.")){a.sendTclick(h);try{console.log("TCLICK : "+h)}catch(b){}d.goOutLink(a.item.outlnk,a.item.outlnkMall)}}else if("SP"==a.item.outlnkMall&&confirm("롯데슈퍼로 이동후 구입할수있습니다.")){a.sendTclick(h);try{console.log("TCLICK : "+h)}catch(b){}d.goOutLink(a.item.outlnk,a.item.outlnkMall)}}else a.item.curDispNo=f,a.item.curDispNoSctCd=g,a.productView(a.item,f,g,h)},a.clickComment=function(){"LECS"==a.item.outlnkMall?confirm("공식온라인 몰로 이동후 확인 할 수 있습니다.")&&d.goOutLink(a.item.outlnk,a.item.outlnkMall):"SP"==a.item.outlnkMall?confirm("롯데슈퍼로 이동후 확인 할 수 있습니다.")&&d.goOutLink(a.item.outlnk,a.item.outlnkMall):(e.setSessionStorage("comment","ok"),a.clickUnit())},a.addWish=function(){if("LECS"==a.item.outlnkMall)return confirm("공식온라인 몰로 이동후 담을 수 있습니다.")&&d.goOutLink(a.item.outlnk,a.item.outlnkMall),!1;if("SP"==a.item.outlnkMall)return confirm("롯데슈퍼로 이동후 담을 수 있습니다.")&&d.goOutLink(a.item.outlnk,a.item.outlnkMall),!1;if(a.addWishFlag)return alert("이미 등록된 상품입니다."),a.addWishFlag=!0,!1;if(!a.loginInfo.isLogin)return alert("로그인 후 이용하실 수 있습니다."),a.loginProc(),!1;if(19==a.item.byrAgelmt){if(""==a.loginInfo.isAdult)return alert("이 상품은 본인 인증 후 이용하실 수 있습니다."),a.goAdultSci(),!1;if(!a.loginInfo.isAdult)return alert("이 상품은 법률규정에 의하여 만 19세 이상 성인만 조회 및 구매가 가능합니다."),!1}a.sendProductWish(a.item.goodsNo,function(b){b?a.addWishFlag=!0:a.addWishFlag=!1})}}}}])}(window,window.angular);var callDownCpn;!function(a,b,c){"use strict";var d=b.module("lotteMainPop",[]);d.controller("lotteMainPopCtrl",["$scope","$window","$location","$http","LotteCommon","LotteUtil","LotteCookie","LotteStorage","AppDownBnrService","LotteLink","commInitData","LotteGA","$timeout",function(a,d,e,f,g,h,i,j,k,l,m,n,o){a.loadMainPopup=function(d){function e(){f.get(g.mainPopupData,{params:q}).success(function(b){if(!j.getSessionStorage("appDownBnrHide")&&!a.appObj.isApp){var e=k.appDownBnrLoadDefer;b.app_down_popup&&b.app_down_popup.length>0&&e.resolve(b.app_down_popup)}a.mainPop=b.current_page_popup,a.mainPopNew=null,a.isShowPop=!1,"10"==q.ppp_tgt_pg_cd&&b.main_new_popup!=c&&b.main_new_popup.length>1&&(a.mainPopNew=b.main_new_popup,a.isShowPop=!0,a.getControlmp=function(b){a.controlmp=b},a.next_pop=function(b){var c=a.controlmp.getIndex()+b;a.controlmp.moveIndex(c)}),a.hideActionBar=h.isApp()&&"F"==a.mainPop.ppp_prt_tp_cd&&"20"!=d.pppTgtPgCd&&"30"!=d.pppTgtPgCd?!0:!1,0!=a.mainPop.ppp_sn&&(callDownCpn=function(){a.dupCouponIssue("88045"),a.sendTclick("m_abtest_naverbanner_01")},a.dupCouponIssue=function(b){if(a.loginInfo.isLogin)b.length>0&&f({url:g.couponRegCouponData+"?"+a.baseParam,data:"cpn_issu_no="+b,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(b){b.result=b.result.replace("\\n"," "),"undefined"!=typeof h.getParameter("cn")&&"140924"==h.getParameter("cn")&&b.result.indexOf("발급받은")>-1?(alert("이달의 앱 쿠폰을 모두 받으셨습니다. 참좋은혜택 등급 쿠폰도 확인하세요!"),location.href=g.gdBenefitUrl+"?"+a.baseParam):alert(b.result),a.popClose()}).error(function(a){"1000"==a.error.response_code?alert(a.error.response_msg):ajaxResponseErrorHandler(a,function(){})});else{var c="?"+a.baseParam;c+="&targetUrl="+encodeURIComponent(location.href),j.setSessionStorage("alliancePopupPPPSN",a.mainPop.ppp_sn),location.href=g.loginUrl+c}},a.cookieName=a.mainPop.cookie_nm,null!=j.getSessionStorage("alliancePopupPPPSN")&&a.loginInfo.isLogin?a.dupCouponIssue(a.mainPop.cpn_no):a.screenType>1&&10==d.pppTgtPgCd||a.nopopup==c&&(a.isOpenPop=!0,a.popOpen()),j.delSessionStorage("alliancePopupPPPSN"))}).error(function(a){console.log("Error Data :  메인팝업")})}var p=m.query,q={ppp_tgt_pg_cd:d.pppTgtPgCd,cn:p.cn,udid:p.udid,schema:p.schema};a.nopopup=p.nopop,h.getParameter("testDate")&&(q.testDate=h.getParameter("testDate")),a.hideActionBar=!1,a.cookieName=null,a.appActionBarHide=function(){a.appObj.isApp&&a.hideActionBar&&(location.href="lottebridge://lotteapps/fullscreenhide")},a.appActionBarShow=function(){a.appObj.isApp&&a.hideActionBar&&(location.href="lottebridge://lotteapps/fullscreenshow")},a.pop_move=function(a){location.href=a},a.popGATag=function(b,c){null!=a.mainPopNew&&(0==b?n.evtTag("MO_메인_팝업","팝업","닫기","",""):1==b?n.evtTag("MO_메인_팝업","팝업","오늘하루그만보기","",""):2==b&&(c+=1,10>c&&(c="0"+c),n.evtTag("MO_메인_팝업","팝업",c,"","")))},a.popOpen=function(){b.element(".main_popup").show(),$("#wrapper").css("height","97%"),null==a.mainPopNew&&o(function(){var c=b.element(".main_popup .inner.noswipe img"),d=c.length,e=0;0===d&&(a.isShowPop=!1),c.each(function(){$(this).one("load error",function(b){++e===d&&(a.isShowPop=!0)}).each(function(){(this.complete||""==this.src)&&$(this).trigger("load")})}),a.isShowPop||$("#wrapper").css("height","auto")},100)},a.popClose=function(d){a.sendTclick("m_RDC_popup_Close"),b.element(".main_popup").remove(),$("#wrapper").css("height","auto"),d==c&&a.popGATag(0)},a.popToday=function(){a.sendTclick("m_RDC_popup_stoptoday"),i.setCookie(a.cookieName,"Y",1),a.popGATag(1),a.popClose(0)},a.chkAlliancePopupObj={flag:!0,imgPath:"",deepLinkFlag:!0,tclick:""},a.closeAlliancePopup=function(){a.chkAlliancePopupObj.flag=!1},a.allianceExcuteApp=function(b){var c=a.chkAlliancePopupObj.deepLinkFlag?null:"http://m.lotte.com";a.chkAlliancePopupObj.tclick?a.chkAlliancePopupObj.tclick:null;l.appDeepLink("lotte",c,a.chkAlliancePopupObj.tclick,b)},e()}}]),d.config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/)}]),d.directive("lotteMainPopup",["$window",function(b){return{templateUrl:"/lotte/resources_dev/layer/main_popup.html",controller:"lotteMainPopCtrl",replace:!0,link:function(b,c,d){b.isOpenPop=!1,b.loadMainPopup(d),b.couponBnrLink=function(c){c.isOutLink?getScope().appObj.isApp?openNativePopup("",c.lnk_url_addr):a.open(c.lnk_url_addr):location.href=b.baseLink(c.lnk_url_addr)}}}}]),d.controller("appDownBnrCtrl",["$scope","AppDownBnrService",function(a,b){a.appBnrInfo=null,b.appDownSettingData().then(function(b){a.appBnrInfo=b})}]),d.directive("appDownBnr",["$location","LotteLink","LotteStorage","AppDownBnrService",function(b,c,d,e){return{templateUrl:"/lotte/resources_dev/layer/app_down_bnr.html",controller:"appDownBnrCtrl",replace:!0,link:function(f,g,h){f.appDown_pop=function(){"./"!=e.appDownBnrInfo.linkUrl&&a.open(e.appDownBnrInfo.linkUrl)},f.appDown=function(){var a=null,d=e.appDownBnrInfo.linkUrl+"",g=""!=e.appDownBnrInfo.tclick?e.appDownBnrInfo.tclick:null;"./"!=d&&(a="http"==d.substring(0,4)?e.appDownBnrInfo.linkUrl:"/"==d.substring(0,1)?b.protocol()+"://"+b.host()+d:b.protocol()+"://"+b.host()+"/"+d),g&&f.sendTclick(g),c.appDeepLink("lotte",a,null,e.appDownBnrInfo.referrer)},f.appDownBnrClose=function(){return d.setSessionStorage("appDownBnrHide",!0),e.appDownBnrInfo.isShowFlag=!1,!1}}}}])}(window,window.angular);