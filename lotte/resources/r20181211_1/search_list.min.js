!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteDoubleCoupon","lotteSideCtg","lotteCommFooter","lotteProduct","lotteNgSwipe","lotteSlider","angular-carousel","lotteMainPop","searchPlanShop","searchDetailPopup"]);d.filter("pageRange",[function(){return function(a,b,c){for(var d=[],d=[],e=0;e<a.length;e++)e>=b*c&&(b+1)*c>e&&d.push(a[e]);return d}}]),d.controller("SearchList",["$scope","$http","$filter","$location","$window","$timeout","LotteCommon","LotteUtil","LotteLink","commInitData","LotteScroll","LotteStorage","LotteUserService","$compile","LotteGA",function(d,e,f,g,h,j,k,l,m,n,o,p,q,r,s){function t(a){return z[a]}function u(){return}function v(){if(null!=d.uiStateObj.defaultCtgNo){if(d.srhResultData.ctgLst&&d.srhResultData.ctgLst.items)for(var a,b=d.srhResultData.ctgLst.items.length,c=0;b>c;c++)if(a=d.srhResultData.ctgLst.items[c],a.ctgNo==d.uiStateObj.defaultCtgNo){d.uiStateObj.selectedCategory.depth1=a.ctgNo,d.uiStateObj.selectedCategory.ctgName=[a.ctgName];break}d.uiStateObj.defaultCtgNo=null,d.uiStateObj.skipListLoad=!0,j(d.srhSubCtgPost,1)}}function w(){if(d.srhResultData.advtBnrLst==c){var a={keyword:d.postParams.keyword};e.get(d.URLs.searchAdvtBnr,{params:a}).success(function(a,b,e,f){if(d.srhResultData.advtBnrLst=a.advtBnrLst,d.srhResultData.advtBnrLst.items)for(var g=0;g<d.srhResultData.advtBnrLst.items.length;g++){var h=d.srhResultData.advtBnrLst.items[g];""!=h.title&&(h.title=h.title.replace(/\\n/g,"<br>"))}a.advtTxtBnrInfo!=c&&d.isValidString(a.advtTxtBnrInfo.linkUrl)&&(d.srhResultData.advtTxtBnrInfo=a.advtTxtBnrInfo)})}}function x(){if(d.srhResultData==c||d.srhResultData.prdLst==c||d.srhResultData.prdLst.items==c||0==d.srhResultData.prdLst.items.length)return d.srhResultData.listMid2=[],d.srhResultData.listMid3=[],void(d.srhResultData.listRest=[]);var a=d.srhResultData.prdLst.items.length;6>=a?(d.srhResultData.listMid2=[].concat(d.srhResultData.prdLst.items),d.srhResultData.listMid3=[],d.srhResultData.listRest=[]):18>=a?(d.srhResultData.listMid2=d.srhResultData.prdLst.items.slice(0,6),d.srhResultData.listMid3=d.srhResultData.prdLst.items.slice(6,18),d.srhResultData.listRest=[]):(d.srhResultData.listMid2=d.srhResultData.prdLst.items.slice(0,6),d.srhResultData.listMid3=d.srhResultData.prdLst.items.slice(6,18),d.srhResultData.listRest=d.srhResultData.prdLst.items.slice(18))}function y(a){return a=(a+"").indexOf("?")>-1?a:a+"?","?"!=a.substring(a.length-1,a.length)&&(a+="&"),a+d.baseParam}d.curDispNoSctCd="50",d.curDispNo="1749096",d.showWrap=!0,d.contVisible=!0,d.templateType2="search_image_2017",d.screenID="SrhResult",d.isShowLoading=!1,d.productListLoading=!1,d.searchTermsLoading=!1,d.searchTermsChanged=!1,d.productMoreScroll=!0,d.tipShow=!1,d.brdShowListCnt=50,d.curSideStatus=1,d.uiStateObj={initFlag:!0,srhFilterSelectedIdx:-1,srhFilterCtgDepth1CtgNo:"",srhFilterCtgDepth:0,srhFilterCtgFlag:!1,srhFilterBrdFlag:!1,srhFilterBrdSort:"-cnt",srhFilterDetailFlag:!1,srhFilterSortFlag:!1,sortTypeIdx:0,sortTypeArr:[{label:"인기순",shortLabel:"인기순",value:"RANK,1",notice:!0},{label:"판매순",shortLabel:"판매순",value:"TOT_ORD_CNT,1",notice:!0},{label:"상품평 많은순",shortLabel:"상품평",value:"TOT_REVIEW_CNT,1"},{label:"최근등록순",shortLabel:"최근등록",value:"DATE,1"},{label:"낮은가격순",shortLabel:"낮은가격",value:"DISP_PRICE,0"},{label:"높은가격순",shortLabel:"높은가격",value:"DISP_PRICE,1"}],starPointIdx:0,starPointArr:[{label:"전체",value:"",dimm:!1},{label:"4점 이상",value:"4",dimm:!1},{label:"3점 이상",value:"3",dimm:!1},{label:"2점 미만 제외",value:"2",dimm:!1}],srhDetailSearchClicked:!1,priceMinUFocus:!1,priceMaxUFocus:!1,priceMinUTemp:"",priceMaxUTemp:"",emptyResult:!1,emptyKeyword:!1,emptyPrdLstFlag:!1,planShopOnly:!1,ajaxPageEndFlag:!1,smpickLayerOpenFlag:!1,smpickBranchName:"",relatedKwywordOpenFlag:!1,relatedKeywordEntered:!1,relatedKeywordNotEmpty:!0,relatedKeywordEnabled:!0,detailSearchDataLoaded:!1,selectedCategory:{depth1:null,depth2:null,depth3:null,depth4:[],ctgName:[]},defaultCtgNo:null,rekeywordChanged:!1,skipListLoad:!1,voiceSearch:!1,voiceResultParams:null,ageGenderSearched:!1,researchOpt:"-cnt",researchCheck:!1,brandArr:[],excludeKeyword:null,superBrnShowFlag:!1},d.tClickBase="m_RDC_",d.srhDetailPriceValidateFlag=!0,d.searchUISetting={isShowSideBar:!1,isShowSub:!1,title:"카테고리",researchTypeArr:[{label:"포함단어"},{label:"제외단어"}],researchIdx:0,isAndroidChrome:!1,smartPickSub:!0,smartPickList:!1},d.isValidApp=!1,d.validAppOS="IOS",d.sortLayerPopVisible=!1,d.URLs={searchList:k.srhListData2016,searchTerm:k.srhListTermData2018,searchAdvtBnr:k.srhListAdvtBrnList,searchRevPop:k.srhListReivewPop},d.foldable={research:"research"},"localhost:8082"==location.host&&(d.URLs.searchList=k.srhListData2016LC,d.URLs.searchTerm="/json/search/m/getSearchTermLC.jsp"),d.getSearchKeyword=function(){return d.uiStateObj.voiceSearch?"음성검색 결과":d.srhResultData.keyword},d.postParams={rtnType:"",keyword:"",orgKeyword:"",dpml_no:"1",dispCnt:30,page:1,ctgNo:"",ctgDepth:0,brdNoArr:[],brdNmArr:[],sort:d.uiStateObj.sortTypeArr[0].value,deptYN:"N",tvhomeYN:"N",superYN:"N",brdstoreYN:"N",priceMinU:null,priceMaxU:null,freeInstYN:"N",pointYN:"N",pkgYN:"N",freeGiftYN:"",smpickYN:"N",smpickBranchNo:null,delSevenYN:"N",freeDeliYN:"N",delQuickYN:"N",delTdarYN:"N",selectedColor:[],selectedColor2:[],selectedStyle:[],shoesSize:"",starPoint:d.uiStateObj.starPointArr[0].value,rekeyword:"",reQuery:[],exQuery:[],isVoice:"N",brdNm:""},d.srhResultData={},d.prdDealList=[],d.srhDetailData={srhTerms:{dept:!1,tvhome:!1,"super":!1,brdstore:!1,smpick:!1,smpickBranch:[],quick:!1,tdar:!1,seven:!1},srhColorList:[],freeGiftYN:!1,freeGiftView:!1,feelListCnt:0,starPoinCnt:0,shoseSizeLst:[],shoseSizeCnt:0},d.postParams.keyword=decodeURIComponent(n.query.keyword),d.postParams.keyword=l.replaceAll(d.postParams.keyword,"+"," "),d.postParams.keyword=d.postParams.keyword.replace(/(<([^>]+)>)/gi,""),d.postParams.orgKeyword=d.postParams.keyword,d.postParams.isVoice="Y"==n.query.isVoice?"Y":"N",d.uiStateObj.voiceSearch="Y"==d.postParams.isVoice,n.query.cateNo!=c&&""!=n.query.cateNo&&(d.uiStateObj.defaultCtgNo=n.query.cateNo),d.surKeyword="",d.resurKeyword="",d.survey_state=0,d.noSearchKeywordFlag=!1,d.survey_noprod_stat=!1,d.survey_check=function(a,b){if(2==a?d.sendTclick("m_RDC_SrhResult_Clk_like_btn"):1==a&&d.sendTclick("m_RDC_SrhResult_Clk_dislike_btn"),d.survey_state=a,(0==a||4==a)&&(d.survey_noprod_stat=!1,d.dimmedClose()),a>1){var c=[0,0,3,4,2,1],f={login_id:q.getCookie("LOGINID"),site_no:"1",srchw_nm:""+d.srhResultData.keyword+" "+d.postParams.reQuery.join(" "),stfc_sct_cd:c[a],add_op_cont:b};e.get(k.searchSurvery,{params:f})}},d.survey_noprod_text_check=function(){var a=b.element(".survey_noprd_ta:visible").val();return a&&0==a.length?!0:!1},d.survey_noprod_send=function(){var a=b.element(".survey_noprd_ta:visible").val();if(0==a.length)return void d.alert_2016("찾으시는 상품을 입력해 주세요.");d.survey_state=4,d.survey_noprod_stat=!1,d.dimmedClose();var c={login_id:q.getCookie("LOGINID"),site_no:"1",srchw_nm:""+d.srhResultData.keyword+" "+d.postParams.reQuery.join(" "),stfc_sct_cd:2,add_op_cont:"찾는상품 없음",cust_op_cont:a};e.get(k.searchSurvery,{params:c})},d.survey_noprod=function(){d.survey_state=1,d.survey_noprod_stat=!0,d.actionbarHideFlag=!0,d.dimmedOpen({target:"surveyNoprod",callback:d.surveyNoprodClose})},d.surveyNoprodClose=function(){d.actionbarHideFlag=!1,d.survey_state=4},d.setSurveyPos=function(){var a,c=$(".unitWrap").find("ol > li").length,e=29;0==$(".survey.inst").length?(d.surKeyword=d.postParams.keyword,d.resurKeyword=d.postParams.reQuery,29>c?j(function(){a=r($(".survey").clone().addClass("inst"))(d),0==c?b.element(".empty_result_wrap .favlst").before(a):b.element("#footer").before(a),d.uiStateObj.emptyResult&&j(function(){var a=b.element(".survey.inst").length;a>0&&(d.noSearchKeywordFlag=!0)},1)},0):(a=r($(".survey").clone().addClass("inst"))(d),$(".prod_list_01").length>0?b.element(".prod_list_01 > li").eq(e).after(a):$(".prod_list_02").length>0&&b.element(".prod_list_02 > li").eq(e).after(a))):c>=30&&0==$(".unitWrap").find(".survey ").length&&($(".survey.inst").remove(),a=r($(".survey").clone().addClass("inst"))(d),$(".prod_list_01").length>0?b.element(".prod_list_01 > li").eq(e).after(a):$(".prod_list_02").length>0&&b.element(".prod_list_02 > li").eq(e).after(a)),j(function(){b.element(".survey.inst .caseA > .title span").text(d.surKeyword),b.element(".survey.inst .caseA > .title var").text(d.resurKeyword.join(" ")),b.element(".survey.inst").show()},1e3),j(function(){b.element(".survey.inst .caseA > .title span").text(d.surKeyword),b.element(".survey.inst .caseA > .title var").text(d.resurKeyword.join(" ")),b.element(".survey.inst").show()},2e3)},d.winW=$(a).width(),b.element(h).on({resize:function(){d.winW!=$(a).width()&&(d.winW=$(a).width(),$(".survey.inst").remove(),setTimeout(function(){d.setSurveyPos()},100))}}),d.checkDealListShow=function(){return null!=d.uiStateObj.defaultCtgNo?!1:d.prdDealList==c||0==d.prdDealList.length?!1:d.uiStateObj.srhFilterCtgFlag||d.uiStateObj.srhFilterBrdFlag||d.uiStateObj.srhFilterDetailFlag?!1:d.postParams.reQuery.length>0||d.postParams.exQuery.length>0?!1:!0},d.changeTemplate=function(a){switch(d.templateType2=a,a){case"search_list_2017":d.searchTclick2016("Clk_Unit_01");break;case"search_image_2017":d.searchTclick2016("Clk_Unit_02")}},d.loadMoreData=function(){if(d.isShowLoading||d.productListLoading||d.searchTermsLoading)return!1;if($(a).height()!=$(document).height()){var b="m_RDC_SrhResult_Scl_Prd_page"+d.numberFill(d.postParams.page+1,3);d.sendTclick(b),d.postParams.rtnType="P",d.loadDataParams(d.postParams.rtnType)}},d.srhDetailSearchActiveChk=function(){var a=0;(""!=d.postParams.ctgNo||0!=d.postParams.ctgDepth||null!=d.postParams.dsCtgDepth)&&a++,d.uiStateObj.srhFilterBrdFlag&&a++,("Y"==d.postParams.deptYN||"Y"==d.postParams.tvhomeYN||"Y"==d.postParams.superYN||"Y"==d.postParams.brdstoreYN)&&a++,d.uiStateObj.srhDetailSearchClicked&&a++,("Y"==d.postParams.freeInstYN||"Y"==d.postParams.pointYN||"Y"==d.postParams.pkgYN||"Y"==d.postParams.freeGiftYN)&&a++,("Y"==d.postParams.smpickYN||"Y"==d.postParams.delSevenYN||"Y"==d.postParams.freeDeliYN||"Y"==d.postParams.delQuickYN||"Y"==d.postParams.delTdarYN)&&a++,d.postParams.selectedColor.length>0&&a++,d.postParams.selectedStyle.length>0&&a++;var c=[];b.forEach(d.srhResultData.shoseSizeLst,function(a){a.checked&&this.push(a)},c),c.length>0&&a++,d.uiStateObj.starPointIdx>0&&a++,a>0?d.uiStateObj.srhFilterDetailFlag=!0:d.uiStateObj.srhFilterDetailFlag=!1},d.loadDataParams=function(a){if(d.isShowLoading||d.productListLoading||d.searchTermsLoading)return!1;a||(a="");var e={};switch(e.page=1,a){case"P":e.page=d.postParams.page+1;case"S":e.sort=d.postParams.sort;case"D":case"E":case"T":case"B":case"C":"Y"==d.postParams.deptYN&&(e.deptYN=d.postParams.deptYN),"Y"==d.postParams.tvhomeYN&&(e.tvhomeYN=d.postParams.tvhomeYN),"Y"==d.postParams.superYN&&(e.superYN=d.postParams.superYN),"Y"==d.postParams.brdstoreYN&&(e.brdstoreYN=d.postParams.brdstoreYN),d.uiStateObj.srhDetailSearchClicked&&(e.priceMinU=d.postParams.priceMinU,e.priceMaxU=d.postParams.priceMaxU),"Y"==d.postParams.freeInstYN&&(e.freeInstYN=d.postParams.freeInstYN),"Y"==d.postParams.pointYN&&(e.pointYN=d.postParams.pointYN),"Y"==d.postParams.pkgYN&&(e.pkgYN=d.postParams.pkgYN),"Y"==d.postParams.freeGiftYN&&(e.freeGiftYN=d.postParams.freeGiftYN),"Y"==d.postParams.smpickYN&&(e.smpickYN=d.postParams.smpickYN),"Y"==d.postParams.smpickYN&&null!=d.postParams.smpickBranchNo&&""!=d.postParams.smpickBranchNo&&(e.smpickBranchNo=d.postParams.smpickBranchNo),"Y"==d.postParams.freeDeliYN&&(e.freeDeliYN=d.postParams.freeDeliYN),"Y"==d.postParams.delQuickYN&&(e.delQuickYN="Y"),"Y"==d.postParams.delTdarYN&&(e.delTdarYN="Y"),"Y"==d.postParams.delSevenYN&&(e.delSevenYN="Y"),d.postParams.pop!=c&&""!=d.postParams&&(e.pop=d.postParams.pop),e.colorCd=d.postParams.selectedColor.join(","),e.feelNo=d.postParams.selectedStyle.join(","),d.postParams.shoesSize&&(e.shoesSize=d.postParams.shoesSize),d.postParams.starPoint&&(e.starPoint=d.postParams.starPoint),d.postParams.brdNoArr&&d.postParams.brdNoArr.length>0&&(e.brdNo=d.postParams.brdNoArr.join());case"K":default:d.postParams.ctgNo&&(e.ctgNo=d.postParams.ctgNo),d.postParams.ctgNo&&d.postParams.ctgDepth>=0&&d.postParams.ctgDepth<=3&&(e.ctgDepth=d.postParams.ctgDepth,e.dsCtgDepth=0,e.ctgDepth>0&&(e.dtDsCtgDepth=2,e.dtCtgNo=d.uiStateObj.selectedCategory.depth2)),e.rtnType=a,e.keyword=""+d.postParams.keyword;var f=""+d.postParams.reQuery.join(" ");""!=f&&(e.keyword+=" "+f);var g=""+d.postParams.exQuery.join(" !");""!=g&&(e.keyword+=" !"+g),e.sort=d.postParams.sort}"N"===d.postParams.chkTypo&&(e.chkTypo=d.postParams.chkTypo),e.isVoice=d.postParams.isVoice,d.postParams.brdNm&&""!=d.postParams.brdNm&&(e.brdNm=d.postParams.brdNm);var h;if(null!=d.uiStateObj.defaultCtgNo?(h=b.extend({},e),h.ctgNo=d.uiStateObj.defaultCtgNo,h.ctgDepth=0,h.dsCtgDepth=1):h=e,1==d.uiStateObj.skipListLoad?d.uiStateObj.skipListLoad=!1:(d.srhDetailSearchActiveChk(),1!=e.page||"RANK,1"!=d.postParams.sort||0!=d.uiStateObj.srhFilterDetailFlag||d.postParams.ctgNo||d.uiStateObj.srhFilterBrdFlag||0!=d.postParams.reQuery.length||0!=d.postParams.exQuery.length?d.loadListData(h):(console.log("call adReq"),d.ad_param={query:d.postParams.keyword,channelId:"D01M02101",startRank:1,maxCnt:3,serverUrl:encodeURIComponent(location.href),mbrId:d.loginInfo.mbrNo,userIp:"",ua:encodeURIComponent(navigator.userAgent),adType:"SRP"},d.ad_list=[],d.timeout_flag=0,setTimeout(function(){0==d.timeout_flag&&(console.log("- 광고솔루션 timeout -"),d.timeout_flag=1,d.loadListData(h))},2e3),$.ajax({type:"get",url:k.adReq,data:d.ad_param,dataType:"json",success:function(a){if(a.ads&&(d.ad_list=a.ads,d.ad_list.length>0)){for(var b="",c=0;c<d.ad_list.length;c++)b+=d.ad_list[c].goodsNo,c<d.ad_list.length-1&&(b+=",");h.goodsNoList=b}0==d.timeout_flag&&(d.loadListData(h),d.timeout_flag=1)},error:function(a){console.warn("ADREQ LOAD ERROR"),console.log("광고솔루션 에러",a),0==d.timeout_flag&&(d.loadListData(h),d.timeout_flag=1)},timeout:2e3}))),"N"!=d.postParams.isVoice&&null!=d.uiStateObj.voiceResultParams){var i=d.uiStateObj.voiceResultParams;i.VBrdNm!=c&&""!=i.VBrdNm&&(e.brdNm=i.VBrdNm),i.VColorCd!=c&&""!=i.VColorCd&&(e.colorCd=i.VColorCd),"Y"==i.VSmpickYN&&(e.smpickYN="Y",e.smpickBranchNo="",i.VSmpickBranchNo!=c&&""!=i.VSmpickBranchNo&&(e.smpickBranchNo=i.VSmpickBranchNo)),"Y"==i.VDelSevenYN&&(e.delSevenYN="Y"),i.VPriceMaxU!=c&&""!=i.VPriceMaxU&&(e.priceMaxU=i.VPriceMaxU),i.VPriceMinU!=c&&""!=i.VPriceMinU&&(e.priceMinU=i.VPriceMinU),i.VKeyword!=c&&(e.keyword=i.VKeyword)}if("Y"!=d.postParams.isVoice)switch(a){case"S":case"P":break;case"E":case"C":d.loadTermData(e);break;default:d.loadTermData(e)}d.searchTermsChanged=!0},d.reMappingDealUnitData=function(a){var c={flag:"flag",sale_rate:"saleRate",brnd_nm:"brandNm",coupon:"useCpn",is_dept:"isDept",is_tvhome:"isTvhome",md_tip:"mdTip",img_url:"imgUrl",goods_no:"goodsNo",goods_nm:"goodsNm",copy_nm:"copyNm",price1:"price1",price2:"price",sale_cnt:"saleCnt",curDispNo:"curDispNo",plan_prod_yn:"multiPrice",has_coupon:"useCpn",tenten_yn:"tenten_yn"},e={unix_mix:!1,sale_rate:"",coupon:"",tv_card:!1,is_dept:"",is_tvhome:"",copy_nm:"",link_url:"",img_url:"",goods_no:"",goods_nm:"",price1:0,price2:0,sale_cnt:0,pmg_gdas_cnt:0,sold_out:!1,curDispNo:"",curDispNoSctCd:65,genie_yn:!1,plan_prod_yn:!1,brnd_nm:"",has_coupon:!1,tenten_yn:""},f=[];return b.forEach(a,function(a,g){var h=b.copy(e);b.forEach(c,function(b,c){"link_url"==c?h[c]=k.prdviewUrl+"?"+d.baseParam+"&goods_no="+a.goodsNo+"&curDispNoSctCd=44":"has_coupon"==c?h[c]="coupon"==a[b]?!0:!1:"sale_rate"==c?null==a[b]?h[c]=0:h[c]=parseInt(a[b]):"goods_nm"==c?(h[c]=l.replaceAll(a.goodsNm,"<!HS>","<STRONG>"),h[c]=l.replaceAll(h[c],"<!HE>","</STRONG>")):"md_tip"==c?h.copy_nm=a[b]:"copy_nm"==c?""!=a[b]&&(h.brnd_nm="",h.goods_nm=l.replaceAll(a[b],"<!HS>","<STRONG>"),h.goods_nm=l.replaceAll(h.goods_nm,"<!HE>","</STRONG>")):h[c]=a[b]}),f.push(h)}),f},d.reMappingPldUnitData=function(a){var d={goods_no:"goodsNo",goods_nm:"goodsNm",brnd_nm:"brandNm",img_url:"imgUrl",original_price:"price1",discounted_price:"price2",sale_rate:"saleRate",flag:"flag",review_count:"reviewCnt",avg_gdas_stfd_val:"avg_gdas_stfd_val",smartpick_yn:"isSmpick",limit_age_yn:"byrAgelmt",is_himart:"isHimart",is_dept:"isDept",is_tvhome:"isTvhome",is_youngplz:"isYoung",is_super:"isSuper",is_sale_promotion:"goodsCmpsCd",outlnk:"outlnk",outlnkMall:"outlnkMall",curDispNo:"curDispNo",has_coupon:"useCpn",hash_list:"hash_list",savePoint:"savePoint",vodUrl:"vodUrl",click_url:"click_url",ad_url:"ad_url",nIdx:"nIdx",tenten_yn:"tenten_yn",soldout_yn:"soldout_yn"},e={goods_no:"",goods_nm:"",brnd_nm:"",img_url:"",img_url_550:"",original_price:"",discounted_price:"",sale_rate:"",flag:"",is_sold_out:!1,has_coupon:!1,has_wish:!1,is_sale_promotion:!1,review_count:0,bought_sum:0,md_tip:"",promotion_text:"",isdlex_free:!1,smartpick_yn:!1,sold_out_cd_yn:"N",limit_age_yn:"N",link_url:"",is_himart:"",is_dept:"",is_youngplz:"",outlnk:"",outlnkMall:"",curDispNo:"",savePoint:0,vodUrl:"",tenten_yn:"",soldout_yn:""},f=[];return b.forEach(a,function(a,g){var h=b.copy(e);b.forEach(d,function(b,c){"has_coupon"==c?h[c]="coupon"==a[b]?!0:!1:"flag"==c?a.flag&&a.flag.indexOf("무료배송")>-1&&(h.isdlex_free=!0):"is_sale_promotion"==c?"30"==a.goodsCmpsCd&&(h[c]=!0):"sale_rate"==c||"savePoint"==c?null==a[b]?h[c]=0:h[c]=parseInt(a[b]):"smartpick_yn"==c?h[c]=a[b]?"Y":"N":"limit_age_yn"==c?h[c]=19==a[b]?"Y":"N":"goods_nm"==c?(h[c]=l.replaceAll(a.goodsNm,"<!HS>","<STRONG>"),h[c]=l.replaceAll(h[c],"<!HE>","</STRONG>")):h[c]=a[b]}),a.isDlvToday!=c&&(h.isDlvToday=a.isDlvToday),a.isDeptPickYn!=c&&(h.isDeptPickYn=a.isDeptPickYn),a.isCrsPickYn!=c&&(h.isCrsPickYn=a.isCrsPickYn),a.isDlvQuick!=c&&(h.isDlvQuick=a.isDlvQuick),a.nint_card_flag!=c&&(h.nint_card_flag=a.nint_card_flag),h.reivew_list=[],a.gdasInfo1!=c&&a.gdasInfo1.gdasNo!=c&&""!=a.gdasInfo1.gdasNo&&h.reivew_list.push(a.gdasInfo1),a.gdasInfo2!=c&&a.gdasInfo2.gdasNo!=c&&""!=a.gdasInfo2.gdasNo&&h.reivew_list.push(a.gdasInfo2),f.push(h)}),f},d.updateColors=function(a){var b,e,f,g=d.postParams.rtnType;if(""==g||"K"==g){if(a==c)return d.srhDetailData.srhColorList=[],void(d.srhDetailData.srhColorList2=[]);b=a.length;var h=[];for(e=0;b>e;e++)f=a[e],f.selected=d.postParams.selectedColor.indexOf(f.colorCd)>=0,f.avail=!0,f.name=f.colorNm,h.push(f);d.srhDetailData.srhColorList=h,d.srhDetailData.srhColorList2=h.concat([])}else{if(d.postParams.selectedColor2=[],d.srhDetailData.srhColorList2.length=0,a==c)return;var i=[];for(b=a.length,e=0;b>e;e++)i.push(a[e].colorCd);var j=d.srhDetailData.srhColorList;for(b=j.length,e=0;b>e;e++)f=j[e],f.avail=i.indexOf(f.colorCd)>=0,f.selected&&f.avail&&d.postParams.selectedColor2.push(f.colorCd),f.avail&&d.srhDetailData.srhColorList2.push(f)}},d.noKeyword=function(){d.uiStateObj.emptyResult=!1,d.uiStateObj.emptyKeyword=!0},d.loadTermData=function(a){var c=b.extend({rtnType:"",keyword:"",dpml_no:"1",dispCnt:30,page:1,cmpsCd:50,holyDayYN:"Y"===n.query.holyDayYN?"Y":"N"},a),f=d.URLs.searchTerm;return d.postParams.isVoice&&""!=d.postParams.isVoice&&(c.isVoice=d.postParams.isVoice),d.postParams.brdNm&&(c.brdNm=d.postParams.brdNm),c.keyword||c.brdNm?d.searchTermsLoading?!1:(d.isShowLoading=!0,d.searchTermsLoading=!0,void e.get(f,{params:c}).success(function(a,b,c,e){d.termDataLoadComplete(a),"Y"===n.query.holyDayYN&&setTimeout(function(){n.query.holyDayYN="N"},1e3),d.searchTermsLoading=!1,d.searchTermsLoading||d.productListLoading||(d.isShowLoading=!1)}).error(function(a,b,c,e){console.warn("TERM LOAD ERROR"),d.searchTermsLoading=!1,d.searchTermsLoading||d.productListLoading||(d.isShowLoading=!1)})):(d.noKeyword(),!1)},d.relationKeyword=function(a){return a.replace(d.srhResultData.keyword,"<em>"+d.srhResultData.keyword+"</em>")},d.addRelatedKeyword=function(a,b){a=a.replace(/ /g,""),d.srhResultData.reatedKeyword.indexOf(a)>=0||d.postParams.reQuery.indexOf(a)>=0||d.postParams.exQuery.indexOf(a)>=0||(b===!0?d.srhResultData.reatedKeyword.unshift(a):d.srhResultData.reatedKeyword.push(a))};var z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},A=new RegExp(Object.keys(z).join("|"),"gi");d.termDataLoadComplete=function(a){if(a.resultCode){if(a.keyword!=c&&(a.keyword=a.keyword.replace(A,t)),"Y"==a.isVoice&&a.redirectUrl!=c&&""!=a.redirectUrl){var e=a.redirectUrl;return e+=e.indexOf("?")>=0?"&"+d.baseParam:"?"+d.baseParam,d.showWrap=!1,void(location.href=e)}a.isVoice&&""!=a.isVoice&&(d.postParams.isVoice=a.isVoice);var g,h;if("Y"==a.isVoice||"T"==a.isVoice&&a.keyword&&a.sortType&&""!=a.sortType)for(d.postParams.keyword=a.keyword,d.postParams.sort=a.sortType,g=0;g<d.uiStateObj.sortTypeArr.length;g++)d.uiStateObj.sortTypeArr[g].value==d.postParams.sort&&(d.uiStateObj.sortTypeIdx=g);var i=d.postParams.rtnType;switch(i){case"":d.srhResultData.keyword=a.keyword,d.postParams.keyword=a.keyword;case"K":if(d.srhResultData.reatedKeyword||(d.srhResultData.reatedKeyword=[]),d.srhResultData.reatedKeyword.length=0,a.reatedKeyword&&a.reatedKeyword.Data&&0==a.reatedKeyword.Data.Return&&a.reatedKeyword.Data.Word&&a.reatedKeyword.Data.Word.length>0&&b.forEach(a.reatedKeyword.Data.Word,function(a,b){d.addRelatedKeyword(a)}),"1"==a.store["super"]&&d.uiStateObj.superBrnShowFlag&&d.postParams.reQuery.indexOf("오늘장보기")<0&&d.addRelatedKeyword("오늘장보기",!0),1==a.smpick){var k=!1,l=d.postParams.reQuery;if("스마트픽"==d.postParams.keyword?0==l.length&&(k=!0):l.length>0&&l.indexOf("스마트픽")==l.length-1&&(k=!0),k&&a.smpickBranch!=c&&a.smpickBranch.length>0)for(h=a.smpickBranch.length,g=h-1;g>=0;g--)d.addRelatedKeyword(a.smpickBranch[g].name,!0)}d.uiStateObj.relatedKeywordNotEmpty=!0,d.srhResultData.reatedKeyword==c?d.uiStateObj.relatedKeywordNotEmpty=!1:0==d.srhResultData.reatedKeyword.length&&(d.uiStateObj.relatedKeywordNotEmpty=!1),0==d.uiStateObj.voiceSearch&&a.relatedKeyword&&0==a.relatedKeyword.responsestatus&&"undefined"!=typeof a.relatedKeyword.result[0]&&"undefined"!=typeof a.relatedKeyword.result[0].items&&a.relatedKeyword.result[0].items.length>0&&b.forEach(a.relatedKeyword.result[0].items,function(a,b){d.srhResultData.relatedKeyword||(d.srhResultData.relatedKeyword=[]);for(var c=!1,e=0;e<d.srhResultData.relatedKeyword.length;e++)if(d.srhResultData.relatedKeyword[e].keyword==a.keyword){c=!0;break}c||a.keyword&&a.type&&a.count&&"2"==a.type&&a.count>0&&(a.keyword+"").toLowerCase()!=(d.postParams.keyword+"").toLowerCase()&&d.srhResultData.relatedKeyword.push(a)}),d.tryAnimateRelatedKeyword();default:if(a.ctgLst!=c&&(d.srhResultData.ctgLst=a.ctgLst),a.dtlCtgLst!=c&&(a.subCtgLst=a.dtlCtgLst,a.subCtgLst.ctgNo=d.uiStateObj.selectedCategory.depth2),a.subCtgLst!=c)if(a.subCtgLst.items!=c&&a.subCtgLst.items.length>0){var m,n,h,o,g,p,q,r,s=!1,w=!1;for(m=d.srhResultData.ctgLst.items,h=m.length,g=0;h>g;g++){if(q=m[g],q.subCtgLst!=c&&q.subCtgLst.items!=c)for(n=q.subCtgLst.items,o=n.length,p=0;o>p;p++)if(r=n[p],r.ctgNo==a.subCtgLst.ctgNo){r.subCtgLst==c&&(r.subCtgLst=a.subCtgLst,w=!0),s=!0;break}if(s)break}var x=$("#ctg_"+a.subCtgLst.ctgNo);w&&!x.hasClass("open")&&j(function(){d.categoryAccordian(x)},50)}else if(a.subCtgLst.ctgNo!=c){var x=$("#ctg_"+a.subCtgLst.ctgNo);x.addClass("nochild")}d.srhResultData.brdLst==c&&(d.srhResultData.brdLst={},d.srhResultData.brandList={}),a.brdLst.items==c&&(a.brdLst.items=[]);if(""==i||"K"==i)d.srhResultData.brdLst.items=f("orderBy")(a.brdLst.items,d.uiStateObj.srhFilterBrdSort),d.srhResultData.brandList.items=[].concat(d.srhResultData.brdLst.items);else{var y=[],z=f("orderBy")(a.brdLst.items,d.uiStateObj.srhFilterBrdSort);b.forEach(z,function(a,c){y.push(a.brdNo),b.forEach(d.srhResultData.brdLst.items,function(b,c){b.brdNo==a.brdNo&&(b.cnt=a.cnt)})});var B=[];d.srhResultData.brandList.items.length=0,b.forEach(d.srhResultData.brdLst.items,function(a,b){a.dimm=!1,y.indexOf(a.brdNo)>=0?d.srhResultData.brandList.items.push(a):a.checked&&(a.dimm=!0,a.cnt=0,B.push(a))}),d.srhResultData.brandList.items=f("orderBy")(d.srhResultData.brandList.items,d.uiStateObj.srhFilterBrdSort),B.length>0&&(d.srhResultData.brandList.items=d.srhResultData.brandList.items.concat(B))}if(d.srhResultData.brdLstRender=d.srhResultData.brandList.items,a.brdLst.tcnt&&(d.srhResultData.brdLst.tcnt=a.brdLst.tcnt),d.srhDetailData.srhTerms.dept="1"==a.store.dept?!0:!1,d.srhDetailData.srhTerms.tvhome="1"==a.store.tvhome?!0:!1,d.srhDetailData.srhTerms["super"]="1"==a.store["super"]?!0:!1,d.srhDetailData.srhTerms.brdstore="1"==a.store.brdstore?!0:!1,d.srhResultData.price=a.price,d.postParams.priceMinUTemp=a.price.min,d.postParams.priceMaxUTemp=a.price.max,(""==i||"K"==i)&&("Y"==a.freeGiftYN?d.srhDetailData.freeGiftView=!0:d.srhDetailData.freeGiftView=!1),"Y"==a.freeGiftYN?d.srhDetailData.freeGiftYN=!0:d.srhDetailData.freeGiftYN=!1,d.srhDetailData.srhTerms.smpick="1"==a.smpDept||"1"==a.smpick?!0:!1,d.srhDetailData.srhTerms.smpickBranch=f("orderBy")(a.smpickBranch,"name"),d.srhDetailData.srhTerms.seven="1"==a.smpSeven?!0:!1,d.srhDetailData.srhTerms.quick="1"==a.quick?!0:!1,d.srhDetailData.srhTerms.tdar="1"==a.tdar?!0:!1,d.updateColors(a.colors),a.feelList)if(""==i||"K"==i)a.feelList.items&&(d.srhResultData.srhFeelList=a.feelList.items,d.srhResultData.feelListCnt=d.srhResultData.srhFeelList.length);else{var C=[];b.forEach(a.feelList.items,function(a){C.push(a.feelNo),b.forEach(d.srhResultData.srhFeelList,function(b){b.feelNo==a.feelNo&&(b.feelcnt=a.feelcnt)})}),d.srhResultData.srhFeelList=f("orderBy")(d.srhResultData.srhFeelList,"-feelcnt"),b.forEach(d.srhResultData.srhFeelList,function(a){C.indexOf(a.feelNo)>=0?a.dimm=!1:(a.dimm=!0,a.feelcnt=0)});var D=0;b.forEach(d.srhResultData.srhFeelList,function(a){(!a.dimm||a.dimm&&a.checked)&&D++}),d.srhResultData.feelListCnt=D}if(a.shoseSizeLst)if(""==i||"K"==i)a.shoseSizeLst.items&&(d.srhResultData.shoseSizeLst=a.shoseSizeLst.items,d.srhResultData.shoseSizeCnt=d.srhResultData.shoseSizeLst.length);else{var E=[];b.forEach(a.shoseSizeLst.items,function(a){E.push(a.shoseNm),b.forEach(d.srhResultData.shoseSizeLst,function(b){b.shoseNm==a.shoseNm&&(b.shoseCnt=a.shoseCnt)})}),b.forEach(d.srhResultData.shoseSizeLst,function(a){E.indexOf(a.shoseNm)>=0?a.dimm=!1:(a.dimm=!0,a.shoseCnt=0)});var D=0;b.forEach(d.srhResultData.shoseSizeLst,function(a){(!a.dimm||a.dimm&&a.checked)&&D++}),d.srhResultData.shoseSizeCnt=D}if(a.starPointLst&&a.starPointLst.items){d.srhResultData.starPointLst=a.starPointLst.items;var F="2";if(d.srhResultData.starPointLst.length>0)switch(d.srhResultData.starPointLst[d.srhResultData.starPointLst.length-1].starNo){case"1":case"2":case"3":case"4":case"5":F=d.srhResultData.starPointLst[d.srhResultData.starPointLst.length-1].starNo}else F="0";var G;b.forEach(d.uiStateObj.starPointArr,function(a){G=a.value,""==G||G>=F?a.dimm=!1:a.dimm=!0}),d.srhResultData.starPoinCnt=a.starPointLst.items.length}else d.srhResultData.starPoinCnt=0,b.forEach(d.uiStateObj.starPointArr,function(a){a.dimm=!0})}d.uiStateObj.detailSearchDataLoaded=!0,v(),j(d.scrollFilterTop,1),j(u,1),"0000"!=a.resultCode&&(d.uiStateObj.relatedKeywordNotEmpty=!1,""==d.postParams.rtnType&&(d.srhResultData.keyword=a.keyword,d.postParams.keyword=a.keyword))}else""==d.postParams.rtnType&&(d.srhResultData.keyword=a.keyword,d.postParams.keyword=a.keyword)},d.scrollFilterTop=function(){var a=b.element(".foldable_tab.opened:not(.research)");if(a.length>0){var c=a.nextAll(".foldable_tab");if(c.length>0){var d=$(".foldable_tab:first-child").position().top,e=a.position().top,f=c.eq(0).position().top;80>f&&$(".ssw_slide.main").scrollTop(e-d)}}},d.loadListData=function(a){d.survey_state=0;var f=b.extend({rtnType:"",keyword:"",dpml_no:"1",dispCnt:30,page:1,cmpsCd:50,holyDayYN:"Y"===n.query.holyDayYN?"Y":"N"},a),g=d.URLs.searchList;return d.productListLoading?!1:(d.isShowLoading=!0,d.productListLoading=!0,d.postParams.isVoice&&""!=d.postParams.isVoice&&(f.isVoice=d.postParams.isVoice),d.postParams.brdNm&&(f.brdNm=d.postParams.brdNm),f.keyword||f.brdNm?(d.uiStateObj.superBrnShowFlag=d.chkExcludeSuperBnr(f.keyword),void e.get(g,{params:f}).success(function(a,b,e,f){if(a.prdLst&&a.prdLst.items)for(var g=0;3>g;g++)if(g<a.prdLst.items.length&&a.prdLst.items[g].ad_url!=c&&d.ad_list.length>0)for(var h=0;h<d.ad_list.length;h++)a.prdLst.items[g].goodsNo==d.ad_list[h].goodsNo&&(a.prdLst.items[g].click_url=d.ad_list[h].clickUrl);d.listDataLoadComplete(a),d.productListLoading=!1,d.searchTermsLoading||d.productListLoading||(d.isShowLoading=!1),setTimeout(function(){d.setSurveyPos()},1e3)}).error(function(a,b,c,e){console.warn("LIST LOAD ERROR"),d.productListLoading=!1,d.searchTermsLoading||d.productListLoading||(d.isShowLoading=!1)})):(d.noKeyword(),!1))},d.listDataLoadComplete=function(b){if(b.resultCode){if("Y"==b.isVoice&&b.redirectUrl!=c&&""!=b.redirectUrl){var e=b.redirectUrl;return e+=e.indexOf("?")>=0?"&"+d.baseParam:"?"+d.baseParam,d.showWrap=!1,void j(function(){location.href=e},1)}var f="Y"==d.postParams.isVoice;if(b.voiceParams!=c&&(d.uiStateObj.voiceResultParams=b.voiceParams),("Y"==b.isVoice||"T"==b.isVoice)&&(b.voiceParams==c||""==b.voiceParams.VBrdNm&&""==b.voiceParams.VKeyword)&&(b.tCnt=0,b.prdLst.items=[],b.prdLst.tcnt=0,b.resultCode="1000"),d.uiStateObj.initFlag=!1,d.srhResultData.dispUnitType=b.dispUnitType,d.srhResultData.resultCode=b.resultCode,b.tCnt!=c&&"number"==typeof b.tCnt&&(d.srhResultData.tCnt=b.tCnt),b.isVoice&&""!=b.isVoice&&(d.postParams.isVoice=b.isVoice),"Y"==b.isVoice||"T"==b.isVoice&&b.keyword&&b.sortType&&""!=b.sortType){d.postParams.keyword=b.keyword,d.postParams.sort=b.sortType;var g=0;for(g=0;g<d.uiStateObj.sortTypeArr.length;g++)d.uiStateObj.sortTypeArr[g].value==d.postParams.sort&&(d.uiStateObj.sortTypeIdx=g)}if(b.prdLst.items&&b.prdLst.items.length>0){var h=0;d.postParams.page>1&&(h=d.srhResultData.prdLst.items.length);for(var i=0;i<b.prdLst.items.length;i++)b.prdLst.items[i].nIdx=h+i}if(1==b.page&&(b.missKeyword!=c&&b.missKeyword.orgKeyword!=c&&""!=b.missKeyword.orgKeyword?(d.srhResultData.orgKeyword=b.missKeyword.orgKeyword,b.voiceParams!=c&&b.voiceParams.VKeyword!=c&&""!=b.voiceParams.VKeyword&&(d.postParams.keyword=b.voiceParams.VKeyword),d.surKeyword=d.postParams.keyword):d.srhResultData.orgKeyword=""),d.uiStateObj.planShopOnly=!1,"0000"==b.resultCode&&(b.prdLst==c||b.prdLst.items==c||0==b.prdLst.items.length)&&b.planPrdLst!=c&&b.planPrdLst.items!=c&&b.planPrdLst.items.length>0&&(d.uiStateObj.planShopOnly=!0),"0000"==b.resultCode){var k=d.uiStateObj.emptyResult;switch(d.uiStateObj.emptyResult=!1,d.uiStateObj.emptyKeyword=!1,d.postParams.rtnType){case"":case"K":d.srhResultData.prdDealLst=b.prdDealLst,d.srhResultData.prdDealLst&&d.srhResultData.prdDealLst.items&&d.srhResultData.prdDealLst.items.length>0&&(d.prdDealList=d.reMappingDealUnitData(d.srhResultData.prdDealLst.items));case"C":case"B":case"E":case"S":d.srhResultData.sortType=b.sortType;case"P":if(d.srhResultData.dispCnt=b.dispCnt,d.srhResultData.page=b.page,d.postParams.page=b.page,d.uiStateObj.ajaxPageEndFlag=!1,d.postParams.page>1?d.srhResultData.prdLst.items=d.srhResultData.prdLst.items.concat(d.reMappingPldUnitData(b.prdLst.items)):b.prdLst?(d.srhResultData.prdLst=b.prdLst,d.srhResultData.prdLst.items=d.reMappingPldUnitData(b.prdLst.items),d.srhResultData.prdLst.tcnt=b.prdLst.tcnt):(d.uiStateObj.ajaxPageEndFlag=!0,d.productMoreScroll=!1),d.srhResultData.prdLst&&d.srhResultData.prdLst.items&&b.prdLst&&b.prdLst.items){d.srhResultData.tCnt<=d.srhResultData.prdLst.items.length||0==b.prdLst.items.length?(d.uiStateObj.ajaxPageEndFlag=!0,d.productMoreScroll=!1):(d.uiStateObj.ajaxPageEndFlag=!1,d.productMoreScroll=!0);for(var l=[],g=0;g<d.srhResultData.prdLst.items.length&&l.length<3;g++)l.push(d.srhResultData.prdLst.items[g].goods_no+""||"");d.sendBuzzni&&!a.buzzni_rt_list&&(d.sendBuzzni("list",l),a.buzzni_rt_list=!0)}else d.uiStateObj.ajaxPageEndFlag=!0,d.productMoreScroll=!1;"undefined"!=typeof d.srhResultData.prdLst&&"undefined"!=typeof d.srhResultData.prdLst.items||d.uiStateObj.emptyKeyword||d.uiStateObj.initFlag?d.uiStateObj.emptyPrdLstFlag=!1:(d.uiStateObj.ajaxPageEndFlag=!0,
d.uiStateObj.emptyPrdLstFlag=!0,d.productMoreScroll=!1)}if(d.srhResultData.planPrdLst=b.planPrdLst,d.srhResultData.prdLst&&d.srhResultData.prdLst.items)for(g=0;g<d.srhResultData.prdLst.items.length;g++)d.srhResultData.prdLst.items[g].brnd_nm=d.srhResultData.prdLst.items[g].brnd_nm.replace("[",""),d.srhResultData.prdLst.items[g].brnd_nm=d.srhResultData.prdLst.items[g].brnd_nm.replace("]","");k&&d.tryAnimateRelatedKeyword(),(d.postParams.pop==c||""==d.postParams.pop)&&(b.ageGndrGrpLst&&b.ageGndrGrpLst.items&&b.ageGndrGrpLst.items.length>0?d.srhResultData.ageGndrGrpLst=b.ageGndrGrpLst.items:d.srhResultData.ageGndrGrpLst=[]),x(),f?j(function(){d.uiStateObj.skipListLoad=!0,d.loadDataParams()},1):j(u,1),j(function(){d.alidoCollectLog("search",b)},500)}else if("1000"==b.resultCode){if(d.uiStateObj.emptyResult=!0,d.uiStateObj.emptyKeyword=!1,d.productMoreScroll=!1,d.srhResultData.tCnt=b.tCnt,d.srhResultData.missKeyword=b.missKeyword,d.srhResultData.smpBanner=b.smpBanner,"undefined"!=typeof b.favLst){d.srhResultData.favLst={};var m=new Date;if("undefined"!=typeof b.favLst.date&&b.favLst.date.length>=8){var n=(b.favLst.date+"").substr(0,4),o=parseInt((b.favLst.date+"").substr(4,2))-1,p=(b.favLst.date+"").substr(6,2);m=new Date(n,o,p)}d.srhResultData.favLst.date=m,d.srhResultData.favLst.items=b.favLst.items}}else"2000"==b.resultCode&&d.noKeyword()}w()},d.tryAnimateRelatedKeyword=function(){try{d.animateRelatedKeyword()}catch(a){j(function(){d.tryAnimateRelatedKeyword()},200)}},d.loadCouponeLayerData=function(){e.get(k.couponLayerData+"?"+d.baseParam).success(function(a){d.couponLayer=a}).error(function(){console.log("Data Error : 쿠폰 레이어 데이터")})},d.startSearchList=function(){if(p.getSessionStorage("srhLstLoc")==g.absUrl()&&p.getSessionStorage("srhLst")&&d.locationHistoryBack){var a=p.getSessionStorage("srhLst","json");if("undefined"==typeof a.srhResultData.resultCode)d.loadDataParams();else{try{console.log("Session Load")}catch(c){}d.uiStateObj=a.uiStateObj,d.postParams=a.postParams,d.srhResultData=a.srhResultData,d.srhDetailData=a.srhDetailData,(d.isShowLoading||d.productListLoading)&&(d.productListLoading=!1,d.isShowLoading=!1),d.srhResultData.prdDealLst&&d.srhResultData.prdDealLst.items&&d.srhResultData.prdDealLst.items.length>0&&(d.prdDealList=d.reMappingDealUnitData(d.srhResultData.prdDealLst.items));var e=p.getSessionStorage("srhLstNowScrollY");j(function(){b.element(h).scrollTop(e)},300),d.tryAnimateRelatedKeyword(),p.delSessionStorage("srhLstLoc"),p.delSessionStorage("srhLst"),p.delSessionStorage("srhLstNowScrollY")}}else d.loadDataParams();n.query.cn&&d.loadCouponeLayerData(),b.element(h).on("unload",function(){if("SEARCH"==d.locationParam)p.delSessionStorage("srhLstLoc"),p.delSessionStorage("srhLst"),p.delSessionStorage("srhLstNowScrollY");else{var a={};if(d.postParams.orgKeyword!=d.postParams.keyword)return void p.delSessionStorage("srhLstLoc");a.uiStateObj=d.uiStateObj,a.postParams=d.postParams,a.srhResultData=d.srhResultData,a.srhDetailData=d.srhDetailData,n.query.localtest||(p.setSessionStorage("srhLstLoc",g.absUrl()),p.setSessionStorage("srhLst",a,"json"),p.setSessionStorage("srhLstNowScrollY",b.element(h).scrollTop()))}}),b.element(h).on("scroll",function(a){var c=b.element(h),e=b.element("body"),f=c.height(),g=e[0].scrollHeight,i=4;return d.scrollFlag?void(d.srhResultData.prdLst&&(!d.productMoreScroll||d.productListLoading||d.pageLoading||(g=e[0].scrollHeight,i=c.width()>=640?2:4,c.scrollTop()+f>=g-f*i&&d.loadMoreData()))):void a.preventDefault()}),b.element(h).on("popstate",function(a){d.tipShow=!1,3==d.curSideStatus?d.hideSubSearch():2==d.curSideStatus?d.closeSideSearch():d.searchUISetting.isShowSideBar&&history.back()});var f=(navigator.userAgent+"").toLowerCase();d.searchUISetting.isAndroidChrome=f.indexOf("android")>=0&&f.indexOf("chrome")>=0},d.goPrevSideStatus=function(){d.curSideStatus>1&&d.curSideStatus--},d.goNextSideStatus=function(){d.curSideStatus<3&&(d.curSideStatus++,history.pushState(d.curSideStatus,d.curSideStatus,h.location.href))},d.searchTclick2016=function(a){var b=d.tClickBase;b+="SrhFilter_"+a,d.sendTclick(b),"Cate_ALL"==a&&d.ga("카테고리","전체")},d.ga=function(a,b,c){"sort"===c?s.evtTag("MO_검색_검색결과_정렬",a,b):s.evtTag("MO_검색_검색결과_필터",a,b)},d.linkUrl=function(c,e,f,g){if(e)d.sendOutLink(c),f&&d.sendTclick(f);else{var c=y(c);if(g&&b.forEach(g,function(a,b){c+="&"+b+"="+a}),f&&(c+="&tclick="+f),-1!=(c+"").indexOf("main_phone.do?dispNo=")){f&&d.sendTclick(f);var h=c.indexOf("dispNo=")+7,i=c.substr(h,7);d.headerMenuClick(i)}else a.location.href=c}},d.advBnrLink=function(b,c){b=y(b),b+="&tclick=m_RDC_SrhResult_Clk_event_idx"+d.numberFill(c+1,3),a.location.href=b},d.lsSearchLink=function(a){var b=d.appObj.isSuperApp?"M389288":"M389287";for(i=0;i<d.postParams.reQuery.length;i++)d.postParams.reQuery[i].indexOf("오늘장보기")>=0||(a+=" "+d.postParams.reQuery[i]);d.gotoLotteSuperUrl(k.SuperSearchListUrl+"?query="+a,b)},d.productInfoProc=function(b,e,f){if("Y"==b.limit_age_yn||"19"==b.pmg_byr_age_lmt_cd){if(!d.loginInfo.isAdult&&d.loginInfo.isLogin)return d.goAdultSci(),!1;if(!d.loginInfo.isLogin)return a.location.href=k.loginUrl+"?"+d.baseParam+"&adultChk=Y&targetUrl="+encodeURIComponent(a.location.href,"UTF-8"),!1;if(!d.loginInfo.isAdult)return alert("이 상품은 법률규정에 의하여 만 19세 이상 성인만 조회 및 구매가 가능합니다."),!1}if(""!=b.outlnk&&b.outlnk!=c)return"SP"==b.outlnkMall?confirm("롯데슈퍼로 이동 후 구입하실 수 있습니다.\n이동 하시겠습니까?")&&(d.appObj.isApp?openNativePopup("롯데슈퍼",b.outlnk):a.open(b.outlnk)):confirm("공식 온라인 몰로 이동 후 구입하실 수 있습니다.\n이동 하시겠습니까?")&&(d.appObj.isApp?openNativePopup("공식온라인몰",b.outlnk):a.open(b.outlnk)),!1;var g="";d.curDispNo?g="&curDispNo="+d.curDispNo:b.curDispNo&&(g="&curDispNo="+b.curDispNo);var h="";d.curDispNoSctCd?h="&curDispNoSctCd="+d.curDispNoSctCd:b.curDispNoSctCd&&(h="&curDispNoSctCd="+b.curDispNoSctCd);var i="";("deal"==e||b.genie_yn)&&(i="&genie_yn=Y"),a.location.href=k.prdviewUrl+"?"+d.baseParam+"&goods_no="+b.goods_no+g+h+i+"&tclick="+f},d.numberFill=function(a,b){var c=""+a,d="00000000000000000";return d.substring(0,b-c.length)+c},d.superBnrExclude=function(){e.get(k.superBnrExcludeKeywordData,{}).success(function(a,b,c,e){a.result?d.uiStateObj.excludeKeyword=a.result:d.uiStateObj.excludeKeyword=[],d.uiStateObj.superBrnShowFlag=d.chkExcludeSuperBnr(d.postParams.keyword)}).error(function(a,b,c,e){console.log("Data Error : 슈퍼배너 제외 키워드 로드 실패"),d.uiStateObj.excludeKeyword=[]})},d.chkExcludeSuperBnr=function(a){var b=!0,c=0,e=!1,f=(a+"").replace(/\![^\s]+/gi,"");if(d.uiStateObj.excludeKeyword&&d.uiStateObj.excludeKeyword.length>0){for(c;c<d.uiStateObj.excludeKeyword.length;c++)if(f.indexOf(d.uiStateObj.excludeKeyword[c])>-1){e=!0;break}e&&(b=!1)}return b},d.uiStateObj.excludeKeyword||d.superBnrExclude()}]),commModule.directive("scrollCount",["$window","LotteCommon",function(c,d){return{template:'<div ng-show="srhResultData.tCnt && srhResultData.tCnt > 0" class="count_wrap"><span class="count">{{currentItem|number}}/{{srhResultData.tCnt|number}}</span></div>',replace:!0,link:function(d,e,f){d.currentItem=1,b.element(c).on("scroll",function(b){$(".count_wrap").stop().show(),clearTimeout($(".count_wrap").data("scroll")),setTimeout(function(){$(".count_wrap").fadeOut()},1e3),d.totalItem=$(".listWrap ol > li").length;for(var c=-1,e=-1,f=0;f<d.totalItem;f++){var g=$($(".listWrap ol > li")[f]),h=g.offset().top;if(a.scrollY-h<=100&&-1==c&&(c=f,e=a.scrollY-h),-1!=c&&a.scrollY-h<=100&&a.scrollY-h!=e){d.currentItem=f;break}}})}}}]),d.directive("lotteContainer",["LotteStorage","LotteUtil","LotteCommon","$http","$timeout","$window","$filter",function(d,e,f,g,h,i,j){return{templateUrl:"/lotte/resources_dev/search/search_list_2018_container.html",replace:!0,link:function(k,l,m){function n(a){a==c&&(a=b.element(".foldable_tab.opened:not(.research)")),a.offset().top<=84?a.addClass("fixtop"):a.removeClass("fixtop")}function o(){var a=b.element(".foldable_tab.opened:not(.research)");a.length>0&&(k.appObj.isIOS?(a.removeClass("fixtop"),clearTimeout(s),s=setTimeout(n,300)):n(a)),b.element(".foldable_tab.fixtop:not(.opened)").removeClass("fixtop")}function p(){var a="",b=k.uiStateObj.selectedCategory;return b.depth4.length>0?a=b.depth4.join(","):null!=b.depth3?a=b.depth3:null!=b.depth2?a=b.depth2:null!=b.depth1&&(a=b.depth1),a}function q(){var c=$(a).height(),d=k.appObj.isApp?50:0,e=b.element("#srhReviewPop .layerPop"),f=e.find(".cont > div");f.css("max-height",c-140-d),e.css({top:(c-e.height()-d)/2,opacity:1})}var r=b.element(i);k.startSearchList(),k.goSearch=function(a,b){var c="";b&&(c="&tclick="+b),i.location=e.setUrlAddBaseParam(f.searchUrl,k.baseParam+"&keyword="+a+c)},k.delResrhText=function(){k.postParams.rekeyword=""},k.setAgeGender=function(a,b,c){},k.animateRelatedKeyword=function(a){var b=$(".reated_keyword .scroll_wrap");b.stop(!0),a===!0?b.css("left",0):b.css("left","120%"),h(function(){k.animateRelatedKeywordDelay(a)},200)},k.animateRelatedKeywordDelay=function(a){try{var c=$(".reated_keyword .scroll_wrap");c.stop(!0),a===!0?c.css("left",0):c.animate({left:"0px"},250);var d=0;$("#relatedKeywordSlider li").each(function(a,b){d+=$(b).width()+6}),$("#relatedKeywordSlider ul").width(d),h(function(){$("#relatedKeywordSlider.ipad_slider").scrollLeft(0),$("#relatedKeywordSlider.other_slider").length>0&&b.element("#relatedKeywordSlider.other_slider").scope().reset()},100)}catch(e){if(!k.uiStateObj.relatedKeywordEnabled)return;h(function(){k.animateRelatedKeywordDelay()},200)}},k.showSrhLayerHeader=function(a){a?k.sendTclick("m_RDC_SrhResult_Clk_delete_Btn"):k.sendTclick("m_RDC_header_Clk_Lyr_1"),k.showSrhLayer(!0,a)},k.showSrhLayer=function(a,c){a||k.sendTclick(k.tClickBase+"header_Clk_Lyr_2"),k.appObj.isApp&&k.uiStateObj.voiceSearch&&(c=!0);var e=k.appObj,f="lottesearch://newsearch";c!==!0&&(f+=e.isIOS&&(e.isIpad&&237==e.verNumber||2710==e.verNumber)?"?keyword="+encodeURIComponent(encodeURIComponent(k.srhResultData.keyword)):"?keyword="+encodeURIComponent(k.srhResultData.keyword));var g=!1;if(e.isIOS?e.isIpad&&e.verNumber>=237?g=!0:e.verNumber>=2710&&(g=!0):e.isSktApp&&e.verNumber>=215?g=!0:e.verNumber>=279&&(g=!0),g){var j=d.getLocalStorage("latelyGoods");null!=j&&""!=j&&(j=j.replace(/\|/g,","),f+=f.indexOf("?")>=0?"&latelyGoods="+j:"?latelyGoods="+j)}if(!k.appObj.isApp||k.appObj.isIOS||k.appObj.isOldApp){if(k.appObj.isApp&&k.appObj.isIOS&&!k.appObj.isIpad)return void(i.location.href=f);if(k.appObj.isApp&&k.appObj.isIOS&&k.appObj.isIpad&&!k.appObj.isOldApp)return void(i.location.href=f);if(c===!0)k.delSrhText();else{var l=k.srhResultData.keyword;b.forEach(k.postParams.reQuery,function(a){l+=" "+a}),k.keyword=l,h(function(){k.showAutoSrh({keyCode:1})},100)}k.showRecentKeyword()}else try{i.lottesearch.callAndroid(f)}catch(m){}},k.closeSidebarBtnClk=function(){if(k.searchTclick2016("Clk_Close_Btn"),k.searchUISetting.isShowSub)switch(k.searchUISetting.lastSlide){case"category":k.ga("카테고리","닫기");break;case"brand":k.ga("브랜드","닫기")}else k.ga("필터_닫기","닫기");k.closeSideSearch()},k.closeSideSearch=function(){k.searchTermsChanged&&(k.LotteDimm.scrollY=0),"sideSearch"==k.LotteDimm.target?k.dimmedClose():k.searchUISetting.isShowSideBar=!1,k.actionbarHideFlag=!1,k.searchUISetting.isShowSub===!0&&k.hideSubSearch(),k.goPrevSideStatus(),k.curSideStatus>1&&k.goPrevSideStatus()},k.showHideSideSearch=function(a){if(k.searchUISetting.isShowSideBar)k.closeSideSearch();else{if(0==k.uiStateObj.detailSearchDataLoaded)return;k.searchTermsChanged=!1,k.searchUISetting.isShowSideBar=!0,k.actionbarHideFlag=!0,k.dimmedOpen({target:"sideSearch",callback:this.closeSideSearch,scrollEventFlag:!1}),$(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),"SORT"==a&&k.showSubSearch({currentTarget:$(".ssw_slide.main li a[data-label='정렬']")}),k.goNextSideStatus(),b.element(".ssw_slide.main").unbind("scroll").bind("scroll",o),h(o,10)}"SORT"==a?k.sendTclick("m_RDC_SrhFilter_Clk_Sorting"):k.sendTclick("m_RDC_SrhResult_Clk_Filter")};var s;k.showSubSearch=function(a){var b=$(a.currentTarget),d=b.data("slide");switch(d){case"category":k.ga("카테고리","리스트메뉴");break;case"brand":k.ga("브랜드","리스트메뉴");break;case"sort":k.ga("정렬","리스트메뉴");break;case"benefit":k.ga("가격혜택선물포장","리스트메뉴");break;case"delivery":k.ga("배송","리스트메뉴");break;case"color":k.ga("컬러","리스트메뉴");break;case"store":k.ga("매장","리스트메뉴");break;case"research":k.ga("결과내검색","리스트메뉴");break;case"shoe":k.ga("신발사이즈","리스트메뉴");break;case"star":k.ga("별점","리스트메뉴");break;case"style":k.ga("스타일","리스트메뉴")}switch(h(o,10),h(k.scrollFilterTop,20),d){case"sort":case"category":case"shoe":case"brand":case"benefit":case"delivery":case"color":case"star":case"store":case"style":case"research":if(k.foldable[d]==d)k.foldable[d]=null,k.foldable.lastSlide=null;else{var e=k.foldable.research;k.foldable={research:e},k.foldable[d]=d,k.foldable.lastSlide=d}return}switch(k.searchUISetting.title=b.data("label"),k.searchUISetting.slide=d,k.searchUISetting.isShowSub=!0,k.goNextSideStatus(),"brand"==k.searchUISetting.slide&&(k.srhResultData.brdLstRender&&0!=k.srhResultData.brdLstRender.length||k.srhResultData.brdLst.items!=c&&(k.srhResultData.brdLstRender=k.srhResultData.brandList.items)),k.searchUISetting.lastSlide!=d&&$(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),k.searchUISetting.lastSlide=d,b.data("slide")){case"price":k.postParams.priceMaxUTemp=k.postParams.priceMaxU,k.postParams.priceMinUTemp=k.postParams.priceMinU;break;case"research":k.postParams.rekeyword=""}switch(b.data("slide")){case"category":k.searchTclick2016("Clk_Cat"),k.ga("카테고리","리스트메뉴");break;case"brand":k.ga("브랜드","리스트메뉴"),k.searchTclick2016("Clk_Brand");break;case"benefit":k.searchTclick2016("Clk_ETC");break;case"color":k.searchTclick2016("Clk_Color");break;case"sort":k.searchTclick2016("Clk_Sorting");break;case"store":k.searchTclick2016("Clk_Store");break;case"delivery":k.searchTclick2016("Clk_Shipping")}},k.hideSubSearch=function(){if(k.searchUISetting.isShowSub){switch(k.searchTclick2016("Clk_Back_Btn"),k.searchUISetting.lastSlide){case"category":k.ga("카테고리","뒤로");break;case"brand":k.ga("브랜드","뒤로가기")}3==k.curSideStatus&&k.goPrevSideStatus()}k.searchUISetting.slide=null,0!=k.searchUISetting.isShowSub&&(k.searchUISetting.isShowSub=!1)},k.showHideSortGuide=function(c){try{var d=b.element(c.currentTarget);switch(d.parent().text().trim()){case"인기순":a.alert("검색 정확도 및 판매 실적 등을 점수화하여 상품을 정렬합니다. (단, 광고상품은 별도기준에 따라 상단 정렬)"),k.ga("정렬","말풍선");break;case"판매순":a.alert("최근 7일동안 많이 판매된 상품을 누적한 기준으로 상품을 정렬합니다."),k.ga("정렬","말풍선");break;case"내 주변 픽업":a.alert("내 주변 픽업 서비스는 세븐일레븐 / 하이마트 / 롯데슈퍼 / 롯데리아에서 픽업이 가능합니다."),k.ga("배송","말풍선")}}catch(c){}},k.showHideSmartPick=function(){k.searchUISetting.smartPickSub=!k.searchUISetting.smartPickSub},k.showHideDepartmentPick=function(a){var c=b.element(a.currentTarget),d=c.parent();d.hasClass("disabled")||(k.searchUISetting.smartPickList=!k.searchUISetting.smartPickList,k.postParams.smpickBranchNo||(k.postParams.smpickBranchNo="",k.postParams.smpickYN="N",k.searchTclick2016("Shipping_Smartpick_Dpt"),k.ga("배송","스마트픽_백화점픽업")))},k.smpickBranchChange=function(a){k.postParams.smpickBranchNo==a.branchNo?(k.postParams.smpickYN="N",k.postParams.smpickBranchNo=null,k.uiStateObj.smpickBranchName=""):(k.postParams.smpickYN="Y",k.postParams.smpickBranchNo=a.branchNo,k.uiStateObj.smpickBranchName=a.name),k.srhDetailPost(),k.searchTclick2016("Shipping_Smartpick_Dpt"),k.ga("배송","스마트픽_백화점픽업_"+a.name)},k.categoryItemClick=function(a,c,d,e,f,g){var h=p(),i=$(a.currentTarget),j=i.parent(),l=j.data("depth");if(j.hasClass("selected"))return void k.deselectCategory(l+1,d,e,f,g);switch(k.categoryAccordian(j,c.ctgNo),h!=p()&&k.srhSubCtgPost(),l){case 0:k.searchTclick2016("Cate_Cate1_"+c.ctgNo);break;case 1:k.searchTclick2016("Cate_Cate2_"+c.ctgNo);break;case 2:k.searchTclick2016("Cate_Cate3_"+c.ctgNo);break;case 3:k.searchTclick2016("Cate_Cate4_"+c.ctgNo)}var e,m,n="",o=k.uiStateObj.selectedCategory;null!=o.depth1&&(n=b.element("#ctg_"+o.depth1).data("name"),null!=o.depth2&&(e=b.element("#ctg_"+o.depth2),n+="_"+e.data("name"),m=e.data("mall"),console.log(n,m),""!=m&&(n+=" ("+m+")"),null!=o.depth3&&(n+="_"+b.element("#ctg_"+o.depth3).data("name"),o.depth4.length>0&&(n+="_"+c.ctgName))),k.ga("카테고리",n))},k.deselectCategory=function(a,c,d,e,f){var g=k.uiStateObj.selectedCategory;switch(a){case 1:g.depth1=null,g.depth2=null,g.depth3=null,g.depth4.length=0,g.ctgName.length=0;break;case 2:g.depth2=null,g.depth3=null,g.depth4.length=0;try{g.ctgName=[b.element("#ctg_"+g.depth1).data("name")]}catch(h){g.ctgName.length=0}break;case 3:g.depth3=null,g.depth4.length=0;try{g.ctgName=[b.element("#ctg_"+g.depth2).data("name")]}catch(h){g.ctgName.length=0}break;case 4:g.depth4.length=0;try{g.ctgName=[b.element("#ctg_"+g.depth3).data("name")]}catch(h){g.ctgName.length=0}}k.srhSubCtgPost();var i="해제";c&&(i+="_"+c.ctgName),d&&(i+="_"+d.ctgName),e&&(i+="_"+e.ctgName),f&&(i+="_"+f.ctgName),k.ga("카테고리",i)},k.categoryAccordian=function(a,b){if(!a.hasClass("nochild")){a.find("> ul");if(b!=c){var d=a.parent();d.hasClass("cate_d1")?(k.uiStateObj.selectedCategory.depth1=b,k.uiStateObj.selectedCategory.depth2=null,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4.length=0,k.uiStateObj.selectedCategory.ctgName=[a.data("name")]):d.hasClass("cate_d2")?(k.uiStateObj.selectedCategory.depth2=b,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4.length=0,k.uiStateObj.selectedCategory.ctgName=[a.data("name")],k.categoryCheckParent(a)):d.hasClass("cate_d3")?(k.uiStateObj.selectedCategory.depth3=b,k.uiStateObj.selectedCategory.depth4.length=0,k.uiStateObj.selectedCategory.ctgName=[a.data("name")],k.categoryCheckParent(a)):d.hasClass("cate_d4")&&(k.uiStateObj.selectedCategory.depth4=[b],k.uiStateObj.selectedCategory.ctgName=[a.data("name")],k.categoryCheckParent(a))}}},k.categoryCheckParent=function(a){var b,c=a.parent();b=c.parent(),c.hasClass("cate_d1")||(c.hasClass("cate_d2")?null==k.uiStateObj.selectedCategory.depth1&&(k.uiStateObj.selectedCategory.depth1=b.data("no")):c.hasClass("cate_d3")?(null==k.uiStateObj.selectedCategory.depth2&&(k.uiStateObj.selectedCategory.depth2=b.data("no")),k.categoryCheckParent(b)):c.hasClass("cate_d4")&&(null==k.uiStateObj.selectedCategory.depth3&&(k.uiStateObj.selectedCategory.depth3=b.data("no")),k.categoryCheckParent(b)))},k.srhSubCtgPost=function(){var a,b;k.uiStateObj.selectedCategory.depth4.length>0?(a=k.uiStateObj.selectedCategory.depth4.join(","),b=3):null!=k.uiStateObj.selectedCategory.depth3?(a=k.uiStateObj.selectedCategory.depth3,b=2):null!=k.uiStateObj.selectedCategory.depth2?(a=k.uiStateObj.selectedCategory.depth2,b=1):null!=k.uiStateObj.selectedCategory.depth1&&(a=k.uiStateObj.selectedCategory.depth1,b=0),a==c&&(a="",b=""),k.postParams.ctgNo=a,k.postParams.ctgDepth=b,k.uiStateObj.srhFilterCtgFlag=!0,k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType);var d=k.tClickBase+"SEARCH_CATE_02";k.sendTclick(d)},k.srhChkBrdPost=function(a,b){if(-1==k.postParams.brdNoArr.indexOf(a.brdNo))k.postParams.brdNoArr.push(a.brdNo),k.postParams.brdNmArr.push(a.brdName),k.uiStateObj.brandArr.push(a),k.searchTclick2016("Brand_Clk"),k.ga("브랜드","선택_"+a.brdName);else{var c=k.postParams.brdNoArr.indexOf(a.brdNo);c>-1&&(k.postParams.brdNoArr.splice(c,1),k.postParams.brdNmArr.splice(c,1),k.uiStateObj.brandArr.splice(c,1),k.searchTclick2016("Brand_ClkC"),k.ga("브랜드","해제_리스트_"+a.brdName))}k.postParams.brdNoArr.length>0?k.uiStateObj.srhFilterBrdFlag=!0:k.uiStateObj.srhFilterBrdFlag=!1,"N"!==b&&(k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType))},k.triggerChkBrdPost=function(a){if(-1==k.postParams.brdNoArr.indexOf(a.brdNo))k.postParams.brdNoArr.push(a.brdNo),k.postParams.brdNmArr.push(a.brdName),k.uiStateObj.brandArr.push(a);else{var b=k.postParams.brdNoArr.indexOf(a.brdNo);b>-1&&(k.postParams.brdNoArr.splice(b,1),k.postParams.brdNmArr.splice(b,1),k.uiStateObj.brandArr.splice(b,1),k.searchTclick2016("Brand_ClkCL"),k.ga("브랜드","해제_요약_"+a.brdName))}for(var c=0;c<k.srhResultData.brdLst.items.length;c++){var d=k.srhResultData.brdLst.items[c];if(d.brdNo==a.brdNo){k.srhResultData.brdLst.items[c].checked=null;break}}k.postParams.brdNoArr.length>0?k.uiStateObj.srhFilterBrdFlag=!0:k.uiStateObj.srhFilterBrdFlag=!1,k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType)},k.srhFilterBrdSortChange=function(a){k.srhResultData.brdLst.items=j("orderBy")(k.srhResultData.brdLst.items,k.uiStateObj.srhFilterBrdSort),k.srhResultData.brandList.items=j("orderBy")(k.srhResultData.brandList.items,k.uiStateObj.srhFilterBrdSort),"undefined"!=typeof k.srhResultData.brdLst.tcnt&&k.srhResultData.brdLst.tcnt>0&&"undefined"!=typeof k.srhResultData.brdLst.items&&(k.srhResultData.brdLstRender=k.srhResultData.brandList.items),"-cnt"==a?(k.searchTclick2016("Brand_Soringcnt"),k.ga("브랜드","상품많은순")):(k.searchTclick2016("Brand_SoringABC"),k.ga("브랜드","가나다"))},k.showHideSortPop=function(a){k.sortLayerPopVisible=a,a?(k.sendTclick(k.tClickBase+"SrhFilter_Clk_Sorting"),h(function(){var a=b.element("#sortLayerPop .layerPop"),c=(i.innerHeight-a.height())/2;a.css({top:c,opacity:1})},0)):k.ga("정렬_닫기","","sort")},k.srhSortPost=function(a){switch(k.uiStateObj.sortTypeIdx=a,k.uiStateObj.srhFilterSortFlag=!0,k.showHideSortPop(!1),k.postParams.rtnType="S",k.loadDataParams(k.postParams.rtnType),a){case 0:k.searchTclick2016("Sorting_Best"),k.ga("인기순","","sort");break;case 1:k.searchTclick2016("Sorting_Sell"),k.ga("판매순","","sort");break;case 2:k.searchTclick2016("Sorting_Review"),k.ga("상품평많은순","","sort");break;case 3:k.searchTclick2016("Sorting_Recent"),k.ga("최근등록순","","sort");break;case 4:k.searchTclick2016("Sorting_Lprice"),k.ga("낮은가격순","","sort");break;case 5:k.searchTclick2016("Sorting_Hprice"),k.ga("높은가격순","","sort")}r.scrollTop(0)},k.shoeSizeChaned=function(a){var c=[];b.forEach(k.srhResultData.shoseSizeLst,function(a){a.checked&&!a.dimm&&c.push(a.shoseNm)}),k.postParams.shoesSize=c.join(","),k.srhDetailPost(),k.ga("신발사이즈",a)},k.starPointChanged=function(a){switch(k.uiStateObj.starPointIdx=a,k.srhDetailPost(),a){case 0:k.ga("별점","전체");break;case 1:k.ga("별점","4점이상");break;case 2:k.ga("별점","3점이상");break;case 3:k.ga("별점","2점미만제외")}},k.srhSelectColor=function(a,b){var c=k.postParams.selectedColor.indexOf(a.colorCd);a.selected===!0?(a.selected=!1,c>=0&&k.postParams.selectedColor.splice(c,1)):(a.selected=!0,0>c&&k.postParams.selectedColor.push(a.colorCd)),"N"!==b&&(k.srhDetailPost(),k.searchTclick2016("Color"),k.ga("컬러",a.colorCd))},k.srhSelectStyle=function(a,b){var c=k.postParams.selectedStyle.indexOf(a.feelNo);a.selected===!0?(a.selected=!1,c>=0&&k.postParams.selectedStyle.splice(c,1)):(a.selected=!0,0>c&&k.postParams.selectedStyle.push(a.feelNo)),k.ga("스타일",a.feelNm),"N"!==b&&(k.srhDetailSearchActiveChk(),k.srhDetailPost())},k.srhDetailPost=function(){k.srhDetailSearchActiveChk(),k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType)},k.srhDetailChange=function(a){var b="";switch(a){case"deptYN":k.searchTclick2016("Store_01"),k.ga("매장","백화점");break;case"tvhomeYN":k.searchTclick2016("Store_02"),k.ga("매장","홈쇼핑");break;case"superYN":k.searchTclick2016("Store_03"),k.ga("매장","슈퍼");break;case"brdstoreYN":k.searchTclick2016("Store_04"),k.ga("매장","브랜드스토어");break;case"freeDeliYN":k.searchTclick2016("Clk_FreeShipping"),k.ga("배송","무료배송");break;case"smpickYN":k.searchTclick2016("benefit_smartpick");break;case"freeInstYN":k.searchTclick2016("Price_Interest"),k.ga("가격혜택선물포장","무이자할부");break;case"pointYN":k.searchTclick2016("Price_Point"),k.ga("가격혜택선물포장","포인트적립");break;case"pkgYN":k.searchTclick2016("Price_Packing"),k.ga("가격혜택선물포장","무료선물포장");break;case"freeGiftYN":k.searchTclick2016("free_Gift"),k.ga("가격혜택선물포장","사은품포함");break;case"delSevenYN":k.searchTclick2016("Shipping_Smartpick_Store"),k.ga("배송","스마트픽_내주변픽업");break;case"delTdarYN":k.searchTclick2016("Shipping_Oneday"),k.ga("배송","오늘도착");break;case"delQuickYN":k.searchTclick2016("Shipping_Quick"),k.ga("배송","퀵배송")}""!=b&&k.sendTclick(b),k.srhDetailPost()},k.srhDetailPriceMaxlen=function(a,b){var c=$("#priceMaxU");"min"==b&&(c=$("#priceMinU"));var d=c.val();d.length>10&&c.val(d.substr(0,10)),a&&13==a.keyCode&&(k.srhDetailPriceValidate(b),k.srhDetailPriceValidateFlag&&(c.blur(),k.srhDetailSearchPrice()))},k.srhDetailPriceValidate=function(a){k.srhDetailPriceValidateFlag=!0,null!=k.postParams.priceMinU&&k.postParams.priceMinU.length>0&&(k.postParams.priceMinU=k.postParams.priceMinU.replace(/[^0-9]/g,"")),null!=k.postParams.priceMaxU&&k.postParams.priceMaxU.length>0&&(k.postParams.priceMaxU=k.postParams.priceMaxU.replace(/[^0-9]/g,""));var b=typeof k.postParams.priceMinU,c=typeof k.postParams.priceMaxU,d=parseInt(k.postParams.priceMinUTemp,10),e=parseInt(k.postParams.priceMaxUTemp,10);if("min"==a){if("object"==b)return k.srhDetailPriceValidateFlag=!1,!1;if(k.postParams.priceMinU>e)return k.postParams.priceMinU=d,k.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최고가격보다 높습니다."),!1;if(k.postParams.priceMinU<d)return k.postParams.priceMinU=d,k.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최저가격보다 낮습니다."),!1;if("number"==c&&k.postParams.priceMinU>k.postParams.priceMaxU){var f=k.postParams.priceMinU;k.postParams.priceMinU=k.postParams.priceMaxU,k.postParams.priceMaxU=f}k.postParams.priceMinU!=d}else if("max"==a){if("object"==c)return k.srhDetailPriceValidateFlag=!1,!1;if(k.postParams.priceMaxU<d)return k.postParams.priceMaxU=e,k.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최저가격보다 낮습니다."),!1;if(k.postParams.priceMaxU>e)return k.postParams.priceMaxU=e,k.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최고가격보다 높습니다."),!1;if("number"==b&&k.postParams.priceMinU>k.postParams.priceMaxU){var f=k.postParams.priceMinU;k.postParams.priceMinU=k.postParams.priceMaxU,k.postParams.priceMaxU=f}k.postParams.priceMaxU!=e}},k.srhDetailSearchPrice=function(a){return 0==k.postParams.priceMinU&&0==k.postParams.priceMaxU||0==k.postParams.priceMinUTemp&&0==k.postParams.priceMaxUTemp?(k.postParams.priceMinU=0,k.postParams.priceMinUTemp=0,k.postParams.priceMaxU=0,k.postParams.priceMaxUTemp=0,alert("최저, 최대 가격이 존재하지 않습니다."),!1):(k.srhDetailPriceValidate("min"),k.srhDetailPriceValidate("max"),k.uiStateObj.srhDetailSearchClicked=!0,k.postParams.priceMinU||(k.postParams.priceMinU=k.postParams.priceMinUTemp),k.postParams.priceMaxU||(k.postParams.priceMaxU=k.postParams.priceMaxUTemp),k.uiStateObj.priceMinUTemp=k.postParams.priceMinU,k.uiStateObj.priceMaxUTemp=k.postParams.priceMaxU,k.srhDetailPost(),k.searchTclick2016("Price_Clk_Srh_Btn"),void k.ga("가격혜택선물포장","가격검색"))},k.srhDetailSearchKeyword=function(a){var b="pop"==a;return b&&(k.searchUISetting.researchIdx=0),""==k.postParams.rekeyword?(alert("검색할 단어를 입력해 주세요."),!1):(0==k.searchUISetting.researchIdx?(k.addRequeryKeyword(k.postParams.rekeyword),b||(k.searchTclick2016("Clk_IncludeSrh_Btn"),k.ga("결과내검색","포함단어"))):(k.addExqueryKeyword(k.postParams.rekeyword),b||(k.searchTclick2016("Clk_ExcludeSrh_Btn"),k.ga("결과내검색","제외단어"))),k.postParams.rekeyword="",k.closeSideSearch(),void k.hideRelatedKWPopup())},k.srhDetailSearchKeypress=function(a){13===a.which&&("rekeyword_pop"==$(a.currentTarget).prop("id")?k.srhDetailSearchKeyword("pop"):($("#rekeyword").blur(),k.srhDetailSearchKeyword()),a.preventDefault())},k.srhDetailSearchKeyUp=function(a){k.uiStateObj.relatedKeywordEntered=!1;var b=$(a.currentTarget).val();b!=c&&b.length>0&&(k.uiStateObj.relatedKeywordEntered=!0)},k.deleteRequeryKeyword=function(a){var c=k.postParams.reQuery.indexOf(a);c>=0&&(k.postParams.reQuery.splice(c,1),b.element("#searchKeywordSlider").scope().reset(),k.uiStateObj.rekeywordChanged=!0,k.srhKeywordPost(),k.scrollToTop()),k.sendTclick("m_RDC_SrhResult_Clk_Kwd_Del")},k.addRequeryKeyword=function(a,c,d){a=a.replace(/ /g,"");var e=k.postParams.reQuery.indexOf(a);0>e&&(k.postParams.reQuery.push(a),b.element("#searchKeywordSlider").scope().reset(),k.uiStateObj.rekeywordChanged=!0,k.srhKeywordPost(),k.scrollToTop()),"Y"==c&&("스마트픽"==a?k.searchTclick2016("CLK_srhkeywd_smartpick_Btn"):d||0===d?k.sendTclick("m_RDC_SrhResult_Clk_Srhkwd_idx"+k.numberFill(d+1,3)):k.sendTclick("m_RDC_SrhResult_Clk_Srhkwd_idx"+k.numberFill(e+1,3)))},k.addExqueryKeyword=function(a){a=a.replace(/ /g,"");var c=k.postParams.exQuery.indexOf(a);0>c&&(k.postParams.exQuery.push(a),b.element("#searchKeywordSlider").scope().reset(),k.srhKeywordPost(),k.scrollToTop())},k.selectKeywordLayer=function(a){k.searchUISetting.researchIdx=a},k.selectKeywordLayer2=function(){k.uiStateObj.researchOpt=k.uiStateObj.researchCheck?"brdName":"-cnt",k.searchUISetting.researchIdx=k.uiStateObj.researchCheck?1:0},k.showRelatedKWPopup=function(){k.uiStateObj.relatedKwywordOpenFlag=!0,k.uiStateObj.relatedKeywordEntered=!1,k.actionbarHideFlag=!0,k.dimmedOpen({target:"relatedKWPopup",callback:k.hideRelatedKWPopup}),h(function(){$("#rekeyword_pop").val(""),$("#rekeyword_pop").focus()},50),k.sendTclick("m_RDC_SrhResult_Clk_SrhkwdAdd")},k.hideRelatedKWPopup=function(){$("#rekeyword_pop").blur(),k.actionbarHideFlag=!1,k.uiStateObj.relatedKwywordOpenFlag=!1,k.dimmedClose()},k.srhKeywordPost=function(){k.srhFilterCtgInit(),k.srhFilterBrdInit(),k.srhFilterDetailInit();var a=k.foldable.research;k.foldable={},"research"==a&&(k.foldable.research="research"),k.uiStateObj.researchOpt="-cnt",k.uiStateObj.researchCheck=!1,k.searchUISetting.researchIdx=0,k.postParams.rtnType="K",k.loadDataParams(k.postParams.rtnType)},k.srhFilterDetailPriceFocus=function(a){var b="min";"priceMinU"==a?(b="min",k.postParams.priceMinUFocus=!0):"priceMaxU"==a&&(b="max",k.postParams.priceMaxUFocus=!0)},k.srhFilterDetailPriceIpt=function(a){b.element("#"+a).focus();var c="min";"priceMinU"==a?c="min":"priceMaxU"==a&&(c="max")},k.srhFilterDetailInit=function(){k.uiStateObj.srhFilterDetailFlag=!1,k.srhFilterSortInit(),k.srhFilterStoreInit(),k.srhFilterPriceInit(),k.srhFilterBenefitInit(),k.srhFilterDeliveryInit(),k.srhFilterColorInit(),k.srhFilterFeelInit(),b.forEach(k.srhResultData.shoseSizeLst,function(a){a.checked=!1}),k.postParams.shoesSize="",k.postParams.starPoint="",k.uiStateObj.starPointIdx=0,b.forEach(k.uiStateObj.starPointArr,function(a){a.dimm=!1}),k.postParams.pop=""},k.checkResetDisabled=function(a){return k.srhDetailSearchActiveChk(),k.uiStateObj.srhFilterDetailFlag},k.resetAllSearchTerm=function(){if($(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),k.searchUISetting.isShowSub===!0)switch(k.searchUISetting.slide){case"category":k.srhFilterCtgInit(!0),k.ga("카테고리","초기화");break;case"brand":k.srhFilterBrdInit(!0),k.ga("브랜드","초기화");break;case"sort":k.srhFilterSortInit(!0);break;case"benefit":k.srhFilterBenefitInit(!0);break;case"delivery":k.srhFilterDeliveryInit(!0);break;case"color":k.srhFilterColorInit(!0);break;case"research":k.srhFilterRequeryInit(!0);break;case"store":k.srhFilterStoreInit(!0)}else k.srhFilterSortInit(),k.srhFilterRequeryInit(!0),k.ga("필터_초기화","초기화");k.searchTclick2016("Clk_ini_Btn")},k.srhFilterCtgInit=function(a){k.uiStateObj.srhFilterCtgFlag=!1,k.uiStateObj.srhFilterCtgDepth=0,k.uiStateObj.srhFilterCtgDepth1CtgNo="",k.uiStateObj.selectedCategory.depth1=null,k.uiStateObj.selectedCategory.depth2=null,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4.length=0,k.uiStateObj.selectedCategory.ctgName.length=0,k.postParams.ctgNo="",k.postParams.ctgDepth=0;var b;$(".ssws_wrap.ssws_category li.open").each(function(a,c){b=$(c),b.removeClass("open"),b.find(">ul").height(0)}),$(".ssws_wrap.ssws_category .cate_d1").height(45*$(".ssws_wrap.ssws_category .cate_d1 > li").length),a===!0&&(k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType))},k.srhFilterBrdInit=function(a){k.uiStateObj.srhFilterBrdFlag=!1,k.postParams.brdNoArr=[],k.postParams.brdNmArr=[],k.uiStateObj.brandArr=[],k.uiStateObj.srhFilterBrdSort="-cnt",b.forEach(k.srhResultData.brdLst.items,function(a,b){a.checked=!1}),b.forEach(k.srhResultData.brdLstRender,function(a,b){a.checked=!1}),a===!0&&(k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType))},k.srhFilterSortInit=function(a){k.uiStateObj.srhFilterSortFlag=!1,k.uiStateObj.sortTypeIdx=0,k.postParams.sort=k.uiStateObj.sortTypeArr[0].value,
a===!0&&(k.postParams.rtnType="S",k.loadDataParams(k.postParams.rtnType))},k.srhFilterBenefitInit=function(a){k.postParams.freeInstYN="N",k.postParams.pointYN="N",k.postParams.pkgYN="N",k.postParams.freeGiftYN="N",a===!0&&k.srhDetailPost()},k.srhFilterDeliveryInit=function(a){k.postParams.smpickYN="N",k.searchUISetting.smartPickList=!1,k.postParams.smpickBranchNo=null,k.uiStateObj.smpickBranchName="",k.postParams.delSevenYN="N",k.postParams.freeDeliYN="N",k.postParams.delQuickYN="N",k.postParams.delTdarYN="N",a===!0&&k.srhDetailPost()},k.srhFilterColorInit=function(a){k.postParams.selectedColor.length=0,k.postParams.selectedColor2.length=0;for(var b=k.srhDetailData.srhColorList.length,c=0;b>c;c++)k.srhDetailData.srhColorList[c].selected=!1;a===!0&&k.srhDetailPost()},k.srhFilterPriceInit=function(a){k.uiStateObj.srhDetailSearchClicked=!1,k.postParams.priceMinU=null,k.postParams.priceMaxU=null,a===!0&&k.srhDetailPost()},k.srhFilterRequeryInit=function(a){k.srhFilterCtgInit(),k.srhFilterBrdInit(),k.srhFilterDetailInit(),a===!0&&(k.postParams.rtnType="K",k.loadDataParams(k.postParams.rtnType))},k.srhFilterStoreInit=function(a){k.postParams.deptYN="N",k.postParams.tvhomeYN="N",k.postParams.superYN="N",k.postParams.brdstoreYN="N",a===!0&&k.srhDetailPost()},k.srhFilterFeelInit=function(a){k.postParams.selectedStyle.length=0,a===!0&&k.srhDetailPost()},k.scrollToTop=function(){var b=$(a).scrollTop();b>1&&$(a).scrollTop(1)},k.openSpeechSearch=function(){if(!k.appObj.isApp||k.appObj.isIOS||k.appObj.isOldApp)return k.appObj.isApp&&k.appObj.isIOS?void(i.location.href="lottesearch://newsearch/speech"):void 0;try{i.lottesearch.callAndroid("lottesearch://newsearch/speech")}catch(a){}},k.reviewPopData=null,k.showReviewPop=function(a,d){if(a!=c&&a.gdasNo!=c&&""!=a.gdasNo){var e=b.element(d.currentTarget);e.addClass("highlight"),h(function(){e.removeClass("highlight")},500),k.isShowLoading=!0;var f={gdasNo:a.gdasNo},i=k.URLs.searchRevPop;g.get(i,{params:f}).success(function(a,b,d,e){if(a==c||a.gdasDtlInfo==c)return void(k.reviewPopData=null);k.isShowLoading=!1;try{a.gdasDtlInfo.gdasCont=a.gdasDtlInfo.gdasCont.replace(new RegExp("\r?\n","g"),"<br />")}catch(f){}k.reviewPopData=a.gdasDtlInfo,h(q,1)}).error(function(a,b,c,d){k.isShowLoading=!1,k.reviewPopData=null}),k.sendTclick("m_RDC_SrhResult_Clk_Review")}},k.hideReviewPop=function(){b.element("#srhReviewPop .layerPop").css({opacity:0}),k.reviewPopData=null},k.gotoProductReview=function(){k.reviewPopData!=c&&k.reviewPopData.goodsNo!=c&&""!=k.reviewPopData.goodsNo&&(location.href=f.productSubComment+"?"+k.baseParam+"&goods_no="+k.reviewPopData.goodsNo+"&tclick=m_RDC_RVPopLayer_Clk_Btn")},k.searchByOriginalKeyword=function(){k.postParams.keyword=k.srhResultData.orgKeyword,k.srhResultData.keyword=k.srhResultData.orgKeyword,k.srhResultData.orgKeyword="",k.postParams.reQuery.length=0,k.postParams.exQuery.length=0,k.postParams.rekeyword="",k.postParams.chkTypo="N",k.srhFilterCtgInit(),k.srhFilterBrdInit(),k.srhFilterDetailInit(),k.postParams.rtnType="",k.loadDataParams(k.postParams.rtnType)},k.checkCategoryAllBtn=function(){return 0==b.element(".ssws_category li.selected").length?!0:!1}}}}]),d.directive("recomLink",["$window",function(a){return{link:function(b,c,d){b.recomOutlink="_self",b.goRecomLink=function(c){if("undefined"!=typeof b.srhResultData.recomLink.linkUrl&&""!=b.srhResultData.recomLink.linkUrl){var d=b.srhResultData.recomLink.linkUrl+"";d.match(/^http|^https/gi)||(d="http://"+d);var e=b.tClickBase+"SrhResult_Clk_Kwd_A";b.srhResultData.recomLink.blankFlag?"undefined"!=typeof b.srhResultData.recomLink.alertStr&&""!=b.srhResultData.recomLink.alertStr&&"null"!=b.srhResultData.recomLink.alertStr?confirm(b.srhResultData.recomLink.alertStr)&&(outLink(d),b.sendTclick(e)):(outLink(d),b.sendTclick(e)):(d+=d.indexOf("?")>-1?"&tclick="+e:"?tclick="+e,"undefined"!=typeof b.srhResultData.recomLink.alertStr&&""!=b.srhResultData.recomLink.alertStr&&"null"!=b.srhResultData.recomLink.alertStr?confirm(b.srhResultData.recomLink.alertStr)&&(a.location=d):a.location=d)}c.preventDefault(),c.stopPropagation()}}}}]),d.directive("favLst",[function(){return{link:function(a,b,c){a.favRankClass=function(a){var b="";return"NEW"==a?b="new":NaN!=parseInt(a)&&(b=parseInt(a)>0?"up":parseInt(a)<0?"down":"none"),b},a.favRankVal=function(a){var b=a;return NaN!=parseInt(b)&&(b=Math.abs(parseInt(b))),b}}}}]),d.directive("recomData",["$http","LotteCommon","LotteUtil","commInitData",function(a,d,e,f){return{templateUrl:"/lotte/resources_dev/search/search_list_recommend.html",replace:!0,link:function(e,f,g){function h(f){var g=new Array;if(null!=f.results&&f.results.length>0){if($(f.results).each(function(a,b){g.push(b.itemId)}),e.tpmlData.rbDispnoResult=g.join(","),d.mainRealRecommData==c)return!1;var h="Y",i={method:"get",url:d.mainRealRecommData,params:{isSearch:h,latest_prod:e.tpmlData.rbDispnoResult}};a(i).success(function(a){e.tpmlData.recommondData=a.recommnd_prod})["finally"](function(){})}else setTimeout(function(){b.element(".recommond_wrap").css("display","none")},0)}e.gotoLinkM=function(a,b,c,f){var g="m_RDC_SrhResult_Clk_RecPrd_idx"+b;null!=f&&(a=d.prdviewUrl+"?goods_no="+f.goods_no+a),e.linkUrl(a,!1,g)},e.tpmlData={recommondData:{},rbDispnoResult:""},e.LoadRealRecommnd=function(){var a=d.rec_search+"&size=30&st="+e.postParams.keyword;$.ajax({type:"post",async:!0,url:a,dataType:"jsonp",success:function(a){h(a)},error:function(a,b,c){console.log("Data Error : 실시간 맞춤 추천 Data로드 실패")}})},e.LoadRealRecommnd()}}}]),d.filter("superCutTxt",function(){return function(a){return a.substring(0,12)}})}(window,window.angular);var callDownCpn;!function(a,b,c){"use strict";var d=b.module("lotteMainPop",[]);d.controller("lotteMainPopCtrl",["$scope","$window","$location","$http","LotteCommon","LotteUtil","LotteCookie","LotteStorage","AppDownBnrService","LotteLink","commInitData","LotteGA","$timeout",function(a,d,e,f,g,h,i,j,k,l,m,n,o){a.loadMainPopup=function(d){function e(){f.get(g.mainPopupData,{params:q}).success(function(b){if(!j.getSessionStorage("appDownBnrHide")&&!a.appObj.isApp){var e=k.appDownBnrLoadDefer;b.app_down_popup&&b.app_down_popup.length>0&&e.resolve(b.app_down_popup)}a.mainPop=b.current_page_popup,a.mainPopNew=null,a.isShowPop=!1,"10"==q.ppp_tgt_pg_cd&&b.main_new_popup!=c&&b.main_new_popup.length>1&&(a.mainPopNew=b.main_new_popup,a.isShowPop=!0,a.getControlmp=function(b){a.controlmp=b},a.next_pop=function(b){var c=a.controlmp.getIndex()+b;a.controlmp.moveIndex(c)}),a.hideActionBar=h.isApp()&&"F"==a.mainPop.ppp_prt_tp_cd&&"20"!=d.pppTgtPgCd&&"30"!=d.pppTgtPgCd?!0:!1,0!=a.mainPop.ppp_sn&&(callDownCpn=function(){a.dupCouponIssue("88045"),a.sendTclick("m_abtest_naverbanner_01")},a.dupCouponIssue=function(b){if(a.loginInfo.isLogin)b.length>0&&f({url:g.couponRegCouponData+"?"+a.baseParam,data:"cpn_issu_no="+b,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(b){b.result=b.result.replace("\\n"," "),"undefined"!=typeof h.getParameter("cn")&&"140924"==h.getParameter("cn")&&b.result.indexOf("발급받은")>-1?(alert("이달의 앱 쿠폰을 모두 받으셨습니다. 참좋은혜택 등급 쿠폰도 확인하세요!"),location.href=g.gdBenefitUrl+"?"+a.baseParam):alert(b.result),a.popClose()}).error(function(a){"1000"==a.error.response_code?alert(a.error.response_msg):ajaxResponseErrorHandler(a,function(){})});else{var c="?"+a.baseParam;c+="&targetUrl="+encodeURIComponent(location.href),j.setSessionStorage("alliancePopupPPPSN",a.mainPop.ppp_sn),location.href=g.loginUrl+c}},a.cookieName=a.mainPop.cookie_nm,null!=j.getSessionStorage("alliancePopupPPPSN")&&a.loginInfo.isLogin?a.dupCouponIssue(a.mainPop.cpn_no):a.screenType>1&&10==d.pppTgtPgCd||a.nopopup==c&&(a.isOpenPop=!0,a.popOpen()),j.delSessionStorage("alliancePopupPPPSN"))}).error(function(a){console.log("Error Data :  메인팝업")})}var p=m.query,q={ppp_tgt_pg_cd:d.pppTgtPgCd,cn:p.cn,udid:p.udid,schema:p.schema};a.nopopup=p.nopop,h.getParameter("testDate")&&(q.testDate=h.getParameter("testDate")),a.hideActionBar=!1,a.cookieName=null,a.appActionBarHide=function(){a.appObj.isApp&&a.hideActionBar&&(location.href="lottebridge://lotteapps/fullscreenhide")},a.appActionBarShow=function(){a.appObj.isApp&&a.hideActionBar&&(location.href="lottebridge://lotteapps/fullscreenshow")},a.pop_move=function(a){location.href=a},a.popGATag=function(b,c){null!=a.mainPopNew&&(0==b?n.evtTag("MO_메인_팝업","팝업","닫기","",""):1==b?n.evtTag("MO_메인_팝업","팝업","오늘하루그만보기","",""):2==b&&(c+=1,10>c&&(c="0"+c),n.evtTag("MO_메인_팝업","팝업",c,"","")))},a.popOpen=function(){b.element(".main_popup").show(),$("#wrapper").css("height","97%"),null==a.mainPopNew&&o(function(){var c=b.element(".main_popup .inner.noswipe img"),d=c.length,e=0;0===d&&(a.isShowPop=!1),c.each(function(){$(this).one("load error",function(b){++e===d&&(a.isShowPop=!0)}).each(function(){(this.complete||""==this.src)&&$(this).trigger("load")})}),a.isShowPop||$("#wrapper").css("height","auto")},100)},a.popClose=function(d){a.sendTclick("m_RDC_popup_Close"),b.element(".main_popup").remove(),$("#wrapper").css("height","auto"),d==c&&a.popGATag(0)},a.popToday=function(){a.sendTclick("m_RDC_popup_stoptoday"),i.setCookie(a.cookieName,"Y",1),a.popGATag(1),a.popClose(0)},a.chkAlliancePopupObj={flag:!0,imgPath:"",deepLinkFlag:!0,tclick:""},a.closeAlliancePopup=function(){a.chkAlliancePopupObj.flag=!1},a.allianceExcuteApp=function(b){var c=a.chkAlliancePopupObj.deepLinkFlag?null:"http://m.lotte.com";a.chkAlliancePopupObj.tclick?a.chkAlliancePopupObj.tclick:null;l.appDeepLink("lotte",c,a.chkAlliancePopupObj.tclick,b)},e()}}]),d.config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/)}]),d.directive("lotteMainPopup",["$window",function(b){return{templateUrl:"/lotte/resources_dev/layer/main_popup.html",controller:"lotteMainPopCtrl",replace:!0,link:function(b,c,d){b.isOpenPop=!1,b.loadMainPopup(d),b.couponBnrLink=function(c){c.isOutLink?getScope().appObj.isApp?openNativePopup("",c.lnk_url_addr):a.open(c.lnk_url_addr):location.href=b.baseLink(c.lnk_url_addr)}}}}]),d.controller("appDownBnrCtrl",["$scope","AppDownBnrService",function(a,b){a.appBnrInfo=null,b.appDownSettingData().then(function(b){a.appBnrInfo=b})}]),d.directive("appDownBnr",["$location","LotteLink","LotteStorage","AppDownBnrService",function(b,c,d,e){return{templateUrl:"/lotte/resources_dev/layer/app_down_bnr.html",controller:"appDownBnrCtrl",replace:!0,link:function(f,g,h){f.appDown_pop=function(){"./"!=e.appDownBnrInfo.linkUrl&&a.open(e.appDownBnrInfo.linkUrl)},f.appDown=function(){var a=null,d=e.appDownBnrInfo.linkUrl+"",g=""!=e.appDownBnrInfo.tclick?e.appDownBnrInfo.tclick:null;"./"!=d&&(a="http"==d.substring(0,4)?e.appDownBnrInfo.linkUrl:"/"==d.substring(0,1)?b.protocol()+"://"+b.host()+d:b.protocol()+"://"+b.host()+"/"+d),g&&f.sendTclick(g),c.appDeepLink("lotte",a,null,e.appDownBnrInfo.referrer)},f.appDownBnrClose=function(){return d.setSessionStorage("appDownBnrHide",!0),e.appDownBnrInfo.isShowFlag=!1,!1}}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteDoubleCoupon",[]);d.controller("lotteCouponLayerCtrl",["$scope","$http","$window","LotteCommon",function(a,b,c,d){a.procDownDoubleCoupon=function(){var e={cn:a.srhObj.cn,cpn_issu_no:a.couponLayer.cpnNo,dup_cpn_yn:"double_coupon"==a.couponLayer.cpnType?"Y":"N",mbrNo:a.loginInfo.mbrNo,gradeCd:a.loginInfo.gradeCd};b.get(d.downDoubleCoupon,{params:e}).success(function(a){a.message&&alert(a.message),a.gopage&&(c.location.href=a.gopage)}).error(function(){console.log("Error 중복쿠폰 다운로드")})}}]),d.directive("lotteCouponLayer",["$window","$timeout","LotteCookie",function(a,d,e){return{templateUrl:"/lotte/resources_dev/layer/layer_coupon.html",controller:"lotteCouponLayerCtrl",replace:!0,link:function(f,g){var h=f.$watch("couponLayer",function(){if(f.couponLayer!=c){var g=b.element(".coupon_layer_s");"no"==e.getCookie(f.couponLayer.cookieNm)?g.remove():"double_coupon"==f.couponLayer.cpnType&&d(function(){g.css({top:a.innerHeight/2-g.outerHeight()/2+"px"})},500),h()}});f.setToDayNotView=function(){e.setCookie(f.couponLayer.cookieNm,"no",1),f.closeDoubleCouponLayer()},f.closeDoubleCouponLayer=function(){b.element(".coupon_layer_s").remove()},f.downDoubleCoupon=function(){return f.loginInfo.isLogin?void(""!=f.couponLayer.cpnNo&&f.couponLayer.cpnNo!=c&&f.procDownDoubleCoupon()):(f.loginProc(),!1)},f.goAppStore=function(){var b="";f.appObj.isAndroid?b="market://details?id=com.lotte&referrer=000001":f.appObj.isIOS&&("iPhone"==f.appObj.iOsType?b="http://itunes.apple.com/app/id376622474":"iPad"==f.appObj.iOsType&&(b="http://itunes.apple.com/app/id447799601")),""!=b&&(a.location.href=b)}}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSwipe",[]);d.directive("lotteSwipperCont",["$window","$timeout",function(c,d){return{link:function(c,d,e,f){c.lotteSwipper=function(){function f(){g(),j(H),u(),null!=R&&R(G,H)}function g(){A.attr("style",l(0,0)+"width:"+C+"px")}function h(a){return S?!1:void z.attr("style",l(0,a+"px"))}function i(a,b){A.eq(a).attr("style",l(0,0)),0>b?A.eq(o(a)).attr("style",l(0,"100%")):A.eq(n(a)).attr("style",l(0,"-100%"))}function j(a){B>2?b.forEach(A,function(b,c){c==n(a)?A.eq(c).attr("style",l(0,"-100%")):c==o(a)?A.eq(c).attr("style",l(0,"100%")):c==a?A.eq(c).attr("style",l(0,0)):A.eq(c).attr("style",l(0,"200%"))}):2==B?(A.eq(a).attr("style",l(0,0)),A.eq(o(a)).attr("style",l(0,"100%"))):1==B&&A.attr("style",l(0,0)),z.attr("style",l(0,0)),S=!1}function k(a){var b="";G=H,0>a?(b=l(K,"-100%"),H=o(H),S=!0):a>0?(b=l(K,"100%"),H=n(H),S=!0):b=l(K,"0"),z.attr("style",b)}function l(a,b){var c="";return c=0!=a?"-webkit-transform:translate3d("+b+",0,0);transform:translate3d("+b+",0,0);-webkit-transition-property:-webkit-transform;-webkit-transition-duration:"+a+";transition-property:transform;transition-duration:"+a+";":"-webkit-transform:translate3d("+b+",0,0);transform:translate3d("+b+",0,0);-webkit-transition-property:-webkit-transform;transition-property:transform;"}function m(a){return a.match(/(-?[0-9\.]+)/g)}function n(a){return 0==a?B-1:a-1}function o(a){return a==B-1?0:a+1}function p(a){I=!0,P=0;var b=a.originalEvent.touches[0];M=b.clientX,N=b.clientY;var c=m(z.css("transform"));L=parseInt(c[4])}function q(a){var b=a.originalEvent.touches[0],c=J?!0:Math.abs(b.clientY-N)<Math.abs(b.clientX-M),d=0;c&&(J=!0,a.preventDefault(),O=L+b.clientX-M,d=0>O?-1:O>0?1:0,d!=P&&i(H,d),d=P,h(O))}function r(a){I=!1,J=!1,P=0,k(C*Q<Math.abs(O)?O:0),O=0}function s(a){j(H),null!=R&&R(G,H)}function t(a){C=y.width(),D=y.height(),E=A.width(),F=A.height(),g(),j(H)}function u(){B>1&&(y.on({touchstart:p,touchmove:q,touchend:r,prev:function(){k(1)},next:function(){k(-1)}}),z.on("transitionend",s)),x.on("resize",t)}var v=c[e.lotteSwipperCont],w=b.extend({containerSelector:">ul",itemsSelector:">ul >li",startIdx:0,duration:"0.5s",swipeRangeRate:.2,swipeEndFunc:null},v);if(!w.containerSelector||!w.itemsSelector)return!1;var x=b.element(a),y=d,z=y.find(w.containerSelector),A=y.find(w.itemsSelector),B=A.length,C=y.width(),D=y.height(),E=A.width(),F=A.height(),G=-1,H=w.startIdx?1*w.startIdx:0,I=!1,J=!1,K=w.duration?w.duration:"0.5s",L=0,M=0,N=0,O=0,P=0,Q=w.swipeRangeRate?1*w.swipeRangeRate:.2,R=w.swipeEndFunc?w.swipeEndFunc:null,S=!1;f()}}}}]),d.directive("lotteSwipperItem",[function(){return{link:function(a,b,c){a.$last===!0&&a.lotteSwipper()}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular),function(){angular.module("searchPlanShop",["hwSwipe"]).value("currentPage",{}).constant("observers",{request:"request",response:"response"}).provider("prodConfig",["LotteCommonProvider",function(a){var b=a.$get(),c={actionParams:{},catchInfo:[{page:b.searchUrl,json:[b.srhListData2016,b.srhListData2016LC],necessaryParams:{cmpsCd:50,dispCnt:30},hideParams:["ctgNo","dsCtgDepth","brdNo","ctgDepth1","ctgDepth2","ctgDepth3","ctgDepth4","ctgDepth5","priceMaxU","priceMinU","freeInstYN","pointYN","smpickYN","isDlvQuick","colorCd","freeDeliYN","deptYN","tvhomeYN","brdstoreYN","pkgYN","freeInstYN","delQuickYN","delSevenYN","dtCtgNo","dtCtgDepth","dtDsCtgDepth","shoesSize","starPoint"],def:{screenID:"SrhResult",curDispNoSctCd:50,moreType:0},noparams:[]},{page:b.categoryUrl,json:[b.cateListData2016],necessaryParams:{cmpsCd:50,dispCnt:30},hideParams:["ctgNo","dsCtgDepth","brdNo","ctgDepth1","ctgDepth2","ctgDepth3","ctgDepth4","ctgDepth5","priceMaxU","priceMinU","freeInstYN","pointYN","smpickYN","isDlvQuick","colorCd","freeDeliYN","deptYN","tvhomeYN","brdstoreYN","pkgYN","freeInstYN","delQuickYN","delSevenYN"],def:{screenID:"side_cate_catesmall",curDispNoSctCd:73,moreType:1},noparams:[]}]};return{setResponseParams:function(a){"object"==typeof a&&(c.actionParams=angular.extend(a,c.actionParams))},setCatchInfo:function(a){"object"==typeof a&&(a.page=urls[a.page],a.json=urls[a.json],c.catchInfo.push(a))},$get:function(){return c}}}]).factory("catchFilter",["prodConfig","LotteCommon","searchPlanShopService","observers",function(a,b,c,d){var e={permit:a.catchInfo,URLFilter:function(a){var b=null;for(var d in e.permit)for(var f in e.permit[d].json)-1!=a.indexOf(e.permit[d].json[f])&&(c.getCurrPage().json||c.setCurrPage(e.permit[d]),b=angular.copy(e.permit[d].necessaryParams));return b},ParamsFilter:function(b){var d=!1;if(b||(b={}),1===b.page){c.visibleState.set(!1);for(var e in b){for(var f in c.getCurrPage().hideParams)if(e===c.getCurrPage().hideParams[f]&&b[e]){c.visibleState.set(!0),d=!0;break}if(c.visibleState.get())for(var g in a.actionParams)if(e===g&&(!a.actionParams[g]&&!b[e]||a.actionParams[g]&&b[e])){c.visibleState.set(!1),d=!0;break}if(d)break}}return c.visibleState.get()},request:function(a){return e.URLFilter(a.url)},response:function(a){e.URLFilter(a.config.url)&&c.promiseList[d.response].set({data:a.data,visible:e.ParamsFilter(a.config.params)})}};return e}]).factory("httpInterceptor",["$q","catchFilter","searchPlanShopService",function(a,b,c){return{request:function(d){for(var e=c.getCurrPage().noparams||[],f=0;f<e.length;++f)for(var g in d.params)g===e[f]&&delete d.params[g];var h=b.request(d);return h&&(d.params||(d.params={}),d.params=angular.extend(h,d.params)),h&&d.params&&c.setParams(d.params),d||a.when(d)},response:function(c){return b.response(c),c||a.when(c)},requestError:function(b){return a.reject(b)},responseError:function(b){return a.reject(b)}}}]).directive("searchPlanShop",["searchPlanShopService","prodConfig","observers","LotteCommon","dataReplaceKey","commInitData","$timeout",function(a,b,c,d,e,f,g){return{restrict:"EA",scope:!0,replace:!0,templateUrl:"/lotte/resources_dev/search/products/planshop/planshop_list.html",link:function(h){function i(b){var c="?";for(var d in b)"tclick"!=d&&"title"!=d&&"cmpsCd"!=d&&"sort"!=d&&(c+=d+"="+b[d]+"&");return c=c.substr(0,c.length-1)+"&moreType="+a.getCurrPage().def.moreType,c+="&"+baseParam}function j(a,b){var c="";switch(c=location.href.indexOf("new_prod_list.do")>=0?h.tClickBase+"side_cate_catesmall_"+f.query.mGrpNo+"_":h.tClickBase+"SrhResult_",a){case 1:c+="Clk_Deal_"+(b+1);break;case 2:c+="Swp_Deal_"+(b+1);break;case 3:c+="Clk_Deal_GoL"}return c}h.visiblity=!1,h.planShopData=[],h.swipeVisible=!1;var k=!1;g(function(){if(k!==!0)try{var c,d,f=b.catchInfo.length;for(c=0;f>c;c++)if(d=b.catchInfo[c],location.href.indexOf(d.page)>=0){a.setCurrPage(d);break}h.planShopData=e(h.srhResultData.planPrdLst.items),h.swipeVisible=!0}catch(g){}},10),a.promiseList[c.response].get().then(null,null,function(a){k=!0,h.visiblity=a.visible;var b=a.data.max||a.data;try{b.planPrdLst.items&&(h.planShopData=e(b.planPrdLst.items)),h.swipeVisible=!0}catch(c){a.visible&&(h.planShopData=[]),console.log("[planshop_list] : 데이터 없음")}}),h.more=function(){location.href.indexOf("new_prod_list.do")>=0?location.href=d.searchPanShopList+i(f.query)+"&tclick="+j(3):location.href=d.searchPanShopList+i(a.getParams()||f.query)+"&tclick="+j(3)},h.$watch("planShopData",function(){try{var a=angular.element(".planshop_list_wrap [hw-swipe]").scope();a.planshopSwpIdx=0,a.planshopTotal=Math.min(h.planShopData.length,14),h.swipeVisible=!1,g(function(){h.swipeVisible=!0},100)}catch(b){}}),h.planProductsLink=function(a){var b=j(1,this.$index),c=h.getProductViewUrl(a,b);c+="&curDispNoSctCd="+h.curDispNoSctCd,location.href=c},h.$watch(function(){var a=0;try{a=angular.element(".planshop_list_wrap [hw-swipe]").scope().planshopSwpIdx}catch(b){}return a},function(a,b){a!==b&&void 0!==a&&h.sendTclick(j(2,a))})}}}]).service("searchPlanShopService",["$q","currentPage",function(a,b){this.promiseList={},this.addPromise=function(b){var c=this;if(!c.promiseList[b]){var d=c.promiseList[b]={},e=a.defer();d.defer=e,d.notify=e.notify,d.get=function(){return e.promise},d.set=function(a){e.notify(a)}}},this.visibleState={state:!1,set:function(a){this.state=a},get:function(){return this.state}},this.setCurrPage=function(a){b=a},this.getCurrPage=function(){return b},this.setParams=function(a){this.params=a},this.getParams=function(){return this.params}}]).config(["$httpProvider","prodConfigProvider",function(a,b){a.interceptors.push("httpInterceptor"),b.setResponseParams({rtnType:!1})}]).run(["observers","searchPlanShopService",function(a,b){if(a)for(var c in a)b.addPromise(a[c])}]).factory("dataReplaceKey",["LotteUtil",function(a){return function(b){try{if(b[0].goods_nm&&b[0].goods_no)return angular.forEach(b,function(a,b){a.brnd_nm=a.brnd_nm.replace(/\[|\]/g,"")}),b}catch(c){return[]}var d={goods_no:"goodsNo",goods_nm:"goodsNm",brnd_nm:"brandNm",img_url:"imgUrl",original_price:"price1",discounted_price:"price2",sale_rate:"saleRate",flag:"flag",review_count:"reviewCnt",avg_gdas_stfd_val:"avg_gdas_stfd_val",smartpick_yn:"isSmpick",limit_age_yn:"byrAgelmt",is_himart:"isHimart",is_dept:"isDept",is_tvhome:"isTvhome",is_youngplz:"isYoung",is_super:"isSuper",is_sale_promotion:"goodsCmpsCd",outlnk:"outlnk",outlnkMall:"outlnkMall",curDispNo:"curDispNo",has_coupon:"useCpn",hash_list:"hash_list",find_age:"find_age",find_gender:"find_gender",savePoint:"savePoint",vodUrl:"vodUrl"},e={goods_no:"",goods_nm:"",brnd_nm:"",img_url:"",img_url_550:"",original_price:"",discounted_price:"",sale_rate:"",flag:"",is_sold_out:!1,has_coupon:!1,has_wish:!1,is_sale_promotion:!1,review_count:0,bought_sum:0,md_tip:"",promotion_text:"",isdlex_free:!1,smartpick_yn:!1,sold_out_cd_yn:"N",limit_age_yn:"N",link_url:"",is_himart:"",is_dept:"",is_youngplz:"",outlnk:"",outlnkMall:"",curDispNo:"",savePoint:0,vodUrl:""},f=[];return angular.forEach(b,function(b,c){var g=angular.copy(e);angular.forEach(d,function(c,d){"has_coupon"==d?g[d]="coupon"==b[c]?!0:!1:"flag"==d?b.flag&&b.flag.indexOf("무료배송")>-1&&(g.isdlex_free=!0):"is_sale_promotion"==d?"30"==b.goodsCmpsCd&&(g[d]=!0):"sale_rate"==d||"savePoint"==d?null==b[c]?g[d]=0:g[d]=parseInt(b[c]):"smartpick_yn"==d?g[d]=b[c]?"Y":"N":"limit_age_yn"==d?g[d]=19==b[c]?"Y":"N":"goods_nm"==d?(g[d]=a.replaceAll(b.goodsNm,"<!HS>","<STRONG>"),g[d]=a.replaceAll(g[d],"<!HE>","</STRONG>")):g[d]=b[c]}),void 0!=b.isDlvToday&&(g.isDlvToday=b.isDlvToday),void 0!=b.isDeptPickYn&&(g.isDeptPickYn=b.isDeptPickYn),void 0!=b.isCrsPickYn&&(g.isCrsPickYn=b.isCrsPickYn),void 0!=b.isDlvQuick&&(g.isDlvQuick=b.isDlvQuick),void 0!=b.nint_card_flag&&(g.nint_card_flag=b.nint_card_flag),g.reivew_list=[],void 0!=b.gdasInfo1&&void 0!=b.gdasInfo1.gdasNo&&""!=b.gdasInfo1.gdasNo&&g.reivew_list.push(b.gdasInfo1),void 0!=b.gdasInfo2&&void 0!=b.gdasInfo2.gdasNo&&""!=b.gdasInfo2.gdasNo&&g.reivew_list.push(b.gdasInfo2),f.push(g)}),f}}])}(),function(){angular.module("hwSwipe",[]).run(["addRule",function(a){a(".hwswipe_clear:after",'content:"";padding:0; margin:0; display:block;clear:both;')}]).factory("addRule",[function(){return function(a,b){try{document.styleSheets[0].addRule(a,b)}catch(c){document.styleSheets[0].insertRule(a+"{"+b+"}")}}}]).controller("hwSwipeCtrl",["$scope","addRule",function(a,b){this.addStyle=b,this.deleteStyle=function(a){var b=document.styleSheets[0];if(b.cssRules.length)for(var c=0;c<b.cssRules.length;++c)-1!=b.cssRules[c].cssText.indexOf(a)&&b.deleteRule(c)},this.swipe={base:"hwsiwpe_",max:99999,get:function(){var a=new Date,b=a.toISOString().slice(0,10).replace(/-/g,""),c=String(a.getHours()),d=String(a.getMinutes()),e=String(a.getSeconds()),f=this.base+this.rStr()+this.rNum()+"_"+b+(c+d+e);return f.toLowerCase()},rStr:function(){for(var a="",b="ABCDEFGHIJKMLNOPQRSTUVWXYZ",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},rNum:function(){return String(Math.floor(Math.random()*this.max))+String(Math.floor(Math.random()*this.max))}}}]).factory("cubicbezier",[function(){return function(a){switch(a){case"easeInExpo":return"cubic-bezier(0.950, 0.050, 0.795, 0.035)";case"easeOutExpo":return"cubic-bezier(0.190, 1.000, 0.220, 1.000)";case"easeInOutExpo":return"cubic-bezier(1, 0, 0, 1)";case"easeOutCubic":return"cubic-bezier(0.215, 0.610, 0.355, 1.000)";case"easeInQuart":return"cubic-bezier(0.895, 0.030, 0.685, 0.220)";case"easeOutQuart":return"cubic-bezier(0.165, 0.840, 0.440, 1.000)";case"easeInOutQuart":return"cubic-bezier(0.77, 0, 0.175, 1)";case"easeInQunut":return"cubic-bezier(0.755, 0.050, 0.855, 0.060)";case"easeOutQuint":return"cubic-bezier(0.230, 1.000, 0.320, 1.000)";case"easeInOutQuint":return"cubic-bezier(0.860, 0.000, 0.070, 1.000)";case"easeInCirc":return"cubic-bezier(0.600, 0.040, 0.980, 0.335";case"easeOutCirc":return"cubic-bezier(0.075, 0.820, 0.165, 1.000)";case"easeInOutCirc":return"cubic-bezier(0.785, 0.135, 0.150, 0.860)";case"easeInBack":return"cubic-bezier(0.600, 0, 0.735, 0.045)";case"easeOutBack":return"cubic-bezier(0.175, 0.885, 0.32, 1.275)";case"easeInOutBack":return"cubic-bezier(0.68, -0.55, 0.265, 1.55)";case"easeInSine":return"cubic-bezier(0.47, 0, 0.745, 0.715)";case"easeOutSine":return"cubic-bezier(0.39, 0.575, 0.565, 1)";case"easeInOutSine":return"cubic-bezier(0.445, 0.05, 0.55, 0.95)";case"easeOutElastic":return"cubic-bezier(.75,-0.5,0,1.75)";default:return""}}}]).directive("hwSwipe",["$timeout","cubicbezier",function(a,b){return{controller:"hwSwipeCtrl",scope:{swipeIndex:"=?",swipeTotal:"=?",swipeController:"=?"},link:function(c,d,e,f){function g(){d.css({display:"block"}),s={touchPos:0,movePos:0,wrap:d.parent(),view:1,page:0,total:0,containerWidth:0,overWidth:0,itemWidth:0,duration:e.duration||300,posx:[],swipe:!1,side:"",infinity:"true"==e.infinity?!0:!1,auto:"true"==e.autoPlay?!0:!1,autotimer:0,interval:e.interval||5e3,easing:e.easing,parentWidth:d.parent()[0].clientWidth,scrolly:0,useScrollPos:"",marginRight:e.marginRight||0},h(),i(),s.swipe&&k()}function h(){var a=window.innerWidth;e.w900&&900>=a&&(s.view=e.w900),e.w640&&640>=a&&(s.view=e.w640),e.w320&&320>=a&&(s.view=e.w320),d.children().length<=s.view?(s.view=d.children().length,s.swipe=!1,t=!1,s.wrap.unbind("touchstart.hwswipe touchmove.hwswipe touchend.hwswipe")):s.swipe=!0}function i(){var a=d.children().length,b=d.parent()[0].clientWidth/s.view,c=b*a+b*s.view*2;s.containerWidth=b*a,s.overWidth=b*s.view,s.total=Math.ceil(a/s.view),s.itemWidth=b,angular.forEach(d.children(),function(a){a.hasAttribute("ng-repeat")&&a.removeAttribute("ng-repeat")}),r||(r=d.children());var e="."+v,g="."+v+" > li";if(f.deleteStyle(e),f.deleteStyle(g),f.addStyle(e,"width:"+c+"px !important"),f.addStyle(g,"width:"+b+"px !important; display:block !important; float:left !important; -webkit-box-sizing:border-box"),s.swipe){for(var h=0;h<s.total;++h){for(var i=[],k=0;k<s.view;++k){var l=h*s.view+k,m=r[l];l<d.children().length&&i.push({left:m.offsetLeft,page:h,index:l})}i.length&&s.posx.push(i)}for(var h=0;h<s.view;++h)j(h,"next");for(var h=r.length-1;h>r.length-1-s.view;--h)j(h,"prev");n(0)}}function j(a,b){var c=angular.element(r[a]).clone(!0,!0);s.infinity&&("next"==b?d.append(c):d.prepend(c))}function k(){t||(t=!0,angular.element(document.body).attr("ondragstart","return false"),angular.element(document.body).attr("onselectstart","return false"),s.wrap.bind("touchstart.hwswipe touchmove.hwswipe touchend.hwswipe",function(a){var b;try{b=a.originalEvent.changedTouches[0]}catch(c){b=a.changedTouches[0]}var d=b.clientX,e=b.clientY;switch(a.type){case"touchstart":a.stopPropagation(),s.touchPos=d,s.scrolly=e;break;case"touchmove":var f=s.touchPos-d,g=s.scrolly-e;Math.abs(g)>10&&"X"!=s.useScrollPos&&(s.useScrollPos="Y"),Math.abs(f)>20&&"Y"!=s.useScrollPos&&(s.useScrollPos="X"),s.side=s.touchPos<d?"prev":"next","Y"!=s.useScrollPos&&(a.preventDefault(),m(f));break;case"touchend":"Y"!=s.useScrollPos?m(s.touchPos-d,!0):o(s.movePos),s.touchPos=s.scrolly=0,s.useScrollPos=""}}))}function l(a,c){return a?{"-webkit-transition":"-webkit-transform "+s.duration+"ms "+b(s.easing),"-moz-transition":"-moz-transform "+s.duration+"ms "+b(s.easing),"-o-transition":"-o-transform "+s.duration+"ms "+b(s.easing),transition:"transform "+s.duration+"ms "+b(s.easing),"-webkit-transform":"translateX("+c+"px)","-moz-transform":"translateX("+c+"px)","-o-transform":"translateX("+c+"px)","-ms-transform":"translateX("+c+"px)",transform:"translateX("+c+"px)"}:{"-webkit-transition":"-webkit-transform 0ms","-moz-transition":"-moz-transform 0ms","-o-transition":"-o-transform 0ms",transition:"transform 0ms","-webkit-transform":"translateX("+c+"px)","-moz-transform":"translateX("+c+"px)",
"-o-transform":"translateX("+c+"px)","-ms-transform":"translateX("+c+"px)",transform:"translateX("+c+"px)"}}function m(b,c){if(Math.abs(b)&&!s.transition){var e=s.movePos-b;if(c){if(Math.abs(b)<window.innerWidth/6)return void o(s.movePos);s.transition=!0,p(),n(s.page,!0),a(function(){s.page<0&&(n(s.total-1,!1),s.page=s.total-1),s.page>s.total-1&&(n(0,!1),s.page=0),s.transition=!1},s.duration)}else d.css(l(c,e))}}function n(a,b,c){var e;if(a>-1&&a<s.total){if(e=-((s.infinity?s.parentWidth:0)+s.posx[a][0].left),a==s.total-1){var f=(s.infinity?d.children()[0].offsetWidth:0)-s.marginRight;e=-(f+s.posx[a][s.posx[a].length-1].left)}}else 0>a&&(e=0),a>s.total-1&&(e=-(d[0].clientWidth-s.parentWidth));d.css(l(b,e)),s.movePos=e,c&&(s.page=a)}function o(a){d.css(l(!0,a)),s.movePos=a}function p(){"next"==s.side?(s.page<s.total&&s.page++,!s.infinity&&s.page>=s.total-1&&(s.page=s.total-1)):(s.page>-1&&s.page--,!s.infinity&&s.page<0&&(s.page=0))}function q(){r&&(d.children().remove(),d.append(r),g())}var r,s={},t=!1,u=angular.element(window),v=f.swipe.get();d.css({display:"none",position:"relative","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box","will-change":"transform","pointer-events":"auto"}),d.parent().css({"-webkit-user-drag":"none","touch-action":"pan-y","user-select":"none","will-change":"transform","-webkit-font-smoothing":"antialiased","box-sizing":"border-box"}),d.addClass("hwswipe_clear"),d.addClass(v),c.$watch(function(){return s.page},function(a,b){a==b||0>a||a>s.total-1||!s.total||(c.swipeIndex=a,s.auto&&(clearTimeout(s.autotimer),s.autotimer=setTimeout(function(){s.side="next",m(window.innerWidth/2,!0)},s.interval)))}),c.$watch(function(){return s.total},function(a,b){a!=b&&(c.swipeTotal=a)}),c.$watch(function(){return u.width()},function(a,b){a&&a!=b&&r&&q()},!0),u.bind("resize",function(){c.$apply()});var w=c.$watch(function(){return d.children().length},function(b){return b?1==b?(d.css({display:"block"}),void a(function(){1==d.children().length&&w()},4e3)):void a(function(){w(),g()},300):void 0});c.swipeController=function(a){switch(a){case"next":s.side="next",m(window.innerWidth/2,!0);break;case"prev":s.side="prev",m(window.innerWidth/2,!0);break;default:if("number"!=typeof a)return;n(a,!0,!0)}}}}}]).filter("hwRange",function(){return function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b}})}(),function(a,b,c){"use strict";var d=b.module("searchDetailPopup",["lotteComm"]);d.controller("SearchDetailPopupCtrl",["$scope",function(a){}]),d.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),d.directive("videoPoster",[function(){return{restrict:"A",link:function(a,c,d){d.videoPoster&&b.element(c).attr("poster",d.videoPoster),a.vPoster=function(){b.element(c).attr("poster",d.videoPoster)}}}}]),d.directive("searchDetailPopup",["LotteCommon","LotteUtil","LotteScroll","LotteStorage","$window","$timeout","$http","$location","$filter","commInitData",function(a,c,d,e,f,g,h,i,j,k){return{templateUrl:"/lotte/resources_dev/search/search_detail_popup.html",replace:!0,link:function(c,e,f){c.srhPrdDetailInfo={data:{},show:!1,item:{},imageSwipeIdx:1,showArrow:!0};var i=-1;c.stopAutoPlayTimer=function(){clearTimeout(i)},c.getProductDetailInfo=function(e,f){c.sendTclick("m_RDC_SrhResult_Clk_ProductPop"),c.srhPrdDetailInfo.data={};try{e.vodUrl=e.mpic_info.mpic_url}catch(j){}c.isValidString(e.vodUrl)?(b.copy(e,c.srhPrdDetailInfo.item),c.srhPrdDetailInfo.show=!0,c.srhPrdDetailInfo.idx=f,c.scrollFlag=!1,d.disableScroll(),c.dimmedOpen({target:"prdDetailInfo",callback:c.productDetailInfoClose,scrollEventFlag:!0}),g(function(){b.element(".thumb-wrap").height(b.element(".unit-pop").width())},0),setTimeout(function(){autoVideoPlay("autoVideo1","#autoVideo1",!1,2)},0),i=setTimeout(function(){autoVideoPlay("autoVideo1","#autoVideo1",!1,1)},4e3)):h.get(a.listGoodsImgData,{params:{goods_no:e.goods_no}}).success(function(a,h,i,j){a.contents&&(c.srhPrdDetailInfo.data=a.contents,c.srhPrdDetailInfo.show=!0,c.srhPrdDetailInfo.showArrow=!0,c.srhPrdDetailInfo.item={},b.copy(e,c.srhPrdDetailInfo.item),c.srhPrdDetailInfo.idx=f,c.scrollFlag=!1,d.disableScroll(),c.dimmedOpen({target:"prdDetailInfo",callback:c.productDetailInfoClose,scrollEventFlag:!0}),c.srhPrdDetailInfo.imageSwipeIdx=1,c.setAutoHideSwipeArrow(),g(function(){b.element(".thumb-list").height(b.element(".unit-pop").width())}))}).error(function(a,b,c,d){console.log("Data Error : 상품기본정보 로드 실패")})},c.setAutoHideSwipeArrow=function(){c.srhPrdDetailInfo.showArrow&&g(function(){var a=b.element("#srhPrdDetailInfoArrow");a.fadeOut(2e3)},1e3)},c.getImageSwipeControl=function(a){c.imageSwipeControl=a},c.setImageSwipeInfo=function(a){c.srhPrdDetailInfo.imageSwipeIdx=a+1,c.sendTclick("m_RDC_SrhResult_PopLayer_Swp_Prd_idx"+c.numberFill(a+1,3))},c.advtBnrLstSwipeIdx=1,c.swipeEnd=function(a){c.advtBnrLstSwipeIdx=a+1},c.setImageSwipePos=function(a){var b=c.srhPrdDetailInfo.imageSwipeIdx-1;c.srhPrdDetailInfo.data.imgList.items.length<b+a?b=0:0>b+a?b=c.srhPrdDetailInfo.data.imgList.items.length-1:b+=a,c.imageSwipeControl.moveIndex(b)},c.productDetailInfoClose=function(a){try{document.getElementById("autoVideo1").pause()}catch(b){}return a||c.sendTclick("m_RDC_SrhResult_Poplayer_Clk_Close"),c.srhPrdDetailInfo.show=!1,c.scrollFlag=!0,d.enableScroll(),c.dimmedClose(),!1},c.addWishClick=function(){if(c.srhPrdDetailInfo.data.saveWishYn)return alert("이미 등록된 상품입니다."),!1;var a=c.srhPrdDetailInfo.item;c.srhPrdDetailInfo.idx;if("LECS"==a.outlnkMall)return confirm("공식온라인 몰로 이동후 담을 수 있습니다.")&&LotteLink.goOutLink(a.outlnk,a.outlnkMall),!1;if("SP"==a.outlnkMall)return confirm("롯데슈퍼로 이동후 담을 수 있습니다.")&&LotteLink.goOutLink(a.outlnk,a.outlnkMall),!1;if(!c.loginInfo.isLogin)return alert("로그인 후 이용하실 수 있습니다."),c.loginProc(),!1;if("Y"==a.limit_age_yn){if(""==c.loginInfo.isAdult)return alert("이 상품은 본인 인증 후 이용하실 수 있습니다."),c.goAdultSci(),!1;if(!c.loginInfo.isAdult)return alert("이 상품은 법률규정에 의하여 만 19세 이상 성인만 조회 및 구매가 가능합니다."),!1}c.sendProductWish(a.goods_no,function(a){a?c.srhPrdDetailInfo.data.saveWishYn=!0:c.srhPrdDetailInfo.data.saveWishYn=!1}),c.sendTclick("m_RDC_SrhResult_Poplayer_Clk_Wsh")}}}}])}(window,window.angular);