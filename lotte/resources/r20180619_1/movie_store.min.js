!function(a,b,c){"use strict";var d=b.module("lotteSns",[]),e="[롯데닷컴 이거어때?]\n",f="[롯데닷컴]";d.controller("smsBoxCtrl",["$scope","$http","LotteCommon",function(a,b,c){a.sendSMSData=function(){var d={msg:a.smsTxt,phone_no:a.sms_phoneNo};b({url:c.sendEventSms,data:$.param(d),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(b){b.indexOf("정상적으로 처리되었습니다")>-1?alert("문자가 발송되었습니다."):alert(b),a.hideSharePop()}).error(function(a){console.log("Error Data : 데이터 로딩 에러")})}}]),d.directive("shareBox",["$window","$location","LotteCommon","commInitData","$http","$timeout",function(d,e,f,g,h,i){return{templateUrl:"/lotte/resources_dev/sns/share_box.html",replace:!0,link:function(e,j,k){function l(a){return 10>a?"0"+a:a+""}function m(a,b,c,d,e,f){var g=new Date(a,b,c,d,e,f);return a&&b&&c&&(g.setFullYear(a),g.setMonth(b-1),g.setDate(c),d&&g.setHours(d),e&&g.setMinutes(e),f&&g.setSeconds(f)),g.getTime()}function n(a){return(a+"").length>1?a:"0"+a}function o(){return g.query.goods_no?void h.get("/product/regBestProd.do",{params:{goods_no:g.query.goods_no,sum_dt:v}}).success(function(a){}).error(function(){}):!1}function p(){if(e.share_img&&""!=e.share_img)var a=e.share_img;else if(y<m(2017,4,24,0,0))var a="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg";else var a="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png";e.cnShareUrl=e.cnShareUrl.replace(/(&)/g,"%26");var b=e.getDearPetShareTitle(e.subTitle).replace(/(&)/g,"")+e.prdComment.replace(/(&)/g,""),c="http://m.facebook.com/sharer.php?s=100&u="+encodeURIComponent(f.facebookUrl+"?fb_yn=Y&shareUrl="+e.cnShareUrl+"&shareTitle="+b+"&shareImg="+a);d.open(c)}function q(){var a=(e.subTitle+e.prdComment,"https://twitter.com/share?text="+encodeURIComponent(e.getDearPetShareTitle(e.subTitle)+e.prdComment+" ")+"&url="+encodeURIComponent(e.cnShareUrl));d.open(a)}var r=new Date,s=r.getFullYear()+"",t=r.getMonth()+1+"",u=r.getDate()+"",v=s+n(t)+n(u),w=new Date,x=w.getFullYear()+l(w.getMonth()+1)+l(w.getDate()),y=w.getTime();if(g.query.testDate){g.query.testDate;x=g.query.testDate,y=m(x.substring(0,4),x.substring(4,6),x.substring(6,8),x.substring(8,10),x.substring(10,12),x.substring(12,14))}var z=function(){i(function(){b.element(document.querySelector("#sms_phoneNo")).focus()})};e.shareSNS=function(a,b){if(("/product/m/product_view.do"==d.location.pathname||"/product/m/product_view_dev.html"==d.location.pathname)&&o(),e.loginInfo.isLogin){var g=f.baseUrl+"/event/regEvent.do?"+e.baseParam,i=f.baseUrl+"/event/saveClover.do?"+e.baseParam,j=e.share_evt_no;b!=c&&""!=b&&(j=b);h({method:"POST",url:g,data:{evt_no:j},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}}),h({method:"POST",url:i,data:{evt_no:j},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}if(e.appObj.isApp)return e.sendAppShare(a),!1;switch(a){case"sms":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.smsCdn,e.showSmsBox();break;case"kakaotalk":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.talkCdn,e.sendKakaoTalk();break;case"kakaostory":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.stotyCdn,e.sendKakaoStory();break;case"facebook":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.faceCdn,e.sendFacebook();break;case"twitter":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.twitCdn,e.sendTwitter();break;case"url_copy":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.urlCdn,e.urlCopyClick(e.cnShareUrl)}},e.urlCopyClick=function(a){e.sendTclick(e.tClickBase+"share_Clk_Pop_5"),e.urlCopyFlag=!e.urlCopyFlag},e.showSmsBox=function(){if(e.sendTclick(e.tClickBase+"share_Clk_Pop_6"),e.appObj.isTablet)e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl,b.element(document).on("focus","input, textarea",function(a){j[0].style.cssText=""});else if(e.appObj.isAndroid)if(e.appObj.isTablet)e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl;else{var c=encodeURIComponent(e.getDearPetShareTitle(e.subTitle).replace(/(&)/g,"%26")+e.prdComment.replace(/(&)/g,"%26")+" "+e.cnShareUrl.replace(/(&)/g,"%26"));a.open("sms:?body="+c)}else e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl,z()},e.sendAppShare=function(a){if("sms"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_6"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.smsCdn),"kakaotalk"==a&&(e.appObj.isOldApp?e.kakaoType="":e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_1"),e.cnShareUrl="",e.cnShareUrl=location.protocol+"//"+location.hostname+e.share_path+e.param+"cn=123624&cdn="+e.talkCdn),"kakaostory"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_4"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.stotyCdn),"facebook"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_2"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.faceCdn),"twitter"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_3"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.twitCdn),"url_copy"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_5"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.urlCdn),"moreapp"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_8"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.appCdn),"mail"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_7"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.mailCdn),e.appObj.isAndroid&&e.appObj.verNumber<408||e.appObj.isIOS&&e.appObj.verNumber<4050||"kakaotalk"!=a)var b={url:e.cnShareUrl,title:e.kakaoType+e.getDearPetShareTitle(e.subTitle).replace(/#/gi,"")+e.prdComment.replace(/#/gi,""),imageUrl:e.share_img};else{var b={type:"default",title:e.kakaoTitle,imageUrl:e.share_img,url:e.cnShareUrl,buttons:[{title:"바로가기",url:e.cnShareUrl}]};"kakaotalk"==a?b.desc=e.kakaoType+e.subTitle.replace(/#/gi,"")+e.prdComment.replace(/#/gi,""):b.desc=e.kakaoType+e.getDearPetShareTitle(e.subTitle).replace(/#/gi,"")+e.prdComment.replace(/#/gi,"")}e.appObj.isAndroid?d.lotteshare.callAndroid("lotteshare://"+a+"/query?"+JSON.stringify(b)):e.appObj.isIOS&&(d.location="lotteshare://"+a+"/query?"+JSON.stringify(b))},e.sendKakaoStory=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_4"),e.share_img&&""!=e.share_img?e.share_img=e.share_img:y<m(2017,4,24,0,0)?e.share_img="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg":e.share_img="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png",Kakao.Story.open({url:e.cnShareUrl,text:e.getDearPetShareTitle(e.subTitle)+e.prdComment+"\n",urlInfo:{title:"[롯데닷컴]",images:[e.share_img]}})},e.sendKakaoTalk=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_1"),Kakao.Link.sendDefault({objectType:"feed",content:{title:e.kakaoTitle,description:e.subTitle+e.prdComment,imageUrl:e.share_img,link:{mobileWebUrl:e.cnShareUrl}},buttons:[{title:"바로가기",link:{mobileWebUrl:e.cnShareUrl}}]})},e.sendFacebook=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_2"),p()},e.sendTwitter=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_3"),q()}}}}]),d.directive("smsBox",["$window",function(a){return{templateUrl:"/lotte/resources_dev/sns/sms_box.html",controller:"smsBoxCtrl",link:function(a,c,d){a.focusInput=!0,a.sendShareSMS=function(){$.isNumeric(a.sms_phoneNo)&&a.sms_phoneNo.length<=11&&a.sms_phoneNo.length>=10?a.sendSMSData():alert("휴대폰 번호를 정상적으로 입력해주세요.")},a.appObj.isIOS&&b.element(document).on("focus","input, textarea",function(a){c[0].style.cssText=""})}}}]),d.directive("numericOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){var b=a?a.replace(/[^\d.-]/g,""):null;return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),d.directive("sharePop",["$window","$location","LotteCommon","$timeout",function(d,g,h,i){return{templateUrl:"/lotte/resources_dev/sns/share_pop.html",replace:!0,link:function(d,g,j){function k(){var b={};return a.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,d){b[c]=d}),b}function l(){var a=k(),b=["c","cdn","cn","schema","tclick","udid","v"],c="",d="";for(var e in a)b.indexOf(e)>=0||(c+=d+e+"="+a[e],d="&");return c}d.isBeforeShareBox=!1,d.sharePopVisible=!1,d.shareBoxVisible=!1,d.snsTitle="친구에게 공유하기",d.getDearPetShareTitle=function(a){console.log("%o title %o shareCodeis %o subTitle",a,d.shareCodeis,d.subTitle);try{d.shareCodeis&&(a="["+d.shareCodeis+" "+d.subTitle+"]\n",e="")}catch(b){}try{"DearpetGallary"==d.screenID||"Mombaby"==d.screenID||d.shareNoFixMessage||(a=e+a)}catch(b){a=e+a}try{a=a.replace("[[","["),a=a.replace("]]","]")}catch(b){console.log("shareTitle replace err")}return console.log("%o name",a),a},d.showSharePop=function(a,g){try{Kakao.cleanup(),1==d.appObj.isSktApp?Kakao.init("7a460fb5cdebe4589041db57d906ddda"):Kakao.init("574659987ca46095c123d71f72abac14")}catch(j){if(console.log("PC-MODE"),location.host.indexOf("localhost")<0)return}a||(a={}),d.prdComment="",d.share_path=location.pathname,d.share_search=location.search,d.testParam=k(),d.snsTitle="친구에게 공유하기",d.kakaoTitle=f;try{a.prdComment=a.prdComment.replace(/[<]br[\/][>]/gi,"\n")}catch(j){}var m=new Date,n=m.getFullYear().toString(),o=(m.getMonth()+1).toString(),p=m.getDate().toString();switch(d.nowDate=n+(o[1]?o:"0"+o[0])+(p[1]?p:"0"+p[0]),b.isDefined(a.shareImg)&&(d.share_img=a.shareImg),d.nowDate>=20180501&&d.nowDate<20180601?d.share_evt_no="353348":d.nowDate>=20180601&&d.nowDate<20180701?d.share_evt_no="353349":d.nowDate>=20180401&&d.nowDate<20180501?d.share_evt_no="345839":d.share_evt_no="302853","/mylotte/product/m/mylotte_crit_view.do"==d.share_path?(d.subTitle="[상품평]",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ").replace("\n"," "),d.goodsNm=a.goodsNm,d.kakaoTitle=f+d.goodsNm,b.isDefined(a.goodsNo)?d.goodsNo=a.goodsNo:d.goodsNo=""):"/product/m/product_view.do"==d.share_path||"/product/m/sub/product_comment.do"==d.share_path||"/product/m/sub/product_comment_detail.do"==d.share_path||"/product/m/product_view_burberry.do"==d.share_path?(d.share_path="/product/m/product_view.do",b.isDefined(a.prdComment)?"Y"==a.healthfood_yn?(d.goodsNo=a.goodsNo,d.subTitle=a.goodsNm,d.kakaoTitle=f+d.goodsNm):(d.goodsNo=a.goodsNo,d.subTitle="[상품평]",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ").replace("\n"," "),d.goodsNm=a.goodsNm,d.kakaoTitle=f+d.goodsNm):(d.goodsNo=a.goodsNo,"GUCCI"==d.subTitle?(d.subTitle=d.$$childHead.BasicData.product.mgoods_nm,d.param="?goods_no="+d.testParam.goods_no):d.pageUI&&d.pageUI.data.commonInfo.chanelYn?d.subTitle="[CHANEL]"+a.goodsNm:"BURBERRY"==d.screenID?(e="",d.subTitle="[BURBERRY]\n"+a.goodsNm):d.subTitle=a.goodsNm)):"/product/m/photoreview.do"==d.share_path?"Y"==a.healthfood_yn?(d.goodsNo=a.goodsNo,d.subTitle=a.mgoods_nm):(d.goodsNo=a.goodsNo,d.subTitle="[상품평] ",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ").replace("\n"," ")):"/mall/spec_mall.do"==d.share_path?-1!=d.share_search.indexOf("dispNo=5535841")?(d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_pro_kshop.jpg",d.kakaoTitle=f+"[K.SHOP]",d.subTitle="대한민국 창조의 힘! 중소기업을 응원합니다."):-1!=d.share_search.indexOf("dispNo=5553048")?(d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_pro_lotte_brand.jpg",d.kakaoTitle=f+"[롯데브랜드관]",d.subTitle="롯데의 모든것, 다양한 롯데 스토어를 한 눈에!"):-1!=d.share_search.indexOf("dispNo=5569995")?(d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_pro_scalp.jpg",d.kakaoTitle=f+"[두피전문관]",d.subTitle="최적의 두피 솔루션!당신을 위한 롯데닷컴의 브랜드를 소개합니다."):-1!=d.share_search.indexOf("dispNo=5565610")?(d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_pro_tv_outlet.jpg",d.kakaoTitle=f+"[TV아울렛]",d.subTitle="홈쇼핑 방송을 놓치셨다면! 홈쇼핑에서 봤던 바로 그 상품!"):-1!=d.share_search.indexOf("dispNo=5578740")?(d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_pro_brighton_mall.jpg",d.kakaoTitle=f+"[브라이튼몰]",d.subTitle="복잡한 여행준비를 한번에~ 캐리어부터 파우치까지"):-1!=d.share_search.indexOf("dispNo=5593416")?(d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_pro_mipel_store.jpg",d.kakaoTitle=f+"[미펠스토어]",d.subTitle="이태리 장인의 하이퀄리티 핸드백 만나기"):-1!=d.share_search.indexOf("dispNo=5558814")?(d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_pro_special_flavor.jpg",d.kakaoTitle=f+"[특별한 맛남]",d.subTitle="식탁위에 신선한 재료 스타일리쉬한 키친을 만드는 프리미엄 식품관"):(d.kakaoTitle=f,d.subTitle="["+d.subTitle+"]"):"/event/m/eventSaunMain.do"==d.share_path?d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_common.jpg":"/mall/tvShopping.do"==d.share_path?(d.kakaoTitle=f+"[TV쇼핑]",d.subTitle="드라마보다 더 재미있는 홈쇼핑상품을 이젠 닷컴에서도!",d.share_img=d.smp.today_product.product.items[0].img_url):"/mall/pet/mitou_main.do"==d.share_path?(d.kakaoTitle=f+"[MIMI TOUTOU]",d.subTitle="미미뚜뚜 우리멍냥이 365일 행복하~개 반려동물 감성 놀이터♥"):"/mall/pet/mitou_gallery.do"==d.share_path?(d.bbsNo=a.bbsNo,d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ").replace("\n"," ")):"/mall/baby/baby_main.do"==d.share_path?d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ").replace("\n"," "):"/event/m/kids/experience_main.do"==d.share_path?(d.subTitle="[유아동 체험단]",d.share_img=d.ingEventList[0].img_url):"/event/m/kids/experience_view.do"==d.share_path?(d.subTitle="[유아동 체험단]",d.share_img=d.screenData.ProdInfo.img_url):"/search/m/style_push_intro.do"==d.share_path?(d.subTitle="[스타일 추천]",d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_stylerecom.jpg"):"/product/m/style_recom.do"==d.share_path&&(d.subTitle="[스타일 추천]"),(""==d.share_img||d.share_img==c)&&(d.share_img="http://image.lotte.com/lotte/mobile/common/share_img_common.jpg"),d.param="","/product/m/product_view.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo),"/product/m/photoreview.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo,d.share_path="/product/m/product_view.do"),"/mylotte/product/m/mylotte_crit_view.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo),("/product/m/comment_rewrite.do"==d.share_path||"/product/m/comment_write.do"==d.share_path)&&(d.param="?goods_no="+d.testParam.goods_no),"/product/m/product_list.do"==d.share_path&&(b.isDefined(d.testParam.ss_yn)?d.testParam.ss_yn="&ss_yn="+d.testParam.ss_yn:d.testParam.ss_yn="",b.isDefined(d.testParam.shoppingholicYn)?d.testParam.shoppingholicYn="&shoppingholicYn="+d.testParam.shoppingholicYn:d.testParam.shoppingholicYn="",b.isDefined(d.testParam.planShopGubun)?d.testParam.planShopGubun="&planShopGubun="+d.testParam.planShopGubun:d.testParam.planShopGubun="",d.param="?curDispNo="+d.testParam.curDispNo+d.testParam.ss_yn+d.testParam.shoppingholicYn+d.testParam.planShopGubun),"/planshop/m/planshop_view.do"==d.share_path&&(d.param="?spdp_no="+d.testParam.spdp_no),"/event/m/eventSaunMain.do"==d.share_path&&(d.param="?evt_no="+d.testParam.evt_no),"/styleshop/styleshop.do"==d.share_path&&(d.param="?disp_no="+d.testParam.disp_no),"/styleshop/styleshopmen.do"==d.share_path&&(d.param="?keyword="+d.testParam.keyword),"/mall/pet/dearpet_gallery.do"==d.share_path&&(d.param="?curDispNo="+d.testParam.curDispNo+"&beforeNo="+d.testParam.beforeNo+"&cateDepth="+d.testParam.cateDepth),"/mall/baby/baby_main.do"==d.share_path&&(d.param="?dispNo="+d.testParam.dispNo+"&dcate="+d.testParam.dcate+"&mcate="+d.testParam.mcate),"/event/m/kids/experience_view.do"==d.share_path&&(d.param="?evt_no="+d.testParam.evt_no),"/category/m/brand_prod_list.do"==d.share_path&&(d.param="?upBrdNo="+(d.testParam.upBrdNo||"")),"/brand/bestbrandMain.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),"/brand/bestbrandSub.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),"/mall/samsung/bestsamsung_main.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),"/mall/samsung/bestsamsung_sub.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),d.share_path){case h.styleRecomUrl:case h.specialMallUrl:case h.specialSubUrl:a!=c&&a.shareImg!=c&&(d.share_img=a.shareImg),d.param="?"+l()}(d.param+"").length>0&&(d.param+="&"),-1==(d.param+"").indexOf("?")&&(d.param="?"+d.param),1==d.appObj.isSktApp?d.noCdnUrl=location.protocol+"//"+location.hostname+d.share_path+d.param+"cn=171127":"/mylotte/product/m/mylotte_crit_view.do"==d.share_path||"/product/m/comment_rewrite.do"==d.share_path||"/product/m/comment_write.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/product/m/product_view.do"+d.param+"&cn=123624":"/mall/pet/dearpet_gallery.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/mall/pet/dearpet_gallery.do"+d.param:"/category/m/brand_prod_list.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/category/m/brand_prod_list.do"+d.param+"curDispNoSctCd="+(d.testParam.curDispNoSctCd||"")+"&cn=123624":"/brand/bestbrandMain.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/brand/bestbrandMain.do"+d.param+"curDispNo="+(d.testParam.curDispNo||"")+"&cn=123624":"/brand/bestbrandSub.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/brand/bestbrandSub.do"+d.param+"curDispNo="+(d.testParam.curDispNo||"")+"&cateSelected="+(d.testParam.cateSelected||"")+"&cn=123624":"/mall/samsung/bestsamsung_sub.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+d.share_path+d.param+"&cateSelected="+(d.testParam.cateSelected||"")+"&cn=123624":d.noCdnUrl=location.protocol+"//"+location.hostname+d.share_path+d.param+"cn=123624",1==d.appObj.isSktApp?(d.talkCdn="3093671",d.twitCdn="3093668",d.stotyCdn="3093670",d.smsCdn="3093672",d.mailCdn="3158697",d.faceCdn="3093669",d.urlCdn="3158696",d.appCdn="3158696"):(d.talkCdn="2929723",d.twitCdn="2929720",d.stotyCdn="2929722",d.smsCdn="2929725",d.mailCdn="2929724",d.faceCdn="2929721",d.urlCdn="2929719",d.appCdn="2929719"),b.isDefined(g)||(d.talkFlag=!0,d.twitFlag=!0,d.stotyFlag=!0,d.smsFlag=!0,d.mailFlag=!0,d.faceFlag=!0,d.appObj.isAndroid?(d.urlFlag=!0,d.urlCopyFlag=!1):d.appObj.isIOS?d.appObj.isOldApp?(d.urlFlag=!1,d.urlCopyFlag=!1):(d.urlFlag=!0,d.urlCopyFlag=!1):(d.urlFlag=!1,d.urlCopyFlag=!1),d.appObj.isApp&&(d.appObj.isAndroid?d.appFlag=!0:d.appFlag=!1)),"crit"==g&&(d.talkFlag=!0,d.twitFlag=!1,d.stotyFlag=!0,d.smsFlag=!0,d.mailFlag=!0,d.faceFlag=!0,d.urlFlag=!1,d.urlCopyFlag=!1,d.appFlag=!1),d.sharePopVisible=!0,d.shareBoxVisible=!0,d.sharePopTl="이거어때?",a.tclick?d.sendTclick(a.tclick):"/mall/pet/dearpet_gallery.do"==d.share_path?d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Shr"+d.testParam.curDispNo):"/brand/bestBrandMain.do"==d.share_path||"/brand/bestBrandSub.do"==d.share_path?d.sendTclick("m_DC_"+d.screenID+"_"+d.mallID+"_share"):"/mall/samsung/bestsamsung_main.do"==d.share_path||"/mall/samsung/bestsamsung_sub.do"==d.share_path?d.sendTclick("m_DC_SpeMall_Samsung_share"):d.sendTclick("m_RDC_ProdDetail_Clk_SNS"),d.dimmedOpen({target:"pop_sns",callback:this.hideSharePop}),d.LotteDimm.dimmedOpacity="0.6",i(function(){b.element("#lotteDimm").css("z-index","110")})},d.hideSharePop=function(){d.isBeforeShareBox?(d.shareBoxVisible=!0,d.smsBoxVisible=!1,d.sharePopTl="이거어때?",d.isBeforeShareBox=!1,d.dimmedClose({target:"pop_sns"})):(d.contVisible=!0,d.sharePopVisible=!1,d.shareBoxVisible=!1,d.smsBoxVisible=!1,d.sharePopTl="",d.smsTxt="",d.sms_phoneNo="",d.dimmedClose({target:"pop_sns"}))}}}}])}(window,window.angular);var transformJsonToParam=function(a){var b=[];for(var c in a)if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c][d]));else b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};!function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteSns","lotteCommFooter","lotteSlider"]);d.controller("movieStoreCtrl",["$http","$scope","$timeout","$window","LotteCommon",function(c,d,e,f,g){function h(a,b,c){a+=a.indexOf("?")>-1?"&"+d.baseParam+"&tclick="+d.tclick+b:"?"+d.baseParam+"&tclick="+d.tclick+b,null!=c&&(d.loginInfo.isLogin||(a=g.loginUrl+"?"+d.baseParam+"&fromPg=0&targetUrl="+encodeURIComponent(a,"UTF-8"))),location.href=a}d.showWrap=!0,d.contVisible=!0,d.subTitle="영상제보",d.isShowThisSns=!0,d.screenID="videoMall",d.tclick=d.tClickBase+d.screenID,d.shareNoFixMessage=!0,d.shareCodeis="영상제보",d.shareRendingURL=location.href,(d.screenDataReset=function(){d.pageOptions={},d.screenData={page:0,pageSize:20,pageEnd:!1}})(),d.movClick=function(a,e){var f=g.movieStoreDataTop+"&goodsNo="+a.prd_info.goods_no+"&prdYn=Y";c.get(f).success(function(a){d.MainMovInfoTop=a.goodsInfo_video_mall_top,d.MainMovInfoTopMov=a.goodsInfo_video_mall_top.movie_url,d.MainMovInfoTopInfo=d.MainMovInfoTop.top_product.items[0],d.MainMovInfoTopCmps=d.MainMovInfoTop.top_select_goods_cmps_info,"null"!=d.MainMovInfoTopMov&&(setTimeout(function(){b.element("#autoVideo").load()},500),setTimeout(function(){autoVideoPlay("autoVideo","#autoVideo",!1,!1,!1,!0)},500))}).error(function(a,b,c,d){console.log("Error Data : ",b,c,d)});var h="m_DC_SpeDisp_Vcom_Clk_("+(d.ctgll.tabIdx+1)+")_vod_("+(e+1)+")";d.sendTclick(h)},d.bannClick=function(a,b){var c="m_DC_SpeDisp_Vcom_Clk_("+(d.ctgll.tabIdx+1)+")_banner_("+(b+1)+")";d.sendTclick(c);var e=a.banner_info.img_link;h(e,c)};var i=g.movieStoreDataTop;c.get(i).success(function(a){d.MainMovInfoTop=a.goodsInfo_video_mall_top,d.MainMovInfoTopMov=a.goodsInfo_video_mall_top.movie_url,d.MainMovInfoTopInfo=d.MainMovInfoTop.top_product.items[0],d.MainMovInfoTopCmps=d.MainMovInfoTop.top_select_goods_cmps_info,setTimeout(function(){autoVideoPlay("autoVideo","#autoVideo")},500)}).error(function(a,b,c,d){console.log("Error Data : ",b,c,d)}),e(function(){var a=b.element(".top_tit_img #autoVideo"),c=a.data("bgUrl");a.attr({"video-poster":c,poster:c})},1500);var j=g.movieStoreData+"?dispNo=5586147&subDispNo=5586745";c.get(j).success(function(a){d.MainMovInfo=a.MainMovInfo,d.ctgll=a.goodsInfo_video_mall_bot.cate_sml_list,d.ctgll2=a.goodsInfo_video_mall_bot.cate_sml_list.items,d.ctgll.tabIdx=0;var b=d.ctgll2.length,c=90*b;$(".slide_ul").width(c),d.cate_goods_list2=a.goodsInfo_video_mall_bot.cate_goods_list.items}).error(function(a,b,c,d){console.log("Error Data : ",b,c,d)}),d.tabClick=function(b,c){d.ctgll.tabIdx=c,d.DispNo=5586147,d.subDispNo=d.DispNo+"&subDispNo="+b.disp_no,d.vComTabIdx=b.text_disp_prio_rnk,d.rScope.sendTclick("m_DC_SpeDisp_Vcom_Clk_("+(c+1)+")");var e=g.movieStoreData+"?dispNo="+d.DispNo+"&subDispNo="+b.disp_no;d.loadData(e,d.subDispNo);var f=$(a).width(),h=f/2,i=90,j=i/2,k=h-j,l=i*c;console.log(l);var m=l-k;$(".swipe_wrap").animate({scrollLeft:m},"slow")},d.loadData=function(a){var b={method:"get",url:a};d.ajaxLoadFlag=!0,c(b).success(function(a){d.cate_goods_list2=a.goodsInfo_video_mall_bot.cate_goods_list.items})["finally"](function(){d.ajaxLoadFlag=!1})},d.goToLogin=function(a,b,c){var d="&targetUrl="+encodeURIComponent(a.location.href,"UTF-8");console.log(d),c.indexOf("?")>0?a.location.href=c+"&"+b.baseParam+d:a.location.href=c+"?"+b.baseParam+d},d.petShare=function(a){d.sendTclick("m_DC_SpeDisp_Reviewer_Clk_shr"),d.showSharePop(a)}}]),d.directive("lotteContainer",["$rootScope","$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,c,d,e,f,g,h,i,j){return{templateUrl:"/lotte/resources_dev/movie_store/movie_store_container.html",replace:!0,link:function(a,c,f){a.mallMainClick=function(b){a.sendTclick(b)},a.wishClick=function(b,c){var d="m_RDC_ProdDetail_Clk_Wsh";return c&&(d=c),a.sendTclick(d),a.loginInfo.isLogin?b.has_wish?(a.productViewAlert({type:"alert",msg:"이미 담은 상품 입니다.",time:2500}),b.has_wish=!0,!1):(console.log("위시 담기 시도 ::: "+b.goods_no),b.has_wish=!0,a.sendProductWish(b.goods_no,function(c){c?(a.productViewAlert({type:"alert",msg:"위시리스트에 담았습니다.",time:2500}),b.has_wish=!0):b.has_wish=!1}),void console.log(b)):(alert("로그인을 해주세요."),a.goToLogin(e,a,g.loginUrl),!1)},a.productViewAlert=function(c){switch(c.type){case"alert":a.alertTemplate='<div class="msg"><span>'+c.msg+"</span></div>",b.element("#alertTemplateContent").html(a.alertTemplate)}var e=b.element("#productViewAlert");c.speed||(c.speed=500),c.time||(c.time=1e3),e.fadeIn(c.speed,function(){d(function(){e.fadeOut(c.speed)},c.time)})},a.rScope=j.getAbsScope(a),a.setSliderIdxPos=function(a,b){d(function(){var d=c.find("div[lotte-slider]"),e=d.find(">ul"),f=e.find(">li"),g=f.eq(a),h=0,i=b?0:200;d.length>0&&e.length>0&&g.length>0&&d.width()<e.width()&&(h=d.width()/2+e.offset().left-(g.offset().left+g.outerWidth()/2),d.scope().lotteSliderMoveXPos(h,i))},300)},a.productInfoClick=function(b,c){b.curDispNo=5586148,b.curDispNoSctCd=87;var d="m_DC_SpeDisp_Vcom_Clk_item_("+c+")";a.productView(b,"","",d)},a.productInfoClick2=function(c,d){c.curDispNo=5586148,c.curDispNoSctCd=87;var e="m_DC_SpeDisp_Vcom_Clk_("+(a.ctgll.tabIdx+1)+")_item_("+(d+1)+")";setTimeout(function(){b.element("#autoVideo").load()},500),a.productView(c,"","",e)},a.movPlayTclick=function(){var b="m_DC_SpeDisp_Vcom_Clk_play";a.sendTclick(b)},a.movPauseTclick=function(){var b="m_DC_SpeDisp_Vcom_Clk_pause";a.sendTclick(b)},a.movVolume=function(b){var c=a.tclick+($("#"+b).hasClass("mute")?"_Clk_Video_vol":"_Clk_Video_mute");a.sendTclick(c)},a.mainProductClick=function(c,d){if(c){var f=g.prdviewUrl+"?"+a.rScope.baseParam+"&goods_no="+c;setTimeout(function(){b.element("#autoVideo").load()},500),e.location.href=f+("&tclick="+d)}console.log(" Product Click : ",c,"\n tclick : ",d)},a.movprdTclick=function(c){c.curDispNo=5586148,c.curDispNoSctCd=87;var d="m_DC_SpeDisp_Vcom_Clk_prd";setTimeout(function(){b.element("#autoVideo").load()},500),a.productView(c,"","",d)},a.prdItemTclick=function(b,c){var d="m_DC_SpeDisp_Vcom_Clk_("+(a.ctgll.tabIdx+1)+")_item_("+(c+1)+")";a.sendTclick(d)}}}}]),d.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),d.filter("dealFlagName",function(){return function(a){var b;switch(a){case"dept":b="롯데백화점";break;case"smartpick":b="스마트픽";break;case"quick":b="퀵";break;case"today":b="오늘도착"}return b}}),d.filter("optName",function(){return function(a){var b;switch(a){case"무료배송":b="무료배송";break;case"무이자3":b="무이자3"}return b}})}(window,window.angular);