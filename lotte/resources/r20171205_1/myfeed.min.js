!function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteUtil");d.service("LotteConsole",[function(){var a="m.lotte.com"==location.hostname?!0:!1;this.log=function(){a||console.log.apply(console,arguments)},this.warn=function(){a||console.warn.apply(console,arguments)},this.error=function(){a||console.error.apply(console,arguments)},this.info=function(){a||console.info.apply(console,arguments)},this.traceObj=function(b,c,d,e){if(!a){var f=e||"#fff",g=d||"#444",h="color:"+f+"; background-color:"+g+"; padding: 1px 5px; border-radius: 5px;";console.group.call(console,"%c---"+c+"-------------------------------------------------------",h),console.log(b),console.groupEnd&&console.groupEnd()}}}])}(window,window.angular);var isSwipeActive=!1,isSwipeLock=!1,isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1;!function(a,b,c){"use strict";var d=[],e=b.module("lotteNgSwipe",[]);e.controller("lotteNgSwipeCtrl",["$scope",function(a){}]),e.factory("lotteNgSwipe",["$interval","$timeout","$window",function(c,d,e){function f(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function g(c,d,e){if(e.SLIDE_SWIPE){var f=d[0].offsetWidth-e.LEFT_MARGIN-e.RIGHT_MARGIN;0==f&&(f=a.innerWidth);var g=f/e.DISP_COUNT,h=0;if(s=d[0].offsetWidth-g-e.LEFT_MARGIN,!(d.find("ul, ol").eq(0).find(">li").length>=1||d.find(">li").length>=1)||e.LOADING_ELEMENT||e.LEFT_ELEMENT||e.RIGHT_ELEMENT)e.LOADING_ELEMENT||b.element(d).eq(0).css(q());else{if(-1!=d.context.className.indexOf("recommond_swipe"))var i=d.find(">li");else var i=d.find("ul, ol").eq(0).find(">li").length>1?d.find("ul, ol").eq(0).find(">li"):d.find(">li");var j=c,k=0,l=null;for(k;k<i.length;j++,k++)l=i.eq(j),h=j>=k||0>j?0>j?g*d.find(">li").length+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*k+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*-(c-j)+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0),-1!=d.context.className.indexOf("latest_swipe")&&a.innerWidth>=640?(f=a.innerWidth,l.css({width:f/2,backfaceVisibility:"hidden",position:"absolute",left:h})):l.css({width:f/e.DISP_COUNT,backfaceVisibility:"hidden",position:"absolute",left:h}),j+1>=d.find(">li").length&&(j=-1);t=i.length,b.element(d).eq(0).css(p(0)),b.element(d).find(">li").css("top",0).eq(0).css("position","relative")}}}function h(a){for(var b={totalwidth:0,width:[],paddingleft:[],marginleft:[],paddingright:[],marginright:[]},c=0;c<a.find(">li").length;c++){var d=a.find(">li:eq("+c+")");b.width[c]=parseInt(d.width()),b.width[c]+=b.marginleft[c]=parseInt(d.css("margin-left")),b.width[c]+=b.marginright[c]=parseInt(d.css("margin-right")),b.width[c]+=b.paddingleft[c]=parseInt(d.css("padding-left")),b.width[c]+=b.paddingright[c]=parseInt(d.css("padding-right")),b.totalwidth+=b.width[c]}return b}function i(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}function j(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(0,c.SWIPE_SPEED)),(c.LOADING_ELEMENT||c.LEFT_ELEMENT||c.LEFT_ELEMENT)&&b.element(c.LOADING_ELEMENT).css(p(0,c.SWIPE_SPEED))}function k(c,d,e,f){var g=h(c);if(a.innerWidth-d.LEFT_MARGIN-d.RIGHT_MARGIN>g.totalwidth)return!1;for(var j=a.innerWidth/2,k=g.width[e]/2,m=0,n=0;n<g.width.length&&n!=e;n++)m+=g.width[n];var o=i(c),q=-1*(m-j+k);f?(q>0?q=0:q<-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)&&(q=-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)),b.element(c).eq(0).css(p(q))):Math.abs(m)>j&&g.totalwidth-a.innerWidth+d.RIGHT_MARGIN>Math.abs(q)?l(c[0],d,o,q):Math.abs(m)<=j?l(c[0],d,o,0):l(c[0],d,o,-1*(g.totalwidth-a.innerWidth)-d.RIGHT_MARGIN)}function l(a,c,d,e){return d==e?!0:(b.element(a).on(u,function(a){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(e,c.SWIPE_SPEED)),void(c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(e,c.SWIPE_SPEED))))}function m(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED))}function n(a,c,d,e,f){return 0>d?f=f+c.DISP_COUNT>c.MAX_SLIDE?c.MAX_SLIDE:f+c.DISP_COUNT:f-=c.DISP_COUNT,c.EDGE_LAST&&(f==t-1||f==t-2&&d>0)&&(e-=s),b.element(a).on(u,function(d){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),g(f,a,c),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED)),f}function o(b,c,d){var e=i(b);return e>0?(m(b[0],c,e,0),e=0):Math.abs(e)+a.innerWidth>Math.abs(d.totalwidth)+c.RIGHT_MARGIN&&(m(b[0],c,e,d.totalwidth-a.innerWidth+c.RIGHT_MARGIN),e=-1*(d.totalwidth-a.innerWidth)),e}function p(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function q(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}}function r(a){return a||(a=""),{"-webkit-transition":a,"-moz-transition":a,"-o-transition":a,transition:a}}var s=0,t=0,u="transitionend.ngswipe webkitTransitionEnd.ngswipe oTransitionEnd.ngswipe MSTransitionEnd.ngswipe";return{unbind:function(a){a.off("touchstart.ngswipe mousedown.ngswipe touchcancel.ngswipe touchmove.ngswipe mousemove.ngswipe touchend.ngswipe mouseup.ngswipe")},bind:function(d,g,k){var l,r,u,v,w=d[0],x=!1,y=g.FIRST_INDEX,z=b.element(d).scope(),A=!1,B=!1,C=[],D=0,E=0,F=0,G=!0,H=(g.DISP_COUNT,navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1),I=!0,J=30,K=b.element(e).scrollTop();g.SLIDE_MENU_SWIPE&&b.element(w).css(p(0)),d.on("touchstart.ngswipe mousedown.ngswipe",function(c){if(c.stopPropagation(),H){var j=b.element(e).scrollTop();j+J>K&&K>j-J?I=!0:(I=!1,K=j)}A=!1,B=!1,g.SLIDE_MENU_SWIPE&&(C=h(d),G=a.innerWidth-g.LEFT_MARGIN-g.RIGHT_MARGIN>C.totalwidth?!1:!0),isSwipeLock||G&&(a.innerWidth>=900&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_640:g.RESPONSIVE_SWIPE&&(g.DISP_COUNT=g.RESPONSIVE_SWIPE_320),g.MAX_SLIDE=d.find(">li").length-1,(!(g.MAX_SLIDE<1)||g.LOADING_ELEMENT||g.LEFT_ELEMENT||g.RIGHT_ELEMENT)&&(u=f(c),u.x+=g.EDGE_LAST&&y==t-1?s:0,x=!0,l=0,r=0,isSwipeActive=!0,v=u,y=z.swipeIdx,E=(new Date).getTime(),g.SLIDE_MENU_SWIPE&&(C=h(d),D=i(d)),k.start&&k.start(u,c),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none")))}),d.on("touchcancel.ngswipe",function(a){x=!1,j(w,g,u,v)}),d.on("touchmove.ngswipe mousemove.ngswipe",function(a){if(x&&G&&u){var c=f(a);c.x+=g.EDGE_LAST&&y==t-1?s:0,l+=Math.abs(c.x-v.x),r+=Math.abs(c.y-v.y),v=c;var d,e;d=Math.abs(c.x-u.x),e=Math.abs(c.y-u.y),A||(B=d>e,A=!0);var h=v.x-u.x;if(h>0?a.moveto="right":a.moveto="left",B&&(I||!H)){a.preventDefault(),a.stopPropagation();g.SLIDE_MENU_SWIPE?b.element(w).css(p(c.x-u.x+D)):b.element(w).css(p(c.x-u.x)),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(c.x-u.x))),"left"==a.moveto?(g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(p(0))):(g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(p(0))),k.move&&k.move(c,a)}}}),d.on("touchend.ngswipe mouseup.ngswipe",function(h){if(h.stopPropagation(),A=!1,B&&(I||!H)){if(!x||!G)return;x=!1,isSwipeActive=!1;var i=d[0].offsetWidth,l=Math.abs(v.x-u.x),r=v.x-u.x;if(F=(new Date).getTime(),r>0?h.moveto="right":h.moveto="left",h.max=g.MAX_SLIDE,g.SLIDE_MENU_SWIPE){var z=v.x-u.x+D,J=-80,L="left"==h.moveto?z+J:z-J,M="left"==h.moveto?-5:5;if(Math.abs(v.x-u.x)>5&&400>=F-E)var N=c(function(){z+=M,b.element(d).eq(0).css(p(z)),(L>=z&&"left"==h.moveto||z>=L&&"right"==h.moveto||z>0||z<=-C.totalwidth+a.innerWidth)&&(D=o(d,g,C),c.cancel(N))},10);else D=o(d,g,C)}else if(i*g.MAX_RATIO<=l){if(g.SLIDE_SWIPE){if(y>=g.MAX_SLIDE&&0>r||0>y&&r>0||0==y&&r>0||g.MAX_SLIDE+1<=g.DISP_COUNT||y+g.DISP_COUNT>g.MAX_SLIDE&&"left"==h.moveto)return void j(w,g,u,v+(g.EDGE_LAST&&y==t-1?s:0));if(g.SLIDE_SWIPE)var i=i-g.LEFT_MARGIN-g.RIGHT_MARGIN;y=n(d,g,r,i,y),h.idx=y}else m(w,g,r,i);var O=f(h);O.x+=g.EDGE_LAST&&y==t-1?s:0;k.end&&k.end(O,h)}else j(w,g,u,v),b.element(d).eq(0).css(q())}H&&(K=b.element(e).scrollTop(),I=!0),u=null})},moveSwipeX:n,positionReCalc:g,resetSwipe:j,moveMenuSwipe:k,getListInfo:h}}]),e.directive("lotteNgListSwipe",["$window","$parse","$timeout","lotteNgSwipe",function(e,f,g,h){return{link:function(i,j,k){function l(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function m(){var c=j[0];if(a.innerWidth>=900&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_640:p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),0!=i.swipeIdx&&p.DISP_COUNT>1){var d=i.swipeIdx%p.DISP_COUNT;0!=d&&(i.swipeIdx-=d)}if(i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),p.SLIDE_MENU_SWIPE){var e=h.getListInfo(j);e.width.length>1&&a.innerWidth-p.LEFT_MARGIN-p.RIGHT_MARGIN>e.totalwidth&&b.element(c).css(l(0))}p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)}function n(a,b){if(!(LeftSwipeStartExec&&"left"==a.moveto||RightSwipeStartExec&&"right"==a.moveto)){"left"==a.moveto?LeftSwipeStartExec=!0:RightSwipeStartExec=!0;var c=null;i.$apply(function(){return c=q(i.$parent,{$event:{idx:a.idx,max:b.MAX_SLIDE,moveto:a.moveto}})})}}function o(a,c){if(isSwipeActive)return g(function(){o(a,c)},100),!1;var d=null;i.$apply(function(){return d=r(i.$parent,{$event:{idx:a.idx,max:c.MAX_SLIDE,moveto:a.moveto}}),"translateX_Reset"==d&&g(function(){b.element(j).eq(0).css(l(0))},500),d})}var p={MAX_RATIO:k.swipeMaxRatio?k.swipeMaxRatio:.3,MIN_DISTANCE:k.swipeMinDistance?k.swipeMinDistance:25,SWIPE_LOOP:k.swipeLoop?k.swipeLoop:!1,LEFT_ELEMENT:k.swipeLeftEl?k.swipeLeftEl:null,RIGHT_ELEMENT:k.swipeRightEl?k.swipeRightEl:null,LOADING_ELEMENT:k.swipeLoadingEl?k.swipeLoadingEl:null,LOADING_ELEMENT_ZINDEX:k.swipeLoadingElZindex?k.swipeLoadingElZindex:50,SLIDE_SWIPE:k.swipeSlideItem?k.swipeSlideItem:!1,SLIDE_MENU_SWIPE:k.swipeSlideMenu?k.swipeSlideMenu:!1,RESPONSIVE_SWIPE:k.swipeResponsive?k.swipeResponsive:!1,RESPONSIVE_SWIPE_320:parseInt(k.swipeResponsive320)?parseInt(k.swipeResponsive320):1,RESPONSIVE_SWIPE_640:parseInt(k.swipeResponsive640)?parseInt(k.swipeResponsive640):2,RESPONSIVE_SWIPE_900:parseInt(k.swipeResponsive900)?parseInt(k.swipeResponsive900):2,AUTO_HEIGHT:k.swipeAutoheight?k.swipeAutoheight:!1,DISP_COUNT:k.swipeDispCount?parseInt(k.swipeDispCount):1,FIRST_INDEX:k.swipeFirstIndex?parseInt(k.swipeFirstIndex):0,LEFT_MARGIN:k.swipeLeftMargin?parseInt(k.swipeLeftMargin):0,RIGHT_MARGIN:k.swipeRightMargin?parseInt(k.swipeRightMargin):0,START_EXEC:k.swipeStartExec?k.swipeStartExec:null,EXEC:k.swipeEndExec?k.swipeEndExec:null,LIST_SCOPE:k.swipeListModel?k.swipeListModel:null,SWIPE_ID:k.swipeId?k.swipeId:"",MAX_SLIDE:0,SWIPE_SPEED:k.swipSpeed?k.swipSpeed:150,IGNORE_DESTORY:k.ignoreDestory?k.ignoreDestory:!1,EDGE_LAST:k.swipeEdgeLast?!0:!1};i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),i.swipeBullet=[];var q=null,r=null;if(null!=p.START_EXEC&&(q=f(p.START_EXEC)),null!=p.EXEC&&(r=f(p.EXEC)),p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.SLIDE_MENU_SWIPE&&(i.moveMenuSwipe=function(a){i.moveMenuSwipeFnc(a,!1)},i.moveMenuSwipeFnc=function(a,b){h.moveMenuSwipe(j,p,a,b)}),p.SLIDE_MENU_SWIPE||p.SLIDE_SWIPE||(i.translateX_Reset=function(){console.log("스와이프 좌표 리셋"),b.element(j).eq(0).css(l(0)),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css(l(0))}),i.setSlide=function(a){0>a?a=p.MAX_SLIDE:a>p.MAX_SLIDE&&(a=0),i.swipeIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.goSlide=function(a){h.positionReCalc(a,j,p),i.swipeIdx=i.swipeBulletIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.nextSlide=function(){i.swipeIdx!=p.MAX_SLIDE&&(h.moveSwipeX(j,p,-1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx+=p.DISP_COUNT,i.swipeBulletIdx++,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.beforeSlide=function(){0!=i.swipeIdx&&(h.moveSwipeX(j,p,1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx-=p.DISP_COUNT,i.swipeBulletIdx--,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.ngswipeInit=function(){if(p.SLIDE_SWIPE){i.swipeBullet=[],p.MAX_SLIDE=j.find(">li").length;for(var a=0;a<p.MAX_SLIDE/p.DISP_COUNT;a++)i.swipeBullet.push(a)}p.MAX_SLIDE<i.swipeIdx?(i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),h.positionReCalc(i.swipeIdx,j,p),g(function(){i.$apply()})):i.swipeIdx||(i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),i.swipeIdx=p.FIRST_INDEX,g(function(){i.$apply()}))},i.resetSwipePos=function(){h.positionReCalc(i.swipeIdx,j,p)},null!=p.LIST_SCOPE){var s=null;i.$watch(p.LIST_SCOPE,function(a,b){if(a!=c&&a.length>=1){if(s!=a[0]&&(i.swipeIdx=0,i.swipeBulletIdx=0,s=a[0]),"recommondSwipe_0"==k.swipeId||"lastestSwipe_0"==k.swipeId)var d=2e3;else var d=100;g(function(){i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)},d)}},!0)}m(),-1==d.indexOf(p.SWIPE_ID)&&d.push(p.SWIPE_ID);var t=b.element(e);t.on("orientationchange.ngswipe resize.ngswipe",m),i.$on("$destroy",function(){h.unbind(j)}),h.bind(j,p,{start:function(a,b){},move:function(a,b){return null!=p.START_EXEC?(isLoadingData=!0,n(b,p)):void 0},cancel:function(){isLoadingData=!1},end:function(a,b){return isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1,i.swipeIdx=b.idx?b.idx:0,i.swipeBulletIdx=parseInt(b.idx/p.DISP_COUNT),i.$apply(),null!=p.EXEC?o(b,p):void 0}})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteUtil");d.service("MyFeedService",["$http","$timeout","$q","LotteCommon","$sessionStorage","commInitData","LotteStorage","LotteConsole","LotteCookie",function(a,b,c,d,e,f,g,h,i){function j(){return p?"&mbr_no="+q:""}function k(){return"&gender="+r}function l(){if("A"==s)return"&age="+s;if(20>s)return"&age=20";if(s>=60)return"&age=50";try{s=10*Math.floor(s/10)}catch(a){s="A"}return"&age="+s}function m(a){for(var b=new String,c=0;c<a.length;c++)c>0&&(b+=","),b+=a[c];return b}var n=this,o={},p=!1,q="",r="",s="";this.setLoginInfo=function(a){o=a,q=(p?f.query.mbr_no:o.mbrNo)||"",r=(p?f.query.gender:o.genSctCd)||"",s=(p?f.query.age:o.mbrAge)||"A"},this.loadRecentlyInit=function(b){var e=c.defer(),f=d.myfeedDataUrl+"?type=P1&mode=1&latest_prod="+b+j();return d.isTestFlag&&(f="/json/myfeed/recently.json"),a.get(f).success(function(a){h.traceObj(a,"recently init"),e.resolve(a)}).error(function(a,b,c,d){console.log("recently init error ",a),e.reject("recently init error")}),e.promise},this.loadRecentlyData=function(b,e){var f=c.defer();if("Y"==e){var g=0,i="",k="";n.loadRecentlyRecom(b).then(function(a){h.traceObj(a,"최근본 상품 추천 레코벨"),i=a})["catch"](function(a){console.log("최근본 상품 추천 레코벨 error ",a)})["finally"](function(){g++,2==g&&n.loadRecentlyPrd(b,e,i,k).then(function(a){h.traceObj(a,"최근본 상품 추천 Prd"),f.resolve(a)})["catch"](function(a){console.log("최근본 상품 추천 Prd error ",a),f.reject("최근본 상품 추천 Prd 로드 실패")})}),n.loadRecentlyPlan(b).then(function(a){h.traceObj(a,"최근본 상품 추천 기획전 레코벨"),k=a})["catch"](function(a){console.log("최근본 상품 추천 기획전 레코벨 error ",a)})["finally"](function(){g++,2==g&&n.loadRecentlyPrd(b,e,i,k).then(function(a){h.traceObj(a,"최근본 상품 추천 Prd"),f.resolve(a)})["catch"](function(a){console.log("최근본 상품 추천 Prd error ",a),f.reject("최근본 상품 추천 Prd 로드 실패")})})}else{var l=d.myfeedDataUrl+"?type=P1&mode=0&recobellYn=N"+j();d.isTestFlag&&(l="/json/myfeed/recently.json"),a.get(l).success(function(a){h.traceObj(a,"recently product"),f.resolve(a)}).error(function(a,b,c,d){console.log("recently product error ",a),f.reject("recently product error")})}return f.promise},this.loadRecentlyPrd=function(b,e,f,g){var i=c.defer(),k=d.myfeedDataUrl+"?type=P1&mode=0&recobellYn="+e+"&latest_prod="+b+"&latest_prod_recomm="+f+"&spdp_no_list="+g+j();return d.isTestFlag&&(k="/json/myfeed/recently.json"),a.get(k).success(function(a){h.traceObj(a,"recently product"),i.resolve(a)}).error(function(a,b,c,d){console.log("recently product error ",a),i.reject("recently product error")}),i.promise},this.loadRecentlyRecom=function(a){var b=c.defer(),d="http://rb-rec-api-apne1.elasticbeanstalk.com/rec/a002?size=20&cps=false&format=jsonp&cuid=fdd29847-94cd-480d-a0d9-16144485d58b&iids=",e="";return $.ajax({type:"post",async:!0,url:d+a,dataType:"jsonp",success:function(a){if(h.traceObj(a,"recently a002"),a.results&&a.results.length>0){for(var b=[],c=0;c<a.results.length;c++)b.push(a.results[c].itemId);e=b.join(",")}},error:function(a,b,c){console.log("recently a002 error  "+a)},complete:function(){b.resolve(e)}}),b.promise},this.loadRecentlyPlan=function(a){var b=c.defer(),d="http://rb-rec-api-apne1.recobell.io/rec/a101?size=10&cps=false&format=jsonp&cuid=fdd29847-94cd-480d-a0d9-16144485d58b&iids=",e="";return $.ajax({type:"post",async:!0,url:d+a,dataType:"jsonp",success:function(a){if(h.traceObj(a,"recently a101"),a.results&&a.results.length>0){for(var b=[],c=0;c<a.results.length;c++)b.push(a.results[c].itemId);e=b.join(",")}},error:function(a,b,c){console.log("recently a101 error  "+a)},complete:function(){b.resolve(e)}}),b.promise},this.loadOrderData=function(){var b=c.defer(),e=d.myfeedDataUrl+"?type=P2&mode=1"+j();return d.isTestFlag&&(e="/json/myfeed/order.json"),a.get(e).success(function(a){if(!(a&&a.data&&a.data.cart_recomm_list&&a.data.cart_recomm_list.prdList&&a.data.cart_recomm_list.prdList.items&&0!=a.data.cart_recomm_list.prdList.items.length))return b.reject("구매한 상품 데이타 로드 실패"),b.promise;var c=a.data.cart_recomm_list,d=0,e=0,f=0;h.traceObj(c,"order 4.0");for(var g=c.prdList.items.length>3?3:c.prdList.items.length,i=0;g>i&&!(c.prdList.items[i].goodsNo&&(d++,n.loadOrderRecom(c.prdList.items[i].goodsNo,i).then(function(a){a&&a.data&&a.data.goods_list_1&&a.data.goods_list_1.prdList&&a.data.goods_list_1.prdList.items&&a.data.goods_list_1.prdList.items.length>2&&f++,c.prdList.items[a.idx].subItem=a.data.goods_list_1.prdList.items||[],e++,h.traceObj(a,"order 추천 "+a.idx+", "+e+", "+g),e==g&&(0==f?c.hasSub=!1:c.hasSub=!0,b.resolve(c))})["catch"](function(a){console.log("Order 추천 error ",a),b.reject("구매한 추천 데이타 로드 실패")}),d>=3));i++);}).error(function(){console.log("Data Error : Order 4.0 실패"),b.reject("구매 데이타 로드 실패")}),b.promise},this.loadOrderRecom=function(b,e){var f=c.defer(),g="http://rb-rec-api-apne1.recobell.io/rec/a005?size=10&cps=false&format=jsonp&cuid=fdd29847-94cd-480d-a0d9-16144485d58b&iids="+b;return $.ajax({type:"post",async:!0,url:g,dataType:"jsonp",success:function(b){if(null!=b.results&&b.results.length>0){h.traceObj(b,"order recobell");var c="",g=new Array;$(b.results).each(function(a,b){g.push(b.itemId)}),c=m(g);var i=d.myfeedDataUrl+"?type=P3&mode=1&limit_1=6&goods_nos_1="+c;d.isTestFlag&&(i="/json/myfeed/wishRecom.json"),a.get(i).success(function(a){a.idx=e,h.traceObj(a,"order 상품"),f.resolve(a)}).error(function(){console.log("Data Error : order 상품 데이타 로드 실패"),f.reject("order 상품 데이타 로드 실패")})}else f.reject("order recobell 로드 실패")},error:function(a,b,c){console.log("Data Error : order recobell 로드 실패"),f.reject("order recobell 로드 실패")}}),f.promise},this.loadCardData=function(){var b=c.defer(),e=d.myfeedDataUrl+"?type=P2&mode=2"+(o.isLogin?j():"");return d.isTestFlag&&(e="/json/myfeed/card.json"),a.get(e).success(function(a){b.resolve(a)}).error(function(){console.log("Data Error : 카드 데이타 로드 실패"),b.reject("카드 데이타 로드 실패")}),b.promise},this.loadPushData=function(){var b=c.defer(),e=encodeURIComponent(localStorage.getItem("amlist"))||"",f="/json/planshop/smart_alarm_list.json?c=mlotte&udid=&v=&cn=&cdn=&schema=&amlist="+e;return d.isTestFlag&&(f="/json/myfeed/push.json"),a.get(f).success(function(c){var e=c;if(!e)return b.reject("재고/신상품 상품 로드 실패"),b.promise;var f=d.myfeedDataUrl+"?type=P2&mode=3";d.isTestFlag&&(f="/json/myfeed/pushTitle.json"),a.get(f).success(function(a){a&&a.data&&a.data.goods_alarm_list?(e.title=a.data.goods_alarm_list.txt||"",b.resolve(e)):b.reject("재고/신상품 제목 로드 실패")}).error(function(){console.log("Data Error : 재고/신상품 제목 로드 실패"),b.reject("재고/신상품 제목 로드 실패")})}).error(function(){console.log("Data Error : 재고/신상품 상품 로드 실패"),b.reject("재고/신상품 상품 로드 실패")}),b.promise},this.loadWishData=function(b){var e=c.defer(),f=d.myfeedDataUrl+"?type=P2&mode=4&latest_prod="+b+j();return d.isTestFlag&&(f="/json/myfeed/wish.json"),a.get(f).success(function(a){e.resolve(a)}).error(function(){console.log("Data Error : 찜한 상품 로드 실패"),e.reject("찜한 상품 로드 실패")}),e.promise},this.loadWishRecom=function(b){var e=c.defer(),f="http://rb-rec-api-apne1.elasticbeanstalk.com/rec/a002?size=5&cps=false&format=jsonp&cuid=fdd29847-94cd-480d-a0d9-16144485d58b&iids="+b;return $.ajax({type:"post",async:!0,url:f,dataType:"jsonp",success:function(b){var c="",f=new Array;if(null!=b.results&&b.results.length>0){$(b.results).each(function(a,b){f.push(b.itemId)}),c=m(f);var g=d.myfeedDataUrl+"?type=P3&mode=1&limit_1=3&goods_nos_1="+c;d.isTestFlag&&(g="/json/myfeed/wishRecom.json"),a.get(g).success(function(a){e.resolve(a)}).error(function(){console.log("Data Error : 찜 상품 데이타 로드 실패"),e.reject("찜 상품 데이타 로드 실패")})}else e.reject("찜 추천 데이타 로드 실패")},error:function(a,b,c){e.reject("찜 추천 데이타 로드 실패")}}),e.promise},this.loadBrandData=function(){var b=c.defer(),e=d.myfeedDataUrl+"?type=P4&mode=1"+j()+l()+k();return d.isTestFlag&&(e="/json/myfeed/brand.json"),a.get(e).success(function(a){if(h.traceObj(a,"브랜드 4.0"),a&&a.data&&a.data.brnd_recomm_list&&a.data.brnd_recomm_list.prdList&&a.data.brnd_recomm_list.prdList.items&&a.data.brnd_recomm_list.prdList.items.length>0)for(var c=a.data.brnd_recomm_list.prdList.items,d=0,e=0,f=c.length>3?3:c.length,g=0;f>g&&!(c[g].brdNo&&(d++,n.loadBrandPrd(c[g].brdNo,g).then(function(c){h.traceObj(c,"brand 상품 "+c.idx),a.data.brnd_recomm_list.prdList.items[c.idx].subItem=c.max.prdLst.items,e++,e==f&&b.resolve(a)})["catch"](function(a){console.log("브랜드 추천 error ",a),b.reject("브랜드 추천 데이타 로드 실패")}),d>=3));g++);else b.resolve(a)}).error(function(){console.log("Data Error : 브랜드 로드 실패"),b.reject("브랜드 상품 로드 실패")}),b.promise},this.loadBrandPrd=function(b,e){var f=c.defer(),g="/json/category/new_cate_search_list.json?dispCnt=10&dpml_no=1&loadTerm=true&page=1&pageType=B&sort=TOT_ORD_CNT,1&upBrdNo="+b;return d.isTestFlag&&(g="/json/myfeed/brandPrd.json"),a.get(g).success(function(a){h.traceObj(a,"브랜드 검색 상품"),a.idx=e,f.resolve(a)}).error(function(){console.log("Data Error : 브랜드 검색 상품 로드 실패"),f.reject("브랜드 검색 상품 로드 실패")}),f.promise},this.loadSearchRecom=function(){var b=c.defer(),e=localStorage.getItem("myWord2016");if(null==e||""==e)return b.reject("검색키워드 없음"),b.promise;for(var f=JSON.parse(e),g="",i=0;i<f.list.length;i++)if(f.list[i].keytxt){g=f.list[i].keytxt;break}var j="http://rb-rec-api-apne1.elasticbeanstalk.com/rec/s001?size=15&cps=false&format=jsonp&cuid=fdd29847-94cd-480d-a0d9-16144485d58b&st="+g;return $.ajax({type:"post",async:!0,url:j,dataType:"jsonp",success:function(c){if(h.traceObj(c,"검색 recobell s001 "),c&&c.results&&c.results.length>2){for(var e="",f=0;f<c.results.length;f++)e+=(f>0?",":"")+c.results[f].itemId;var i=d.myfeedDataUrl+"?type=P3&mode=1&limit_1=15&goods_nos_1="+e;d.isTestFlag&&(i="/json/myfeed/search_prd.json"),a.get(i).success(function(a){h.traceObj(a,"검색 상품 "),a.keyword=g,g.length>7&&(a.keyword=g.substr(0,7)+"..."),b.resolve(a)}).error(function(){console.log("Data Error : 검색 상품 데이타 로드 실패"),b.reject("검색 상품 데이타 로드 실패")})}else b.reject("검색 recobell 데이타 로드 실패")},error:function(a,c,d){console.log("Data Error : 검색 recobell Data로드 실패"),b.reject("검색 recobell Data로드 실패")}}),b.promise},this.loadCategory=function(){var b=c.defer(),e=l(),f=d.myfeedDataUrl+"?type=P4&mode=3"+j()+e+k();return d.isTestFlag&&(f="/json/myfeed/category.json"),a.get(f).success(function(a){h.traceObj(a,"카테고리 상품");var c=a;if(a&&a.data&&a.data.txt&&e.indexOf("A")<0&&a.data.txt.indexOf("성")>0){var d=a.data.txt.split("성");c.data.user=d[0]+"성",c.data.txt=d[1]}b.resolve(c)}).error(function(){console.log("Data Error : 카테고리 로드 실패"),b.reject("카테고리 상품 로드 실패")}),b.promise}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteSideMylotte","lotteCommFooter","lotteSlider","lotteNgSwipe","lotteUtil"]);d.controller("MyFeedCtrl",["$scope","$window","$interval","$timeout","$filter","LotteCommon","LotteStorage","MyFeedService","LotteConsole","LotteUserService",function(a,c,d,e,f,g,h,i,j,k){function l(b){if(!b||0==b.length)return[];var c={imgUrl:a.screenType>1?"http://image.lotte.com/lotte/mo2017/myfeed/recomm_more_big.jpg":"http://image.lotte.com/lotte/mo2017/myfeed/recomm_more.jpg"};b.length%3!=0&&(b.push(c),b.length%3!=0&&b.push(c));for(var d=b.length,e=[],f=-1,g=0;d>g;g++)g%3==0&&(f++,e[f]=[]),e[f].push(b[g]);return e}function m(a){return!a||a.length<3?[]:(a.length%3!=0&&(a.pop(),a.length%3!=0&&a.pop()),a)}function n(a){if(!a||0==a.length)return[];for(var b=a.length,c=[],d=-1,e=0;b>e;e++)e%6==0&&(d++,c[d]=[]),c[d].push(a[e]);return c}function o(a){if(!a||isNaN(a))return a;if(a.length>8||a%1e4!=0)return a;var b=a.substr(0,a.length-4);return b+"만원"}function p(){var d=h.getSessionStorage("lotteMyFeedData","json")||null;if(i.setLoginInfo(a.loginInfo),a.locationHistoryBack&&d&&!g.isTestFlag)d.recently&&(a.recently=d.recently),d.recentlyRecom&&(a.recentlyRecom=d.recentlyRecom),d.recentlyPlan&&(a.recentlyPlan=d.recentlyPlan),d.orderRecom&&(a.orderRecom=d.orderRecom),d.pushProducts&&(a.pushProducts=d.pushProducts),d.wishes&&(a.wishes=d.wishes),d.wishesRecom&&(a.wishesRecom=d.wishesRecom),d.searchList&&(a.searchList=d.searchList),d.categoryList&&(a.categoryList=d.categoryList),a.callStatus=q.load_3,a.callCardData(),a.callBrandData();else{var e=h.getLocalStorage("latelyGoods")||"",f=e.split("|");e||(a.recently.hasLately="N");try{a.latelyGoods=f.join(",")}catch(j){}a.callRecentlyInit(a.latelyGoods),a.loginInfo.isLogin&&a.callOrderData();
}b.element(c).on("unload",function(b){var c={};c.recently=a.recently,c.recentlyRecom=a.recentlyRecom,c.recentlyPlan=a.recentlyPlan,c.orderRecom=a.orderRecom,c.pushProducts=a.pushProducts,c.wishes=a.wishes,c.wishesRecom=a.wishesRecom,c.searchList=a.searchList,c.categoryList=a.categoryList,h.setSessionStorage("lotteMyFeedData",c,"json")})}a.screenID="MyReco",a.showWrap=!0,a.contVisible=!0,a.subTitle="",a.latelyGoods="",a.swipeCurIdx=0,a.wishSwipeCurIdx=0,a.recentlyRecomIdx=0,a.recently={hasLately:"Y"},a.recentlyRecom={},a.recentlyPlan={},a.orderRecom={},a.cardList=[],a.pushProducts={},a.wishes={},a.wishesRecom=[],a.brandList={},a.brandRecom={},a.searchList={},a.categoryList={},a.tclickPrefix=a.tClickBase+a.screenID+"_",a.arrAlpha=["A","B","C","D","E","F","G","H","I","J","K"];var q={call_1:1,load_1:2,call_2:3,load_2:4,call_3:5};a.callStatus=q.call_1,a.cntLoading=0,a.checkLoading=function(b){return b?(a.cntLoading++,void(a.isShowLoading=!0)):(a.cntLoading--,void(0==a.cntLoading&&(a.isShowLoading=!1)))},a.scrollBottomCall=function(){return a.callStatus!==q.call_3&&a.callStatus?a.callStatus===q.load_1?(a.callStatus=q.call_2,a.callCardData(),a.callPushData(),void(a.loginInfo.isLogin&&a.callWishData(a.latelyGoods))):a.callStatus===q.load_2?(a.callStatus=q.call_3,a.callBrandData(),a.callSearchRecom(),void a.callCategory()):void 0:void 0},a.callbackCtrl=function(){a.callStatus===q.call_1?a.callStatus=q.load_1:a.callStatus===q.call_2&&(a.callStatus=q.load_2);var d=b.element(c);d.scrollTop()+d.height()>b.element(document).height()-b.element("#footer").height()&&a.scrollBottomCall()},a.callRecentlyInit=function(c){a.checkLoading(!0),i.loadRecentlyInit(c).then(function(c){if(j.traceObj(c,"0 RecentlyInit success","green"),c&&c.data&&c.data.latest_prod_list&&c.data.latest_prod_list.prdList&&c.data.latest_prod_list.prdList.items&&c.data.latest_prod_list.prdList.items.length>0){a.recently.items=l(c.data.latest_prod_list.prdList.items);for(var d="",f=0;f<a.recently.items[0].length;f++)d+=(f>0?",":"")+a.recently.items[0][f].goodsNo;a.callRecentlyData(d),a.recently.topTxt=c.data.latest_prod_list.topTxt||"",a.recently.txt=c.data.latest_prod_list.txt||"",e(function(){b.element(".recently_wrap .swipe_wrap > ul > li.item"+a.swipeCurIdx).addClass("on")},100)}else a.callStatus=q.load_1,a.scrollBottomCall()})["catch"](function(a){console.log("0 RecentlyInit error ",a)})["finally"](function(){a.callbackCtrl(),a.checkLoading()})},a.callRecentlyData=function(c){a.checkLoading(!0),i.loadRecentlyData(c,a.recently.hasLately).then(function(c){if(j.traceObj(c,"1 RecentlyData success","green"),c)if(c.data.latest_prod_recomm_list&&c.data.latest_prod_recomm_list.prdList&&c.data.latest_prod_recomm_list.prdList.items&&c.data.latest_prod_recomm_list.prdList.items.length>0?(a.recentlyRecomIdx=0,a.recentlyRecom.items=m(c.data.latest_prod_recomm_list.prdList.items),a.recentlyRecom.txt=c.data.latest_prod_recomm_list.txt||"",a.recentlyRecom.slice=n(a.recentlyRecom.items)):a.recentlyRecom.items=[],c.data.spdp_recomm_list&&c.data.spdp_recomm_list.items&&c.data.spdp_recomm_list.items.length>0){var d=!1;if(a.recentlyPlan.items&&a.recentlyPlan.items.length>0&&(d=!0),a.recentlyPlan.txt=c.data.spdp_recomm_list.txt,a.recentlyPlan.items=c.data.spdp_recomm_list.items,!d)return;var e=b.element(".recently_plan .swipe_wrap");setTimeout(function(){e.scope().reset()},300)}else a.recentlyPlan.items=[]})["catch"](function(a){console.log("1 RecentlyData error ",a)})["finally"](function(){a.callbackCtrl(),a.checkLoading()})},a.recentlyRecomMore=function(){a.recentlyRecomIdx<a.recentlyRecom.slice.length-1?a.recentlyRecomIdx++:a.recentlyRecomIdx=0,a.sendTclick(a.tclickPrefix+"RctView_Clk_Btn01")},a.callOrderData=function(){a.checkLoading(!0),i.loadOrderData().then(function(b){j.traceObj(b,"2 OrderData success","green"),b&&(a.orderRecom=b)})["catch"](function(a){console.log("2 OrderData error ",a)})["finally"](function(){a.callbackCtrl(),a.checkLoading()})},a.callCardData=function(){a.checkLoading(!0),i.loadCardData().then(function(c){if(j.traceObj(c,"3 CardData success","green"),c&&c.data&&c.data.card_recomm&&c.data.card_recomm.event_list&&c.data.card_recomm.prom_list){var g=c.data.card_recomm.event_list,h=c.data.card_recomm.prom_list,i={},k=[],l=["#9cb5d4","#99d2cb","#d899a2"];if(!a.appObj.isApp){for(var m=0;m<h.length;m++){var n=h[m].card_knd_cd;i[n]?i[n].multi||(i[n].multi=!0,i[n].aply_lmt_amt=o(""+i[n].aply_lmt_amt),i[n].aply_lmt_amt+="/"+o(""+h[m].aply_lmt_amt),i[n].fvr_val+="/"+h[m].fvr_val):(i[n]=h[m],i[n].sort=m)}for(var p in i)k.push(i[p]);k=f("orderBy")(k,"sort",!1)}a.cardList=g.concat(k);for(var q=0;q<a.cardList.length;q++)a.cardList[q].idx=q,a.cardList[q].remain_time=a.cardList[q].pur_diff_dtime||a.cardList[q].prom_diff_dtime,a.cardList[q].color=l[q%3],function(b){var c=d(function(){for(var e=-1,f=0;f<a.cardList.length;f++)if(a.cardList[f].idx==b){e=f;break}-1!=e&&(a.cardList[e].remain_time=a.setCardTime(a.cardList[e].remain_time),"00:00:00"==a.cardList[e].remain_time&&(d.cancel(c),a.cardList.splice(e,1)))},1e3)}(q);e(function(){b.element(b.element(".card_wrap .indicator li")[0]).addClass("on")})}})["catch"](function(a){console.log("3 CardData error ",a)})["finally"](function(){a.callbackCtrl(),a.checkLoading()})},a.callPushData=function(){a.checkLoading(!0),i.loadPushData().then(function(b){j.traceObj(b,"4 PushData success","green"),b&&b.smart_alarm_list&&b.smart_alarm_list.alarm_list&&b.smart_alarm_list.alarm_list.items&&0!=b.smart_alarm_list.alarm_list.items.length&&(a.pushProducts.items=b.smart_alarm_list.alarm_list.items,a.pushProducts.title=b.title)})["catch"](function(a){console.log("4 PushData error ",a)})["finally"](function(){a.callbackCtrl(),a.checkLoading()})},a.callWishData=function(c){a.checkLoading(!0),i.loadWishData(c).then(function(c){j.traceObj(c,"5 WishData success","green"),c&&c.data&&c.data.goods_15day_list_other&&(a.wishes.title=c.data.goods_15day_list_other.txt),c&&c.data&&c.data.goods_15day_list_save&&c.data.goods_15day_list_save.prdList&&c.data.goods_15day_list_save.prdList.items&&0!=c.data.goods_15day_list_save.prdList.items.length&&(a.wishes.items=c.data.goods_15day_list_save.prdList.items,a.wishes.txt=c.data.goods_15day_list_save.txt,a.callWishRecom(a.wishes.items[0].goodsNo),e(function(){b.element(".wish_wrap .swipe_wrap > ul > li.wish"+a.wishSwipeCurIdx).addClass("on")},100))})["catch"](function(a){console.log("5 WishData error ",a)})["finally"](function(){a.callbackCtrl(),a.checkLoading()})},a.callWishRecom=function(b){a.checkLoading(!0),i.loadWishRecom(b).then(function(b){if(j.traceObj(b,"6 WishRecom success","green"),a.wishesRecom=[],b&&b.data&&b.data.goods_list_1&&b.data.goods_list_1.prdList&&b.data.goods_list_1.prdList.items&&0!=b.data.goods_list_1.prdList.items.length)for(var c=0;c<b.data.goods_list_1.prdList.items.length&&(a.wishesRecom.push(b.data.goods_list_1.prdList.items[c]),2!=c);c++);})["catch"](function(b){a.wishesRecom=[],console.log("6 WishRecom error ",b)})["finally"](function(){a.callbackCtrl(),a.checkLoading()})},a.callBrandData=function(){a.checkLoading(!0),i.loadBrandData().then(function(c){if(j.traceObj(c,"7 BrandData success","green"),c){if(c.data&&c.data.brnd_new_list&&(a.brandList=c.data.brnd_new_list),c.data&&c.data.brnd_recomm_list){var d=c.data.brnd_recomm_list;if(d.btmTxt&&d.btmTxt.indexOf("성별/연령별")>-1&&d.topTxt&&d.topTxt.indexOf("성")>0){var f=d.topTxt.split("성");if(f[0].indexOf("요즘")>-1){d.prefix="요즘";var g=f[0].split("요즘");d.user=g[1]+"성"}else d.user=f[0]+"성";d.subtitle=f[1]}a.brandRecom=d}e(function(){b.forEach(b.element(".brand_wrap .swipe_wrap"),function(a,c){b.element(a).on("slide",function(a){a.posX>=0?b.element(this).parent().removeClass("posx0").addClass("posx0"):b.element(this).parent().removeClass("posx0")})})})}})["catch"](function(a){console.log("7 BrandData error ",a)})["finally"](function(){a.checkLoading()})},a.callSearchRecom=function(){a.checkLoading(!0),i.loadSearchRecom().then(function(b){j.traceObj(b,"8 SearchRecom success","green"),b&&b.data&&b.data.goods_list_1&&b.data.goods_list_1.prdList&&b.data.goods_list_1.prdList.items&&0!=b.data.goods_list_1.prdList.items.length&&(a.searchList=b)})["catch"](function(a){console.log("8 SearchRecom error ",a)})["finally"](function(){a.checkLoading()})},a.callCategory=function(){a.checkLoading(!0),i.loadCategory().then(function(b){j.traceObj(b,"9 Category success","green"),b&&b.data&&(a.categoryList=b.data)})["catch"](function(a){console.log("9 Category error ",a)})["finally"](function(){a.checkLoading()})},k.promiseLoginInfo().then(function(b){a.loginInfo=b,j.warn(a.loginInfo),p(),a.subTitle=(a.loginInfo.isLogin?a.loginInfo.name:"고객")+"님을 위한 MY추천"})["catch"](function(b){a.loginInfo=b,j.info(a.loginInfo),p(),a.subTitle=(a.loginInfo.isLogin?a.loginInfo.name:"고객")+"님을 위한 MY추천"}),a.addZero=function(a){return 10>a&&(a="0"+a),a}}]),d.filter("pushDate",function(){return function(a){var b=a.split(" "),c=new Date(b[0]),d=c.getFullYear()+"."+(c.getMonth()+1)+"."+c.getDate();return d}}),d.filter("delDot",function(){return function(a){var b=a.split("...");return b[0]}}),d.directive("lotteContainer",["LotteCommon","LotteUtil","LotteStorage","$window","$timeout","$http",function(c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/myfeed/myfeed_container.html",replace:!0,link:function(e,i,j){function k(a){return 10>a?"0"+a:a+""}function l(a){var b="A";if(!a)return b;if(a>0&&20>a)return"20";if(a>=60)return"50";try{b=10*Math.floor(a/10)}catch(c){}return b}var m=b.element(document.body).scope(),n=b.element(f);n.scroll(function(){n.scrollTop()+n.height()>b.element(document).height()-b.element("#footer").height()&&m.scrollBottomCall()}),e.goLoginClick=function(){var a="&tclick="+e.tclickPrefix+"Login_Clk_Btn01&targetUrl="+encodeURIComponent(c.baseUrl+c.myfeedUrl+"?"+e.baseParam,"UTF-8");f.location.href=c.loginUrl+"?"+e.baseParam+a},e.swipeComplete=function(a){e.swipeCurIdx=a,b.element(".recently_wrap .swipe_wrap > ul > li").removeClass("on"),b.element(".recently_wrap .swipe_wrap > ul > li.item"+a).addClass("on");for(var c="",d=0;d<e.recently.items[a].length;d++)c+=(d>0?",":"")+e.recently.items[a][d].goodsNo;e.callRecentlyData(c),e.sendTclick(e.tclickPrefix+"RctView_Swp_Unit"+e.addZero(a+1))},e.wishSwipeComplete=function(a){e.wishSwipeCurIdx=a,b.element(".wish_wrap .swipe_wrap > ul > li").removeClass("on"),b.element(".wish_wrap .swipe_wrap > ul > li.wish"+a).addClass("on"),e.callWishRecom(e.wishes.items[e.wishSwipeCurIdx].goodsNo),e.sendTclick(e.tclickPrefix+"Pick_Swp_Unit"+e.addZero(a+1))},e.cardSwipeComplete=function(a){b.element(".card_wrap .indicator li").removeClass("on"),b.element(b.element(".card_wrap .indicator li")[a]).addClass("on")},e.setCardTime=function(a){var b=a.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);return 0==c&&0==d&&0==e?"00:00:00":(e&&e>0?e-=1:0==e&&(d&&d>0?(d-=1,e=59):0==d&&c&&c>0&&(c-=1,d=59,e=59)),k(c)+":"+k(d)+":"+k(e))},e.goProductView=function(b,d,f,g){b&&(a.location.href=c.productviewUrl+"?"+e.baseParam+"&goods_no="+b+"&curDispNo=5589895"+(f?"&curDispNoSctCd="+f:"")+(g?"&_reco="+g:"")+"&tclick="+e.tclickPrefix+d)},e.goPlanView=function(b,c,d){a.location.href=b+"&"+e.baseParam+(d?"&_reco="+d:"")+"&tclick="+e.tclickPrefix+"RctView_Swp_Ban_"+m.arrAlpha[m.swipeCurIdx]+k(c+1)},e.goMain=function(a,b,d,g){m.clearSessionStorage();var h=c.mainUrl+"?"+e.baseParam+"&dispNo="+a+"&tclick="+e.tclickPrefix+d;"card"==b?(h+=k(g+1),h+="&prom=true"):"category"==b&&(m.loginInfo.genSctCd&&(h+="&gender="+m.loginInfo.genSctCd),m.loginInfo.mbrAge&&(h+="&age="+l(m.loginInfo.mbrAge))),f.location.href=h},e.goCardEvent=function(b,d){a.location.href=c.eventSaunMain+"?"+e.baseParam+"&evt_no="+b+"&tclick="+e.tclickPrefix+"Event_Swp_Ban"+k(d+1)},e.showAppConfig=function(){e.sendTclick(e.tclickPrefix+"SmartPush_Btn01"),d.boolAndroid(navigator.userAgent)?a.lottebridge.opensetting("on"):d.boolAppInstall(navigator.userAgent)&&(location.href="lottebridge://opensetting")},e.goBrandShop=function(b,d){a.location.href=c.brandShopSubUrl+"?"+e.baseParam+"&upBrdNo="+b+"&tclick="+e.tclickPrefix+d},e.brandClick=function(b,c){a.location.href=b+"?"+e.baseParam+"&tclick="+e.tclickPrefix+c},e.brandBookMark=function(a,d,f,g){if(!e.loginInfo.isLogin)return alert("로그인 후 이용하실 수 있습니다."),e.loginProc(),!1;if(!b.element(".myfeed .brand_wrap").hasClass("pending")){b.element(".myfeed .brand_wrap").addClass("pending");var i=b.element(f.currentTarget),j=i.parents("li.item").hasClass("on"),k=c.myBrandInfo+"?flag="+(j?"d":"i")+"&brnd_no="+a,l={method:"get",url:k};e.checkLoading(!0),h(l).success(function(a){j?(i.parents("li.item").removeClass("on"),e.showAlertPop(d+" 브랜드가 즐겨찾기에서 삭제되었습니다.")):(i.parents("li.item").addClass("on"),e.showAlertPop(d+" 브랜드가 즐겨찾기에 추가되었습니다."))})["finally"](function(){b.element(".myfeed .brand_wrap").removeClass("pending"),m.checkLoading()}),e.sendTclick(e.tclickPrefix+"BrdReco_Clk_Btn"+e.arrAlpha[g])}},e.showAlertPop=function(a){var c=b.element(".header_alert_pop");c.find(".msg").text(a),c.fadeIn(500,function(){g(function(){c.fadeOut(500)},1e3)})}}}}])}(window,window.angular);