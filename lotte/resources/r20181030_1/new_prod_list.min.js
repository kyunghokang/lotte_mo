!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteUtil","lotteSideCtg","lotteCommFooter","lotteProduct","lotteNgSwipe","lotteVideo","cateSideFilter","searchPlanShop","searchDetailPopup"]);d.controller("CateProdListCtrl",["$window","$location","$http","$scope","$timeout","$filter","LotteStorage","LotteCommon","commInitData",function(a,b,d,e,f,g,h,i,j){function k(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}e.showWrap=!0,e.contVisible=!0,e.productMoreScroll=!0,e.screenID="side_cate_catesmall",e.subTitle="",e.templateType="cate_prod_normal",e.currentItem=1,e.totalItem=0,e.tClickBase="m_RDC_",(e.screenDataReset=function(){e.pageOptions={selectCategory:0,selectCategoryCode:"",selectCategoryParentNo:0,selectCategoryDepth:1},e.screenData={idx:"",mGrpNo:""}})(),j.query.mGrpNo!=c&&(e.screenData.mGrpNo=j.query.mGrpNo),j.query.curDispNo!=c&&(e.pageOptions.selectCategory=j.query.curDispNo),j.query.disp_no!=c&&(e.pageOptions.selectCategory=j.query.disp_no),j.query.idx!=c&&(e.screenData.idx=j.query.idx),e.curDispNo=e.pageOptions.selectCategory,e.curDispNoSctCd=73,e.cateViewFlag=!1,e.cateView=function(){e.sendTclick("m_DC_new_prod_list_Clk_Ttl"),e.cateViewFlag=!e.cateViewFlag},e.cateDepth1="",e.cateDepth2="",e.depthCurDispNo="",e.paramTitle=k("cateDepth1"),e.paramSubTitle=k("cateDepth2"),e.paramCurDispNo=k("curDispNo"),e.paramCurDispNo2=k("curDispNo2"),""==k("cateDepth1")?e.cateDepth1="":e.paramTitle.length>=1&&(e.cateDepth1=e.paramTitle),""==k("paramCurDispNo")?e.depthCurDispNo="":e.paramCurDispNo.length>=1&&(e.depthCurDispNo=e.paramCurDispNo),e.paramSubTitle.length>=1&&(e.cateDepth2=e.paramSubTitle),e.paramCurDispNo2.length>=1&&(e.curDispNo=e.paramCurDispNo2);var l=2,m=228;document.body.clientWidth>=640&&(l=3,m=324),document.body.clientWidth>=870&&(l=4),e.imageMargin=-1*parseInt((m-parseInt(document.body.clientWidth/l,10))/2,10)+"px"}]),d.directive("subHeaderProdList",["$window",function(a){return{replace:!0,link:function(c,d,e){function f(){c.appObj.isNativeHeader&&(h=0)}var g=(b.element(d),b.element(a)),h=c.subHeaderHeight;g=b.element(a),h=c.subHeaderHeight,g.on("scroll",function(a){f(),setTimeout(f,300)})}}}]),commModule.directive("scrollCount",["$window","LotteCommon",function(c,d){return{template:'<div ng-show="srhResultData.tCnt && srhResultData.tCnt > 0" class="count_wrap"><span class="count">{{currentItem|number}}/{{srhResultData.tCnt|number}}</span></div>',replace:!0,link:function(d,e,f){b.element(c).on("scroll",function(b){$(".count_wrap").stop().show(),clearTimeout($(".count_wrap").data("scroll")),setTimeout(function(){$(".count_wrap").fadeOut()},1e3),d.totalItem=$(".listWrap ol > li").length;for(var c=-1,e=-1,f=0;f<d.totalItem;f++){var g=$($(".listWrap ol > li")[f]),h=g.offset().top;if(a.scrollY-h<=100&&-1==c&&(c=f,e=a.scrollY-h),-1!=c&&a.scrollY-h<=100&&a.scrollY-h!=e){d.currentItem=f;break}}})}}}]),d.directive("lotteContainer",["$window","LotteCommon",function(a,b){return{templateUrl:"/lotte/resources_dev/category/m/new_prod_list_container.html",replace:!0,link:function(a,b,c){}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("cateSideFilter",["lotteComm"]);d.controller("CateSideFilterCtrl",["$scope","LotteCommon",function(a,b){}]),d.directive("cateSideFilter",["LotteCommon","LotteUtil","LotteStorage","$window","$timeout","$http","$location","$filter","commInitData",function(d,e,f,g,h,i,j,k,l){return{templateUrl:"/lotte/resources_dev/category/m/cate_side_filter.html",replace:!0,link:function(e,m,n){function o(){var a=j.absUrl();a.indexOf(e.URLs.subPageBrand)>=0?e.uiStateObj.currentPageType="B":a.indexOf(e.URLs.subPageSpecial)>=0&&(e.uiStateObj.currentPageType="S")}function p(a){if(a==c)return void(e.srhDetailData.srhColorList=[]);for(var b,d=a.length,f=0;d>f;f++)b=a[f],b.selected=e.postParams.selectedColor.indexOf(b.colorCd)>=0;e.srhDetailData.srhColorList=a}function q(){if(e.srhResultData.ctgLst!=c&&e.srhResultData.ctgLst.items!=c){var a;b.forEach(e.srhResultData.ctgLst.items,function(b){b.subCtgLst!=c&&b.subCtgLst.items!=c&&1==b.subCtgLst.items.length&&(a=b.subCtgLst.items[0],b.ctgNo=a.ctgNo,b.depthMod=!0,delete b.subCtgLst)})}}function r(a,d){if(a!=c&&a.items!=c&&d.items!=c&&d.items.length>0){var f=d.items[0];if(f==c)return;var g=f.ctgNo;if(f.subCtgLst==c||f.subCtgLst.items==c||0==f.subCtgLst.items.length)b.element("#ctg_"+g).addClass("nochild");else for(var i,j,k=a.items.length,l=0;k>l;l++){if(i=a.items[l],i.ctgNo==g){if(i.subCtgLst==c){i.subCtgLst=f.subCtgLst;var m=$("#ctg_"+g);m.hasClass("open")||h(function(){e.categoryAccordian(m)},200)}return!0}if(i.subCtgLst!=c&&(j=r(i.subCtgLst,d),j===!0))break}}}function s(){if(o(),null==history.state||"catesub"!=history.state.name)location.host.indexOf("localhost")>=0||history.replaceState({name:"catesub"},"catesub"),e.loadDataParams();else{var a=f.getSessionStorage(e.screenID+"srhLst","json");if(a==c||a.srhResultData==c||"undefined"==typeof a.srhResultData.resultCode){try{console.log("Data Load")}catch(d){}e.loadDataParams()}else{if(location.pathname.indexOf("/category/m/brand_prod_list.do")>-1)return void e.loadDataParams();e.uiStateObj=a.uiStateObj,e.postParams=a.postParams,e.srhResultData=a.srhResultData,e.srhDetailData=a.srhDetailData,(e.isShowLoading||e.productListLoading)&&(e.productListLoading=!1,e.isShowLoading=!1);var i=f.getSessionStorage(e.screenID+"srhLstNowScrollY");h(function(){b.element(g).scrollTop(i)},300),h(function(){e.retriveTemplateType()},0),f.delSessionStorage(e.screenID+"srhLstLoc"),f.delSessionStorage(e.screenID+"srhLst"),f.delSessionStorage(e.screenID+"srhLstNowScrollY")}}b.element(g).on("unload",function(){var a={};e.uiStateObj.templateType=e.templateType,a.uiStateObj=e.uiStateObj,a.postParams=e.postParams,a.srhResultData=e.srhResultData,a.srhDetailData=e.srhDetailData,f.setSessionStorage(e.screenID+"srhLstLoc",j.absUrl()),f.setSessionStorage(e.screenID+"srhLst",a,"json"),f.setSessionStorage(e.screenID+"srhLstNowScrollY",b.element(g).scrollTop())}),b.element(g).on("popstate",function(a){e.tipShow=!1,3==e.curSideStatus?e.hideSubSearch():2==e.curSideStatus?e.closeSideSearch():e.searchUISetting.isShowSideBar&&history.back()})}function t(){var a;b.forEach(e.srhResultData.ctgLst.items,function(d){a="롯데백화점"==d.mall,a||(d.checked=!1,d.subChecked=!1,d.subHeight=0,d.subCtgLst!=c&&d.subCtgLst.items!=c&&b.forEach(d.subCtgLst.items,function(a){a.checked=!1,a.subChecked=!1,a.subHeight=0,a.subCtgLst!=c&&a.subCtgLst.items!=c&&b.forEach(a.subCtgLst.items,function(a){a.checked=!1,a.subChecked=!1,a.subHeight=0,a.subCtgLst!=c&&a.subCtgLst.items!=c&&b.forEach(a.subCtgLst.items,function(a){a.checked=!1,a.subChecked=!1,a.subHeight=0,a.subCtgLst!=c&&a.subCtgLst.items!=c&&b.forEach(a.subCtgLst.items,function(a){a.checked=!1,a.subChecked=!1,a.subHeight=0})})})}))}),u(),e.postParams.ctgNo="",e.postParams.dsCtgDepth=null,e.postParams.ctgDepth1=e.uiStateObj.selectedCategory.depth1.join(","),e.postParams.ctgDepth2=e.uiStateObj.selectedCategory.depth2.join(","),e.postParams.ctgDepth3=e.uiStateObj.selectedCategory.depth3.join(","),e.postParams.ctgDepth4=e.uiStateObj.selectedCategory.depth4.join(","),e.postParams.ctgDepth5=e.uiStateObj.selectedCategory.depth5.join(",")}function u(){var a=[],d=[],f=[],g=[],h=[],i=[];b.forEach(e.srhResultData.ctgLst.items,function(e){e.subCtgLst!=c&&e.subCtgLst.items!=c&&b.forEach(e.subCtgLst.items,function(a){a.subCtgLst!=c&&a.subCtgLst.items!=c&&b.forEach(a.subCtgLst.items,function(d){d.subCtgLst!=c&&d.subCtgLst.items!=c&&b.forEach(d.subCtgLst.items,function(f){f.subCtgLst!=c&&f.subCtgLst.items!=c&&b.forEach(f.subCtgLst.items,function(b){b.checked===!0&&(e.checked=!1,a.checked=!1,d.checked=!1,f.checked=!1,e.subChecked=!0,a.subChecked=!0,d.subChecked=!0,f.subChecked=!0,e.subHeight=$("#ctg_"+e.ctgNo).find("ul").height(),a.subHeight=$("#ctg_"+a.ctgNo).find("ul").height(),d.subHeight=$("#ctg_"+d.ctgNo).find("ul").height(),f.subHeight=$("#ctg_"+f.ctgNo).find("ul").height(),h.push(b.ctgNo),i.push(b.ctgName))}),f.checked===!0&&(e.checked=!1,a.checked=!1,d.checked=!1,e.subChecked=!0,a.subChecked=!0,d.subChecked=!0,e.subHeight=$("#ctg_"+e.ctgNo).find("ul").height(),a.subHeight=$("#ctg_"+a.ctgNo).find("ul").height(),d.subHeight=$("#ctg_"+d.ctgNo).find("ul").height(),e.depthMod===!0?h.push(f.ctgNo):g.push(f.ctgNo),i.push(f.ctgName))}),d.checked===!0&&(e.checked=!1,a.checked=!1,e.subChecked=!0,a.subChecked=!0,e.subHeight=$("#ctg_"+e.ctgNo).find("ul").height(),a.subHeight=$("#ctg_"+a.ctgNo).find("ul").height(),e.depthMod===!0?g.push(d.ctgNo):f.push(d.ctgNo),i.push(d.ctgName))}),a.checked===!0&&(e.checked=!1,e.subChecked=!0,e.subHeight=$("#ctg_"+e.ctgNo).find("ul").height(),e.depthMod===!0?f.push(a.ctgNo):d.push(a.ctgNo),i.push(a.ctgName))}),e.checked===!0&&(e.depthMod===!0?d.push(e.ctgNo):a.push(e.ctgNo),i.push(e.ctgName))}),e.uiStateObj.srhFilterCtgFlag=i.length>0,e.uiStateObj.selectedCategory.depth1=a,e.uiStateObj.selectedCategory.depth2=d,e.uiStateObj.selectedCategory.depth3=f,e.uiStateObj.selectedCategory.depth4=g,e.uiStateObj.selectedCategory.depth5=h,e.uiStateObj.selectedCategory.ctgName=i}function v(){e.postParams.price=null,e.uiStateObj.priceTypeIdx=-1}function w(a,d){if(a!=c&&a.items!=c){var e=a.items;b.forEach(e,function(a){d&&d===a.ctgDepth||(a.checked=!1,a.subChecked=!1,a.subHeight=0),w(a.subCtgLst,d)})}}function x(){var a=f.getSessionStorage(e.screenID+"_fontsize");"1"===a&&b.element("body").addClass("enlargeFont")}e.isShowLoading=!1,e.productListLoading=!1,e.searchTermsLoading=!1,e.searchTermsChanged=!1,e.productMoreScroll=!0,e.tipShow=!1,e.ctgInitFlag=!1,e.firstLoad=!0,e.curSideStatus=1,l.query.curDispNo!=c&&(e.curDispNo=l.query.curDispNo),e.uiStateObj={templateType:"templateType",initFlag:!0,srhFilterSelectedIdx:-1,srhFilterCtgDepth1CtgNo:"",srhFilterCtgDepth:0,srhFilterCtgFlag:!1,srhFilterBrdFlag:!1,srhFilterBrdSort:"brdName",srhFilterDetailFlag:!1,srhFilterDetailArr:["smpickYN","freeDeliYN","freeInstYN","pointYN","isCrsPickYn","isDlvToday","isDlvQuick"],srhFilterSortFlag:!1,sortTypeIdx:0,sortTypeArr:[{label:"판매순",shortLabel:"판매순",value:"TOT_ORD_CNT,1",shortIdx:0},{label:"상품평 많은순",shortLabel:"상품평",value:"TOT_REVIEW_CNT,1",shortIdx:1},{label:"MD 추천순",shortLabel:"MD 추천",value:"EXT_CHAR_FT3,0/TOT_ORD_CNT,1/DATE,1",shortIdx:5},{label:"최근등록순",shortLabel:"최근등록",value:"DATE,1",shortIdx:2},{label:"낮은가격순",shortLabel:"낮은가격",value:"DISP_PRICE,0",shortIdx:3},{label:"높은가격순",shortLabel:"높은가격",value:"DISP_PRICE,1",shortIdx:4}],priceMinUFocus:!1,priceMaxUFocus:!1,emptyResult:!1,emptyKeyword:!1,emptyPrdLstFlag:!1,ajaxPageEndFlag:!1,smpickLayerOpenFlag:!1,smpickBranchName:"전체",relatedKeywordNotEmpty:!0,relatedKeywordEnabled:!0,detailSearchDataLoaded:!1,selectedCategory:{depth1:[],depth2:[],depth3:[],depth4:[],depth5:[],ctgName:[]},currentPageType:"C",srhFilterPriceFlag:!1,priceTypeIdx:-1,priceTypeArr:[{label:"~5만원 미만",shortLabel:"~50,000원",value:",50000",shortIdx:0},{label:"5만원 ~ 10만원",shortLabel:"50,000원~100,000원",value:"50000,100000",shortIdx:1},{label:"10만원 ~ 30만원",shortLabel:"100,000원~300,000원",value:"100000,300000",shortIdx:2},{label:"30만원 ~ 100만원",shortLabel:"300,000원~1,000,000원",value:"300000,1000000",shortIdx:3},{label:"100만원 이상",shortLabel:"1,000,000원~",value:"1000000,",shortIdx:4}],subTitle:"",brandArr:[],selectedFilter:0,priceOptionOpend:!0,priceInputOpend:!1,arrOpenCtgCd:[],filterCateCnt:0},e.srhDetailPriceValidateFlag=!0,e.searchUISetting={isShowSideBar:!1,isShowSub:!1,title:"카테고리",keywordIncExc:!1,researchTypeArr:[{label:"포함단어"},{label:"제외단어"}],researchIdx:0,isAndroidChrome:!1,showCSBalloon:!1,smartPickSub:!0,smartPickList:!1},e.URLs={searchList:d.cateListData2016,searchTerm:d.cateTermData2016,subPageCate:d.cateProdListUrl,subPageBrand:d.brandShopSubUrl,subPageSpecial:d.mallSubUrl},e.postParams={rtnType:"",keyword:"",orgKeyword:"",dpml_no:"1",dispCnt:30,page:1,ctgNo:"",ctgDepth:0,brdNoArr:[],brdNmArr:[],sort:e.uiStateObj.sortTypeArr[0].value,deptYN:"N",smpickYN:"N",smpBranchNo:"",freeDeliYN:"N",freeInstYN:"N",pointYN:"N",isCrsPickYn:"N",isDlvToday:"N",isDlvQuick:"N",selectedColor:[],rekeyword:"",reQuery:[],exQuery:[],priceMinU:null,priceMaxU:null,brdNm:"",mGrpNo:"",upBrdNo:"",cateNo:"",cateDepth:""},e.srhResultData={},e.srhDetailData={srhTerms:{dept:!1,tvhome:!1,smpick:!1,smpickBranch:[],brdstore:!1,"super":!1,seven:!1,tdar:!1,quick:!1},srhColorList:[]},e.showQuick=!1;var y=parseInt(""+(new Date).getHours()+(new Date).getMinutes(),10);if(y>=900&&1630>=y&&(e.showQuick=!0),e.postParams.keyword="",e.postParams.orgKeyword="",l.query.cateNo!=c&&(e.postParams.cateNo=l.query.cateNo),l.query.mGrpNo!=c&&(e.postParams.mGrpNo=l.query.mGrpNo),l.query.upBrdNo!=c&&(e.postParams.upBrdNo=l.query.upBrdNo),l.query.cateDepth!=c&&(e.postParams.cateDepth=l.query.cateDepth),l.query.sort!=c){var z=parseInt(l.query.sort,10);if(!isNaN(z))for(var A=0;A<e.uiStateObj.sortTypeArr.length;A++)if(e.uiStateObj.sortTypeArr[A].shortIdx==z){e.postParams.sort=e.uiStateObj.sortTypeArr[A].value,e.uiStateObj.sortTypeIdx=A;break}}e.changeTemplate=function(a){switch(e.templateType=a,f.setLocalStorage(e.screenID+"TemplateTypeDC",a),a){case"cate_prod_normal":e.searchTclick2016("C","Clk_Pcto1");break;case"cate_prod_double":e.searchTclick2016("C","Clk_Pcto2");break;case"cate_prod_image":e.searchTclick2016("C","Clk_Pcto3");break;case"cate_prod_single":e.searchTclick2016("C","Clk_Pcto4")}},e.retriveTemplateType=function(){var a=f.getLocalStorage(e.screenID+"TemplateTypeDC");"cate_prod_image"!=a&&"cate_prod_single"!=a&&"cate_prod_double"!=a&&(a="cate_prod_normal"),e.templateType=a},e.loadMoreData=function(){$(a).height()!=$(document).height()&&(e.postParams.rtnType="P",e.loadDataParams(e.postParams.rtnType))},e.loadDataParams=function(a,f){if(e.isShowLoading||e.productListLoading||e.searchTermsLoading)return!1;a||(a="");var g={};switch(g.page=1,g.curDispNo=e.postParams.curDispNo,a){case"P":g.page=++e.postParams.page;case"S":g.sort=e.postParams.sort;case"B":case"E":"Y"==e.postParams.deptYN&&(g.deptYN=e.postParams.deptYN),"Y"==e.postParams.smpickYN&&(g.smpickYN=e.postParams.smpickYN),"Y"==e.postParams.smpickYN&&""!=e.postParams.smpBranchNo&&(g.smpBranchNo=e.postParams.smpBranchNo),"Y"==e.postParams.freeDeliYN&&(g.freeDeliYN=e.postParams.freeDeliYN),"Y"==e.postParams.freeInstYN&&(g.freeInstYN=e.postParams.freeInstYN),"Y"==e.postParams.pointYN&&(g.pointYN=e.postParams.pointYN),"Y"==e.postParams.isCrsPickYn&&(g.isCrsPickYn="Y"),"Y"==e.postParams.isDlvToday&&(g.isDlvToday="Y"),"Y"==e.postParams.isDlvQuick&&(g.isDlvQuick="Y"),e.postParams.priceMinU!=c&&(g.priceMinU=e.postParams.priceMinU),e.postParams.priceMaxU!=c&&(g.priceMaxU=e.postParams.priceMaxU),g.colorCd=e.postParams.selectedColor.join(","),e.postParams.brdNoArr&&e.postParams.brdNoArr.length>0&&(g.brdNo=e.postParams.brdNoArr.join());case"C":case"K":default:e.postParams.ctgNo&&(g.ctgNo=e.postParams.ctgNo),e.postParams.dsCtgDepth&&(g.dsCtgDepth=e.postParams.dsCtgDepth),""!=e.postParams.ctgDepth1&&(g.ctgDepth1=e.postParams.ctgDepth1),""!=e.postParams.ctgDepth2&&(g.ctgDepth2=e.postParams.ctgDepth2),""!=e.postParams.ctgDepth3&&(g.ctgDepth3=e.postParams.ctgDepth3),""!=e.postParams.ctgDepth4&&(g.ctgDepth4=e.postParams.ctgDepth4),""!=e.postParams.ctgDepth5&&(g.ctgDepth5=e.postParams.ctgDepth5),g.rtnType=a,g.keyword="";var h="",i=""+e.postParams.reQuery.join(" ");g.keyword=i,h=""==g.keyword?"":" ";var j=""+e.postParams.exQuery.join(" !");""!=j&&(g.keyword+=h+"!"+j),g.sort=e.postParams.sort,b.element("#rekeyword").blur()}switch(""!=e.postParams.mGrpNo&&(g.mGrpNo=e.postParams.mGrpNo),""!=e.postParams.upBrdNo&&(g.upBrdNo=e.postParams.upBrdNo),"C"==e.uiStateObj.currentPageType&&""==e.postParams.mGrpNo&&l.query.disp_no!=c&&(g.cateNo=l.query.disp_no),"S"==e.uiStateObj.currentPageType&&(g.cateNo=e.postParams.cateNo,null==e.postParams.dsCtgDepth&&(g.dsCtgDepth=e.postParams.cateDepth)),g.pageType=e.uiStateObj.currentPageType,e.postParams.brdNm&&""!=e.postParams.brdNm&&(g.brdNm=e.postParams.brdNm),a){case"S":case"P":break;case"E":break;case"B":default:e.loadTermData(g),g.loadTerm=!0}1!=f&&(1!=g.page||"TOT_ORD_CNT,1"!=e.postParams.sort||0!=e.postParams.reQuery.length||"Y"==e.postParams.freeDeliYN||"Y"==e.postParams.deptYN||e.postParams.ctgNo||0!=e.postParams.brdNoArr.length||"Y"==e.postParams.freeInstYN||"Y"==e.postParams.pointYN||e.postParams.priceMaxU||e.postParams.priceMinU||"Y"==e.postParams.isCrsPickYn||"Y"==e.postParams.isDlvToday||"Y"==e.postParams.isDlvQuick||"Y"==e.postParams.smpickYN||e.postParams.smpBranchNo||0!=e.postParams.selectedColor.length?e.loadListData(g):(console.log("call adReq",g.page),e.ad_param={query:e.curDispNo,channelId:"D01M02102",startRank:1,maxCnt:3,serverUrl:encodeURIComponent(location.href),mbrId:e.loginInfo.mbrNo,userIp:"",ua:encodeURIComponent(navigator.userAgent),adType:"MLP"},e.ad_list=[],e.timeout_flag=0,setTimeout(function(){0==e.timeout_flag&&(console.log("- 광고솔루션 timeout -"),e.timeout_flag=1,e.loadListData(loadParam2))},2e3),$.ajax({type:"get",url:d.adReq,data:e.ad_param,dataType:"json",success:function(a){if(a.ads&&(e.ad_list=a.ads,e.ad_list&&e.ad_list.length>0)){for(var b="",c=0;c<e.ad_list.length;c++)b+=e.ad_list[c].goodsNo,c<e.ad_list.length-1&&(b+=",");g.goodsNoList=b}0==e.timeout_flag&&(e.loadListData(g),e.timeout_flag=1)},error:function(a){console.log("광고솔루션 에러",a),0==e.timeout_flag&&(e.loadListData(g),e.timeout_flag=1)},timeout:2e3}))),e.searchTermsChanged=!0},e.noKeyword=function(){e.uiStateObj.emptyResult=!1,e.uiStateObj.emptyKeyword=!0},e.loadTermData=function(a){var c=b.extend({rtnType:"",keyword:"",dpml_no:"1",dispCnt:30,page:1,cmpsCd:50},a),d=e.URLs.searchTerm;return e.postParams.brdNm&&(c.brdNm=e.postParams.brdNm),e.postParams.dsCtgDepth&&!e.postParams["ctgDepth"+e.postParams.dsCtgDepth]&&(c.ctgNo=null,c.dsCtgDepth=null),c.priceMaxU&&!c.priceMinU&&(c.priceMinU=e.srhResultData.price.min),c.priceMinU&&!c.priceMaxU&&(c.priceMaxU=e.srhResultData.price.max),e.firstLoad=!1,e.searchTermsLoading?!1:(e.isShowLoading=!0,e.searchTermsLoading=!0,void i.get(d,{params:c}).success(function(a,b,c,d){e.termDataLoadComplete(a),e.searchTermsLoading=!1,e.searchTermsLoading||e.productListLoading||(e.isShowLoading=!1),h(function(){e.retriveTemplateType(),e.setTreeId()},0)}).error(function(a,b,c,d){e.searchTermsLoading=!1,e.searchTermsLoading||e.productListLoading||(e.isShowLoading=!1),h(function(){e.setTreeId()},0)}))},e.termDataLoadComplete=function(a){if(a.max!=c&&(a=a.max),a.resultCode)if("0000"==a.resultCode){var d;switch(e.uiStateObj.subTitle=a.ctgTitle,e.postParams.rtnType){case"":e.srhResultData.keyword=a.keyword,e.postParams.keyword=a.keyword;case"K":if(a.ctgLst!=c){for(var f={items:[]},g=(new Date).getTime(),d=0;d<a.ctgLst.items.length;d++){var h=a.ctgLst.items[d];h.tid=g+"_"+d,f.items.push(h)}e.srhResultData.ctgLst=f,"C"==e.uiStateObj.currentPageType&&q()}case"C":if(e.postParams.dsCtgDepth>=2&&a.subCtgLst&&a.subCtgLst.items&&a.subCtgLst.items[0]&&a.subCtgLst.items[0].subCtgLst&&a.subCtgLst.items[0].subCtgLst.items){var i=a.subCtgLst.items[0].subCtgLst.items,j=a.subCtgLst;j.items[0].subCtgLst.items=[];for(var l=(new Date).getTime(),m=0;m<i.length;m++){var n=i[m];n.tid=l+"_"+m,j.items[0].subCtgLst.items.push(n)}r(e.srhResultData.ctgLst,j)}e.setFilterCateCnt();case"E":case"B":default:"B"!=e.postParams.rtnType&&(e.srhResultData.brdLst=a.brdLst,"undefined"!=typeof e.srhResultData.brdLst.tcnt&&e.srhResultData.brdLst.tcnt>0&&"undefined"!=typeof e.srhResultData.brdLst.items&&b.forEach(e.srhResultData.brdLst.items,function(a,b){e.srhResultData.brdLst.items[b].cnt=parseInt(a.cnt)})),e.srhDetailData.srhTerms.smpick="1"==a.smpick?!0:!1,e.srhDetailData.srhTerms.smpickBranch=k("orderBy")(a.smpickBranch,"name"),p(a.colors),e.srhDetailData.srhTerms.dept="1"==a.store.dept?!0:!1,e.srhDetailData.srhTerms["super"]="1"==a.store["super"]?!0:!1,e.srhDetailData.srhTerms.tvhome="1"==a.store.tvhome?!0:!1,e.srhDetailData.srhTerms.brdstore="1"==a.store.brdstore?!0:!1,e.srhDetailData.srhTerms.seven="1"==a.deliver.smpSeven?!0:!1,e.srhDetailData.srhTerms.tdar="1"==a.deliver.tdar?!0:!1,e.srhDetailData.srhTerms.quick="1"==a.deliver.quick?!0:!1}e.uiStateObj.detailSearchDataLoaded=!0}else""==e.postParams.rtnType&&(e.srhResultData.keyword=a.keyword,e.postParams.keyword=a.keyword);else""==e.postParams.rtnType&&(e.srhResultData.keyword=a.keyword,e.postParams.keyword=a.keyword)},e.loadListData=function(a){var d=b.extend({rtnType:"",keyword:"",dpml_no:"1",dispCnt:30,page:1},a),f=e.URLs.searchList;if(e.postParams.brdNm&&(d.brdNm=e.postParams.brdNm),e.postParams.dsCtgDepth&&!e.postParams["ctgDepth"+e.postParams.dsCtgDepth]&&(d.ctgNo=null,d.dsCtgDepth=null),d.priceMaxU&&!d.priceMinU&&(d.priceMinU=e.srhResultData.price.min),d.priceMinU&&!d.priceMaxU&&(d.priceMaxU=e.srhResultData.price.max),e.productListLoading)return!1;e.isShowLoading=!0,e.productListLoading=!0;var g=0;e.ctgInitFlag=!1,d.ctgNo&&g++,d.brdNo&&(g++,e.ctgInitFlag=!0),(d.priceMaxU||d.priceMaxU||d.freeInstYN&&"Y"==d.freeInstYN||d.pointYN&&"Y"==d.pointYN)&&(g++,e.ctgInitFlag=!0),(d.isCrsPickYn&&"Y"==d.isCrsPickYn||d.smpickYN&&"Y"==d.smpickYN||d.isDlvQuick&&"Y"==d.isDlvQuick||d.isDlvToday&&"Y"==d.isDlvToday)&&(g++,e.ctgInitFlag=!0),d.colorCd&&(g++,e.ctgInitFlag=!0),d.freeDeliYN&&"Y"==d.freeDeliYN&&(g++,e.ctgInitFlag=!0),d.deptYN&&"Y"==d.deptYN&&g++,d.keyword&&g++,e.uiStateObj.selectedFilter=g,i.get(f,{params:d}).success(function(a,b,f,g){for(var i=0;3>i;i++)if(i<a.max.prdLst.items.length&&a.max.prdLst.items[i].ad_url!=c)for(var j=0;j<e.ad_list.length;j++)a.max.prdLst.items[i].goods_no==e.ad_list[j].goodsNo&&(a.max.prdLst.items[i].click_url=e.ad_list[j].clickUrl);e.listDataLoadComplete(a,d.loadTerm),e.productListLoading=!1,e.searchTermsLoading||e.productListLoading||(e.isShowLoading=!1),h(function(){e.retriveTemplateType()},0)}).error(function(a,b,c,d){e.productListLoading=!1,e.searchTermsLoading||e.productListLoading||(e.isShowLoading=!1)})},e.checkOpenCtgCd=function(a){var b=$("#ctg_"+a.ctgNo);if(!e.firstLoad)return!1;for(var c=!1,d=null,f=0;f<e.uiStateObj.arrOpenCtgCd.length;f++)if(a.tid==e.uiStateObj.arrOpenCtgCd[f].tid){c=!0,d=e.uiStateObj.arrOpenCtgCd[f];break}return c&&(b.removeClass("open").addClass("open"),b.find(">ul").height(d.height)),c},e.setTreeId=function(){for(var a=[],b=0;b<$(".ssws_wrap.ssws_category .openable li.open").length;b++){var c=$($(".ssws_wrap.ssws_category .openable li.open")[b]),d=c.find("ul").height();a.push({tid:c.data("tid"),height:d})}e.uiStateObj.arrOpenCtgCd=a},e.listDataLoadComplete=function(b,f){if(e.setBrandMainData&&e.setBrandMainData(b),b.max!=c&&(b=b.max),b.resultCode)if(e.uiStateObj.initFlag=!1,e.srhResultData.resultCode=b.resultCode,b.tCnt!=c&&"number"==typeof b.tCnt&&(e.srhResultData.tCnt=b.tCnt),b.brdNm&&""!=b.brdNm&&(e.postParams.brdNm=encodeURIComponent(b.brdNm)),"0000"==b.resultCode){e.uiStateObj.emptyResult;switch(e.uiStateObj.emptyResult=!1,e.uiStateObj.emptyKeyword=!1,f===!0&&(b.price.min=parseInt(b.price.min,10),b.price.max=parseInt(b.price.max,10),e.srhResultData.price=b.price,null==e.postParams.priceMinU&&null==e.postParams.priceMaxU&&e.srhFilterPriceInit(!1)),e.postParams.rtnType){case"":case"K":case"C":case"B":case"E":case"S":e.srhResultData.sortType=b.sortType;case"P":if(e.srhResultData.dispCnt=b.dispCnt,e.srhResultData.page=b.page,e.postParams.page=b.page,e.uiStateObj.ajaxPageEndFlag=!1,e.postParams.page>1?e.srhResultData.prdLst.items=e.srhResultData.prdLst.items.concat(b.prdLst.items):b.prdLst?(e.srhResultData.prdLst=b.prdLst,e.srhResultData.prdLst.items=b.prdLst.items,e.srhResultData.prdLst.tcnt=b.prdLst.tcnt):(e.uiStateObj.ajaxPageEndFlag=!0,e.productMoreScroll=!1),e.srhResultData.prdLst&&e.srhResultData.prdLst.items&&b.prdLst&&b.prdLst.items){e.srhResultData.tCnt<=e.srhResultData.prdLst.items.length||0==b.prdLst.items.length?(e.uiStateObj.ajaxPageEndFlag=!0,e.productMoreScroll=!1):(e.uiStateObj.ajaxPageEndFlag=!1,e.productMoreScroll=!0);for(var g=[],h=e.srhResultData.prdLst.items.length,i=0;h>i&&g.length<3;i++)g.push(e.srhResultData.prdLst.items[i].goods_no+""||"");e.sendBuzzni&&!a.buzzni_rt_list&&d.mallSubUrl.indexOf(location.pathname)<0&&(e.sendBuzzni("list",g),a.buzzni_rt_list=!0);for(var i=0;h>i;i++)e.srhResultData.prdLst.items[i].nIdx=i}else e.uiStateObj.ajaxPageEndFlag=!0,e.productMoreScroll=!1;"undefined"!=typeof e.srhResultData.prdLst&&"undefined"!=typeof e.srhResultData.prdLst.items||e.uiStateObj.emptyKeyword||e.uiStateObj.initFlag?e.uiStateObj.emptyPrdLstFlag=!1:(e.uiStateObj.ajaxPageEndFlag=!0,e.uiStateObj.emptyPrdLstFlag=!0,e.productMoreScroll=!1)}e.srhResultData.prdLst.items.length<=6?(e.srhResultData.prdLst1=e.srhResultData.prdLst.items.slice(0,6),e.srhResultData.prdLst2=[]):(e.srhResultData.prdLst1=e.srhResultData.prdLst.items.slice(0,6),e.srhResultData.prdLst2=e.srhResultData.prdLst.items.slice(6)),e.srhResultData.planPrdLst=b.planPrdLst}else if("1000"==b.resultCode){if(e.uiStateObj.emptyResult=!0,e.uiStateObj.emptyKeyword=!1,e.srhResultData.tCnt=b.tCnt,e.srhResultData.missKeyword=b.missKeyword,"undefined"!=typeof b.favLst){e.srhResultData.favLst={};var j=new Date;if("undefined"!=typeof b.favLst.date&&b.favLst.date.length>=8){var k=(b.favLst.date+"").substr(0,4),l=parseInt((b.favLst.date+"").substr(4,2))-1,m=(b.favLst.date+"").substr(6,2);j=new Date(k,l,m)}e.srhResultData.favLst.date=j,e.srhResultData.favLst.items=b.favLst.items}}else"2000"==b.resultCode&&e.noKeyword()},e.goPrevSideStatus=function(){e.curSideStatus>1&&e.curSideStatus--},e.goNextSideStatus=function(){e.curSideStatus<3&&(e.curSideStatus++,history.pushState(e.curSideStatus,e.curSideStatus,g.location.href))},e.closeSidebarBtnClk=function(){e.searchTclick2016("L","Btn_Close"),e.closeSideSearch()},e.closeSideSearch=function(){e.searchTermsChanged&&(e.LotteDimm.scrollY=0),"sideSearch"==e.LotteDimm.target?e.dimmedClose():e.searchUISetting.isShowSideBar=!1,e.searchUISetting.isShowSub===!0&&e.hideSubSearch(),e.goPrevSideStatus(),e.curSideStatus>1&&e.goPrevSideStatus()},e.showHideSideSearch=function(a){if(e.searchUISetting.isShowSideBar)e.closeSideSearch();else{if(0==e.uiStateObj.detailSearchDataLoaded)return;e.searchTermsChanged=!1,e.searchUISetting.isShowSideBar=!0,e.dimmedOpen({target:"sideSearch",callback:e.closeSideSearch,scrollEventFlag:!1}),$(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),"SORT"==a&&e.showSubSearch({currentTarget:$(".ssw_slide.main li a[data-label='정렬']")}),e.goNextSideStatus()}"SORT"==a?e.searchTclick2016("C","Clk_Sort"):e.searchTclick2016("C","Clk_Detail")},e.showSubSearch=function(a){var b=$(a.currentTarget),c=b.data("slide");switch(e.searchUISetting.title=b.data("label"),e.searchUISetting.slide=c,e.searchUISetting.isShowSub=!0,e.goNextSideStatus(),e.searchUISetting.lastSlide!=c&&$(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),e.searchUISetting.lastSlide=c,b.data("slide")){case"category":e.searchTclick2016("L","Clk_Cate");break;case"brand":e.searchTclick2016("L","Clk_Brand");break;case"sort":e.searchTclick2016("L","Clk_Sort");break;case"color":e.searchTclick2016("L","Clk_Clr");break;case"price":e.searchTclick2016("L","Clk_Prc");break;case"research":e.searchTclick2016("L","Clk_Kwd");break;case"delivery":e.searchTclick2016("L","Clk_Dlr")}},e.hideSubSearch=function(){e.searchUISetting.slide=null,e.searchUISetting.keywordIncExc=!1,0!=e.searchUISetting.isShowSub&&(e.searchUISetting.isShowSub=!1,3==e.curSideStatus&&e.goPrevSideStatus())},e.showHideSortGuide=function(){e.tipShow=!e.tipShow,e.tipShow&&($("#pop_sortGuide").css("top",$("#sortGuideButton").offset().top+28),h(e.positionSortGuide,0))},e.positionSortGuide=function(){$("#pop_sortGuide").css("top",$("#sortGuideButton").offset().top+28)},e.srhFilterSmpickClick=function(a){var c=$(a.currentTarget);c.is(":checked")&&(e.uiStateObj.smpickLayerOpenFlag=!0,b.element("#wrapper").addClass("overflowy_hidden"))},e.showHideSmartPick=function(){e.searchUISetting.smartPickSub=!e.searchUISetting.smartPickSub},e.showHideDepartmentPick=function(a){var c=b.element(a.currentTarget),d=c.parent();d.hasClass("disabled")||(e.searchUISetting.smartPickList=!e.searchUISetting.smartPickList,e.searchUISetting.smartPickList&&""==e.postParams.smpBranchNo&&e.smpickBranchChange({name:"전체",branchNo:""}))},e.smpickBranchChange=function(a){e.postParams.smpickYN="Y",e.postParams.smpBranchNo=a.branchNo,e.uiStateObj.smpickBranchName=a.name,e.srhDetailPost(),e.searchTclick2016("L","Dlr_01")},e.showDeliveryGuide=function(){a.alert("내 주변 픽업 서비스는 세븐일레븐 / 하이마트 / 롯데슈퍼 / 롯데리아에서 픽업이 가능합니다."),e.searchTclick2016("L","Dlr_02_tip")},e.categoryItemClick=function(a,b){e.ctgInitFlag&&(alert("카테고리 변경 시 앞서 설정한 필터는 초기화됩니다."),e.ctgInitFlag=!1);var c=$(a.currentTarget),d=c.parent(),f=d.data("depth");b.checked===!0?0==f&&(b.checked=!1):(w(e.srhResultData.ctgLst,b.ctgDepth),b.checked=!0,0==f&&d.hasClass("open")&&(b.checked=!1)),e.categoryAccordian(d,b.ctgNo),u();var f=d.data("depth");(d.hasClass("depthMod")||d.parents(".depthMod").length>0)&&f++,e.srhSubCtgPost(f+1,b.ctgNo)},e.categoryItemCheck=function(a,b){e.ctgInitFlag&&(alert("카테고리 변경 시 앞서 설정한 필터는 초기화됩니다."),e.ctgInitFlag=!1);var c=$(a.currentTarget),d=c.parent();b.checked===!1?b.checked=!1:(w(e.srhResultData.ctgLst,b.ctgDepth),b.checked=!0),e.categoryAccordian(d,b.ctgNo,!0),u();var f=d.data("depth");(d.hasClass("depthMod")||d.parents(".depthMod").length>0)&&f++,e.srhSubCtgPost(f+1,b.ctgNo)},e.categoryAccordian=function(a,b,c){if(!a.hasClass("nochild")){var d=45,f=a.find("> ul");if(f.length>0){if(a.hasClass("open"))c||(a.removeClass("open"),f.height(0),f.find("ul").height(0),f.find("li.open").removeClass("open"));else{a.addClass("open");var g=f.find("> li").length;f.height(d*g)}e.categoryAccordianParent(a)}}},e.categoryAccordianParent=function(a){var b=a.parent(),c=b.find("> li"),d=0;c.each(function(a,b){d+=$(b).height()}),b.height(d),b.hasClass("cate_d1")||e.categoryAccordianParent(b.parent())},e.srhSubCtgPost=function(a,b,c){e.srhFilterBrdInit(),e.srhFilterDetailInit(),e.postParams.ctgNo=b,"S"==e.uiStateObj.currentPageType?(e.postParams.dsCtgDepth=a+2,e.postParams.ctgDepth3=e.uiStateObj.selectedCategory.depth1.join(","),e.postParams.ctgDepth4=e.uiStateObj.selectedCategory.depth2.join(","),e.postParams.ctgDepth5=e.uiStateObj.selectedCategory.depth3.join(",")):(e.postParams.dsCtgDepth=a,e.postParams.ctgDepth1=e.uiStateObj.selectedCategory.depth1.join(","),e.postParams.ctgDepth2=e.uiStateObj.selectedCategory.depth2.join(","),e.postParams.ctgDepth3=e.uiStateObj.selectedCategory.depth3.join(","),e.postParams.ctgDepth4=e.uiStateObj.selectedCategory.depth4.join(","),e.postParams.ctgDepth5=e.uiStateObj.selectedCategory.depth5.join(",")),e.postParams.rtnType="C",e.loadDataParams(e.postParams.rtnType,c)},e.srhChkBrdPost=function(a,b){if(-1==e.postParams.brdNoArr.indexOf(a.brdNo))e.postParams.brdNoArr.push(a.brdNo),e.postParams.brdNmArr.push(a.brdName),e.uiStateObj.brandArr.push(a);else{var c=e.postParams.brdNoArr.indexOf(a.brdNo);c>-1&&(e.postParams.brdNoArr.splice(c,1),e.postParams.brdNmArr.splice(c,1),e.uiStateObj.brandArr.splice(c,1))}e.postParams.brdNoArr.length>0?e.uiStateObj.srhFilterBrdFlag=!0:e.uiStateObj.srhFilterBrdFlag=!1,"N"!==b&&(e.postParams.rtnType="B",e.loadDataParams(e.postParams.rtnType))},e.triggerChkBrdPost=function(a){if(-1==e.postParams.brdNoArr.indexOf(a.brdNo))e.postParams.brdNoArr.push(a.brdNo),e.postParams.brdNmArr.push(a.brdName),e.uiStateObj.brandArr.push(a);else{var b=e.postParams.brdNoArr.indexOf(a.brdNo);b>-1&&(e.postParams.brdNoArr.splice(b,1),e.postParams.brdNmArr.splice(b,1),e.uiStateObj.brandArr.splice(b,1))}for(var c=0;c<e.srhResultData.brdLst.items.length;c++){var d=e.srhResultData.brdLst.items[c];d.brdNo==a.brdNo&&(e.srhResultData.brdLst.items[c].checked=null)}e.postParams.brdNoArr.length>0?e.uiStateObj.srhFilterBrdFlag=!0:e.uiStateObj.srhFilterBrdFlag=!1,e.postParams.rtnType="B",e.loadDataParams(e.postParams.rtnType)},e.srhFilterBrdSortChange=function(a){"-cnt"==a?e.searchTclick2016("L","Brand_02"):e.searchTclick2016("L","Brand_01");
},e.srhSortPost=function(a){switch(e.uiStateObj.sortTypeIdx=a,e.uiStateObj.srhFilterSortFlag=!0,e.postParams.rtnType="S",e.loadDataParams(e.postParams.rtnType),a){case 0:e.searchTclick2016("L","Sort_01");break;case 1:e.searchTclick2016("L","Sort_02");break;case 2:e.searchTclick2016("L","Sort_04");break;case 3:e.searchTclick2016("L","Sort_05");break;case 4:e.searchTclick2016("L","Sort_06");break;case 5:e.searchTclick2016("L","Sort_03")}e.scrollToTop()},e.srhPricePost=function(a){switch(e.uiStateObj.priceTypeIdx=a.shortIdx,e.uiStateObj.srhFilterPriceFlag=!0,a.shortIdx){case 0:e.searchTclick2016("L","Prc_01");break;case 1:e.searchTclick2016("L","Prc_02");break;case 2:e.searchTclick2016("L","Prc_03");break;case 3:e.searchTclick2016("L","Prc_04");break;case 4:e.searchTclick2016("L","Prc_05")}var c=a.value.split(","),d=c[0],f=c[1];e.postParams.priceMinU=d,e.postParams.priceMaxU=f,e.postParams.priceMinUTemp=d,e.postParams.priceMaxUTemp=f,e.srhDetailSearchPrice(),b.element(".ssws_wrap.ssws_price .price.openable").removeClass("open")},e.srhSelectColor=function(a,b){var c=e.postParams.selectedColor.indexOf(a.colorCd);return a.selected===!0?(a.selected=!1,c>=0&&e.postParams.selectedColor.splice(c,1)):(a.selected=!0,0>c&&e.postParams.selectedColor.push(a.colorCd)),"N"!==b&&e.srhDetailPost(),void e.searchTclick2016("L","Clr_Opt")},e.srhDetailSearchActiveChk=function(){var a=0;b.forEach(e.uiStateObj.srhFilterDetailArr,function(b){"Y"==e.postParams[b]&&a++}),e.postParams.selectedColor.length>0&&a++,a>0||e.postParams.priceMinU||"undefined"==typeof e.postParams.priceMinU||null!=e.postParams.priceMaxU||"undefined"==typeof e.postParams.priceMaxU||e.postParams.rekeyword?e.uiStateObj.srhFilterDetailFlag=!0:e.uiStateObj.srhFilterDetailFlag=!1},e.srhDetailPost=function(){e.srhDetailSearchActiveChk(),e.postParams.rtnType="E",e.loadDataParams(e.postParams.rtnType)},e.setFilterCateCnt=function(){if(!e.postParams.deptYN||"N"==e.postParams.deptYN)return void(e.uiStateObj.filterCateCnt=e.srhResultData.ctgLst.items.length);for(var a=0,b=0;b<e.srhResultData.ctgLst.items.length;b++)"롯데백화점"===$.trim(e.srhResultData.ctgLst.items[b].mall)&&a++;e.uiStateObj.filterCateCnt=a},e.srhDetailChange=function(a){switch(a){case"deptYN":t(),e.setFilterCateCnt(),e.searchTclick2016("L","Clk_Dep");break;case"freeDeliYN":e.searchTclick2016("L","Clk_Fdlr");break;case"smpickYN":e.searchTclick2016("L","Opt_02");break;case"freeInstYN":e.searchTclick2016("L","Prc_06");break;case"pointYN":e.searchTclick2016("L","Prc_07");break;case"isCrsPickYn":e.searchTclick2016("L","Dlr_02");break;case"isDlvToday":e.searchTclick2016("L","Dlr_03");break;case"isDlvQuick":e.searchTclick2016("L","Dlr_04")}e.srhDetailPost()},e.srhDetailPriceMaxlen=function(a){var b=$("#priceMaxU");"min"==a&&(b=$("#priceMinU"));var c=b.val();c.length>10&&b.val(c.substr(0,10))},e.srhDetailPriceValidate=function(a){if(e.srhDetailPriceValidateFlag=!0,null!=e.postParams.priceMinUTemp&&e.postParams.priceMinUTemp.length>0&&(e.postParams.priceMinUTemp=e.postParams.priceMinUTemp.replace(/[^0-9]/g,"")),null!=e.postParams.priceMaxUTemp&&e.postParams.priceMaxUTemp.length>0&&(e.postParams.priceMaxUTemp=e.postParams.priceMaxUTemp.replace(/[^0-9]/g,"")),"min"==a&&e.srhResultData.price.min){if("undefined"==typeof e.postParams.priceMinUTemp)return e.postParams.priceMinUTemp=e.srhResultData.price.min,e.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최저가격보다 낮습니다."),!1;if("number"==typeof e.postParams.priceMinUTemp&&"number"!=typeof e.postParams.priceMaxUTemp&&e.postParams.priceMinUTemp>e.srhResultData.price.max)return e.postParams.priceMinUTemp=e.srhResultData.price.max,e.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최고가격보다 높습니다."),!1;if("number"==typeof e.postParams.priceMinUTemp&&"number"==typeof e.postParams.priceMaxUTemp&&e.postParams.priceMinUTemp>e.postParams.priceMaxUTemp){e.postParams.priceMinUTemp>e.srhResultData.price.max&&(alert("검색결과 내 최고가격보다 높습니다."),e.postParams.priceMinUTemp=e.srhResultData.price.max);var b=e.postParams.priceMinUTemp;e.postParams.priceMinUTemp=e.postParams.priceMaxUTemp,e.postParams.priceMaxUTemp=b,e.srhDetailPriceValidateFlag=!0}}else if("max"==a&&e.srhResultData.price.max){if("undefined"==typeof e.postParams.priceMaxUTemp)return e.postParams.priceMaxUTemp=e.srhResultData.price.max,e.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최고가격보다 높습니다."),!1;if("number"==typeof e.postParams.priceMaxUTemp&&"number"!=typeof e.postParams.priceMinUTemp&&e.postParams.priceMaxUTemp<e.srhResultData.price.min)return e.postParams.priceMaxUTemp=e.srhResultData.price.max,e.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최저가격보다 낮습니다."),!1;if("number"==typeof e.postParams.priceMaxUTemp&&"number"==typeof e.postParams.priceMinUTemp&&e.postParams.priceMaxUTemp<e.postParams.priceMinUTemp){e.postParams.priceMaxUTemp<e.srhResultData.price.min&&(alert("검색결과 내 최저가격보다 낮습니다."),e.postParams.priceMaxUTemp=e.srhResultData.price.min);var b=e.postParams.priceMinUTemp;e.postParams.priceMinUTemp=e.postParams.priceMaxUTemp,e.postParams.priceMaxUTemp=b,e.srhDetailPriceValidateFlag=!0}}},e.srhDetailSearchPrice=function(a){return e.srhDetailPriceValidateFlag?e.postParams.priceMinUTemp||e.postParams.priceMaxUTemp?(e.postParams.priceMinU=e.postParams.priceMinUTemp,e.postParams.priceMaxU=e.postParams.priceMaxUTemp,e.srhDetailPost(),a===!0&&(v(),e.searchTclick2016("L","Prc_Btn")),void 0):(alert("검색 조건을 입력해 주세요."),!1):(e.srhDetailPriceValidateFlag=!0,!1)},e.srhDetailSearchFocus=function(){e.actionbarHideFlag=!0,e.searchUISetting.keywordIncExc=!1,e.searchUISetting.focusIn=!0,$(".ssw_slide.main").animate({scrollTop:$(document).height()},600),$(".ssws_wrap").css("margin-bottom",0),$(".side_search_wrap .ssw_content").css("bottom",0)},e.srhDetailSearchBlur=function(){e.actionbarHideFlag=!1,e.searchUISetting.focusIn=!1,$(".ssws_wrap").css("margin-bottom","40px"),$(".side_search_wrap .ssw_content").css("bottom","50px")},e.srhDetailSearchKeyword=function(){return e.searchUISetting.keywordIncExc=!1,""==e.postParams.rekeyword?(alert("검색할 단어를 입력해 주세요."),!1):(0==e.searchUISetting.researchIdx?e.addRequeryKeyword(e.postParams.rekeyword):e.addExqueryKeyword(e.postParams.rekeyword),e.postParams.rekeyword="",void e.searchTclick2016("L","Kwd_Btn"))},e.srhDetailSearchKeypress=function(a){13===a.which&&(e.srhDetailSearchKeyword(),a.preventDefault())},e.deleteRequeryKeyword=function(a){var b=e.postParams.reQuery.indexOf(a);b>=0&&(e.postParams.reQuery.splice(b,1),e.srhKeywordPost(),e.scrollToTop())},e.deleteExqueryKeyword=function(a){var b=e.postParams.exQuery.indexOf(a);b>=0&&(e.postParams.exQuery.splice(b,1),e.srhKeywordPost(),e.scrollToTop())},e.addRequeryKeyword=function(a,b){a=a.replace(/ /g,"");var c=e.postParams.reQuery.indexOf(a);0>c&&(e.postParams.reQuery.push(a),e.srhKeywordPost(),e.scrollToTop())},e.addExqueryKeyword=function(a){a=a.replace(/ /g,"");var b=e.postParams.exQuery.indexOf(a);0>b&&(e.postParams.exQuery.push(a),e.srhKeywordPost(),e.scrollToTop())},e.changeKeywordType=function(a){"in"==a?e.searchTclick2016("L","Kwd_01"):e.searchTclick2016("L","Kwd_02")},e.srhKeywordPost=function(){e.srhFilterCtgInit(),e.srhFilterBrdInit(),e.srhFilterDetailInit(),e.srhFilterStoreInit(),e.postParams.rtnType="K",e.loadDataParams(e.postParams.rtnType)},e.srhFilterDetailPriceIpt=function(a){b.element("#"+a).focus()},e.srhFilterDetailInit=function(){e.uiStateObj.srhFilterDetailFlag=!1,b.forEach(e.uiStateObj.srhFilterDetailArr,function(a){e.postParams[a]="N"}),e.srhFilterBenefitInit(),e.srhFilterColorInit(),e.srhFilterPriceInit()},e.resetAllSearchTerm=function(){if($(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),e.searchUISetting.isShowSub===!0)switch(e.searchUISetting.slide){case"category":e.srhFilterCtgInit(!0),e.searchTclick2016("L","Cate_Reset");var a;$(".ssws_wrap.ssws_category li.open").each(function(b,c){a=$(c),a.removeClass("open"),a.find(">ul").height(0)});break;case"brand":e.srhFilterBrdInit(!0),e.searchTclick2016("L","Brand_Reset");break;case"sort":e.srhFilterSortInit(!0),e.searchTclick2016("L","Sort_Reset");break;case"color":e.srhFilterColorInit(!0),e.searchTclick2016("L","Clr_Reset");break;case"price":e.srhFilterPriceInit(!0),e.searchTclick2016("L","Prc_Reset");break;case"research":e.srhFilterRequeryInit(!0),e.searchTclick2016("L","Kwd_Reset");break;case"delivery":e.srhFilterDeliveryInit(!0),e.searchTclick2016("L","Dlr_Reset")}else e.srhFilterSortInit(),e.srhFilterRequeryInit(!0),e.searchTclick2016("L","Btn_Reset")},e.srhFilterCtgInit=function(a){e.uiStateObj.srhFilterCtgFlag=!1,e.uiStateObj.srhFilterCtgDepth=0,e.uiStateObj.srhFilterCtgDepth1CtgNo="",e.uiStateObj.selectedCategory.depth1=[],e.uiStateObj.selectedCategory.depth2=[],e.uiStateObj.selectedCategory.depth3=[],e.uiStateObj.selectedCategory.depth4=[],e.uiStateObj.selectedCategory.depth5=[],e.uiStateObj.selectedCategory.ctgName=[],e.postParams.ctgNo="",e.postParams.ctgDepth=0,e.postParams.dsCtgDepth=null,e.postParams.ctgDepth1="",e.postParams.ctgDepth2="",e.postParams.ctgDepth3="",e.postParams.ctgDepth4="",e.postParams.ctgDepth5="",w(e.srhResultData.ctgLst),e.uiStateObj.arrOpenCtgCd=[];var b;$(".ssws_wrap.ssws_category li.open").each(function(a,c){b=$(c),b.removeClass("open"),b.find(">ul").height(0)}),$(".ssws_wrap.ssws_category .cate_d1").height(43*$(".ssws_wrap.ssws_category .cate_d1 > li").length),a===!0&&(e.srhFilterBrdInit(),e.srhFilterDetailInit(),e.postParams.rtnType="C",e.loadDataParams(e.postParams.rtnType))},e.srhFilterBrdInit=function(a){e.uiStateObj.srhFilterBrdFlag=!1,e.postParams.brdNoArr=[],e.postParams.brdNmArr=[],e.uiStateObj.brandArr=[],b.forEach(e.srhResultData.brdLst.items,function(a,b){a.checked=!1}),a===!0&&(e.postParams.rtnType="B",e.loadDataParams(e.postParams.rtnType))},e.srhFilterSortInit=function(a){e.uiStateObj.srhFilterSortFlag=!1,e.uiStateObj.sortTypeIdx=0,e.postParams.sort=e.uiStateObj.sortTypeArr[0].value,a===!0&&(e.postParams.rtnType="S",e.loadDataParams(e.postParams.rtnType))},e.srhFilterBenefitInit=function(a){e.postParams.freeDeliYN="N",e.postParams.smpickYN="N",e.postParams.freeInstYN="N",e.postParams.pointYN="N",e.postParams.smpBranchNo="",e.uiStateObj.smpickBranchName="전체",a===!0&&e.srhDetailPost()},e.srhFilterColorInit=function(a){e.postParams.selectedColor.length=0;for(var b=e.srhDetailData.srhColorList.length,c=0;b>c;c++)e.srhDetailData.srhColorList[c].selected=!1;a===!0&&e.srhDetailPost()},e.srhFilterPriceInit=function(a){e.postParams.priceMinU=null,e.postParams.priceMaxU=null,e.postParams.priceMinUTemp=null,e.postParams.priceMaxUTemp=null,e.postParams.freeInstYN="N",e.postParams.pointYN="N",e.priceTypeIdx=-1,v(),a===!0&&e.srhDetailPost()},e.srhFilterRequeryInit=function(a){e.postParams.reQuery.length=0,e.postParams.exQuery.length=0,e.postParams.rekeyword="",e.srhFilterCtgInit(),e.srhFilterBrdInit(),e.srhFilterDetailInit(),e.srhFilterStoreInit(),a===!0&&(e.postParams.rtnType="K",e.loadDataParams(e.postParams.rtnType))},e.srhFilterStoreInit=function(a){e.postParams.deptYN="N",a===!0&&e.srhDetailPost()},e.srhFilterDeliveryInit=function(a){e.postParams.isCrsPickYn="N",e.postParams.isDlvToday="N",e.postParams.isDlvQuick="N",e.postParams.smpickYN="N",e.searchUISetting.smartPickList=!1,e.postParams.smpBranchNo=null,e.uiStateObj.smpickBranchName="전체",a===!0&&e.srhDetailPost()},e.getSearchTermParam=function(a){var b="search2016://searchterm",d={},f=function(a,b,e){e==c&&(e=","),b!=c&&b.length>0&&(d[a]=b.join(e))},g=function(a,b,c){b===c&&(d[a]=b)};d.keyword=encodeURIComponent(e.postParams.keyword),f("brdNo",e.postParams.brdNoArr),d.sort=e.postParams.sort,g("freeDeliYN",e.postParams.freeDeliYN,"Y"),g("freeInstYN",e.postParams.freeInstYN,"Y"),g("pointYN",e.postParams.pointYN,"Y"),g("smpickYN",e.postParams.smpickYN,"Y"),"Y"==e.postParams.smpickYN&&""!=e.postParams.smpBranchNo&&(d.smpBranchNo=e.postParams.smpBranchNo),f("colorCd",e.postParams.selectedColor),e.postParams.priceMinU&&e.postParams.priceMinU>=e.srhResultData.price.min&&(d.priceMinU=e.postParams.priceMinU),e.postParams.priceMaxU&&e.postParams.priceMaxU<=e.srhResultData.price.max&&(d.priceMaxU=e.postParams.priceMaxU),f("reQuery",e.postParams.reQuery),f("exQuery",e.postParams.exQuery),g("deptYN",e.postParams.deptYN,"Y"),g("isCrsPickYn",e.postParams.isCrsPickYn,"Y"),g("isDlvToday",e.postParams.isDlvToday,"Y"),g("isDlvQuick",e.postParams.isDlvQuick,"Y"),d.dpml_no=e.postParams.dpml_no,d.brdNm=encodeURIComponent(e.postParams.brdNm),"SORT"==a&&(d.openSort="Y");var h=!1,i="";for(var j in d)h&&(i+="&"),i+=j+"="+d[j],h=!0;return b+="?"+i},e.searchFromApp=function(a){var d=e.postParams;switch(a.rtnType){case"":case"K":case"C":case"E":case"S":break;default:a.rtnType=""}var f,g,h,i=function(a,b,c,e){b==c?d[a]=c:d[a]=e},j=function(a,b){if(d[a].length=0,b!=c&&""!=b){var e=b.split(",");d[a]=[].concat(e)}};if(a.keyword!=c&&""!=a.keyword){var k=decodeURIComponent(a.keyword);d.keyword=k,e.srhResultData.keyword=k}if(a.brdNo!=c&&""!=a.brdNo&&e.srhResultData.brdLst&&e.srhResultData.brdLst.items){e.postParams.brdNoArr.length=0,e.postParams.brdNmArr.length=0,e.uiStateObj.brandArr.length=0;var l=a.brdNo.split(",");b.forEach(e.srhResultData.brdLst.items,function(a,b){l.indexOf(a.brdNo)<0?a.checked=!1:(a.checked=!0,e.postParams.brdNoArr.push(a.brdNo),e.postParams.brdNmArr.push(a.brdName),e.uiStateObj.brandArr.push(a))}),e.uiStateObj.srhFilterBrdFlag=e.postParams.brdNoArr.length>0}else e.postParams.brdNoArr.length=0,e.postParams.brdNmArr.length=0,e.uiStateObj.brandArr.length=0,b.forEach(e.srhResultData.brdLst.items,function(a,b){a.checked=!1});if(a.sort!=c)for(g=e.uiStateObj.sortTypeArr.length,f=0;g>f;f++)if(e.uiStateObj.sortTypeArr[f].value==a.sort){e.uiStateObj.sortTypeIdx=f,d.sort=a.sort;break}if(i("freeDeliYN",a.freeDeliYN,"Y","N"),i("freeInstYN",a.freeInstYN,"Y","N"),i("pointYN",a.pointYN,"Y","N"),i("smpickYN",a.smpickYN,"Y","N"),a.smpBranchNo==c&&(a.smpBranchNo=""),i("smpBranchNo",a.smpBranchNo,"",a.smpBranchNo),a.colorCd!=c&&""!=a.colorCd){j("selectedColor",a.colorCd);var m=a.colorCd.split(",");for(g=e.srhDetailData.srhColorList.length,f=0;g>f;f++)h=e.srhDetailData.srhColorList[f],h.selected=m.indexOf(h.colorCd)>=0}else for(d.selectedColor.length=0,g=e.srhDetailData.srhColorList.length,f=0;g>f;f++)h=e.srhDetailData.srhColorList[f],h.selected=!1;var n=parseInt(a.priceMinU,10),o=parseInt(a.priceMaxU,10);isNaN(n)?n=null:n<e.srhResultData.price.min&&(n=e.srhResultData.price.min),isNaN(o)?o=null:o>e.srhResultData.price.max&&(o=e.srhResultData.price.max),null!=n&&null!=o&&n>o&&(n=null),e.postParams.priceMinU=n,e.postParams.priceMinUTemp=n,e.postParams.priceMaxU=o,e.postParams.priceMaxUTemp=o,j("reQuery",a.reQuery),j("exQuery",a.exQuery),i("deptYN",a.deptYN,"Y","N"),e.srhDetailSearchActiveChk(),d.rtnType=a.rtnType,e.loadDataParams(d.rtnType)},a.searchFromApp=e.searchFromApp,e.searchTclick2016=function(a,b){var c=e.tClickBase;switch(e.uiStateObj.currentPageType){case"C":c+="CatSrh";break;case"S":c+="SShop";break;case"B":c+="Brand"}switch(a){case"C":break;case"L":c+="Layer";break;default:return}c+="_"+b,e.sendTclick(c)},e.lySmpickClose=function(){e.uiStateObj.smpickLayerOpenFlag=!1,b.element("#wrapper").removeClass("overflowy_hidden")},e.scrollToTop=function(){var b=$(a).scrollTop();b>1&&$(a).scrollTop(1)},s(),e.changeFontSize=function(){var a=b.element("body");a.hasClass("enlargeFont")?(a.removeClass("enlargeFont"),f.delSessionStorage(e.screenID+"_fontsize"),e.searchTclick2016("L","Clk_Text02")):(a.addClass("enlargeFont"),f.setSessionStorage(e.screenID+"_fontsize","1"),e.searchTclick2016("L","Clk_Text01"))},x()}}}])}(window,window.angular),function(){angular.module("searchPlanShop",["hwSwipe"]).value("currentPage",{}).constant("observers",{request:"request",response:"response"}).provider("prodConfig",["LotteCommonProvider",function(a){var b=a.$get(),c={actionParams:{},catchInfo:[{page:b.searchUrl,json:[b.srhListData2016,b.srhListData2016LC],necessaryParams:{cmpsCd:50,dispCnt:30},hideParams:["ctgNo","dsCtgDepth","brdNo","ctgDepth1","ctgDepth2","ctgDepth3","ctgDepth4","ctgDepth5","priceMaxU","priceMinU","freeInstYN","pointYN","smpickYN","isDlvQuick","colorCd","freeDeliYN","deptYN","tvhomeYN","brdstoreYN","pkgYN","freeInstYN","delQuickYN","delSevenYN","dtCtgNo","dtCtgDepth","dtDsCtgDepth","shoesSize","starPoint"],def:{screenID:"SrhResult",curDispNoSctCd:50,moreType:0},noparams:[]},{page:b.categoryUrl,json:[b.cateListData2016],necessaryParams:{cmpsCd:50,dispCnt:30},hideParams:["ctgNo","dsCtgDepth","brdNo","ctgDepth1","ctgDepth2","ctgDepth3","ctgDepth4","ctgDepth5","priceMaxU","priceMinU","freeInstYN","pointYN","smpickYN","isDlvQuick","colorCd","freeDeliYN","deptYN","tvhomeYN","brdstoreYN","pkgYN","freeInstYN","delQuickYN","delSevenYN"],def:{screenID:"side_cate_catesmall",curDispNoSctCd:73,moreType:1},noparams:[]}]};return{setResponseParams:function(a){"object"==typeof a&&(c.actionParams=angular.extend(a,c.actionParams))},setCatchInfo:function(a){"object"==typeof a&&(a.page=urls[a.page],a.json=urls[a.json],c.catchInfo.push(a))},$get:function(){return c}}}]).factory("catchFilter",["prodConfig","LotteCommon","searchPlanShopService","observers",function(a,b,c,d){var e={permit:a.catchInfo,URLFilter:function(a){var b=null;for(var d in e.permit)for(var f in e.permit[d].json)-1!=a.indexOf(e.permit[d].json[f])&&(c.getCurrPage().json||c.setCurrPage(e.permit[d]),b=angular.copy(e.permit[d].necessaryParams));return b},ParamsFilter:function(b){var d=!1;if(b||(b={}),1===b.page){c.visibleState.set(!1);for(var e in b){for(var f in c.getCurrPage().hideParams)if(e===c.getCurrPage().hideParams[f]&&b[e]){c.visibleState.set(!0),d=!0;break}if(c.visibleState.get())for(var g in a.actionParams)if(e===g&&(!a.actionParams[g]&&!b[e]||a.actionParams[g]&&b[e])){c.visibleState.set(!1),d=!0;break}if(d)break}}return c.visibleState.get()},request:function(a){return e.URLFilter(a.url)},response:function(a){e.URLFilter(a.config.url)&&c.promiseList[d.response].set({data:a.data,visible:e.ParamsFilter(a.config.params)})}};return e}]).factory("httpInterceptor",["$q","catchFilter","searchPlanShopService",function(a,b,c){return{request:function(d){for(var e=c.getCurrPage().noparams||[],f=0;f<e.length;++f)for(var g in d.params)g===e[f]&&delete d.params[g];var h=b.request(d);return h&&(d.params||(d.params={}),d.params=angular.extend(h,d.params)),h&&d.params&&c.setParams(d.params),d||a.when(d)},response:function(c){return b.response(c),c||a.when(c)},requestError:function(b){return a.reject(b)},responseError:function(b){return a.reject(b)}}}]).directive("searchPlanShop",["searchPlanShopService","prodConfig","observers","LotteCommon","dataReplaceKey","commInitData","$timeout",function(a,b,c,d,e,f,g){return{restrict:"EA",scope:!0,replace:!0,templateUrl:"/lotte/resources_dev/search/products/planshop/planshop_list.html",link:function(h){function i(b){var c="?";for(var d in b)"tclick"!=d&&"title"!=d&&"cmpsCd"!=d&&"sort"!=d&&(c+=d+"="+b[d]+"&");return c=c.substr(0,c.length-1)+"&moreType="+a.getCurrPage().def.moreType,c+="&"+baseParam}function j(a,b){var c="";switch(c=location.href.indexOf("new_prod_list.do")>=0?h.tClickBase+"side_cate_catesmall_"+f.query.mGrpNo+"_":h.tClickBase+"SrhResult_",a){case 1:c+="Clk_Deal_"+(b+1);break;case 2:c+="Swp_Deal_"+(b+1);break;case 3:c+="Clk_Deal_GoL"}return c}h.visiblity=!1,h.planShopData=[],h.swipeVisible=!1;var k=!1;g(function(){if(k!==!0)try{var c,d,f=b.catchInfo.length;for(c=0;f>c;c++)if(d=b.catchInfo[c],location.href.indexOf(d.page)>=0){a.setCurrPage(d);break}h.planShopData=e(h.srhResultData.planPrdLst.items),h.swipeVisible=!0}catch(g){}},10),a.promiseList[c.response].get().then(null,null,function(a){k=!0,h.visiblity=a.visible;var b=a.data.max||a.data;try{b.planPrdLst.items&&(h.planShopData=e(b.planPrdLst.items)),h.swipeVisible=!0}catch(c){a.visible&&(h.planShopData=[]),console.log("[planshop_list] : 데이터 없음")}}),h.more=function(){location.href.indexOf("new_prod_list.do")>=0?location.href=d.searchPanShopList+i(f.query)+"&tclick="+j(3):location.href=d.searchPanShopList+i(a.getParams()||f.query)+"&tclick="+j(3)},h.$watch("planShopData",function(){try{var a=angular.element(".planshop_list_wrap [hw-swipe]").scope();a.planshopSwpIdx=0,a.planshopTotal=Math.min(h.planShopData.length,14),h.swipeVisible=!1,g(function(){h.swipeVisible=!0},100)}catch(b){}}),h.planProductsLink=function(a){var b=j(1,this.$index),c=h.getProductViewUrl(a,b);c+="&curDispNoSctCd="+h.curDispNoSctCd,location.href=c},h.$watch(function(){var a=0;try{a=angular.element(".planshop_list_wrap [hw-swipe]").scope().planshopSwpIdx}catch(b){}return a},function(a,b){a!==b&&void 0!==a&&h.sendTclick(j(2,a))})}}}]).service("searchPlanShopService",["$q","currentPage",function(a,b){this.promiseList={},this.addPromise=function(b){var c=this;if(!c.promiseList[b]){var d=c.promiseList[b]={},e=a.defer();d.defer=e,d.notify=e.notify,d.get=function(){return e.promise},d.set=function(a){e.notify(a)}}},this.visibleState={state:!1,set:function(a){this.state=a},get:function(){return this.state}},this.setCurrPage=function(a){b=a},this.getCurrPage=function(){return b},this.setParams=function(a){this.params=a},this.getParams=function(){return this.params}}]).config(["$httpProvider","prodConfigProvider",function(a,b){a.interceptors.push("httpInterceptor"),b.setResponseParams({rtnType:!1})}]).run(["observers","searchPlanShopService",function(a,b){if(a)for(var c in a)b.addPromise(a[c])}]).factory("dataReplaceKey",["LotteUtil",function(a){return function(b){try{if(b[0].goods_nm&&b[0].goods_no)return angular.forEach(b,function(a,b){a.brnd_nm=a.brnd_nm.replace(/\[|\]/g,"")}),b}catch(c){return[]}var d={goods_no:"goodsNo",goods_nm:"goodsNm",brnd_nm:"brandNm",img_url:"imgUrl",original_price:"price1",discounted_price:"price2",sale_rate:"saleRate",flag:"flag",review_count:"reviewCnt",avg_gdas_stfd_val:"avg_gdas_stfd_val",smartpick_yn:"isSmpick",limit_age_yn:"byrAgelmt",is_himart:"isHimart",is_dept:"isDept",is_tvhome:"isTvhome",is_youngplz:"isYoung",is_super:"isSuper",is_sale_promotion:"goodsCmpsCd",outlnk:"outlnk",outlnkMall:"outlnkMall",curDispNo:"curDispNo",has_coupon:"useCpn",hash_list:"hash_list",find_age:"find_age",find_gender:"find_gender",savePoint:"savePoint",vodUrl:"vodUrl"},e={goods_no:"",goods_nm:"",brnd_nm:"",img_url:"",img_url_550:"",original_price:"",discounted_price:"",sale_rate:"",flag:"",is_sold_out:!1,has_coupon:!1,has_wish:!1,is_sale_promotion:!1,review_count:0,bought_sum:0,md_tip:"",promotion_text:"",isdlex_free:!1,smartpick_yn:!1,sold_out_cd_yn:"N",limit_age_yn:"N",link_url:"",is_himart:"",is_dept:"",is_youngplz:"",outlnk:"",outlnkMall:"",curDispNo:"",savePoint:0,vodUrl:""},f=[];return angular.forEach(b,function(b,c){var g=angular.copy(e);angular.forEach(d,function(c,d){"has_coupon"==d?g[d]="coupon"==b[c]?!0:!1:"flag"==d?b.flag&&b.flag.indexOf("무료배송")>-1&&(g.isdlex_free=!0):"is_sale_promotion"==d?"30"==b.goodsCmpsCd&&(g[d]=!0):"sale_rate"==d||"savePoint"==d?null==b[c]?g[d]=0:g[d]=parseInt(b[c]):"smartpick_yn"==d?g[d]=b[c]?"Y":"N":"limit_age_yn"==d?g[d]=19==b[c]?"Y":"N":"goods_nm"==d?(g[d]=a.replaceAll(b.goodsNm,"<!HS>","<STRONG>"),g[d]=a.replaceAll(g[d],"<!HE>","</STRONG>")):g[d]=b[c]}),void 0!=b.isDlvToday&&(g.isDlvToday=b.isDlvToday),void 0!=b.isDeptPickYn&&(g.isDeptPickYn=b.isDeptPickYn),void 0!=b.isCrsPickYn&&(g.isCrsPickYn=b.isCrsPickYn),void 0!=b.isDlvQuick&&(g.isDlvQuick=b.isDlvQuick),void 0!=b.nint_card_flag&&(g.nint_card_flag=b.nint_card_flag),g.reivew_list=[],void 0!=b.gdasInfo1&&void 0!=b.gdasInfo1.gdasNo&&""!=b.gdasInfo1.gdasNo&&g.reivew_list.push(b.gdasInfo1),void 0!=b.gdasInfo2&&void 0!=b.gdasInfo2.gdasNo&&""!=b.gdasInfo2.gdasNo&&g.reivew_list.push(b.gdasInfo2),f.push(g)}),f}}])}(),function(){angular.module("hwSwipe",[]).run(["addRule",function(a){a(".hwswipe_clear:after",'content:"";padding:0; margin:0; display:block;clear:both;')}]).factory("addRule",[function(){return function(a,b){try{document.styleSheets[0].addRule(a,b)}catch(c){document.styleSheets[0].insertRule(a+"{"+b+"}")}}}]).controller("hwSwipeCtrl",["$scope","addRule",function(a,b){this.addStyle=b,this.deleteStyle=function(a){var b=document.styleSheets[0];if(b.cssRules.length)for(var c=0;c<b.cssRules.length;++c)-1!=b.cssRules[c].cssText.indexOf(a)&&b.deleteRule(c)},this.swipe={base:"hwsiwpe_",max:99999,get:function(){var a=new Date,b=a.toISOString().slice(0,10).replace(/-/g,""),c=String(a.getHours()),d=String(a.getMinutes()),e=String(a.getSeconds()),f=this.base+this.rStr()+this.rNum()+"_"+b+(c+d+e);return f.toLowerCase()},rStr:function(){for(var a="",b="ABCDEFGHIJKMLNOPQRSTUVWXYZ",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},rNum:function(){return String(Math.floor(Math.random()*this.max))+String(Math.floor(Math.random()*this.max))}}}]).factory("cubicbezier",[function(){return function(a){switch(a){case"easeInExpo":return"cubic-bezier(0.950, 0.050, 0.795, 0.035)";case"easeOutExpo":return"cubic-bezier(0.190, 1.000, 0.220, 1.000)";case"easeInOutExpo":return"cubic-bezier(1, 0, 0, 1)";case"easeOutCubic":return"cubic-bezier(0.215, 0.610, 0.355, 1.000)";case"easeInQuart":return"cubic-bezier(0.895, 0.030, 0.685, 0.220)";case"easeOutQuart":return"cubic-bezier(0.165, 0.840, 0.440, 1.000)";case"easeInOutQuart":return"cubic-bezier(0.77, 0, 0.175, 1)";case"easeInQunut":return"cubic-bezier(0.755, 0.050, 0.855, 0.060)";case"easeOutQuint":return"cubic-bezier(0.230, 1.000, 0.320, 1.000)";case"easeInOutQuint":return"cubic-bezier(0.860, 0.000, 0.070, 1.000)";case"easeInCirc":return"cubic-bezier(0.600, 0.040, 0.980, 0.335";case"easeOutCirc":return"cubic-bezier(0.075, 0.820, 0.165, 1.000)";case"easeInOutCirc":return"cubic-bezier(0.785, 0.135, 0.150, 0.860)";case"easeInBack":return"cubic-bezier(0.600, 0, 0.735, 0.045)";case"easeOutBack":return"cubic-bezier(0.175, 0.885, 0.32, 1.275)";case"easeInOutBack":return"cubic-bezier(0.68, -0.55, 0.265, 1.55)";case"easeInSine":return"cubic-bezier(0.47, 0, 0.745, 0.715)";case"easeOutSine":return"cubic-bezier(0.39, 0.575, 0.565, 1)";case"easeInOutSine":return"cubic-bezier(0.445, 0.05, 0.55, 0.95)";case"easeOutElastic":return"cubic-bezier(.75,-0.5,0,1.75)";default:return""}}}]).directive("hwSwipe",["$timeout","cubicbezier",function(a,b){return{controller:"hwSwipeCtrl",scope:{swipeIndex:"=?",swipeTotal:"=?",swipeController:"=?"},link:function(c,d,e,f){function g(){d.css({display:"block"}),s={touchPos:0,movePos:0,wrap:d.parent(),view:1,page:0,total:0,containerWidth:0,overWidth:0,itemWidth:0,duration:e.duration||300,posx:[],swipe:!1,side:"",infinity:"true"==e.infinity?!0:!1,auto:"true"==e.autoPlay?!0:!1,autotimer:0,interval:e.interval||5e3,easing:e.easing,parentWidth:d.parent()[0].clientWidth,scrolly:0,useScrollPos:"",marginRight:e.marginRight||0},h(),i(),s.swipe&&k()}function h(){var a=window.innerWidth;e.w900&&900>=a&&(s.view=e.w900),e.w640&&640>=a&&(s.view=e.w640),e.w320&&320>=a&&(s.view=e.w320),d.children().length<=s.view?(s.view=d.children().length,s.swipe=!1,t=!1,s.wrap.unbind("touchstart.hwswipe touchmove.hwswipe touchend.hwswipe")):s.swipe=!0}function i(){var a=d.children().length,b=d.parent()[0].clientWidth/s.view,c=b*a+b*s.view*2;s.containerWidth=b*a,s.overWidth=b*s.view,s.total=Math.ceil(a/s.view),s.itemWidth=b,angular.forEach(d.children(),function(a){a.hasAttribute("ng-repeat")&&a.removeAttribute("ng-repeat")}),r||(r=d.children());var e="."+v,g="."+v+" > li";if(f.deleteStyle(e),f.deleteStyle(g),f.addStyle(e,"width:"+c+"px !important"),f.addStyle(g,"width:"+b+"px !important; display:block !important; float:left !important; -webkit-box-sizing:border-box"),s.swipe){for(var h=0;h<s.total;++h){for(var i=[],k=0;k<s.view;++k){var l=h*s.view+k,m=r[l];l<d.children().length&&i.push({left:m.offsetLeft,page:h,index:l})}i.length&&s.posx.push(i)}for(var h=0;h<s.view;++h)j(h,"next");for(var h=r.length-1;h>r.length-1-s.view;--h)j(h,"prev");n(0)}}function j(a,b){var c=angular.element(r[a]).clone(!0,!0);s.infinity&&("next"==b?d.append(c):d.prepend(c))}function k(){t||(t=!0,angular.element(document.body).attr("ondragstart","return false"),angular.element(document.body).attr("onselectstart","return false"),s.wrap.bind("touchstart.hwswipe touchmove.hwswipe touchend.hwswipe",function(a){var b;try{b=a.originalEvent.changedTouches[0]}catch(c){b=a.changedTouches[0]}var d=b.clientX,e=b.clientY;switch(a.type){case"touchstart":a.stopPropagation(),s.touchPos=d,s.scrolly=e;break;case"touchmove":var f=s.touchPos-d,g=s.scrolly-e;Math.abs(g)>10&&"X"!=s.useScrollPos&&(s.useScrollPos="Y"),Math.abs(f)>20&&"Y"!=s.useScrollPos&&(s.useScrollPos="X"),s.side=s.touchPos<d?"prev":"next","Y"!=s.useScrollPos&&(a.preventDefault(),m(f));break;case"touchend":"Y"!=s.useScrollPos?m(s.touchPos-d,!0):o(s.movePos),s.touchPos=s.scrolly=0,s.useScrollPos=""}}))}function l(a,c){return a?{"-webkit-transition":"-webkit-transform "+s.duration+"ms "+b(s.easing),"-moz-transition":"-moz-transform "+s.duration+"ms "+b(s.easing),"-o-transition":"-o-transform "+s.duration+"ms "+b(s.easing),transition:"transform "+s.duration+"ms "+b(s.easing),"-webkit-transform":"translateX("+c+"px)","-moz-transform":"translateX("+c+"px)","-o-transform":"translateX("+c+"px)","-ms-transform":"translateX("+c+"px)",transform:"translateX("+c+"px)"}:{"-webkit-transition":"-webkit-transform 0ms","-moz-transition":"-moz-transform 0ms","-o-transition":"-o-transform 0ms",transition:"transform 0ms","-webkit-transform":"translateX("+c+"px)","-moz-transform":"translateX("+c+"px)","-o-transform":"translateX("+c+"px)","-ms-transform":"translateX("+c+"px)",transform:"translateX("+c+"px)"}}function m(b,c){if(Math.abs(b)&&!s.transition){var e=s.movePos-b;if(c){if(Math.abs(b)<window.innerWidth/6)return void o(s.movePos);s.transition=!0,p(),n(s.page,!0),a(function(){s.page<0&&(n(s.total-1,!1),s.page=s.total-1),s.page>s.total-1&&(n(0,!1),s.page=0),s.transition=!1},s.duration)}else d.css(l(c,e))}}function n(a,b,c){var e;if(a>-1&&a<s.total){if(e=-((s.infinity?s.parentWidth:0)+s.posx[a][0].left),a==s.total-1){var f=(s.infinity?d.children()[0].offsetWidth:0)-s.marginRight;e=-(f+s.posx[a][s.posx[a].length-1].left)}}else 0>a&&(e=0),a>s.total-1&&(e=-(d[0].clientWidth-s.parentWidth));d.css(l(b,e)),s.movePos=e,c&&(s.page=a)}function o(a){d.css(l(!0,a)),s.movePos=a}function p(){"next"==s.side?(s.page<s.total&&s.page++,!s.infinity&&s.page>=s.total-1&&(s.page=s.total-1)):(s.page>-1&&s.page--,!s.infinity&&s.page<0&&(s.page=0))}function q(){r&&(d.children().remove(),d.append(r),g())}var r,s={},t=!1,u=angular.element(window),v=f.swipe.get();d.css({display:"none",position:"relative","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box","will-change":"transform","pointer-events":"auto"}),d.parent().css({"-webkit-user-drag":"none","touch-action":"pan-y","user-select":"none","will-change":"transform","-webkit-font-smoothing":"antialiased","box-sizing":"border-box"}),d.addClass("hwswipe_clear"),d.addClass(v),c.$watch(function(){return s.page},function(a,b){a==b||0>a||a>s.total-1||!s.total||(c.swipeIndex=a,s.auto&&(clearTimeout(s.autotimer),s.autotimer=setTimeout(function(){s.side="next",m(window.innerWidth/2,!0)},s.interval)))}),c.$watch(function(){return s.total},function(a,b){a!=b&&(c.swipeTotal=a)}),c.$watch(function(){return u.width()},function(a,b){a&&a!=b&&r&&q()},!0),u.bind("resize",function(){c.$apply()});var w=c.$watch(function(){return d.children().length},function(b){return b?1==b?(d.css({display:"block"}),void a(function(){1==d.children().length&&w()},4e3)):void a(function(){w(),g()},300):void 0});c.swipeController=function(a){switch(a){case"next":s.side="next",m(window.innerWidth/2,!0);break;case"prev":s.side="prev",m(window.innerWidth/2,!0);break;default:if("number"!=typeof a)return;n(a,!0,!0)}}}}}]).filter("hwRange",function(){return function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b}})}(),function(a,b,c){"use strict";var d=b.module("searchDetailPopup",["lotteComm"]);d.controller("SearchDetailPopupCtrl",["$scope",function(a){}]),d.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),d.directive("videoPoster",[function(){return{restrict:"A",link:function(a,c,d){d.videoPoster&&b.element(c).attr("poster",d.videoPoster),
a.vPoster=function(){b.element(c).attr("poster",d.videoPoster)}}}}]),d.directive("searchDetailPopup",["LotteCommon","LotteUtil","LotteScroll","LotteStorage","$window","$timeout","$http","$location","$filter","commInitData",function(a,c,d,e,f,g,h,i,j,k){return{templateUrl:"/lotte/resources_dev/search/search_detail_popup.html",replace:!0,link:function(c,e,f){c.srhPrdDetailInfo={data:{},show:!1,item:{},imageSwipeIdx:1,showArrow:!0};var i=-1;c.stopAutoPlayTimer=function(){clearTimeout(i)},c.getProductDetailInfo=function(e,f){c.sendTclick("m_RDC_SrhResult_Clk_ProductPop"),c.srhPrdDetailInfo.data={};try{e.vodUrl=e.mpic_info.mpic_url}catch(j){}c.isValidString(e.vodUrl)?(b.copy(e,c.srhPrdDetailInfo.item),c.srhPrdDetailInfo.show=!0,c.srhPrdDetailInfo.idx=f,c.scrollFlag=!1,d.disableScroll(),c.dimmedOpen({target:"prdDetailInfo",callback:c.productDetailInfoClose,scrollEventFlag:!0}),g(function(){b.element(".thumb-wrap").height(b.element(".unit-pop").width())},0),setTimeout(function(){autoVideoPlay("autoVideo1","#autoVideo1",!1,2)},0),i=setTimeout(function(){autoVideoPlay("autoVideo1","#autoVideo1",!1,1)},4e3)):h.get(a.listGoodsImgData,{params:{goods_no:e.goods_no}}).success(function(a,h,i,j){a.contents&&(c.srhPrdDetailInfo.data=a.contents,c.srhPrdDetailInfo.show=!0,c.srhPrdDetailInfo.showArrow=!0,c.srhPrdDetailInfo.item={},b.copy(e,c.srhPrdDetailInfo.item),c.srhPrdDetailInfo.idx=f,c.scrollFlag=!1,d.disableScroll(),c.dimmedOpen({target:"prdDetailInfo",callback:c.productDetailInfoClose,scrollEventFlag:!0}),c.srhPrdDetailInfo.imageSwipeIdx=1,c.setAutoHideSwipeArrow(),g(function(){b.element(".thumb-list").height(b.element(".unit-pop").width())}))}).error(function(a,b,c,d){console.log("Data Error : 상품기본정보 로드 실패")})},c.setAutoHideSwipeArrow=function(){c.srhPrdDetailInfo.showArrow&&g(function(){var a=b.element("#srhPrdDetailInfoArrow");a.fadeOut(2e3)},1e3)},c.getImageSwipeControl=function(a){c.imageSwipeControl=a},c.setImageSwipeInfo=function(a){c.srhPrdDetailInfo.imageSwipeIdx=a+1,c.sendTclick("m_RDC_SrhResult_PopLayer_Swp_Prd_idx"+c.numberFill(a+1,3))},c.advtBnrLstSwipeIdx=1,c.swipeEnd=function(a){c.advtBnrLstSwipeIdx=a+1},c.setImageSwipePos=function(a){var b=c.srhPrdDetailInfo.imageSwipeIdx-1;c.srhPrdDetailInfo.data.imgList.items.length<b+a?b=0:0>b+a?b=c.srhPrdDetailInfo.data.imgList.items.length-1:b+=a,c.imageSwipeControl.moveIndex(b)},c.productDetailInfoClose=function(a){try{document.getElementById("autoVideo1").pause()}catch(b){}return a||c.sendTclick("m_RDC_SrhResult_Poplayer_Clk_Close"),c.srhPrdDetailInfo.show=!1,c.scrollFlag=!0,d.enableScroll(),c.dimmedClose(),!1},c.addWishClick=function(){if(c.srhPrdDetailInfo.data.saveWishYn)return alert("이미 등록된 상품입니다."),!1;var a=c.srhPrdDetailInfo.item;c.srhPrdDetailInfo.idx;if("LECS"==a.outlnkMall)return confirm("공식온라인 몰로 이동후 담을 수 있습니다.")&&LotteLink.goOutLink(a.outlnk,a.outlnkMall),!1;if("SP"==a.outlnkMall)return confirm("롯데슈퍼로 이동후 담을 수 있습니다.")&&LotteLink.goOutLink(a.outlnk,a.outlnkMall),!1;if(!c.loginInfo.isLogin)return alert("로그인 후 이용하실 수 있습니다."),c.loginProc(),!1;if("Y"==a.limit_age_yn){if(""==c.loginInfo.isAdult)return alert("이 상품은 본인 인증 후 이용하실 수 있습니다."),c.goAdultSci(),!1;if(!c.loginInfo.isAdult)return alert("이 상품은 법률규정에 의하여 만 19세 이상 성인만 조회 및 구매가 가능합니다."),!1}c.sendProductWish(a.goods_no,function(a){a?c.srhPrdDetailInfo.data.saveWishYn=!0:c.srhPrdDetailInfo.data.saveWishYn=!1}),c.sendTclick("m_RDC_SrhResult_Poplayer_Clk_Wsh")}}}}])}(window,window.angular);