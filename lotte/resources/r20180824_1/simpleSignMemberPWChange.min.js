!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.controller("changePwCtrl",["$scope","$filter","$sce","$http","$window","LotteCommon","commInitData",function(a,b,c,d,e,f,g){a.showWrap=!0,a.contVisible=!0,a.subTitle="비밀번호 변경",a.actionBar=!0,a.cert_key1="",a.cert_key2="",a.cert_key1=null!=g.query.cert_key1?g.query.cert_key1:"",a.cert_key2=null!=g.query.cert_key2?g.query.cert_key2:"",$.ajax({type:"post",async:!1,url:f.simpleSignMemberPWChangeUrl,data:{cert_key1:a.cert_key1,cert_key2:a.cert_key2},success:function(b){return a.cert_key1=b.cert_key1,a.cert_key2=b.cert_key2,""==a.cert_key1?void(document.href=f.mainUrl):""==a.cert_key2?void(document.href=f.mainUrl):void 0},error:function(a){}})}]),d.directive("lotteContainer",["LotteUtil","LotteCommon",function(b,c){return{templateUrl:"/lotte/resources_dev/login/change_pw_container.html",replace:!0,link:function(d,e,f){function g(a,b){var c=a,d=b;return""==d?(alert("입력되지 않은 정보가 있습니다."),$(c).focus(),!1):h(d,3)?(alert("연속된 문자를 사용할 수 없습니다."),$(c).val(""),$(c).focus(),!1):i.test(d)?(alert("공백은 사용할 수 없습니다."),$(c).val(""),$(c).focus(),!1):j.test(d)?(alert("공백은 사용할 수 없습니다."),$(c).val(""),$(c).focus(),!1):l.test(d)?(alert("특수문자 중 &, <, >,\", '는 사용할 수 없습니다."),$(c).val(""),$(c).focus(),!1):d.length<8||d.length>15||!k.test(d)?(alert("비밀번호는 8~15자리의 영문, 숫자, 특수문자를 혼합하여 설정해주세요."),$(c).val(""),$(c).focus(),!1):!0}function h(a,b){b||(b=3);var c,d,e,f,g,h,i=["0123456789","abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ"],j="";for(c=0;c<i.length;c++)for(g=i[c],h=i[c]+i[c],d=0;d<g.length;d++)e=g.substr(d,1),f=h.substr(d,b),j+="["+e+"]{"+b+",}|",j+=f+"|";return j=new RegExp(j.replace(/.$/,"")),j.test(a)?!0:!1}var i=/^\s+|\s+$/g,j=/[\s]/g,k=/^(?=.*[a-zA-Z])(?=.*[`~!@#$%^*+=-?:;.,|\\\{\}\[\]\(\)\/])(?=.*[0-9]).{6,16}$/,l=/([\<\>\&\'\"])/i;d.fn_SendPW=function(){g($("#passwd"),$("#passwd").val())&&b.pwReWordCheck($("#passwd_re"),$("#passwd_re").val(),$("#passwd").val())&&$.ajax({type:"GET",url:"/json/login/curPwSameCheck.json?passwd="+$("#passwd").val()+"&cert_key1="+d.cert_key1,success:function(a){"success"==a.result?$.ajax({type:"POST",url:c.simpleSignMemberPWChangeGoUrl,data:{cert_key1:d.cert_key1,cert_key2:d.cert_key2,passwd:$("#passwd").val(),passwd_re:$("#passwd_re").val()},success:function(a){a=a.result,"success"==a?(alert("비밀번호 변경에 성공하였습니다.\n다시 로그인하여 안전하게 쇼핑하세요."),d.next()):"same"==a?alert("이메일 주소와 비빌번호가 동일합니다.\n다시 입력 바랍니다."):alert("비밀번호 변경 실패 하였습니다.")}}):alert(a.result)}})},d.next=function(){var b=c.mainUrl;d.fromEllotte&&(b="http://members.ellotte.com/login/form",location.origin.indexOf("mo.lotte.com")>-1&&(b="http://tst.m.members.tellotte.com/members-mo/login/form")),a.location.href=b},d.$watch("passwd",function(a){a&&(d.passwd=a.slice(0,15))}),d.$watch("passwd_re",function(a){a&&(d.passwd_re=a.slice(0,15))})}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("findHead",["$window","LotteCommon","commInitData",function(a,c,d){return{restrict:"AEC",templateUrl:"/lotte/resources_dev/login/find_ellotte_head.html",replace:!0,link:function(a,c,e){a.more_param="",a.fromEllotte=null!=d.query.ellotte_join?!0:!1,console.log(a.test),a.fromEllotte&&(b.element("body").addClass("ellotte"),a.more_param="&ellotte_join=Y"),b.element("#wrapper").css("display","block"),a.head_type=c.attr("page")}}}]),d.directive("findFoot",["$window","LotteCommon",function(a,b){return{restrict:"AEC",templateUrl:"/lotte/resources_dev/login/find_ellotte_foot.html",replace:!0,link:function(a,b,c){}}}])}(window,window.angular);