!function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteProduct","lotteNgSwipe","lotteSlider"]);d.controller("CateBeautyCtrl",["$window","$location","$http","$scope","$timeout","LotteStorage","LotteCommon","commInitData",function(d,e,f,g,h,i,j,k){function l(){var b=k.query.cateDepth1?decodeURIComponent(k.query.cateDepth1):"none",c=k.query.cateDepth2?decodeURIComponent(k.query.cateDepth2):"none",e=k.query.title?decodeURIComponent(k.query.title):"none",f=decodeURIComponent(d.location.href),g="none"==c?e:c+" / "+e;a.utag_data={event_type:"partner_prodcatview",product_cat:b,product_ocat:g,url:f,partner_name:"Lotte",country_code:"KR"}}g.showWrap=!0,g.contVisible=!0,g.screenID="BeautyCateTpl",g.pageLoading=!0,g.subTitle="",g.Math=Math,g.tclick=g.tClickBase+g.screenID,g.no1PopFlag=!1,g.screenDataReset=function(){g.screenData={rankingPage:1,isRanking:!0,disp_name:null,disp_no:"5537279",idx:"",smallCateImg:[],mainBn:[],movPlan:[],timePlan:[],ranking:[],rankingPrd:[],prdReview:[],newPrdList:[],mdTip:[],bnList:[],dealPrd:[],smallCate:[],no1Pop:[]}},g.screenDataReset(),k.query.curDispNo!=c&&(g.screenData.disp_no=k.query.curDispNo),k.query.idx!=c&&(g.screenData.idx=k.query.idx),g.curDispNoSctCd=65,g.loadScreenData=function(){g.productListLoading=!0,f.get(j.cateMidBeautyData).success(function(a){if(a=a.beautyList,g.subTitle=g.screenData.disp_name=a.disp_nm,g.screenData.smallCateImg=a.small_cate_img.items,g.screenData.timePrd=a.time_prd,g.screenData.mainBn=a.main_banner_list.items,g.screenData.movPlan.push(a.mov_plan1),g.screenData.movPlan.push(a.mov_plan2),g.screenData.timePlan=a.time_plan,g.screenData.ranking=a.ranking.items,g.screenData.tester=a.tester,g.screenData.beautyNo1=a.beauty_NO1,g.screenData.prdReview=a.prd_review,g.screenData.newPrdList=a.new_prd_list,g.screenData.mdTip.push(a.md_tip1),g.screenData.mdTip.push(a.md_tip2),g.screenData.dealPrd=a.deal_prd.items,g.screenData.bnList.push(a.top_banner_promotion),g.screenData.bnList.push(a.banner_promotion),g.screenData.bnList.push(a.banner_gift),g.screenData.bnList.push(a.banner_evt),g.productListLoading=!1,g.pageLoading=!1,null!=g.screenData.tester.test_list.items)for(var b=g.screenData.tester.test_list.items,c=0;c<b.length;c++)"L103568"==b[c].mast_evt_no&&(b[c].evt_dtime_str=b[c].evt_dtime_str.replace(/~\d{4}./," ~ "));g.rankingPrdNum()}).error(function(a){g.pageLoading=!1,g.productListLoading=!1})},g.rankingPrdNum=function(){for(var a=g.screenData.rankingPage,b=4*a,c=g.screenData.rankingPrd.length,d=c;b>d;d++){if(d>=g.screenData.ranking.length){g.screenData.isRanking=!1;break}g.screenData.rankingPrd.push(g.screenData.ranking[d])}};var m=i.getSessionStorage(g.screenID+"Loc"),n=i.getSessionStorage(g.screenID+"Data"),o=i.getSessionStorage(g.screenID+"ScrollY");if(m==a.location.href&&g.locationHistoryBack&&null!=n){var p=JSON.parse(n);g.pageLoading=!1,g.screenData=p.screenData,g.subTitle=g.screenData.disp_name,h(function(){b.element(d).scrollTop(o)},800)}else g.loadScreenData();b.element(d).on("unload",function(a){var c={};c.screenData=b.copy(g.screenData),!k.query.localtest&&g.leavePageStroage&&(i.setSessionStorage(g.screenID+"Loc",e.absUrl()),i.setSessionStorage(g.screenID+"Data",c,"json"),i.setSessionStorage(g.screenID+"ScrollY",b.element(d).scrollTop()))}),b.element(document).ready(function(){l()})}]),d.directive("lotteContainer",["$timeout","LotteCommon","LotteLink","LotteScroll",function(a,b,d,e){return{templateUrl:"/lotte/resources_dev/category/m/cate_beauty_list_container.html",replace:!0,link:function(a,e,f){function g(c,d,e){c+=c.indexOf("?")>-1?"&"+a.baseParam+"&tclick="+a.tclick+d:"?"+a.baseParam+"&tclick="+a.tclick+d,null!=e&&(a.loginInfo.isLogin||(c=b.loginUrl+"?"+a.baseParam+"&fromPg=0&targetUrl="+encodeURIComponent(c,"UTF-8"))),location.href=c}if(null!=a.screenData.timePlan){var h=new Date;h.setDate(h.getHours()>=10?h.getDate()+1:h.getDate()),h.setHours(10,0,0,0);var i=h.getTime(),j=setInterval(function(){var a=i-(new Date).getTime(),b="";if(10>a)clearInterval(j),b="00:00:00";else{var c=Math.floor(a/60/60/1e3),d=Math.floor(a/60/1e3)%60,e=Math.floor(a/1e3)%60;b+=10>c?"0"+c+":":c+":",b+=10>d?"0"+d+":":d+":",b+=10>e?"0"+e:e}$("#time_num").text(b)},1e3)}a.subCateClk=function(d,e){if("#"!=d.link_url&&""!=d.link_url){var f=d.link_url;g(f,"_catesmall_"+e+"5556743")}else{a.cateDepth1="";for(var h=0;h<a.sideCtgData.ctgAll.length;h++)for(var i=0;i<a.sideCtgData.ctgAll[h].lctgs.length;i++)if(a.sideCtgData.ctgAll[h].lctgs[i].name==a.subTitle){a.cateDepth1=a.sideCtgData.ctgAll[h].name;break}var f=b.cateProdListUrl+"?curDispNo="+d.disp_no+"&cateDiv=MIDDLE&idx="+a.screenData.idx+"&mGrpNo="+d.mgrp_no+"&curDispNo2="+a.screenData.disp_no+"&cateDepth1="+a.cateDepth1+"&cateDepth2="+a.subTitle+"&title="+encodeURIComponent(d.disp_nm)+"&curDispNoSctCd=65";d.sort!=c&&(f+="&sort="+d.sort),g(f,"_catesmall_"+e+d.disp_no)}},a.timePrdClk=function(a){var c=b.prdviewUrl+"?goods_no="+a;g(c,"_Clk_timesale_T01")},a.movPlay=function(){var b=a.tclick+"_Clk_Video_play";a.sendTclick(b)},a.movPause=function(){var b=a.tclick+"_Clk_Video_pause";a.sendTclick(b)},a.movVolume=function(b){var c=a.tclick+($("#"+b).hasClass("mute")?"_Clk_Video_vol":"_Clk_Video_mute");a.sendTclick(c)},a.movFull=function(){var b=a.tclick+"_Clk_Video_full";a.sendTclick(b)},a.movLnk=function(a,b){g(a,"_Clk_Video_"+b)},a.mainBnClk=function(a,b){g(a,"_Clk_Ban_A0"+b)},a.oclockClk=function(a,c){var d=b.prdviewUrl+"?goods_no="+a;g(d,"_Clk_Ban_B0"+c)},a.moreRanking=function(){a.screenData.rankingPage++,a.rankingPrdNum();var b=a.tclick+"_Clk_Btn01";a.sendTclick(b)},a.tstEvtClk=function(a,c){var d=b.beautyEvtTester+"?evtNo="+a;g(d,"_Clk_Tst_idx0"+c,1)},a.rvwEvtClk=function(a,c){var d=b.beautyEvtReview+"?evtNo="+a;g(d,"_Clk_Rvw_idx0"+c)},a.myReviewClk=function(){var a=b.mylotteCritViewUrl;g(a,"_Clk_Btn02")},a.myEventClk=function(){var a=b.eventGumeUrl;g(a,"_Clk_Btn03")},a.evtSwipeEnd=function(b){var c="_Swp_Rvw_idx0";"L103568"==a.screenData.tester.test_list.items[b.idx].mast_evt_no&&(c="_Swp_Tst_idx0"),a.sendTclick(a.tclick+c+(b.idx+1))},a.facebookLnk=function(){var b="https://www.facebook.com/lottebeauty";d.goOutLink(b),a.sendTclick(a.tclick+"_Clk_Btn05")},a.btSwipeEnd=function(b){a.sendTclick(a.tclick+"_Swp_Ban_A"+(b.idx+1))},a.facebookPop=function(b,c){a.screenData.no1Pop=b,a.dimmedOpen({target:"no1Pop",callback:this.no1Close}),a.sendTclick(a.tclick+"_Clk_Ban_I"+c),a.no1PopFlag=!0},a.no1Close=function(){a.no1PopFlag=!1,a.dimmedClose()},a.no1ImgSwipeEnd=function(b){a.sendTclick(a.tclick+"_Swp_Ban_B"+(b.idx+1))},a.no1PrdClk=function(c,d){var e=b.prdviewUrl+"?goods_no="+c;g(e,"_Clk_Prd_F"+d),a.no1Close()},a.rvClk=function(a,c,d){var e=b.prdviewUrl+"?goods_no="+c;g(e,"_Clk_Review_"+a+"_idx0"+d)},a.newPrdClk=function(a,c){10>c?c="0"+c:c;var d=b.prdviewUrl+"?goods_no="+a;g(d,"_Clk_Prd_B"+c)},a.mdBnClk=function(a,b){b=0==b?"D01":"E01",g(a,"_Clk_Ban_"+b)},a.mdPrdClk=function(a,c,d){d=0==d?"D0":"E0";var e=b.prdviewUrl+"?goods_no="+a;g(e,"_Clk_Prd_"+d+c)},a.dealPrdClk=function(a,c){var d=b.prdviewUrl+"?goods_no="+a;g(d,"_Clk_Bigdeal_idx0"+c)},a.moreDeal=function(){a.clearSessionStorage();var c=b.mainUrl+"?dispNo=5571899";g(c,"_Clk_Btn04")},a.bnLink=function(a,b){g(a,b)}}}}]),d.directive("videoPoster",[function(){return{restrict:"A",link:function(a,c,d){d.videoPoster&&b.element(c).attr("poster",d.videoPoster)}}}]),d.directive("videoSource",[function(){return{restrict:"A",link:function(a,c,d){d.videoSource&&b.element(c).attr("src",d.videoSource)}}}])}(window,window.angular);