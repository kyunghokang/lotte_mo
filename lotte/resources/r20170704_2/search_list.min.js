!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteDoubleCoupon","lotteSideCtg","lotteCommFooter","lotteProduct","lotteNgSwipe","lotteSlider","angular-carousel","lotteMainPop"]);d.filter("pageRange",[function(){return function(a,b,c){for(var d=[],e=0;e<a.length;e++)e>=b*c&&(b+1)*c>e&&d.push(a[e]);return d}}]),d.controller("SearchList",["$scope","$http","$filter","$location","$window","$timeout","LotteCommon","LotteUtil","LotteLink","commInitData","LotteStorage","LotteUserService","$compile",function(d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){return y[a]}function r(){if(null!=d.uiStateObj.voiceResultParams&&d.srhResultData.price!=c){var a,b,e,f=d.uiStateObj.voiceResultParams;if(f.VBrdNm!=c&&""!=f.VBrdNm&&(d.postParams.brdNm=f.VBrdNm),f.VColorCd!=c&&""!=f.VColorCd&&d.srhDetailData.srhColorList!=c)for(a=d.srhDetailData.srhColorList.length,b=0;a>b;b++)if(e=d.srhDetailData.srhColorList[b],e.colorCd==f.VColorCd&&0==e.selected){d.srhSelectColor(e,"N");break}if(f.VSmpickYN!=c&&"Y"==f.VSmpickYN&&(d.postParams.smpickYN="Y",d.postParams.smpickBranchNo="",d.uiStateObj.smpickBranchName="",f.VSmpickBranchNo!=c&&""!=f.VSmpickBranchNo&&d.srhDetailData.srhTerms.smpickBranch!=c))for(a=d.srhDetailData.srhTerms.smpickBranch.length,b=0;a>b;b++)if(e=d.srhDetailData.srhTerms.smpickBranch[b],f.VSmpickBranchNo==e.branchNo){d.postParams.smpickBranchNo=e.branchNo,d.uiStateObj.smpickBranchName=e.name;break}f.VDelSevenYN!=c&&"Y"==f.VDelSevenYN&&(d.postParams.delSevenYN="Y");var g=d.srhResultData.price;f.VPriceMinU!=c&&""!=f.VPriceMinU&&(f.VPriceMinU=parseInt(f.VPriceMinU,10),f.VPriceMinU<g.min&&(f.VPriceMinU=g.min),f.VPriceMinU>g.max&&(f.VPriceMinU=g.max),d.postParams.priceMinUTemp=f.VPriceMinU,d.postParams.priceMinU=f.VPriceMinU),f.VPriceMaxU!=c&&""!=f.VPriceMaxU&&(f.VPriceMaxU=parseInt(f.VPriceMaxU,10),f.VPriceMaxU<g.min&&(f.VPriceMaxU=g.min),f.VPriceMaxU>g.max&&(f.VPriceMaxU=g.max),d.postParams.priceMaxUTemp=f.VPriceMaxU,d.postParams.priceMaxU=f.VPriceMaxU),d.uiStateObj.voiceResultParams=null}}function s(){if(null!=d.uiStateObj.defaultCtgNo){if(d.srhResultData.ctgLst&&d.srhResultData.ctgLst.items)for(var a,b=d.srhResultData.ctgLst.items.length,c=0;b>c;c++)if(a=d.srhResultData.ctgLst.items[c],a.ctgNo==d.uiStateObj.defaultCtgNo){d.uiStateObj.selectedCategory.depth1=a.ctgNo,d.uiStateObj.selectedCategory.ctgName=a.ctgName;break}d.uiStateObj.defaultCtgNo=null,d.uiStateObj.skipListLoad=!0,i(d.srhSubCtgPost,1)}}function t(){if(d.srhResultData.advtBnrLst==c){var a={keyword:d.postParams.keyword};e.get(d.URLs.searchAdvtBnr,{params:a}).success(function(a,b,c,e){d.srhResultData.advtBnrLst=a.advtBnrLst})}}function u(){if(d.srhResultData==c||d.srhResultData.prdLst==c||d.srhResultData.prdLst.items==c||0==d.srhResultData.prdLst.items.length)return d.srhResultData.listTop6=[],d.srhResultData.listMid2=[],void(d.srhResultData.listRest=[]);var a=d.srhResultData.prdLst.items.length;6>=a?(d.srhResultData.listTop6=[].concat(d.srhResultData.prdLst.items),d.srhResultData.listMid2=[],d.srhResultData.listRest=[]):18>=a?(d.srhResultData.listTop6=d.srhResultData.prdLst.items.slice(0,6),d.srhResultData.listMid2=d.srhResultData.prdLst.items.slice(6,18),d.srhResultData.listRest=[]):(d.srhResultData.listTop6=d.srhResultData.prdLst.items.slice(0,6),d.srhResultData.listMid2=d.srhResultData.prdLst.items.slice(6,18),d.srhResultData.listRest=d.srhResultData.prdLst.items.slice(18))}function v(a){return a=(a+"").indexOf("?")>-1?a:a+"?","?"!=a.substring(a.length-1,a.length)&&(a+="&"),a+d.baseParam}d.curDispNoSctCd="50",d.curDispNo="1749096",d.showWrap=!0,d.contVisible=!0,d.templateType1="search_list",d.templateType2="search_list",d.screenID="SrhResult",d.isShowLoading=!1,d.productListLoading=!1,d.searchTermsLoading=!1,d.searchTermsChanged=!1,d.productMoreScroll=!0,d.tipShow=!1,d.brdShowListCnt=50,d.uiStateObj={initFlag:!0,srhFilterSelectedIdx:-1,srhFilterCtgDepth1CtgNo:"",srhFilterCtgDepth:0,srhFilterCtgFlag:!1,srhFilterBrdFlag:!1,srhFilterBrdSort:"-cnt",srhFilterDetailFlag:!1,srhFilterDetailArr:["deptYN","tvhomeYN","brdstoreYN","superYN","freeDeliYN","freeInstYN","pointYN","pkgYN","delSevenYN","delTdarYN","delQuickYN","smpickYN"],srhFilterSortFlag:!1,sortTypeIdx:0,sortTypeArr:[{label:"인기순",shortLabel:"인기순",value:"RANK,1"},{label:"판매순",shortLabel:"판매순",value:"TOT_ORD_CNT,1"},{label:"상품평 많은순",shortLabel:"상품평",value:"TOT_REVIEW_CNT,1"},{label:"최근등록순",shortLabel:"최근등록",value:"DATE,1"},{label:"낮은가격순",shortLabel:"낮은가격",value:"DISP_PRICE,0"},{label:"높은가격순",shortLabel:"높은가격",value:"DISP_PRICE,1"}],priceMinUFocus:!1,priceMaxUFocus:!1,emptyResult:!1,emptyKeyword:!1,emptyPrdLstFlag:!1,ajaxPageEndFlag:!1,smpickLayerOpenFlag:!1,smpickBranchName:"전체",relatedKwywordOpenFlag:!1,relatedKeywordEntered:!1,relatedKeywordNotEmpty:!0,relatedKeywordEnabled:!0,detailSearchDataLoaded:!1,selectedCategory:{depth1:null,depth2:null,depth3:null,depth4:null,ctgName:""},defaultCtgNo:null,rekeywordChanged:!1,skipListLoad:!1,voiceSearch:!1,voiceResultParams:null,ageGenderSearched:!1},d.srhDetailPriceValidateFlag=!0,d.searchUISetting={isShowSideBar:!1,isShowSub:!1,title:"카테고리",keywordIncExc:!1,researchTypeArr:[{label:"포함단어"},{label:"제외단어"}],researchIdx:0,isAndroidChrome:!1,smartPickSub:!0,smartPickList:!1},d.isValidApp=!1,d.validAppOS="IOS",d.URLs={searchList:j.srhListData2016,searchTerm:j.srhListTermData2016,searchAdvtBnr:j.srhListAdvtBrnList,searchRevPop:j.srhListReivewPop},d.getSearchKeyword=function(){return d.uiStateObj.voiceSearch?"음성검색 결과":d.srhResultData.keyword},d.callAppAPI=function(a){if(d.isValidApp)if(console.log(a),"AND"==d.validAppOS)try{h.lottesearch.callAndroid(a)}catch(b){}else h.location.href=a},d.checkAppVersion=function(){d.isValidApp=!1,d.appObj.isApp&&(d.appObj.isAndroid?0==d.appObj.isSktApp&&d.appObj.verNumber>=277&&(d.isValidApp=!0,d.validAppOS="AND"):d.appObj.isIOS&&("iPhone"==d.appObj.iOsType&&d.appObj.verNumber>=2700||"iPad"==d.appObj.iOsType&&d.appObj.verNumber>=236)&&(d.isValidApp=!0,d.validAppOS="IOS"));var a=(navigator.userAgent+"").toLowerCase();d.searchUISetting.isAndroidChrome=a.indexOf("android")>=0&&a.indexOf("chrome")>=0},d.checkAppVersion(),d.postParams={rtnType:"",keyword:"",orgKeyword:"",dpml_no:"1",dispCnt:30,page:1,ctgNo:"",ctgDepth:0,brdNoArr:[],brdNmArr:[],sort:d.uiStateObj.sortTypeArr[0].value,deptYN:"N",tvhomeYN:"N",smpickYN:"N",smpickBranchNo:null,brdstoreYN:"N",superYN:"N",freeDeliYN:"N",freeInstYN:"N",pointYN:"N",pkgYN:"N",delSevenYN:"N",delTdarYN:"N",delQuickYN:"N",selectedColor:[],rekeyword:"",reQuery:[],exQuery:[],priceMinU:null,priceMaxU:null,isVoice:"N",brdNm:""},d.srhResultData={},d.prdDealList=[],d.srhDetailData={srhTerms:{dept:!1,tvhome:!1,smpick:!1,smpickBranch:[],brdstore:!1,"super":!1,seven:!1,tdar:!1,quick:!1},srhColorList:[]},d.csCustomSettings={customized:!1,category:[],brand:[],color:[]},d.csTempSettings={customized:!1,changed:!1,category:[],brand:[],color:[]},d.csCustomBaseData={};var w=n.getSessionStorage("customSearchBaseData","json");null!=w&&(d.csCustomBaseData=w);var x=n.getLocalStorage("customSearchSettings","json");null!=x&&(d.csCustomSettings=x),d.csResetCustomSearch=function(a){if(d.csCustomSettings.customized){var b={callback:d.csResetCustomSearchCB,label:{ok:"초기화"}};d.confirm_2016("맞춤 설정을<br/>초기화 하시겠습니까?",b)}a!=c&&d.sendTclick(a)},d.csResetCustomSearchCB=function(a){a===!0&&(d.csTempSettings.customized=!1,d.csTempSettings.changed=!1,d.csTempSettings.category.length=0,d.csTempSettings.brand.length=0,d.csTempSettings.color.length=0,d.csApplyCustomSearchCB(!0))},d.csApplyCustomSearchCB=function(a){a===!0&&(d.csCustomSettings.customized=d.csTempSettings.customized,d.csCustomSettings.category=[].concat(d.csTempSettings.category),d.csCustomSettings.brand=[].concat(d.csTempSettings.brand),d.csCustomSettings.color=[].concat(d.csTempSettings.color),n.setLocalStorage("customSearchSettings",d.csCustomSettings,"json"),d.loadDataParams!=c&&d.postParams!=c&&(d.csCustomSettings.customized&&d.uiStateObj!=c&&(d.uiStateObj.sortTypeIdx=0,d.postParams.sort=d.uiStateObj.sortTypeArr[0].value),null!=d.srhResultData.orgKeyword&&""!=d.srhResultData.orgKeyword&&(d.postParams.keyword=d.srhResultData.orgKeyword),d.postParams.rtnType="E",d.loadDataParams(d.postParams.rtnType)))},d.postParams.keyword=decodeURIComponent(m.query.keyword),d.postParams.keyword=k.replaceAll(d.postParams.keyword,"+"," "),d.postParams.keyword=d.postParams.keyword.replace(/(<([^>]+)>)/gi,""),d.postParams.orgKeyword=d.postParams.keyword,d.postParams.isVoice="Y"==m.query.isVoice?"Y":"N",d.uiStateObj.voiceSearch="Y"==d.postParams.isVoice,m.query.cateNo!=c&&""!=m.query.cateNo&&(d.uiStateObj.defaultCtgNo=m.query.cateNo),d.surKeyword="",d.resurKeyword="",d.survey_state=0,d.survey_noprod_stat=!1,d.survey_check=function(a,b){if(d.survey_state=a,(0==a||4==a)&&(d.survey_noprod_stat=!1),a>1){var c=[0,0,3,4,2,1],f={login_id:o.getCookie("LOGINID"),site_no:"1",srchw_nm:""+d.srhResultData.keyword+" "+d.postParams.reQuery.join(" "),stfc_sct_cd:c[a],add_op_cont:b};e.get(j.searchSurvery,{params:f})}},d.survey_noprod_send=function(){var a=b.element(".survey_noprd_ta:visible").val();if(0==a.length)return void d.alert_2016("찾으시는 상품을 입력해 주세요.");d.survey_state=4,d.survey_noprod_stat=!1;var c={login_id:o.getCookie("LOGINID"),site_no:"1",srchw_nm:""+d.srhResultData.keyword+" "+d.postParams.reQuery.join(" "),stfc_sct_cd:2,add_op_cont:"찾는상품 없음",cust_op_cont:a};e.get(j.searchSurvery,{params:c})},d.survey_noprod=function(){d.survey_noprod_stat=!0},d.setSurveyPos=function(){var a=$(".unitWrap").find("ol > li").length,c=29;"search_image6"==d.templateType1&&(c=23);var e;0==$(".survey.inst").length?(d.surKeyword=d.postParams.keyword,d.resurKeyword=d.postParams.reQuery,29>a?i(function(){e=p($(".survey").clone().addClass("inst"))(d),0==a?b.element(".empty_result_wrap .favlst").before(e):b.element("#footer").before(e),d.uiStateObj.emptyResult&&i(function(){var a=b.element(".survey.inst").length;console.log(a),a>0&&(d.survey_state=1,d.survey_noprod_stat=!0)},1)},0):(e=p($(".survey").clone().addClass("inst"))(d),$(".prod_list_01").length>0?b.element(".prod_list_01 > li").eq(c).after(e):$(".prod_list_02").length>0&&b.element(".prod_list_02 > li").eq(c).after(e))):a>=30&&0==$(".unitWrap").find(".survey ").length&&($(".survey.inst").remove(),e=p($(".survey").clone().addClass("inst"))(d),$(".prod_list_01").length>0?b.element(".prod_list_01 > li").eq(c).after(e):$(".prod_list_02").length>0&&b.element(".prod_list_02 > li").eq(c).after(e)),i(function(){b.element(".survey.inst .caseA > .title span").text(d.surKeyword),b.element(".survey.inst .caseA > .title var").text(d.resurKeyword.join(" ")),b.element(".survey.inst").show()},1e3),i(function(){b.element(".survey.inst .caseA > .title span").text(d.surKeyword),b.element(".survey.inst .caseA > .title var").text(d.resurKeyword.join(" ")),b.element(".survey.inst").show()},2e3)},d.winW=$(a).width(),b.element(h).on({resize:function(){d.winW!=$(a).width()&&(d.winW=$(a).width(),$(".survey.inst").remove(),setTimeout(function(){d.setSurveyPos()},100))}}),d.checkDealListShow=function(){return"search_image6"==d.templateType1?!1:null!=d.uiStateObj.defaultCtgNo?!1:d.prdDealList==c||0==d.prdDealList.length?!1:d.uiStateObj.srhFilterCtgFlag||d.uiStateObj.srhFilterBrdFlag||d.uiStateObj.srhFilterDetailFlag?!1:d.postParams.reQuery.length>0||d.postParams.exQuery.length>0?!1:d.csCustomSettings!=c&&d.csCustomSettings.customized&&0==d.uiStateObj.sortTypeIdx?!1:!0},d.retriveTemplateType=function(){d.uiStateObj.ageGenderSearched||"Y"==d.postParams.isVoice||"T"==d.postParams.isVoice?(d.templateType1="search_list",d.templateType2="search_list"):d.srhResultData.dispUnitType!=c&&"01"==d.srhResultData.dispUnitType?(d.templateType1="search_image6",d.templateType2="search_image"):(d.templateType1="search_list",d.templateType2="search_list"),i(function(){b.element(".listWrap").css("opacity",1)},1)},d.loadMoreData=function(){if(d.isShowLoading||d.productListLoading||d.searchTermsLoading)return!1;if($(a).height()!=$(document).height()){var b=d.tClickBase+"SrhResult_Scl_Prd_page"+(d.postParams.page+1);d.sendTclick(b),d.postParams.rtnType="P",d.loadDataParams(d.postParams.rtnType)}},d.loadDataParams=function(a){if(d.isShowLoading||d.productListLoading||d.searchTermsLoading)return!1;a||(a="");var e={};switch(e.page=1,a){case"P":e.page=d.postParams.page+1;case"S":e.sort=d.postParams.sort;case"D":case"E":""!=d.postParams.rekeyword&&(d.postParams.keyword+=encodeURIComponent(" "+d.postParams.rekeyword),d.postParams.orgKeyword=d.postParams.keyword,d.postParams.rekeyword="",d.postParams.deptYN="N",d.postParams.tvhomeYN="N",d.postParams.superYN="N",d.postParams.brdstoreYN="N",d.postParams.smpickYN="N",d.postParams.delSevenYN="N",d.postParams.delTdarYN="N",d.postParams.delQuickYN="N"),"Y"==d.postParams.deptYN&&(e.deptYN=d.postParams.deptYN),"Y"==d.postParams.tvhomeYN&&(e.tvhomeYN=d.postParams.tvhomeYN),"Y"==d.postParams.smpickYN&&(e.smpickYN=d.postParams.smpickYN),"Y"==d.postParams.smpickYN&&null!=d.postParams.smpickBranchNo&&""!=d.postParams.smpickBranchNo&&(e.smpickBranchNo=d.postParams.smpickBranchNo),"Y"==d.postParams.brdstoreYN&&(e.brdstoreYN=d.postParams.brdstoreYN),"Y"==d.postParams.superYN&&(e.superYN=d.postParams.superYN),"Y"==d.postParams.freeDeliYN&&(e.freeDeliYN=d.postParams.freeDeliYN),"Y"==d.postParams.freeInstYN&&(e.freeInstYN=d.postParams.freeInstYN),"Y"==d.postParams.pointYN&&(e.pointYN=d.postParams.pointYN),"Y"==d.postParams.pkgYN&&(e.pkgYN=d.postParams.pkgYN),"Y"==d.postParams.delSevenYN&&(e.delSevenYN="Y"),"Y"==d.postParams.delTdarYN&&(e.delTdarYN="Y"),"Y"==d.postParams.delQuickYN&&(e.delQuickYN="Y"),d.postParams.pop!=c&&""!=d.postParams&&(e.pop=d.postParams.pop),d.postParams.priceMinU&&d.postParams.priceMinU>=d.srhResultData.price.min&&(e.priceMinU=d.postParams.priceMinU),d.postParams.priceMaxU&&d.postParams.priceMaxU<=d.srhResultData.price.max&&(e.priceMaxU=d.postParams.priceMaxU),e.colorCd=d.postParams.selectedColor.join(",");case"T":case"B":d.postParams.brdNoArr&&d.postParams.brdNoArr.length>0&&(e.brdNo=d.postParams.brdNoArr.join());case"C":case"K":default:d.postParams.ctgNo&&(e.ctgNo=d.postParams.ctgNo),d.postParams.ctgNo&&d.postParams.ctgDepth>=0&&d.postParams.ctgDepth<=3&&(e.ctgDepth=d.postParams.ctgDepth,e.dsCtgDepth=d.postParams.ctgDepth+1),e.rtnType=a,e.keyword=""+d.postParams.keyword;var f=""+d.postParams.reQuery.join(" ");""!=f&&(e.keyword+=" "+f);var g=""+d.postParams.exQuery.join(" !");""!=g&&(e.keyword+=" !"+g),e.sort=d.postParams.sort}"N"===d.postParams.chkTypo&&(e.chkTypo=d.postParams.chkTypo),e.isVoice=d.postParams.isVoice,d.postParams.brdNm&&""!=d.postParams.brdNm&&(e.brdNm=d.postParams.brdNm),d.appendCustomSettings(e);var h;if(null!=d.uiStateObj.defaultCtgNo?(h=b.extend({},e),h.ctgNo=d.uiStateObj.defaultCtgNo,h.ctgDepth=0,h.dsCtgDepth=1):h=e,1==d.uiStateObj.skipListLoad?d.uiStateObj.skipListLoad=!1:d.loadListData(h),null!=d.uiStateObj.voiceResultParams){var i=d.uiStateObj.voiceResultParams;i.VBrdNm!=c&&""!=i.VBrdNm&&(e.brdNm=i.VBrdNm),i.VColorCd!=c&&""!=i.VColorCd&&(e.colorCd=i.VColorCd),"Y"==i.VSmpickYN&&(e.smpickYN="Y",e.smpickBranchNo="",i.VSmpickBranchNo!=c&&""!=i.VSmpickBranchNo&&(e.smpickBranchNo=i.VSmpickBranchNo)),"Y"==i.VDelSevenYN&&(e.delSevenYN="Y"),i.VPriceMaxU!=c&&""!=i.VPriceMaxU&&(e.priceMaxU=i.VPriceMaxU),i.VPriceMinU!=c&&""!=i.VPriceMinU&&(e.priceMinU=i.VPriceMinU),i.VKeyword!=c&&(e.keyword=i.VKeyword)}if("Y"!=d.postParams.isVoice)switch(a){case"S":case"P":case"E":break;case"C":d.loadTermData(e);break;default:d.loadTermData(e)}d.searchTermsChanged=!0},d.reMappingDealUnitData=function(a){var c={flag:"flag",sale_rate:"saleRate",brnd_nm:"brandNm",coupon:"useCpn",is_dept:"isDept",is_tvhome:"isTvhome",md_tip:"mdTip",img_url:"imgUrl",goods_no:"goodsNo",goods_nm:"goodsNm",copy_nm:"copyNm",price1:"price1",price2:"price",sale_cnt:"saleCnt",curDispNo:"curDispNo",plan_prod_yn:"multiPrice",has_coupon:"useCpn"},e={unix_mix:!1,sale_rate:"",coupon:"",tv_card:!1,is_dept:"",is_tvhome:"",copy_nm:"",link_url:"",img_url:"",goods_no:"",goods_nm:"",price1:0,price2:0,sale_cnt:0,pmg_gdas_cnt:0,sold_out:!1,curDispNo:"",curDispNoSctCd:65,genie_yn:!1,plan_prod_yn:!1,brnd_nm:"",has_coupon:!1},f=[];return b.forEach(a,function(a,g){var h=b.copy(e);b.forEach(c,function(b,c){"link_url"==c?h[c]=j.prdviewUrl+"?"+d.baseParam+"&goods_no="+a.goodsNo+"&curDispNoSctCd=44":"has_coupon"==c?h[c]="coupon"==a[b]?!0:!1:"sale_rate"==c?null==a[b]?h[c]=0:h[c]=parseInt(a[b]):"goods_nm"==c?(h[c]=k.replaceAll(a.goodsNm,"<!HS>","<STRONG>"),h[c]=k.replaceAll(h[c],"<!HE>","</STRONG>")):"md_tip"==c?h.copy_nm=a[b]:"copy_nm"==c?""!=a[b]&&(h.brnd_nm="",h.goods_nm=k.replaceAll(a[b],"<!HS>","<STRONG>"),h.goods_nm=k.replaceAll(h.goods_nm,"<!HE>","</STRONG>")):h[c]=a[b]}),f.push(h)}),f},d.reMappingPldUnitData=function(a){var d={goods_no:"goodsNo",goods_nm:"goodsNm",brnd_nm:"brandNm",img_url:"imgUrl",original_price:"price1",discounted_price:"price2",sale_rate:"saleRate",flag:"flag",review_count:"reviewCnt",avg_gdas_stfd_val:"avg_gdas_stfd_val",smartpick_yn:"isSmpick",limit_age_yn:"byrAgelmt",is_himart:"isHimart",is_dept:"isDept",is_tvhome:"isTvhome",is_youngplz:"isYoung",is_super:"isSuper",is_sale_promotion:"goodsCmpsCd",outlnk:"outlnk",outlnkMall:"outlnkMall",curDispNo:"curDispNo",has_coupon:"useCpn",hash_list:"hash_list",find_age:"find_age",find_gender:"find_gender"},e={goods_no:"",goods_nm:"",brnd_nm:"",img_url:"",img_url_550:"",original_price:"",discounted_price:"",sale_rate:"",flag:"",is_sold_out:!1,has_coupon:!1,has_wish:!1,is_sale_promotion:!1,review_count:0,bought_sum:0,md_tip:"",promotion_text:"",isdlex_free:!1,smartpick_yn:!1,sold_out_cd_yn:"N",limit_age_yn:"N",link_url:"",is_himart:"",is_dept:"",is_youngplz:"",outlnk:"",outlnkMall:"",curDispNo:""},f=[];return b.forEach(a,function(a,g){var h=b.copy(e);b.forEach(d,function(b,c){"has_coupon"==c?h[c]="coupon"==a[b]?!0:!1:"flag"==c?a.flag&&a.flag.indexOf("무료배송")>-1&&(h.isdlex_free=!0):"is_sale_promotion"==c?"30"==a.goodsCmpsCd&&(h[c]=!0):"sale_rate"==c?null==a[b]?h[c]=0:h[c]=parseInt(a[b]):"smartpick_yn"==c?h[c]=a[b]?"Y":"N":"limit_age_yn"==c?h[c]=19==a[b]?"Y":"N":"goods_nm"==c?(h[c]=k.replaceAll(a.goodsNm,"<!HS>","<STRONG>"),h[c]=k.replaceAll(h[c],"<!HE>","</STRONG>")):h[c]=a[b]}),a.isDlvToday!=c&&(h.isDlvToday=a.isDlvToday),a.isDeptPickYn!=c&&(h.isDeptPickYn=a.isDeptPickYn),a.isCrsPickYn!=c&&(h.isCrsPickYn=a.isCrsPickYn),a.isDlvQuick!=c&&(h.isDlvQuick=a.isDlvQuick),a.nint_card_flag!=c&&(h.nint_card_flag=a.nint_card_flag),h.reivew_list=[],a.gdasInfo1!=c&&a.gdasInfo1.gdasNo!=c&&""!=a.gdasInfo1.gdasNo&&h.reivew_list.push(a.gdasInfo1),a.gdasInfo2!=c&&a.gdasInfo2.gdasNo!=c&&""!=a.gdasInfo2.gdasNo&&h.reivew_list.push(a.gdasInfo2),f.push(h)}),f},d.updateColors=function(a){if(a==c)return void(d.srhDetailData.srhColorList=[]);for(var b,e=a.length,f=0;e>f;f++)b=a[f],b.selected=d.postParams.selectedColor.indexOf(b.colorCd)>=0;d.srhDetailData.srhColorList=a},d.noKeyword=function(){d.uiStateObj.emptyResult=!1,d.uiStateObj.emptyKeyword=!0},d.loadTermData=function(a){var c=b.extend({rtnType:"",keyword:"",dpml_no:"1",dispCnt:30,page:1},a),f=d.URLs.searchTerm;return d.postParams.isVoice&&""!=d.postParams.isVoice&&(c.isVoice=d.postParams.isVoice),d.postParams.brdNm&&(c.brdNm=d.postParams.brdNm),c.keyword||c.brdNm?(c.priceMaxU&&!c.priceMinU&&(c.priceMinU=d.srhResultData.price.min),c.priceMinU&&!c.priceMaxU&&(c.priceMaxU=d.srhResultData.price.max),d.searchTermsLoading?!1:(d.isShowLoading=!0,d.searchTermsLoading=!0,void e.get(f,{params:c}).success(function(a,b,c,e){d.termDataLoadComplete(a),d.searchTermsLoading=!1,d.searchTermsLoading||d.productListLoading||(d.isShowLoading=!1),i(function(){d.retriveTemplateType()},0)}).error(function(a,b,c,e){d.searchTermsLoading=!1,d.searchTermsLoading||d.productListLoading||(d.isShowLoading=!1)}))):(d.noKeyword(),!1)},d.addRelatedKeyword=function(a,b){a=a.replace(/ /g,""),d.srhResultData.reatedKeyword.indexOf(a)>=0||d.postParams.reQuery.indexOf(a)>=0||d.postParams.exQuery.indexOf(a)>=0||(b===!0?d.srhResultData.reatedKeyword.unshift(a):d.srhResultData.reatedKeyword.push(a))};var y={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z=new RegExp(Object.keys(y).join("|"),"gi");d.termDataLoadComplete=function(a){if(a.resultCode)if(a.keyword!=c&&(a.keyword=a.keyword.replace(z,q)),"0000"==a.resultCode){if("Y"==a.isVoice&&a.redirectUrl!=c&&""!=a.redirectUrl){var e=a.redirectUrl;return e+=e.indexOf("?")>=0?"&"+d.baseParam:"?"+d.baseParam,d.showWrap=!1,void(location.href=e)}a.isVoice&&""!=a.isVoice&&(d.postParams.isVoice=a.isVoice);var g,h;if("Y"==a.isVoice||"T"==a.isVoice&&a.keyword&&a.sortType&&""!=a.sortType)for(d.postParams.keyword=a.keyword,d.postParams.sort=a.sortType,g=0;g<d.uiStateObj.sortTypeArr.length;g++)d.uiStateObj.sortTypeArr[g].value==d.postParams.sort&&(d.uiStateObj.sortTypeIdx=g);switch(d.postParams.rtnType){case"":d.srhResultData.keyword=a.keyword,d.postParams.keyword=a.keyword;case"K":if(d.srhResultData.reatedKeyword||(d.srhResultData.reatedKeyword=[]),d.srhResultData.reatedKeyword.length=0,a.reatedKeyword&&a.reatedKeyword.Data&&0==a.reatedKeyword.Data.Return&&a.reatedKeyword.Data.Word&&a.reatedKeyword.Data.Word.length>0&&b.forEach(a.reatedKeyword.Data.Word,function(a,b){d.addRelatedKeyword(a)}),1==a.smpick)if("스마트픽"!=d.postParams.keyword&&d.postParams.reQuery.indexOf("스마트픽")<0)d.addRelatedKeyword("스마트픽",!0);else if(d.postParams.reQuery.indexOf("스마트픽")==d.postParams.reQuery.length-1&&a.smpickBranch!=c&&a.smpickBranch.length>0)for(h=a.smpickBranch.length,g=h-1;g>=0;g--)d.addRelatedKeyword(a.smpickBranch[g].name,!0);d.uiStateObj.relatedKeywordNotEmpty=!0,d.srhResultData.reatedKeyword==c?d.uiStateObj.relatedKeywordNotEmpty=!1:0==d.srhResultData.reatedKeyword.length&&(d.uiStateObj.relatedKeywordNotEmpty=!1),0==d.uiStateObj.voiceSearch&&a.relatedKeyword&&0==a.relatedKeyword.responsestatus&&"undefined"!=typeof a.relatedKeyword.result[0]&&"undefined"!=typeof a.relatedKeyword.result[0].items&&a.relatedKeyword.result[0].items.length>0&&b.forEach(a.relatedKeyword.result[0].items,function(a,b){d.srhResultData.relatedKeyword||(d.srhResultData.relatedKeyword=[]);for(var c=!1,e=0;e<d.srhResultData.relatedKeyword.length;e++)if(d.srhResultData.relatedKeyword[e].keyword==a.keyword){c=!0;break}c||a.keyword&&a.type&&a.count&&"2"==a.type&&a.count>0&&(a.keyword+"").toLowerCase()!=(d.postParams.keyword+"").toLowerCase()&&d.srhResultData.relatedKeyword.push(a)}),a.ctgLst!=c&&(d.srhResultData.ctgLst=a.ctgLst),d.tryAnimateRelatedKeyword();case"C":if(1==d.postParams.ctgDepth&&a.subCtgLst!=c)if(a.subCtgLst.items!=c&&a.subCtgLst.items.length>0){var j,k,h,l,g,m,n,o,p=!1,t=!1;for(j=d.srhResultData.ctgLst.items,h=j.length,g=0;h>g;g++){if(n=j[g],n.subCtgLst!=c&&n.subCtgLst.items!=c)for(k=n.subCtgLst.items,l=k.length,m=0;l>m;m++)if(o=k[m],o.ctgNo==a.subCtgLst.ctgNo){o.subCtgLst==c&&(o.subCtgLst=a.subCtgLst,t=!0),p=!0;break}if(p)break}var u=$("#ctg_"+a.subCtgLst.ctgNo);t&&!u.hasClass("open")&&i(function(){d.categoryAccordian(u)},50)}else if(a.subCtgLst.ctgNo!=c){var u=$("#ctg_"+a.subCtgLst.ctgNo);u.addClass("nochild")}case"E":default:d.srhResultData.brdLst={},a.brdLst.items&&(d.srhResultData.brdLst.items=f("orderBy")(a.brdLst.items,d.uiStateObj.srhFilterBrdSort),d.srhResultData.brdLstRender=d.srhResultData.brdLst.items.slice(0,d.brdShowListCnt)),a.brdLst.tcnt&&(d.srhResultData.brdLst.tcnt=a.brdLst.tcnt),d.srhDetailData.srhTerms.smpick="1"==a.smpDept||"1"==a.smpick?!0:!1,d.srhDetailData.srhTerms.smpickBranch=a.smpickBranch,d.updateColors(a.colors),d.srhResultData.price=a.price,d.srhDetailData.srhTerms.dept="1"==a.store.dept?!0:!1,d.srhDetailData.srhTerms["super"]="1"==a.store["super"]?!0:!1,d.srhDetailData.srhTerms.tvhome="1"==a.store.tvhome?!0:!1,d.srhDetailData.srhTerms.brdstore="1"==a.store.brdstore?!0:!1,d.srhDetailData.srhTerms.seven="1"==a.smpSeven?!0:!1,d.srhDetailData.srhTerms.tdar="1"==a.tdar?!0:!1,d.srhDetailData.srhTerms.quick="1"==a.quick?!0:!1}d.uiStateObj.detailSearchDataLoaded=!0,s(),i(r,1)}else""==d.postParams.rtnType&&(d.srhResultData.keyword=a.keyword,d.postParams.keyword=a.keyword);else""==d.postParams.rtnType&&(d.srhResultData.keyword=a.keyword,d.postParams.keyword=a.keyword)},d.loadListData=function(a){d.survey_state=0;var c=b.extend({rtnType:"",keyword:"",dpml_no:"1",dispCnt:30,page:1},a),f=d.URLs.searchList;return d.postParams.isVoice&&""!=d.postParams.isVoice&&(c.isVoice=d.postParams.isVoice),d.postParams.brdNm&&(c.brdNm=d.postParams.brdNm),c.keyword||c.brdNm?(c.priceMaxU&&!c.priceMinU&&(c.priceMinU=d.srhResultData.price.min),c.priceMinU&&!c.priceMaxU&&(c.priceMaxU=d.srhResultData.price.max),d.productListLoading?!1:(d.isShowLoading=!0,d.productListLoading=!0,1==d.uiStateObj.rekeywordChanged?(d.uiStateObj.rekeywordChanged=!1,d.callAppAPI("search2016://listloadstart?rekeywordChanged=Y")):d.callAppAPI("search2016://listloadstart"),void e.get(f,{params:c}).success(function(a,b,c,e){d.listDataLoadComplete(a),d.productListLoading=!1,d.searchTermsLoading||d.productListLoading||(d.isShowLoading=!1),setTimeout(function(){d.setSurveyPos()},1e3),i(function(){d.retriveTemplateType()},0),d.callAppAPI("search2016://listloadend?count="+a.tCnt)}).error(function(a,b,c,e){d.productListLoading=!1,d.searchTermsLoading||d.productListLoading||(d.isShowLoading=!1),d.callAppAPI("search2016://listloadend?count=0")}))):(d.noKeyword(),!1)},d.listDataLoadComplete=function(b){if(b.resultCode){if("Y"==b.isVoice&&b.redirectUrl!=c&&""!=b.redirectUrl){var e=b.redirectUrl;return e+=e.indexOf("?")>=0?"&"+d.baseParam:"?"+d.baseParam,d.showWrap=!1,void i(function(){location.href=e},1)}var f="Y"==d.postParams.isVoice;if(b.voiceParams!=c&&(d.uiStateObj.voiceResultParams=b.voiceParams),("Y"==b.isVoice||"T"==b.isVoice)&&(b.voiceParams==c||""==b.voiceParams.VBrdNm&&""==b.voiceParams.VKeyword)&&(b.tCnt=0,b.prdLst.items=[],b.prdLst.tcnt=0,b.resultCode="1000"),d.uiStateObj.initFlag=!1,d.srhResultData.dispUnitType=b.dispUnitType,d.srhResultData.resultCode=b.resultCode,b.tCnt!=c&&"number"==typeof b.tCnt&&(d.srhResultData.tCnt=b.tCnt,d.callAppAPI("search2016://searchcount?count="+b.tCnt)),b.isVoice&&""!=b.isVoice&&(d.postParams.isVoice=b.isVoice),"Y"==b.isVoice||"T"==b.isVoice&&b.keyword&&b.sortType&&""!=b.sortType){d.postParams.keyword=b.keyword,d.postParams.sort=b.sortType;var g=0;for(g=0;g<d.uiStateObj.sortTypeArr.length;g++)d.uiStateObj.sortTypeArr[g].value==d.postParams.sort&&(d.uiStateObj.sortTypeIdx=g)}if(1==b.page&&(b.missKeyword!=c&&b.missKeyword.orgKeyword!=c&&""!=b.missKeyword.orgKeyword?(d.srhResultData.orgKeyword=b.missKeyword.orgKeyword,b.voiceParams!=c&&b.voiceParams.VKeyword!=c&&""!=b.voiceParams.VKeyword&&(d.postParams.keyword=b.voiceParams.VKeyword),d.surKeyword=d.postParams.keyword):d.srhResultData.orgKeyword=""),"0000"==b.resultCode){var h=d.uiStateObj.emptyResult;switch(d.uiStateObj.emptyResult=!1,d.uiStateObj.emptyKeyword=!1,d.postParams.rtnType){case"":case"K":d.srhResultData.prdDealLst=b.prdDealLst,d.srhResultData.prdDealLst&&d.srhResultData.prdDealLst.items&&d.srhResultData.prdDealLst.items.length>0&&(d.prdDealList=d.reMappingDealUnitData(d.srhResultData.prdDealLst.items));case"C":case"B":case"E":case"S":d.srhResultData.sortType=b.sortType;case"P":if(d.srhResultData.dispCnt=b.dispCnt,d.srhResultData.page=b.page,d.postParams.page=b.page,d.uiStateObj.ajaxPageEndFlag=!1,d.postParams.page>1?d.srhResultData.prdLst.items=d.srhResultData.prdLst.items.concat(d.reMappingPldUnitData(b.prdLst.items)):b.prdLst?(d.srhResultData.prdLst=b.prdLst,d.srhResultData.prdLst.items=d.reMappingPldUnitData(b.prdLst.items),d.srhResultData.prdLst.tcnt=b.prdLst.tcnt):(d.uiStateObj.ajaxPageEndFlag=!0,d.productMoreScroll=!1),d.srhResultData.prdLst&&d.srhResultData.prdLst.items&&b.prdLst&&b.prdLst.items){d.srhResultData.tCnt<=d.srhResultData.prdLst.items.length||0==b.prdLst.items.length?(d.uiStateObj.ajaxPageEndFlag=!0,d.productMoreScroll=!1):(d.uiStateObj.ajaxPageEndFlag=!1,d.productMoreScroll=!0);for(var j=[],g=0;g<d.srhResultData.prdLst.items.length&&j.length<3;g++)j.push(d.srhResultData.prdLst.items[g].goods_no+""||"");d.sendBuzzni&&!a.buzzni_rt_list&&(d.sendBuzzni("list",j),a.buzzni_rt_list=!0)}else d.uiStateObj.ajaxPageEndFlag=!0,d.productMoreScroll=!1;"undefined"!=typeof d.srhResultData.prdLst&&"undefined"!=typeof d.srhResultData.prdLst.items||d.uiStateObj.emptyKeyword||d.uiStateObj.initFlag?d.uiStateObj.emptyPrdLstFlag=!1:(d.uiStateObj.ajaxPageEndFlag=!0,d.uiStateObj.emptyPrdLstFlag=!0,d.productMoreScroll=!1)}if(d.srhResultData.prdLst&&d.srhResultData.prdLst.items)for(g=0;g<d.srhResultData.prdLst.items.length;g++)d.srhResultData.prdLst.items[g].brnd_nm=d.srhResultData.prdLst.items[g].brnd_nm.replace("[",""),d.srhResultData.prdLst.items[g].brnd_nm=d.srhResultData.prdLst.items[g].brnd_nm.replace("]","");h&&d.tryAnimateRelatedKeyword(),(d.postParams.pop==c||""==d.postParams.pop)&&(b.ageGndrGrpLst&&b.ageGndrGrpLst.items&&b.ageGndrGrpLst.items.length>0?d.srhResultData.ageGndrGrpLst=b.ageGndrGrpLst.items:d.srhResultData.ageGndrGrpLst=[]),u(),f?i(function(){d.uiStateObj.skipListLoad=!0,d.loadDataParams()},1):i(r,1)}else if("1000"==b.resultCode){if(d.uiStateObj.emptyResult=!0,d.uiStateObj.emptyKeyword=!1,d.productMoreScroll=!1,d.srhResultData.tCnt=b.tCnt,d.srhResultData.missKeyword=b.missKeyword,d.callAppAPI("search2016://searchcount?count="+b.tCnt),"undefined"!=typeof b.favLst){d.srhResultData.favLst={};var k=new Date;if("undefined"!=typeof b.favLst.date&&b.favLst.date.length>=8){var l=(b.favLst.date+"").substr(0,4),m=parseInt((b.favLst.date+"").substr(4,2))-1,n=(b.favLst.date+"").substr(6,2);k=new Date(l,m,n)}d.srhResultData.favLst.date=k,d.srhResultData.favLst.items=b.favLst.items}}else"2000"==b.resultCode&&d.noKeyword()}t()},d.tryAnimateRelatedKeyword=function(){try{d.animateRelatedKeyword()}catch(a){i(function(){d.tryAnimateRelatedKeyword()},200)}},d.loadCouponeLayerData=function(){e.get(j.couponLayerData+"?"+d.baseParam).success(function(a){d.couponLayer=a}).error(function(){console.log("Data Error : 쿠폰 레이어 데이터")})},d.startSearchList=function(){if(n.getSessionStorage("srhLstLoc")==g.absUrl()&&n.getSessionStorage("srhLst")&&d.locationHistoryBack){var a=n.getSessionStorage("srhLst","json");if("undefined"==typeof a.srhResultData.resultCode){try{console.log("Data Load")}catch(c){}d.loadDataParams(),d.callAppAPI("search2016://pagein")}else{try{console.log("Session Load")}catch(c){}d.uiStateObj=a.uiStateObj,d.postParams=a.postParams,d.srhResultData=a.srhResultData,d.srhDetailData=a.srhDetailData,(d.isShowLoading||d.productListLoading)&&(d.productListLoading=!1,d.isShowLoading=!1),d.srhResultData.prdDealLst&&d.srhResultData.prdDealLst.items&&d.srhResultData.prdDealLst.items.length>0&&(d.prdDealList=d.reMappingDealUnitData(d.srhResultData.prdDealLst.items));var e=n.getSessionStorage("srhLstNowScrollY");i(function(){b.element(h).scrollTop(e)},300),i(function(){d.retriveTemplateType()},0),d.tryAnimateRelatedKeyword(),n.delSessionStorage("srhLstLoc"),n.delSessionStorage("srhLst"),n.delSessionStorage("srhLstNowScrollY")}}else{try{console.log("Data Load")}catch(c){}d.loadDataParams(),d.callAppAPI("search2016://pagein")}if(m.query.cn&&d.loadCouponeLayerData(),b.element(h).on("unload",function(){if("SEARCH"==d.locationParam)n.delSessionStorage("srhLstLoc"),n.delSessionStorage("srhLst"),n.delSessionStorage("srhLstNowScrollY");else{var a={};if(d.postParams.orgKeyword!=d.postParams.keyword)return void n.delSessionStorage("srhLstLoc");a.uiStateObj=d.uiStateObj,a.postParams=d.postParams,a.srhResultData=d.srhResultData,a.srhDetailData=d.srhDetailData,m.query.localtest||(n.setSessionStorage("srhLstLoc",g.absUrl()),n.setSessionStorage("srhLst",a,"json"),n.setSessionStorage("srhLstNowScrollY",b.element(h).scrollTop()))}d.callAppAPI("search2016://pageout")}),b.element(h).on("scroll",function(){var a=b.element(h),e=b.element("body"),f=a.height(),g=e[0].scrollHeight,i=4;return d.scrollFlag?void(!d.productMoreScroll||d.productListLoading||d.pageLoading||(g=e[0].scrollHeight,i=a.width()>=640?2:4,a.scrollTop()+f>=g-f*i&&d.loadMoreData())):void c.preventDefault()}),d.appObj.isApp&&d.appObj.isAndroid&&0==d.appObj.isSktApp&&267==d.appObj.verNumber){
var f="<div style='font-size:16px;font-weight:bold'>고객님, 반갑습니다.</div><br/>롯데닷컴 검색 기능이<br/>보다 안정화 되었습니다.<br/><br/>쾌적하고 빠른 검색을 위해<br/>지금 업데이트 후 이용해 보세요.",j={label:{ok:"지금 할게요",cancel:"다음에 할래요"},callback:function(a){a?location.href="market://details?id=com.lotte":n.setLocalStorage("NO_SHOW_android_267_update",d.getTodayDate())}};n.getLocalStorage("NO_SHOW_android_267_update")!=d.getTodayDate()&&d.confirm_2016(f,j)}},d.searchTclick2016=function(a,b){var c=d.tClickBase;"R"==a?c+="SrhResult":"S"==a&&(c+="Side_Srh"),c+="_"+b,c+=d.appObj.isAndroid?"_and":"_ios",d.sendTclick(c)},d.linkUrl=function(c,e,f,g){if(e)d.sendOutLink(c),f&&d.sendTclick(f);else{var c=v(c);if(g&&b.forEach(g,function(a,b){c+="&"+b+"="+a}),f&&(c+="&tclick="+f),-1!=(c+"").indexOf("main_phone.do?dispNo=")){f&&d.sendTclick(f);var h=c.indexOf("dispNo=")+7,i=c.substr(h,7);d.headerMenuClick(i)}else a.location.href=c}},d.advBnrLink=function(b,c){b=v(b),b+="&tclick="+d.tClickBase+"SrhResult_Clk_event_idx"+(c+1),a.location.href=b},d.appendCustomSettings=function(a){var e=d.csCustomSettings;if(e==c&&(e=n.getLocalStorage("customSearchSettings","json")),e!=c){var f=[];e.category.length>0&&(f.length=0,b.forEach(e.category,function(a,b){f.push(a.ctgNo)}),a.MC=f.join(",")),e.brand.length>0&&(f.length=0,b.forEach(e.brand,function(a,b){f.push(a.brnd_no)}),a.MB=f.join(",")),e.color.length>0&&(f.length=0,b.forEach(e.color,function(a,b){f.push(a.colorCd)}),a.MR=f.join(","))}}}]),d.directive("lotteContainer",["LotteStorage","LotteUtil","LotteCommon","$http","$timeout","$window","$filter",function(d,e,f,g,h,i,j){return{templateUrl:"/lotte/resources_dev/search/search_list_2016_container.html",replace:!0,link:function(k,l,m){function n(){var a=d.getSessionStorage("SEARCH_fontsize");"1"===a&&b.element("body").addClass("enlargeFont")}function o(){var c=$(a).height(),d=k.appObj.isApp?50:0,e=b.element("#srhReviewPop .layerPop"),f=e.find(".cont > div");f.css("max-height",c-140-d),e.css({top:(c-e.height()-d)/2,opacity:1})}var p=b.element(i);k.startSearchList(),k.goSearch=function(a,b){var c="";b&&(c="&tclick="+b),i.location=e.setUrlAddBaseParam(f.searchUrl,k.baseParam+"&keyword="+a+c)},k.setAgeGender=function(a,b,c){if(null==a)k.postParams.pop="",k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType),k.uiStateObj.ageGenderSearched=!1,k.animateRelatedKeyword(!0);else{var d=a.age+","+a.gender;if(k.postParams.pop==d)return;k.postParams.pop=d,k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType),k.uiStateObj.ageGenderSearched=!0}switch(c){case 1:k.sendTclick(k.tClickBase+"SrhResult_Clk_Best_Gol_idx"+(b+1));break;case 2:k.sendTclick(k.tClickBase+"SrhResult_Clk_Bestlist_tab_idx"+(b+1));break;default:k.sendTclick(k.tClickBase+"SrhResult_Clk_Bestlist_back")}},k.changeFontSize=function(){var a=b.element("body");a.hasClass("enlargeFont")?(a.removeClass("enlargeFont"),d.delSessionStorage("SEARCH_fontsize")):(a.addClass("enlargeFont"),d.setSessionStorage("SEARCH_fontsize","1")),k.sendTclick(k.tClickBase+"SrhResult_Clk_Text_elg")},n(),k.animateRelatedKeyword=function(a){var b=$(".reated_keyword .scroll_wrap");b.stop(!0),a===!0?b.css("left",0):b.css("left","120%"),h(function(){k.animateRelatedKeywordDelay(a)},200)},k.animateRelatedKeywordDelay=function(a){try{var c=$(".reated_keyword .scroll_wrap");c.stop(!0),a===!0?c.css("left",0):c.animate({left:"0px"},250);var d=0;$("#relatedKeywordSlider li").each(function(a,b){d+=$(b).width()+6}),$("#relatedKeywordSlider ul").width(d),h(function(){$("#relatedKeywordSlider.ipad_slider").scrollLeft(0),$("#relatedKeywordSlider.other_slider").length>0&&b.element("#relatedKeywordSlider.other_slider").scope().reset()},100)}catch(e){if(!k.uiStateObj.relatedKeywordEnabled)return;h(function(){k.animateRelatedKeywordDelay()},200)}},k.showSrhLayerHeader=function(a){k.sendTclick(k.tClickRenewalBase+"Srhheader_Clk_Lyr_1"),k.showSrhLayer(!0,a)},k.showSrhLayer=function(a,b){a||k.sendTclick(k.tClickBase+"header_Clk_Lyr_2"),k.appObj.isApp&&k.uiStateObj.voiceSearch&&(b=!0);var c=k.appObj,e="lottesearch://newsearch";b!==!0&&(e+=c.isIOS&&(c.isIpad&&237==c.verNumber||2710==c.verNumber)?"?keyword="+encodeURIComponent(encodeURIComponent(k.srhResultData.keyword)):"?keyword="+encodeURIComponent(k.srhResultData.keyword));var f=!1;if(c.isIOS?c.isIpad&&c.verNumber>=237?f=!0:c.verNumber>=2710&&(f=!0):c.isSktApp&&c.verNumber>=215?f=!0:c.verNumber>=279&&(f=!0),f){var g=d.getLocalStorage("latelyGoods");null!=g&&""!=g&&(g=g.replace(/\|/g,","),e+=e.indexOf("?")>=0?"&latelyGoods="+g:"?latelyGoods="+g)}if(!k.appObj.isApp||k.appObj.isIOS||k.appObj.isOldApp){if(k.appObj.isApp&&k.appObj.isIOS&&!k.appObj.isIpad)return void(i.location.href=e);if(k.appObj.isApp&&k.appObj.isIOS&&k.appObj.isIpad&&!k.appObj.isOldApp)return void(i.location.href=e);b===!0?k.delSrhText():(k.keyword=k.srhResultData.keyword,h(function(){k.showAutoSrh({keyCode:1})},100)),k.showRecentKeyword()}else try{i.lottesearch.callAndroid(e)}catch(j){}},k.closeSidebarBtnClk=function(){if(k.searchUISetting.isShowSub)switch(k.searchUISetting.slide){case"category":case"brand":case"benefit":case"color":case"price":k.searchTclick2016("S",k.searchUISetting.slide+"_CLK_close_Btn");break;case"sort":k.searchTclick2016("S","sorting_CLK_close_Btn");break;case"research":k.searchTclick2016("S","srhwithinresult_CLK_close_Btn");break;case"store":k.searchTclick2016("S","srhresult_CLK_close_Btn");break;case"delivery":k.searchTclick2016("S","shipping_CLK_close_Btn")}else k.searchTclick2016("S","CLK_close_Btn");k.closeSideSearch()},k.closeSideSearch=function(){k.searchTermsChanged&&(k.LotteDimm.scrollY=0),"sideSearch"==k.LotteDimm.target?k.dimmedClose():k.searchUISetting.isShowSideBar=!1,k.searchUISetting.isShowSub===!0&&k.hideSubSearch()},k.showHideSideSearch=function(a){if(k.isValidApp)k.callAppAPI(k.getSearchTermParam(a));else if(k.searchUISetting.isShowSideBar)k.closeSideSearch();else{if(0==k.uiStateObj.detailSearchDataLoaded)return;k.searchTermsChanged=!1,k.searchUISetting.isShowSideBar=!0,k.dimmedOpen({target:"sideSearch",callback:this.closeSideSearch,scrollEventFlag:!1}),$(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),"SORT"==a&&k.showSubSearch({currentTarget:$(".ssw_slide.main li a[data-label='정렬']")})}"SORT"==a?k.searchTclick2016("R","sorting_Btn"):k.searchTclick2016("R","detailedsrh_Btn")},k.showSubSearch=function(a){var d=$(a.currentTarget),e=d.data("slide");k.searchUISetting.title=d.data("label"),k.searchUISetting.slide=e,k.searchUISetting.isShowSub=!0;var f=b.element(".ssw_slide.sub");switch(f.off("scroll"),"brand"==k.searchUISetting.slide&&(k.srhResultData.brdLstRender&&0!=k.srhResultData.brdLstRender.length||k.srhResultData.brdLst.items!=c&&(k.srhResultData.brdLstRender=k.srhResultData.brdLst.items.slice(0,k.brdShowListCnt)),f.on("scroll",function(){if(f.scrollTop()>=f.find(".ssws_brand").height()-f.height()-200){var a=k.srhResultData.brdLstRender.length,b=k.srhResultData.brdLst.items.slice(a,a+k.brdShowListCnt),c=k.srhResultData.brdLstRender.concat(b);c.length>0?k.$apply(function(){k.srhResultData.brdLstRender=c}):f.off("scroll")}})),k.searchUISetting.lastSlide!=e&&$(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),k.searchUISetting.lastSlide=e,d.data("slide")){case"price":k.postParams.priceMaxUTemp=k.postParams.priceMaxU,k.postParams.priceMinUTemp=k.postParams.priceMinU;break;case"research":k.postParams.rekeyword=""}switch(d.data("slide")){case"category":case"brand":case"benefit":case"color":case"price":k.searchTclick2016("S",d.data("slide"));break;case"sort":k.searchTclick2016("S","sorting");break;case"research":k.searchTclick2016("S","srhwithinresult");break;case"store":k.searchTclick2016("S","srhresult");break;case"delivery":k.searchTclick2016("S","shipping")}},k.hideSubSearch=function(){if(k.searchUISetting.isShowSub)switch(k.searchUISetting.slide){case"category":case"brand":case"benefit":case"color":case"price":k.searchTclick2016("S",k.searchUISetting.slide+"_CLK_back_Btn");break;case"sort":k.searchTclick2016("S","sorting_CLK_back_Btn");break;case"research":k.searchTclick2016("S","srhwithinresult_CLK_back_Btn");break;case"store":k.searchTclick2016("S","srhresult_CLK_back_Btn");break;case"delivery":k.searchTclick2016("S","shipping_CLK_back_Btn")}k.searchUISetting.slide=null,k.searchUISetting.keywordIncExc=!1,0!=k.searchUISetting.isShowSub&&(k.searchUISetting.isShowSub=!1)},k.showHideSortGuide=function(){k.tipShow=!k.tipShow,k.tipShow&&($("#pop_sortGuide").css("top",$("#sortGuideButton").offset().top-152),h(k.positionSortGuide,0))},k.positionSortGuide=function(){$("#pop_sortGuide").css("top",$("#sortGuideButton").offset().top-$("#pop_sortGuide").outerHeight()-3)},k.srhFilterSmpickClick=function(a){var c=$(a.currentTarget);c.is(":checked")&&(k.uiStateObj.smpickLayerOpenFlag=!0,b.element("#wrapper").addClass("overflowy_hidden"))},k.showHideSmartPick=function(){k.searchUISetting.smartPickSub=!k.searchUISetting.smartPickSub},k.showHideDepartmentPick=function(a){var c=b.element(a.currentTarget),d=c.parent();d.hasClass("disabled")||(k.searchUISetting.smartPickList=!k.searchUISetting.smartPickList)},k.smpickBranchChange=function(a){k.postParams.smpickBranchNo==a.branchNo?(k.postParams.smpickYN="N",k.postParams.smpickBranchNo=null,k.uiStateObj.smpickBranchName=""):(k.postParams.smpickYN="Y",k.postParams.smpickBranchNo=a.branchNo,k.uiStateObj.smpickBranchName=a.name),k.srhDetailPost(),k.searchTclick2016("S","shipping_CLK_dep_Btn")},k.categoryItemClick=function(a,b){var c=$(a.currentTarget),d=c.parent();switch(k.categoryAccordian(d,b.ctgNo),k.srhSubCtgPost(),d.data("depth")){case 0:k.searchTclick2016("S","category_CLK_Catebiggest_"+b.ctgNo);break;case 1:k.searchTclick2016("S","category_CLK_Catebig_"+b.ctgNo);break;case 2:k.searchTclick2016("S","category_CLK_Catemedium_"+b.ctgNo);break;case 3:k.searchTclick2016("S","category_CLK_Catesmall_"+b.ctgNo)}},k.categoryAccordian=function(a,b){if(!a.hasClass("nochild")){var d=41,e=a.find("> ul");if(e.length>0){if(a.hasClass("open"))a.removeClass("open"),e.height(0);else{a.addClass("open");var f=e.find("> li").length;e.height(d*f);var g;a.siblings(".open").each(function(a,b){g=$(b),g.removeClass("open"),g.find("> ul").height(0)})}k.categoryAccordianParent(a)}if(b!=c){var h=a.parent();h.hasClass("cate_d1")?(k.uiStateObj.selectedCategory.depth1=b,k.uiStateObj.selectedCategory.depth2=null,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4=null):h.hasClass("cate_d2")?(k.uiStateObj.selectedCategory.depth2=b,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4=null,k.categoryCheckParent(a)):h.hasClass("cate_d3")?(k.uiStateObj.selectedCategory.depth3=b,k.uiStateObj.selectedCategory.depth4=null,k.categoryCheckParent(a)):h.hasClass("cate_d4")&&(k.uiStateObj.selectedCategory.depth4=b,k.categoryCheckParent(a)),k.uiStateObj.selectedCategory.ctgName=a.data("name")}}},k.categoryCheckParent=function(a){var b,c=a.parent();b=c.parent(),c.hasClass("cate_d1")||(c.hasClass("cate_d2")?null==k.uiStateObj.selectedCategory.depth1&&(k.uiStateObj.selectedCategory.depth1=b.data("no")):c.hasClass("cate_d3")?(null==k.uiStateObj.selectedCategory.depth2&&(k.uiStateObj.selectedCategory.depth2=b.data("no")),k.categoryCheckParent(b)):c.hasClass("cate_d4")&&(null==k.uiStateObj.selectedCategory.depth3&&(k.uiStateObj.selectedCategory.depth3=b.data("no")),k.categoryCheckParent(b)))},k.categoryAccordianParent=function(a){var b=a.parent(),c=b.find("> li"),d=0;c.each(function(a,b){d+=$(b).height()}),b.height(d),b.hasClass("cate_d1")||k.categoryAccordianParent(b.parent())},k.srhSubCtgPost=function(){var a,b;if(null!=k.uiStateObj.selectedCategory.depth4?(a=k.uiStateObj.selectedCategory.depth4,b=3):null!=k.uiStateObj.selectedCategory.depth3?(a=k.uiStateObj.selectedCategory.depth3,b=2):null!=k.uiStateObj.selectedCategory.depth2?(a=k.uiStateObj.selectedCategory.depth2,b=1):null!=k.uiStateObj.selectedCategory.depth1&&(a=k.uiStateObj.selectedCategory.depth1,b=0),a!=c){k.postParams.ctgNo=a,k.postParams.ctgDepth=b,k.uiStateObj.srhFilterCtgFlag=!0,k.srhFilterBrdInit(),k.srhFilterDetailInit(),k.postParams.rtnType="C",k.loadDataParams(k.postParams.rtnType);var d=k.tClickBase+"SEARCH_CATE_02";k.sendTclick(d)}},k.srhChkBrdPost=function(a,b){if(-1==k.postParams.brdNoArr.indexOf(a.brdNo))k.postParams.brdNoArr.push(a.brdNo),k.postParams.brdNmArr.push(a.brdName);else{var c=k.postParams.brdNoArr.indexOf(a.brdNo);c>-1&&(k.postParams.brdNoArr.splice(c,1),k.postParams.brdNmArr.splice(c,1))}k.postParams.brdNoArr.length>0?k.uiStateObj.srhFilterBrdFlag=!0:k.uiStateObj.srhFilterBrdFlag=!1,"N"!==b&&(k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType),k.searchTclick2016("S","brand_CLK_"+a.brdNo))},k.srhFilterBrdSortChange=function(a){k.srhResultData.brdLst.items=j("orderBy")(k.srhResultData.brdLst.items,k.uiStateObj.srhFilterBrdSort),"undefined"!=typeof k.srhResultData.brdLst.tcnt&&k.srhResultData.brdLst.tcnt>0&&"undefined"!=typeof k.srhResultData.brdLst.items&&(k.srhResultData.brdLstRender=k.srhResultData.brdLst.items.slice(0,50)),"-cnt"==a?k.searchTclick2016("S","brand_CLK_srtcnt_Btn"):k.searchTclick2016("S","brand_CLK_srtabc_Btn")},k.srhSortPost=function(a){switch(k.uiStateObj.sortTypeIdx=a,k.uiStateObj.srhFilterSortFlag=!0,k.postParams.rtnType="S",k.loadDataParams(k.postParams.rtnType),a){case 0:k.searchTclick2016("S","sorting_popbest");break;case 1:k.searchTclick2016("S","sorting_selbest");break;case 2:k.searchTclick2016("S","sorting_reviewbest");break;case 3:k.searchTclick2016("S","sorting_newest");break;case 4:k.searchTclick2016("S","sorting_hghprice");break;case 5:k.searchTclick2016("S","sorting_lwprice")}p.scrollTop(0)},k.srhSelectColor=function(a,b){var c=k.postParams.selectedColor.indexOf(a.colorCd);a.selected===!0?(a.selected=!1,c>=0&&k.postParams.selectedColor.splice(c,1)):(a.selected=!0,0>c&&k.postParams.selectedColor.push(a.colorCd)),"N"!==b&&(k.srhDetailPost(),k.searchTclick2016("S","color_"+a.colorCd))},k.srhDetailSearchActiveChk=function(){var a=0;b.forEach(k.uiStateObj.srhFilterDetailArr,function(b){"Y"==k.postParams[b]&&a++}),k.postParams.selectedColor.length>0&&a++,a>0||k.postParams.priceMinU||"undefined"==typeof k.postParams.priceMinU||null!=k.postParams.priceMaxU||"undefined"==typeof k.postParams.priceMaxU||k.postParams.rekeyword?k.uiStateObj.srhFilterDetailFlag=!0:k.uiStateObj.srhFilterDetailFlag=!1},k.srhDetailPost=function(){k.srhDetailSearchActiveChk(),k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType)},k.srhDetailChange=function(a){var b="";switch(a){case"deptYN":b=k.tClickBase+"SEARCH_detail_01";break;case"tvhomeYN":b=k.tClickBase+"SEARCH_detail_02";break;case"superYN":b=k.tClickBase+"SEARCH_detail_03";break;case"brdstoreYN":b=k.tClickBase+"SEARCH_detail_04";break;case"freeDeliYN":k.searchTclick2016("S","benefit_freeshipping");break;case"smpickYN":k.searchTclick2016("S","benefit_smartpick");break;case"freeInstYN":k.searchTclick2016("S","benefit_interestfree");break;case"pointYN":k.searchTclick2016("S","benefit_point");break;case"pkgYN":k.searchTclick2016("S","benefit_freepackaging");break;case"delSevenYN":k.searchTclick2016("S","shipping_CLK_seveneleven_Btn");break;case"delTdarYN":k.searchTclick2016("S","shipping_CLK_today_Btn");break;case"delQuickYN":k.searchTclick2016("S","shipping_CLK_quick_Btn")}""!=b&&k.sendTclick(b),k.srhDetailPost()},k.srhDetailPriceMaxlen=function(a){var b=$("#priceMaxU");"min"==a&&(b=$("#priceMinU"));var c=b.val();c.length>10&&b.val(c.substr(0,10))},k.srhDetailPriceValidate=function(a){if(k.srhDetailPriceValidateFlag=!0,null!=k.postParams.priceMinUTemp&&k.postParams.priceMinUTemp.length>0&&(k.postParams.priceMinUTemp=k.postParams.priceMinUTemp.replace(/[^0-9]/g,"")),null!=k.postParams.priceMaxUTemp&&k.postParams.priceMaxUTemp.length>0&&(k.postParams.priceMaxUTemp=k.postParams.priceMaxUTemp.replace(/[^0-9]/g,"")),"min"==a&&k.srhResultData.price.min){if("undefined"==typeof k.postParams.priceMinUTemp)return k.postParams.priceMinUTemp=k.srhResultData.price.min,k.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최저가격보다 낮습니다."),!1;if("number"==typeof k.postParams.priceMinUTemp&&"number"!=typeof k.postParams.priceMaxUTemp&&k.postParams.priceMinUTemp>k.srhResultData.price.max)return k.postParams.priceMinUTemp=k.srhResultData.price.max,k.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최고가격보다 높습니다."),!1;if("number"==typeof k.postParams.priceMinUTemp&&"number"==typeof k.postParams.priceMaxUTemp&&k.postParams.priceMinUTemp>k.postParams.priceMaxUTemp){k.postParams.priceMinUTemp>k.srhResultData.price.max&&(alert("검색결과 내 최고가격보다 높습니다."),k.postParams.priceMinUTemp=k.srhResultData.price.max);var b=k.postParams.priceMinUTemp;k.postParams.priceMinUTemp=k.postParams.priceMaxUTemp,k.postParams.priceMaxUTemp=b,k.srhDetailPriceValidateFlag=!0}}else if("max"==a&&k.srhResultData.price.max){if("undefined"==typeof k.postParams.priceMaxUTemp)return k.postParams.priceMaxUTemp=k.srhResultData.price.max,k.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최고가격보다 높습니다."),!1;if("number"==typeof k.postParams.priceMaxUTemp&&"number"!=typeof k.postParams.priceMinUTemp&&k.postParams.priceMaxUTemp<k.srhResultData.price.min)return k.postParams.priceMaxUTemp=k.srhResultData.price.max,k.srhDetailPriceValidateFlag=!1,alert("검색결과 내 최저가격보다 낮습니다."),!1;if("number"==typeof k.postParams.priceMaxUTemp&&"number"==typeof k.postParams.priceMinUTemp&&k.postParams.priceMaxUTemp<k.postParams.priceMinUTemp){k.postParams.priceMaxUTemp<k.srhResultData.price.min&&(alert("검색결과 내 최저가격보다 낮습니다."),k.postParams.priceMaxUTemp=k.srhResultData.price.min);var b=k.postParams.priceMinUTemp;k.postParams.priceMinUTemp=k.postParams.priceMaxUTemp,k.postParams.priceMaxUTemp=b,k.srhDetailPriceValidateFlag=!0}}},k.srhDetailSearchPrice=function(){return k.srhDetailPriceValidateFlag?k.postParams.priceMinUTemp||k.postParams.priceMaxUTemp?(k.postParams.priceMinU=k.postParams.priceMinUTemp,k.postParams.priceMaxU=k.postParams.priceMaxUTemp,k.srhDetailPost(),k.searchTclick2016("S","price_CLK_srh_Btn"),void 0):(alert("검색 조건을 입력해 주세요."),!1):(k.srhDetailPriceValidateFlag=!0,!1)},k.srhDetailSearchFocus=function(){k.searchUISetting.keywordIncExc=!1},k.srhDetailSearchKeyword=function(a){k.searchUISetting.keywordIncExc=!1;var b="pop"==a;return b&&(k.searchUISetting.researchIdx=0),""==k.postParams.rekeyword?(alert("검색할 단어를 입력해 주세요."),!1):(0==k.searchUISetting.researchIdx?(k.addRequeryKeyword(k.postParams.rekeyword),b||k.searchTclick2016("S","srhwithinresult_CLK_include_srh_Btn")):(k.addExqueryKeyword(k.postParams.rekeyword),b||k.searchTclick2016("S","srhwithinresult_CLK_exclude_srh_Btn")),k.postParams.rekeyword="",k.closeSideSearch(),void k.hideRelatedKWPopup())},k.srhDetailSearchKeypress=function(a){13===a.which&&("rekeyword_pop"==$(a.currentTarget).prop("id")?k.srhDetailSearchKeyword("pop"):k.srhDetailSearchKeyword(),a.preventDefault())},k.srhDetailSearchKeyUp=function(a){k.uiStateObj.relatedKeywordEntered=!1;var b=$(a.currentTarget).val();b!=c&&b.length>0&&(k.uiStateObj.relatedKeywordEntered=!0)},k.deleteRequeryKeyword=function(a){var c=k.postParams.reQuery.indexOf(a);c>=0&&(k.postParams.reQuery.splice(c,1),b.element("#searchKeywordSlider").scope().reset(),k.uiStateObj.rekeywordChanged=!0,k.srhKeywordPost(),k.scrollToTop()),k.searchTclick2016("R","CLK_del_srhkeywd_Btn")},k.addRequeryKeyword=function(a,c){a=a.replace(/ /g,"");var d=k.postParams.reQuery.indexOf(a);0>d&&(k.postParams.reQuery.push(a),b.element("#searchKeywordSlider").scope().reset(),k.uiStateObj.rekeywordChanged=!0,k.srhKeywordPost(),k.scrollToTop()),"Y"==c&&("스마트픽"==a?k.searchTclick2016("R","CLK_srhkeywd_smartpick_Btn"):k.searchTclick2016("R","CLK_srhkeywd_Btn"))},k.addExqueryKeyword=function(a){a=a.replace(/ /g,"");var c=k.postParams.exQuery.indexOf(a);0>c&&(k.postParams.exQuery.push(a),b.element("#searchKeywordSlider").scope().reset(),k.srhKeywordPost(),k.scrollToTop())},k.showKeywordLayer=function(){k.searchUISetting.keywordIncExc=!k.searchUISetting.keywordIncExc},k.selectKeywordLayer=function(a){k.searchUISetting.keywordIncExc!==!1&&(k.searchUISetting.researchIdx=a,k.showKeywordLayer())},k.showRelatedKWPopup=function(){k.uiStateObj.relatedKwywordOpenFlag=!0,k.uiStateObj.relatedKeywordEntered=!1,h(function(){$("#rekeyword_pop").val(""),$("#rekeyword_pop").focus()},0),k.searchTclick2016("R","CLK_srhkeywd_add_Btn")},k.hideRelatedKWPopup=function(){$("#rekeyword_pop").blur(),k.uiStateObj.relatedKwywordOpenFlag=!1,k.scrollToTop()},k.srhKeywordPost=function(){k.srhFilterCtgInit(),k.srhFilterBrdInit(),k.srhFilterDetailInit(),k.postParams.rtnType="K",k.loadDataParams(k.postParams.rtnType)},k.srhFilterDetailPriceIpt=function(a){b.element("#"+a).focus()},k.srhFilterDetailInit=function(){k.uiStateObj.srhFilterDetailFlag=!1,b.forEach(k.uiStateObj.srhFilterDetailArr,function(a){k.postParams[a]="N"}),k.postParams.pop="",k.srhFilterBenefitInit(),k.srhFilterDeliveryInit(),k.srhFilterColorInit(),k.srhFilterPriceInit(),k.srhFilterStoreInit()},k.checkResetDisabled=function(){var a=k.uiStateObj,b=k.searchUISetting,c=k.postParams;if(0==k.searchUISetting.isShowSub){if(0==a.srhFilterCtgFlag&&0==a.srhFilterBrdFlag&&0==a.sortTypeIdx&&0==a.srhFilterDetailFlag&&0==c.reQuery.length&&0==c.exQuery.length)return"disabled"}else if("category"==b.slide&&0==a.srhFilterCtgFlag||"brand"==b.slide&&0==a.srhFilterBrdFlag||"sort"==b.slide&&0==a.sortTypeIdx||"benefit"==b.slide&&c.freeDeliYN+c.freeInstYN+c.pointYN+c.pkgYN=="NNNN"||"delivery"==b.slide&&c.delSevenYN+c.delTdarYN+c.delQuickYN+c.smpickYN=="NNNN"||"color"==b.slide&&0==c.selectedColor.length||"price"==b.slide&&null==c.priceMaxU&&null==c.priceMinU||"research"==b.slide&&0==c.reQuery.length&&0==c.exQuery.length||"store"==b.slide&&c.deptYN+c.tvhomeYN+c.superYN+c.brdstoreYN=="NNNN")return"disabled";return""},k.resetAllSearchTerm=function(){if($(".side_search_wrap .ssw_content .ssw_slide.sub").scrollTop(0),k.searchUISetting.isShowSub===!0)switch(k.searchUISetting.slide){case"category":k.srhFilterCtgInit(!0),k.searchTclick2016("S","category_CLK_ini_Btn");break;case"brand":k.srhFilterBrdInit(!0),k.searchTclick2016("S","brand_CLK_ini_Btn");break;case"sort":k.srhFilterSortInit(!0),k.searchTclick2016("S","sorting_CLK_ini_Btn");break;case"benefit":k.srhFilterBenefitInit(!0),k.searchTclick2016("S","benefit_CLK_ini_Btn");break;case"delivery":k.srhFilterDeliveryInit(!0),k.searchTclick2016("S","shipping_CLK_ini_Btn");break;case"color":k.srhFilterColorInit(!0),k.searchTclick2016("S","color_CLK_ini_Btn");break;case"price":k.srhFilterPriceInit(!0),k.searchTclick2016("S","price_CLK_ini_Btn");break;case"research":k.srhFilterRequeryInit(!0),k.searchTclick2016("S","srhwithinresult_CLK_ini_Btn");break;case"store":k.srhFilterStoreInit(!0),k.searchTclick2016("S","srhresult_CLK_ini_Btn")}else k.srhFilterSortInit(),k.srhFilterRequeryInit(!0),k.searchTclick2016("S","CLK_ini_Btn")},k.srhFilterCtgInit=function(a){k.uiStateObj.srhFilterCtgFlag=!1,k.uiStateObj.srhFilterCtgDepth=0,k.uiStateObj.srhFilterCtgDepth1CtgNo="",k.uiStateObj.selectedCategory.depth1=null,k.uiStateObj.selectedCategory.depth2=null,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4=null,k.uiStateObj.selectedCategory.ctgName="",k.postParams.ctgNo="",k.postParams.ctgDepth=0;var b;$(".ssws_wrap.ssws_category li.open").each(function(a,c){b=$(c),b.removeClass("open"),b.find(">ul").height(0)}),$(".ssws_wrap.ssws_category .cate_d1").height(41*$(".ssws_wrap.ssws_category .cate_d1 > li").length),a===!0&&(k.srhFilterBrdInit(),k.srhFilterDetailInit(),k.postParams.rtnType="C",k.loadDataParams(k.postParams.rtnType))},k.srhFilterBrdInit=function(a){k.uiStateObj.srhFilterBrdFlag=!1,k.postParams.brdNoArr=[],k.postParams.brdNmArr=[],b.forEach(k.srhResultData.brdLst.items,function(a,b){a.checked=!1}),b.forEach(k.srhResultData.brdLstRender,function(a,b){a.checked=!1}),a===!0&&(k.postParams.rtnType="E",k.loadDataParams(k.postParams.rtnType))},k.srhFilterSortInit=function(a){k.uiStateObj.srhFilterSortFlag=!1,k.uiStateObj.sortTypeIdx=0,k.postParams.sort=k.uiStateObj.sortTypeArr[0].value,a===!0&&(k.postParams.rtnType="S",k.loadDataParams(k.postParams.rtnType))},k.srhFilterBenefitInit=function(a){k.postParams.freeDeliYN="N",k.postParams.freeInstYN="N",k.postParams.pointYN="N",k.postParams.pkgYN="N",a===!0&&k.srhDetailPost()},k.srhFilterDeliveryInit=function(a){k.postParams.delSevenYN="N",k.postParams.delTdarYN="N",k.postParams.delQuickYN="N",k.postParams.smpickYN="N",k.searchUISetting.smartPickList=!1,k.postParams.smpickBranchNo=null,k.uiStateObj.smpickBranchName="전체",a===!0&&k.srhDetailPost()},k.srhFilterColorInit=function(a){k.postParams.selectedColor.length=0;for(var b=k.srhDetailData.srhColorList.length,c=0;b>c;c++)k.srhDetailData.srhColorList[c].selected=!1;a===!0&&k.srhDetailPost()},k.srhFilterPriceInit=function(a){k.postParams.priceMinU=null,k.postParams.priceMaxU=null,k.postParams.priceMaxUTemp=null,k.postParams.priceMinUTemp=null,a===!0&&k.srhDetailPost()},k.srhFilterRequeryInit=function(a){k.postParams.reQuery.length=0,k.postParams.exQuery.length=0,k.postParams.rekeyword="",k.srhFilterCtgInit(),k.srhFilterBrdInit(),k.srhFilterDetailInit(),a===!0&&(k.postParams.rtnType="K",k.loadDataParams(k.postParams.rtnType))},k.srhFilterStoreInit=function(a){k.postParams.deptYN="N",k.postParams.tvhomeYN="N",k.postParams.superYN="N",k.postParams.brdstoreYN="N",a===!0&&k.srhDetailPost()},k.getSearchTermParam=function(a){var b="search2016://searchterm",d={},e=function(a,b,e){e==c&&(e=","),b!=c&&b.length>0&&(d[a]=b.join(e))},f=function(a,b,c){b===c&&(d[a]=b)};d.keyword=encodeURIComponent(k.postParams.keyword),k.postParams.ctgNo&&(d.ctgNo=k.postParams.ctgNo,k.postParams.ctgDepth>=0&&k.postParams.ctgDepth<=3&&(d.ctgDepth=k.postParams.ctgDepth)),e("brdNo",k.postParams.brdNoArr),d.sort=k.postParams.sort,f("freeDeliYN",k.postParams.freeDeliYN,"Y"),f("freeInstYN",k.postParams.freeInstYN,"Y"),f("pointYN",k.postParams.pointYN,"Y"),f("pkgYN",k.postParams.pkgYN,"Y"),f("smpickYN",k.postParams.smpickYN,"Y"),"Y"==k.postParams.smpickYN&&null!=k.postParams.smpickBranchNo&&""!=k.postParams.smpickBranchNo&&(d.smpickBranchNo=k.postParams.smpickBranchNo),e("colorCd",k.postParams.selectedColor),k.postParams.priceMinU&&k.postParams.priceMinU>=k.srhResultData.price.min&&(d.priceMinU=k.postParams.priceMinU),k.postParams.priceMaxU&&k.postParams.priceMaxU<=k.srhResultData.price.max&&(d.priceMaxU=k.postParams.priceMaxU),e("reQuery",k.postParams.reQuery),e("exQuery",k.postParams.exQuery),f("deptYN",k.postParams.deptYN,"Y"),f("tvhomeYN",k.postParams.tvhomeYN,"Y"),f("brdstoreYN",k.postParams.brdstoreYN,"Y"),f("superYN",k.postParams.superYN,"Y"),f("delSevenYN",k.postParams.delSevenYN,"Y"),f("delTdarYN",k.postParams.delTdarYN,"Y"),f("delQuickYN",k.postParams.delQuickYN,"Y"),d.dpml_no=k.postParams.dpml_no,d.brdNm=encodeURIComponent(k.postParams.brdNm),d.isVoice=k.postParams.isVoice,"SORT"==a&&(d.openSort="Y");var g=!1,h="";for(var i in d)g&&(h+="&"),h+=i+"="+d[i],g=!0;return b+="?"+h},k.searchFromApp=function(a){var d=k.postParams;switch(a.rtnType){case"":case"K":case"C":case"E":case"S":break;default:a.rtnType=""}var e,f,g,h=function(a,b,c,e){b==c?d[a]=c:d[a]=e},i=function(a,b){if(d[a].length=0,b!=c&&""!=b){var e=b.split(",");d[a]=[].concat(e)}};if(a.keyword!=c&&""!=a.keyword){var j=decodeURIComponent(a.keyword);d.keyword=j,k.srhResultData.keyword=j}if(a.ctgNo!=c&&a.ctgDepth!=c&&a.ctgDepth>=0&&a.ctgDepth<=3){switch(a.ctgDepth){case 0:k.uiStateObj.selectedCategory.depth1=a.ctgNo,k.uiStateObj.selectedCategory.depth2=null,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4=null;break;case 1:k.uiStateObj.selectedCategory.depth2=a.ctgNo,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4=null;break;case 2:k.uiStateObj.selectedCategory.depth3=a.ctgNo,k.uiStateObj.selectedCategory.depth4=null;break;case 3:k.uiStateObj.selectedCategory.depth4=a.ctgNo}k.postParams.ctgNo=a.ctgNo,k.postParams.ctgDepth=a.ctgDepth,k.uiStateObj.srhFilterCtgFlag=!0}else k.uiStateObj.selectedCategory.depth1=null,k.uiStateObj.selectedCategory.depth2=null,k.uiStateObj.selectedCategory.depth3=null,k.uiStateObj.selectedCategory.depth4=null,k.uiStateObj.selectedCategory.ctgName="",k.postParams.ctgNo="",k.postParams.ctgDepth=0,k.uiStateObj.srhFilterCtgFlag=!1;if(a.brdNo!=c&&""!=a.brdNo&&k.srhResultData.brdLst&&k.srhResultData.brdLst.items){k.postParams.brdNoArr.length=0,k.postParams.brdNmArr.length=0;var l=a.brdNo.split(",");b.forEach(k.srhResultData.brdLst.items,function(a,b){l.indexOf(a.brdNo)<0?a.checked=!1:(a.checked=!0,k.postParams.brdNoArr.push(a.brdNo),k.postParams.brdNmArr.push(a.brdName))}),k.uiStateObj.srhFilterBrdFlag=k.postParams.brdNoArr.length>0}else k.postParams.brdNoArr.length=0,k.postParams.brdNmArr.length=0,b.forEach(k.srhResultData.brdLst.items,function(a,b){a.checked=!1});if(a.sort!=c)for(f=k.uiStateObj.sortTypeArr.length,e=0;f>e;e++)if(k.uiStateObj.sortTypeArr[e].value==a.sort){k.uiStateObj.sortTypeIdx=e,d.sort=a.sort;break}if(h("freeDeliYN",a.freeDeliYN,"Y","N"),h("freeInstYN",a.freeInstYN,"Y","N"),h("pointYN",a.pointYN,"Y","N"),h("pkgYN",a.pkgYN,"Y","N"),h("delSevenYN",a.delSevenYN,"Y","N"),h("delTdarYN",a.delTdarYN,"Y","N"),h("delQuickYN",a.delQuickYN,"Y","N"),h("smpickYN",a.smpickYN,"Y","N"),h("smpickBranchNo",a.smpickBranchNo,"",a.smpickBranchNo),a.colorCd!=c&&""!=a.colorCd){i("selectedColor",a.colorCd);var m=a.colorCd.split(",");for(f=k.srhDetailData.srhColorList.length,e=0;f>e;e++)g=k.srhDetailData.srhColorList[e],g.selected=m.indexOf(g.colorCd)>=0}else for(d.selectedColor.length=0,f=k.srhDetailData.srhColorList.length,e=0;f>e;e++)g=k.srhDetailData.srhColorList[e],g.selected=!1;var n=parseInt(a.priceMinU,10),o=parseInt(a.priceMaxU,10);isNaN(n)?n=null:n<k.srhResultData.price.min&&(n=k.srhResultData.price.min),isNaN(o)?o=null:o>k.srhResultData.price.max&&(o=k.srhResultData.price.max),null!=n&&null!=o&&n>o&&(n=null),k.postParams.priceMinU=n,k.postParams.priceMinUTemp=n,k.postParams.priceMaxU=o,k.postParams.priceMaxUTemp=o,i("reQuery",a.reQuery),i("exQuery",a.exQuery),h("deptYN",a.deptYN,"Y","N"),h("tvhomeYN",a.tvhomeYN,"Y","N"),h("brdstoreYN",a.brdstoreYN,"Y","N"),h("superYN",a.superYN,"Y","N"),k.srhDetailSearchActiveChk(),d.rtnType=a.rtnType,k.loadDataParams(d.rtnType)},a.searchFromApp=k.searchFromApp,k.scrollToTop=function(){var b=$(a).scrollTop();b>1&&$(a).scrollTop(1)},k.toggleApp=function(){k.isValidApp=!k.isValidApp},k.openSpeechSearch=function(){if(!k.appObj.isApp||k.appObj.isIOS||k.appObj.isOldApp)return k.appObj.isApp&&k.appObj.isIOS?void(i.location.href="lottesearch://newsearch/speech"):void 0;try{i.lottesearch.callAndroid("lottesearch://newsearch/speech")}catch(a){}},k.reviewPopData=null,k.showReviewPop=function(a,d){if(a!=c&&a.gdasNo!=c&&""!=a.gdasNo){var e=b.element(d.currentTarget);e.addClass("highlight"),h(function(){e.removeClass("highlight")},500),k.isShowLoading=!0;var f={gdasNo:a.gdasNo},i=k.URLs.searchRevPop;g.get(i,{params:f}).success(function(a,b,d,e){if(a==c||a.gdasDtlInfo==c)return void(k.reviewPopData=null);k.isShowLoading=!1;try{a.gdasDtlInfo.gdasCont=a.gdasDtlInfo.gdasCont.replace(new RegExp("\r?\n","g"),"<br />")}catch(f){}k.reviewPopData=a.gdasDtlInfo,h(o,1)}).error(function(a,b,c,d){k.isShowLoading=!1,k.reviewPopData=null}),k.sendTclick(k.tClickBase+"SrhResult_Clk_Review")}},k.hideReviewPop=function(){b.element("#srhReviewPop .layerPop").css({opacity:0}),k.reviewPopData=null},k.gotoProductReview=function(){if(k.reviewPopData!=c&&k.reviewPopData.goodsNo!=c&&""!=k.reviewPopData.goodsNo){var a=k.getProductViewUrl(k.reviewPopData,k.tClickBase+"RVPopLayer_Clk_Btn_Clk");a+="&tabIdx=1",location.href=a}},k.searchByOriginalKeyword=function(){k.postParams.keyword=k.srhResultData.orgKeyword,k.srhResultData.keyword=k.srhResultData.orgKeyword,k.srhResultData.orgKeyword="",k.postParams.reQuery.length=0,k.postParams.exQuery.length=0,k.postParams.rekeyword="",k.postParams.chkTypo="N",k.srhFilterCtgInit(),k.srhFilterBrdInit(),k.srhFilterDetailInit(),k.postParams.rtnType="",k.loadDataParams(k.postParams.rtnType)}}}}]),d.directive("recomLink",["$window",function(a){
return{link:function(b,c,d){b.recomOutlink="_self",b.goRecomLink=function(c){if("undefined"!=typeof b.srhResultData.recomLink.linkUrl&&""!=b.srhResultData.recomLink.linkUrl){var d=b.srhResultData.recomLink.linkUrl+"";d.match(/^http|^https/gi)||(d="http://"+d);var e=b.tClickBase+"SrhResult_Clk_Kwd_A";b.srhResultData.recomLink.blankFlag?"undefined"!=typeof b.srhResultData.recomLink.alertStr&&""!=b.srhResultData.recomLink.alertStr&&"null"!=b.srhResultData.recomLink.alertStr?confirm(b.srhResultData.recomLink.alertStr)&&(outLink(d),b.sendTclick(e)):(outLink(d),b.sendTclick(e)):(d+=d.indexOf("?")>-1?"&tclick="+e:"?tclick="+e,"undefined"!=typeof b.srhResultData.recomLink.alertStr&&""!=b.srhResultData.recomLink.alertStr&&"null"!=b.srhResultData.recomLink.alertStr?confirm(b.srhResultData.recomLink.alertStr)&&(a.location=d):a.location=d)}c.preventDefault(),c.stopPropagation()}}}}]),d.directive("favLst",[function(){return{link:function(a,b,c){a.favRankClass=function(a){var b="";return"NEW"==a?b="new":NaN!=parseInt(a)&&(b=parseInt(a)>0?"up":parseInt(a)<0?"down":"none"),b},a.favRankVal=function(a){var b=a;return NaN!=parseInt(b)&&(b=Math.abs(parseInt(b))),b}}}}]),d.directive("recomData",["$http","LotteCommon","LotteUtil","commInitData",function(a,d,e,f){return{link:function(e,f,g){function h(f){var g=new Array;if(null!=f.results&&f.results.length>0){if($(f.results).each(function(a,b){g.push(b.itemId)}),e.tpmlData.rbDispnoResult=g.join(","),d.mainRealRecommData==c)return!1;var h="Y",i={method:"get",url:d.mainRealRecommData,params:{isSearch:h,latest_prod:e.tpmlData.rbDispnoResult}};a(i).success(function(a){e.tpmlData.recommondData=a.recommnd_prod})["finally"](function(){})}else setTimeout(function(){b.element(".recommond_wrap").css("display","none")},0)}e.gotoLinkM=function(a,b,c,f){var g="search_"+b;null!=f&&(a=d.prdviewUrl+"?goods_no="+f.goods_no+a),e.linkUrl(a,!1,g)},e.tpmlData={recommondData:{},rbDispnoResult:""},e.LoadRealRecommnd=function(){var a="http://rb-rec-api-apne1.elasticbeanstalk.com/rec/s001?size=30&cps=false&format=jsonp&cuid=fdd29847-94cd-480d-a0d9-16144485d58b&st="+e.postParams.keyword;$.ajax({type:"post",async:!0,url:a,dataType:"jsonp",success:function(a){h(a)},error:function(a,b,c){console.log("Data Error : 실시간 맞춤 추천 Data로드 실패")}})},e.LoadRealRecommnd()}}}])}(window,window.angular);var callDownCpn;!function(a,b,c){"use strict";var d=b.module("lotteMainPop",[]);d.controller("lotteMainPopCtrl",["$scope","$window","$location","$http","LotteCommon","LotteUtil","LotteCookie","LotteStorage","AppDownBnrService","LotteLink","commInitData",function(a,c,d,e,f,g,h,i,j,k,l){a.loadMainPopup=function(d){function m(){e.get(f.mainPopupData,{params:o}).success(function(b){if(!i.getSessionStorage("appDownBnrHide")&&!a.appObj.isApp){var c=j.appDownBnrLoadDefer;b.app_down_popup&&b.app_down_popup.length>0&&c.resolve(b.app_down_popup)}a.mainPop=b.current_page_popup,a.hideActionBar=g.isApp()&&"F"==a.mainPop.ppp_prt_tp_cd&&"20"!=d.pppTgtPgCd&&"30"!=d.pppTgtPgCd?!0:!1,0!=a.mainPop.ppp_sn&&(callDownCpn=function(){a.dupCouponIssue("88045"),a.sendTclick("m_abtest_naverbanner_01")},a.dupCouponIssue=function(b){if(a.loginInfo.isLogin)b.length>0&&e({url:f.couponRegCouponData+"?"+a.baseParam,data:"cpn_issu_no="+b,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(b){b.result=b.result.replace("\\n"," "),"undefined"!=typeof g.getParameter("cn")&&"140924"==g.getParameter("cn")&&b.result.indexOf("발급받은")>-1?(alert("이달의 앱 쿠폰을 모두 받으셨습니다. 참좋은혜택 등급 쿠폰도 확인하세요!"),location.href=f.gdBenefitUrl+"?"+a.baseParam):alert(b.result),a.popClose()}).error(function(a){"1000"==a.error.response_code?alert(a.error.response_msg):ajaxResponseErrorHandler(a,function(){})});else{var c="?"+a.baseParam;c+="&targetUrl="+encodeURIComponent(location.href),i.setSessionStorage("alliancePopupPPPSN",a.mainPop.ppp_sn),location.href=f.loginUrl+c}},a.cookieName=a.mainPop.cookie_nm,null!=i.getSessionStorage("alliancePopupPPPSN")&&a.loginInfo.isLogin?a.dupCouponIssue(a.mainPop.cpn_no):a.screenType>1&&10==d.pppTgtPgCd||(a.isOpenPop=!0,a.popOpen()),i.delSessionStorage("alliancePopupPPPSN"))}).error(function(a){console.log("Error Data :  메인팝업")})}var n=l.query,o={ppp_tgt_pg_cd:d.pppTgtPgCd,cn:n.cn,udid:n.udid,schema:n.schema};g.getParameter("testDate")&&(o.testDate=g.getParameter("testDate")),a.hideActionBar=!1,a.cookieName=null,a.appActionBarHide=function(){a.appObj.isApp&&a.hideActionBar&&(location.href="lottebridge://lotteapps/fullscreenhide")},a.appActionBarShow=function(){a.appObj.isApp&&a.hideActionBar&&(location.href="lottebridge://lotteapps/fullscreenshow")},a.popOpen=function(){b.element(".main_popup").show()},a.popClose=function(){a.sendTclick("m_RDC_popup_Close"),b.element(".main_popup").remove()},a.popToday=function(){a.sendTclick("m_RDC_popup_stoptoday"),h.setCookie(a.cookieName,"Y",1),a.popClose()},a.chkAlliancePopupObj={flag:!0,imgPath:"",deepLinkFlag:!0,tclick:""},a.closeAlliancePopup=function(){a.chkAlliancePopupObj.flag=!1},a.allianceExcuteApp=function(b){var c=a.chkAlliancePopupObj.deepLinkFlag?null:"http://m.lotte.com";a.chkAlliancePopupObj.tclick?a.chkAlliancePopupObj.tclick:null;k.appDeepLink("lotte",c,a.chkAlliancePopupObj.tclick,b)},b.element(c).on("load",m)}}]),d.config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/)}]),d.directive("lotteMainPopup",["$window",function(a){return{templateUrl:"/lotte/resources_dev/layer/main_popup.html",controller:"lotteMainPopCtrl",replace:!0,link:function(a,b,c){a.isOpenPop=!1,a.loadMainPopup(c)}}}]),d.controller("appDownBnrCtrl",["$scope","AppDownBnrService",function(a,b){a.appBnrInfo=null,b.appDownSettingData().then(function(b){a.appBnrInfo=b})}]),d.directive("appDownBnr",["$location","LotteLink","LotteStorage","AppDownBnrService",function(a,b,c,d){return{templateUrl:"/lotte/resources_dev/layer/app_down_bnr.html",controller:"appDownBnrCtrl",replace:!0,link:function(e,f,g){e.appDown=function(){var c=null,f=d.appDownBnrInfo.linkUrl+"",g=""!=d.appDownBnrInfo.tclick?d.appDownBnrInfo.tclick:null;"./"!=f&&(c="http"==f.substring(0,4)?d.appDownBnrInfo.linkUrl:"/"==f.substring(0,1)?a.protocol()+"://"+a.host()+f:a.protocol()+"://"+a.host()+"/"+f),g&&e.sendTclick(g),b.appDeepLink("lotte",c,null,d.appDownBnrInfo.referrer)},e.appDownBnrClose=function(){return c.setSessionStorage("appDownBnrHide",!0),d.appDownBnrInfo.isShowFlag=!1,!1}}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteDoubleCoupon",[]);d.controller("lotteCouponLayerCtrl",["$scope","$http","$window","LotteCommon",function(a,b,c,d){a.procDownDoubleCoupon=function(){var e={cn:a.srhObj.cn,cpn_issu_no:a.couponLayer.cpnNo,dup_cpn_yn:"double_coupon"==a.couponLayer.cpnType?"Y":"N",mbrNo:a.loginInfo.mbrNo,gradeCd:a.loginInfo.gradeCd};b.get(d.downDoubleCoupon,{params:e}).success(function(a){a.message&&alert(a.message),a.gopage&&(c.location.href=a.gopage)}).error(function(){console.log("Error 중복쿠폰 다운로드")})}}]),d.directive("lotteCouponLayer",["$window","$timeout","LotteCookie",function(a,d,e){return{templateUrl:"/lotte/resources_dev/layer/layer_coupon.html",controller:"lotteCouponLayerCtrl",replace:!0,link:function(f,g){var h=f.$watch("couponLayer",function(){if(f.couponLayer!=c){var g=b.element(".coupon_layer_s");"no"==e.getCookie(f.couponLayer.cookieNm)?g.remove():"double_coupon"==f.couponLayer.cpnType&&d(function(){g.css({top:a.innerHeight/2-g.outerHeight()/2+"px"})},500),h()}});f.setToDayNotView=function(){e.setCookie(f.couponLayer.cookieNm,"no",1),f.closeDoubleCouponLayer()},f.closeDoubleCouponLayer=function(){b.element(".coupon_layer_s").remove()},f.downDoubleCoupon=function(){return f.loginInfo.isLogin?void(""!=f.couponLayer.cpnNo&&f.couponLayer.cpnNo!=c&&f.procDownDoubleCoupon()):(f.loginProc(),!1)},f.goAppStore=function(){var b="";f.appObj.isAndroid?b="market://details?id=com.lotte&referrer=000001":f.appObj.isIOS&&("iPhone"==f.appObj.iOsType?b="http://itunes.apple.com/app/id376622474":"iPad"==f.appObj.iOsType&&(b="http://itunes.apple.com/app/id447799601")),""!=b&&(a.location.href=b)}}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSwipe",[]);d.directive("lotteSwipperCont",["$window","$timeout",function(c,d){return{link:function(c,d,e,f){c.lotteSwipper=function(){function f(){g(),j(H),u(),null!=R&&R(G,H)}function g(){A.attr("style",l(0,0)+"width:"+C+"px")}function h(a){return S?!1:void z.attr("style",l(0,a+"px"))}function i(a,b){A.eq(a).attr("style",l(0,0)),0>b?A.eq(o(a)).attr("style",l(0,"100%")):A.eq(n(a)).attr("style",l(0,"-100%"))}function j(a){B>2?b.forEach(A,function(b,c){c==n(a)?A.eq(c).attr("style",l(0,"-100%")):c==o(a)?A.eq(c).attr("style",l(0,"100%")):c==a?A.eq(c).attr("style",l(0,0)):A.eq(c).attr("style",l(0,"200%"))}):2==B?(A.eq(a).attr("style",l(0,0)),A.eq(o(a)).attr("style",l(0,"100%"))):1==B&&A.attr("style",l(0,0)),z.attr("style",l(0,0)),S=!1}function k(a){var b="";G=H,0>a?(b=l(K,"-100%"),H=o(H),S=!0):a>0?(b=l(K,"100%"),H=n(H),S=!0):b=l(K,"0"),z.attr("style",b)}function l(a,b){var c="";return c=0!=a?"-webkit-transform:translate3d("+b+",0,0);transform:translate3d("+b+",0,0);-webkit-transition-property:-webkit-transform;-webkit-transition-duration:"+a+";transition-property:transform;transition-duration:"+a+";":"-webkit-transform:translate3d("+b+",0,0);transform:translate3d("+b+",0,0);-webkit-transition-property:-webkit-transform;transition-property:transform;"}function m(a){return a.match(/(-?[0-9\.]+)/g)}function n(a){return 0==a?B-1:a-1}function o(a){return a==B-1?0:a+1}function p(a){I=!0,P=0;var b=a.originalEvent.touches[0];M=b.clientX,N=b.clientY;var c=m(z.css("transform"));L=parseInt(c[4])}function q(a){var b=a.originalEvent.touches[0],c=J?!0:Math.abs(b.clientY-N)<Math.abs(b.clientX-M),d=0;c&&(J=!0,a.preventDefault(),O=L+b.clientX-M,d=0>O?-1:O>0?1:0,d!=P&&i(H,d),d=P,h(O))}function r(a){I=!1,J=!1,P=0,k(C*Q<Math.abs(O)?O:0),O=0}function s(a){j(H),null!=R&&R(G,H)}function t(a){C=y.width(),D=y.height(),E=A.width(),F=A.height(),g(),j(H)}function u(){B>1&&(y.on({touchstart:p,touchmove:q,touchend:r,prev:function(){k(1)},next:function(){k(-1)}}),z.on("transitionend",s)),x.on("resize",t)}var v=c[e.lotteSwipperCont],w=b.extend({containerSelector:">ul",itemsSelector:">ul >li",startIdx:0,duration:"0.5s",swipeRangeRate:.2,swipeEndFunc:null},v);if(!w.containerSelector||!w.itemsSelector)return!1;var x=b.element(a),y=d,z=y.find(w.containerSelector),A=y.find(w.itemsSelector),B=A.length,C=y.width(),D=y.height(),E=A.width(),F=A.height(),G=-1,H=w.startIdx?1*w.startIdx:0,I=!1,J=!1,K=w.duration?w.duration:"0.5s",L=0,M=0,N=0,O=0,P=0,Q=w.swipeRangeRate?1*w.swipeRangeRate:.2,R=w.swipeEndFunc?w.swipeEndFunc:null,S=!1;f()}}}}]),d.directive("lotteSwipperItem",[function(){return{link:function(a,b,c){a.$last===!0&&a.lotteSwipper()}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular);