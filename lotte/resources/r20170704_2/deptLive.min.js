!function(a,b,c){"use strict";function d(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals;if(b.isDefined(g&&g.$template)){var g=e.$new(),h=a.current;m=i(g,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()}),l=h.scope=g,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function e(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());f.controller&&(g.$scope=d,g=b(f.controller,g),f.controllerAs&&(d[f.controllerAs]=g),e.data("$ngControllerController",g),e.children().data("$ngControllerController",g)),h(d)}}}a=b.module("ngRoute",["ng"]).provider("$route",function(){function a(a,c){return b.extend(Object.create(a),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){return a="?"===d?d:null,d="*"===d?d:null,e.push({name:c,optional:!!a}),b=b||"",""+(a?"":b)+"(?:"+(a?b:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,g,h,i,j,k){function l(a){var d=s.current;(q=(p=n())&&d&&p.$$route===d.$$route&&b.equals(p.pathParams,d.pathParams)&&!p.reloadOnSearch&&!r)||!d&&!p||c.$broadcast("$routeChangeStart",p,d).defaultPrevented&&a&&a.preventDefault()}function m(){var a=s.current,d=p;q?(a.params=d.params,b.copy(a.params,g),c.$broadcast("$routeUpdate",a)):(d||a)&&(r=!1,(s.current=d)&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(o(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),h.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?i.get(a):i.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),c=k.getTrustedResourceUrl(c),b.isDefined(c)&&(d.loadedTemplateUrl=c,a=j(c))),b.isDefined(a)&&(e.$template=a),h.all(e)}}).then(function(e){d==s.current&&(d&&(d.locals=e,b.copy(d.params,g)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==s.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function n(){var c,f;return b.forEach(d,function(d,g){var h;if(h=!f){var i=e.path();h=d.keys;var j={};if(d.regexp)if(i=d.regexp.exec(i)){for(var k=1,l=i.length;l>k;++k){var m=h[k-1],n=i[k];m&&n&&(j[m.name]=n)}h=j}else h=null;else h=null;h=c=h}h&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function o(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var p,q,r=!1,s={routes:d,reload:function(){r=!0,c.$evalAsync(function(){l(),m()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw f("norout");var c={},d=this;b.forEach(Object.keys(a),function(b){d.current.pathParams[b]||(c[b]=a[b])}),a=b.extend({},this.current.params,a),e.path(o(this.current.$$route.originalPath,a)),e.search(b.extend({},e.search(),c))}};return c.$on("$locationChangeStart",l),c.$on("$locationChangeSuccess",m),s}]});var f=b.$$minErr("ngRoute");a.provider("$routeParams",function(){this.$get=function(){return{}}}),a.directive("ngView",d),a.directive("ngView",e),d.$inject=["$route","$anchorScroll","$animate"],e.$inject=["$compile","$controller","$route"]}(window,window.angular),!function(a,b){"use strict";function c(a){return a.complete&&("undefined"==typeof a.naturalWidth||0!==a.naturalWidth)}function d(a){return Array.prototype.slice.call(a)}var e={gridWidth:300,gutterSize:10,refreshOnImgLoad:!0},f=function(){var c=a.element(b);return function(a){return c[0]=a,c}}();a.element(document.head).append("<style>.ag-no-transition{-webkit-transition: none !important;transition: none !important; visibility:hidden; opacity:0;}</style>"),a.module("angularGrid",[]).directive("angularGrid",["$timeout","$window","$q","angularGridInstance",function(b,g,h,i){return{restrict:"A",link:function(j,k,l){function m(){var a=t.offsetWidth;r=Math.floor(a/(y.gridWidth+y.gutterSize));var b=a%(y.gridWidth+y.gutterSize)+y.gutterSize;s=y.gridWidth+Math.floor(b/r),p.css({width:s+"px",height:"auto"}),x.length=0;for(var c=0;r>c;c++)x.push(0);return s}function n(){var b,c,e=m();d(p.find("img")).forEach(function(b){var c=a.element(b);if(c.hasClass("img-loaded"))return void c.css("height","");var d,e=c.attr("actual-width")||c.attr("data-actual-width"),f=c.attr("actual-height")||c.attr("data-actual-height");e&&f&&(d=b.width,l=f*d/e,c.css("height",l+"px"))});var g,h,i,j=[];for(b=0,c=p.length;c>b;b++)g=p[b],h=f(g),i=h.clone(),i.addClass("ag-no-transition"),i.css("width",e+"px"),h.after(i),j.push(i[0].offsetHeight),i.remove();for(b=0,c=p.length;c>b;b++){g=f(p[b]);var l=j[b],n=Math.min.apply(Math,x),o=x.indexOf(n);x[o]=n+l+y.gutterSize;var q=o*(e+y.gutterSize);g.css({top:n+"px",left:q+"px"})}k.css("height",Math.max.apply(Math,x)+"px")}function o(){var e=!1;d(p).forEach(function(f){var g=a.element(f),i=g.find("img"),j=[];i.length&&(g.addClass("img-loading"),d(i).forEach(function(d){var f=a.element(d);c(d)?f.addClass("img-loaded"):j.push(h(function(a,c){f.addClass("img-loading"),d.onload=function(){!e&&y.refreshOnImgLoad&&(e=!0,b(function(){n(),e=!1},100)),f.removeClass("img-loading").addClass("img-loaded"),a()},d.onerror=c}))}),j.length?h.all(j).then(function(){g.removeClass("img-loading").addClass("img-loaded")},function(){g.removeClass("img-loading").addClass("img-loaded")}):g.removeClass("img-loading").addClass("img-loaded"))})}var p,q,r,s,t=k[0],u=a.element(g),v=l.angularGridId,w=l.angularGrid,x=[],y={gridWidth:l.gridWidth?parseInt(l.gridWidth):e.gridWidth,gutterSize:l.gutterSize?parseInt(l.gutterSize):e.gutterSize,refreshOnImgLoad:"false"==l.refreshOnImgLoad?!1:!0};j.$watch(w,function(){b(function(){p=k.children(),n(),o(),b(function(){k.addClass("angular-grid"),n()})})},!0),u.on("resize",function(){q&&b.cancel(q),q=b(function(){n()},100)}),v&&(i[v]={refresh:n})}}}]).factory("angularGridInstance",function(){var a={};return a})}(angular,window),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","ngRoute","angular-carousel","angularGrid","lotteSns"]);d.controller("DeptLiveCtrl",["$scope","$http","LotteCommon","commInitData","$location","angularGridInstance","LotteStorage",function(b,d,e,f,g,h,i){f.query.detailCode&&""!=f.query.detailCode&&(location.href=e.deptLiveShopUrl+"#/"+f.query.detailCode),b.subTitle="백화점 라이브",b.showWrap=!0,b.contVisible=!0,b.isShowThisSns=!0,b.share_img="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png",b.share_url=e.deptLiveShopUrl,b.mainData="",b.subData="",b.detailData="",b.mainIndex=0,b.menuAr=[0,1,2,3,4],b.pageSub=1,b.scrollSub=0,b.loadFlag=!0,b.curDispNo="",b.subList,b.totalNum=0,b.screen=1,b.tclickInfo=["main_banner","m_live_main_category0","main_brand","m_live_product_video","m_live_product_contact","m_live_product_purchase","m_live_product_list_brand","sub_banner"],b.loadMainData=function(){b.subData="",b.totalNum=0,b.detailData="",b.subList="",$("#player").html(""),b.vodFlag=!1,b.share_img="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png",b.share_url=e.deptLiveShopUrl,b.screen=1,b.subTitle="백화점 라이브",""==b.mainData?d.get(b.getParam(1)).success(function(a){b.mainData=a.deptLive_main,b.main_prdList=[b.mainData.prdList1,b.mainData.prdList2,b.mainData.prdList3,b.mainData.prdList4],b.pageScrollTo()}).error(function(){console.log("Data Error : main 데이터")}):b.pageScrollTo()},b.dLgoDetail=function(a,c,d,e){e+=1,10>e&&(e="0"+e),b.sendTclick(d+e),i.setSessionStorage("dept_brand",a),i.setSessionStorage("dept_good",c),b.scrollSub=0,location.href="#/"+a+"_"+c},b.getImgResizeUrl=function(a,b){if(!a)return"";var c=a+"";return c.indexOf("http://live.lotte.com")>-1&&(c+=b),c},b.loadSubData=function(){b.screen=2,""==b.subData?(b.pageSub=1,d.get(b.getParam(2)).success(function(a){if(a.brnd_goods&&a.brnd_goods.prdList&&a.brnd_goods.prdList.items&&a.brnd_goods.prdList.items.length>0){var c=0;for(c;c<a.brnd_goods.prdList.items.length;c++)a.brnd_goods.prdList.items[c].imgUrl=b.getImgResizeUrl(a.brnd_goods.prdList.items[c].imgUrl,"/lotte/resize/320x320")}b.subData=a.brnd_goods,b.subTitle=b.subData.subTitle,b.totalNum=b.subData.prdList.total_count,b.subList=b.subData.prdList.items,b.loadDetailData()}).error(function(){console.log("Data Error : sub list 데이터")})):b.loadDetailData()},b.loadSubDataMore=function(){b.loadFlag=!1,b.pageSub++,d.get(b.getParam(2)).success(function(a){if(a.brnd_goods&&a.brnd_goods.prdList&&a.brnd_goods.prdList.items&&a.brnd_goods.prdList.items.length>0){var c=0;for(c;c<a.brnd_goods.prdList.items.length;c++)a.brnd_goods.prdList.items[c].imgUrl=b.getImgResizeUrl(a.brnd_goods.prdList.items[c].imgUrl,"/lotte/resize/320x320")}b.subList=b.subList.concat(a.brnd_goods.prdList.items),b.loadFlag=!0}).error(function(){console.log("Data More Error : 데이터")})},b.loadDetailData=function(){b.brandNo=i.getSessionStorage("dept_brand"),b.detailNo=i.getSessionStorage("dept_good"),d.get(b.getParam(3)).success(function(c){if(c.goods&&c.goods.imgList&&c.goods.imgList.length>0){var d=0;for(d;d<c.goods.imgList.length;d++)c.goods.imgList[d]=b.getImgResizeUrl(c.goods.imgList[d],"/lotte/resize/640x640")}b.detailData=c.goods,b.commentStr=b.detailData.comment.replace(/\n/g,"<br>"),$("html, body").animate({scrollTop:0},300,function(){$(a).width()>=768?($(".baseImage").show(),$(".baseInfo").show()):($(".baseImage").slideDown(300),$(".baseInfo").slideDown(300))}),b.detailData.imgList&&b.detailData.imgList.length>0?b.share_img=(b.detailData.imgList[0]+"").replace("/lotte/resize/640x640",""):b.share_img="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png",b.share_url=e.deptLiveShopUrl+"?detailCode="+b.brandNo+"_"+b.detailNo}).error(function(){console.log("Data Error : Detail 데이터")})},b.dLask=function(){var a=10,c=30,d=20,e=new Date,f=e.getHours(),g=e.getMinutes(),h=!1;f==a?g>=c&&(h=!0):f>a&&d>f&&(h=!0),b.sendTclick(b.tclickInfo[4]),h?setTimeout(function(){location.href="tel:"+b.detailData.phoneNm},500):alert("지금은 백화점 오픈시간이 아닙니다.")},b.dLbuy=function(){location.href="/product/m/product_view.do?"+b.baseParam+"&goods_no="+b.detailData.detailid+"&tclick="+b.tclickInfo[5]},b.vodFlag=!1,b.vodView=function(){b.sendTclick(b.tclickInfo[3]),b.vodFlag=!0,$("html, body").animate({scrollTop:0},100),onYouTubeReady()},b.closeVodBox=function(){player.stopVideo(),b.vodFlag=!1},b.otherDetail=function(a,c){b.sendTclick(b.tclickInfo[6]+a),b.scrollSub=0,location.href="#/"+a+"_"+c},b.viewRateFnc=function(a){return a>=1e3&&(a="999+"),a},b.refresh=function(){h.gallery.refresh()};var j=$(a),k=$(".ng-scope");j.on({scroll:function(){b.subList!=c&&2==b.screen&&k.offset().top+k.outerHeight()+221<j.scrollTop()+3*j.height()&&b.loadFlag&&b.subList.length<b.totalNum&&b.loadSubDataMore()}}),b.getParam=function(a){var c="";return 1==a?c=e.deptLiveMainData+"?dispNo=5542569&"+b.baseParam:2==a?(b.brandNo=i.getSessionStorage("dept_brand"),c=e.deptLiveSubData+"?dispNo=5542569&"+b.baseParam+"&brandNo="+b.brandNo+"&page="+b.pageSub+"$order="+b.orderSub):3==a&&(b.detailNo=i.getSessionStorage("dept_good"),c=e.deptLiveDetailData+"?"+b.baseParam+"&goodsNo="+b.detailNo),c},b.bannerTclick=function(a,c){location.href=a+(a.indexOf("?")>=0?"&":"?")+b.baseParam},b.pageScrollTo=function(){var c=0;1==b.screen?c=b.scrollMain:2==b.screen&&(c=b.scrollSub),$(a).scrollTop(c)}}]),d.filter("number6Filter",function(){return function(a,b){var d=[];if(a!=c)for(var e=0;b>e&&e<a.length;e++)d.push(a[e]);return d}}),d.controller("deptLivePage",["$scope","$http","$location","$routeParams","LotteStorage",function(a,b,c,d,e){if("/"==c.$$path)a.loadMainData();else if("/floor0"==c.$$path)a.mainIndex=0,a.sendTclick(a.tclickInfo[1]+a.mainIndex),a.loadMainData();else if("/floor1"==c.$$path)a.mainIndex=1,a.sendTclick(a.tclickInfo[1]+a.mainIndex),a.loadMainData();else if("/floor2"==c.$$path)a.mainIndex=2,a.sendTclick(a.tclickInfo[1]+a.mainIndex),a.loadMainData();else if("/floor3"==c.$$path)a.mainIndex=3,a.sendTclick(a.tclickInfo[1]+a.mainIndex),a.loadMainData();else if("/floor4"==c.$$path)a.mainIndex=4,a.sendTclick(a.tclickInfo[1]+a.mainIndex),a.loadMainData();else{var f=(d.pageParams+"").split("_");f&&2==f.length?(e.setSessionStorage("dept_brand",f[0]),e.setSessionStorage("dept_good",f[1]),a.loadSubData()):a.loadMainData()}}]),d.config(["$routeProvider",function(a){a.when("/",{templateUrl:"/lotte/resources_dev/deptLive/deptLive_container.html",controller:"deptLivePage",reloadOnSearch:!1}).when("/floor0",{templateUrl:"/lotte/resources_dev/deptLive/deptLive_container.html",controller:"deptLivePage",reloadOnSearch:!1}).when("/floor1",{templateUrl:"/lotte/resources_dev/deptLive/deptLive_container.html",controller:"deptLivePage",reloadOnSearch:!1}).when("/floor2",{templateUrl:"/lotte/resources_dev/deptLive/deptLive_container.html",controller:"deptLivePage",reloadOnSearch:!1}).when("/floor3",{templateUrl:"/lotte/resources_dev/deptLive/deptLive_container.html",controller:"deptLivePage",reloadOnSearch:!1}).when("/floor4",{templateUrl:"/lotte/resources_dev/deptLive/deptLive_container.html",controller:"deptLivePage",reloadOnSearch:!1}).when("/:pageParams",{templateUrl:"/lotte/resources_dev/deptLive/deptLive_detail.html",controller:"deptLivePage",reloadOnSearch:!1}).otherwise({redirectTo:"/"})}])}(window,window.angular);