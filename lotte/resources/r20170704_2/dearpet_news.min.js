function calcBytes(a){var b=0;for(i=0;i<a.length;i++){var c=a.charAt(i);escape(c).length>4?b+=2:"\n"==c?"\r"!=a.charAt(i-1)&&(b+=1):b+="<"==c||">"==c?4:1}return b}function maxLengthCheck(a,b,c,d){var e,f,g=c.value.length,h=parseInt(a),i="",j=0;if(0==g)null!=document.getElementById("spn_input_char")&&(document.getElementById("spn_input_char").innerText=h);else for(k=0;k<g;k++){if(e=c.value.charAt(k),"\n"==e&&j++,escape(e).length>4?h-=2:h--,0>h){alert("총 한글 "+a/2+"자 영문 "+a+"자 까지 쓰실 수 있습니다."),c.value=i;break}if(null!=b&j>parseInt(b)){alert("라인수 "+b+"라인을 넘을 수 없습니다."),j=0,f=i.length-1,c.value=i.substring(0,f);break}null!=document.getElementById("spn_input_char")&&(document.getElementById("spn_input_char").innerText=h),i+=e}}!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.controller("DearpetNewsCtrl",["$http","$scope","$window","$location","LotteCommon","commInitData","LotteStorage","$timeout",function(c,d,e,f,g,h,i,j){function k(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}d.isMain=!1,d.showWrap=!0,d.contVisible=!0,d.subTitle="",d.screenID="DearpetNews",d.pageLoading=!0,d.dispNo="",d.productListLoading=!0,d.productMoreScroll=!0,(d.screenDataReset=function(){d.screenData={page:0,disp_name:"",dispNo:"",curDispNo:"",cateNodeName:[],top_banner:[],showAllCategory:!1,selectCate1:h.query.beforeNo,selectCate2:0,selectCate3:0,selectedCategory:0,cate_list:[],event_list:[],event_list:[],pageSize:10,pageEnd:!1,galleryTotal:0}})();var l=h.query.scrollback;d.screenData.curDispNo=k("curDispNo"),d.subTitle=d.screenData.disp_name="뉴스",d.getCateNodeName=function(a,b){var c=[];switch(""!=a&&(c=a.split(",")),b){case 1:for(var e=0;e<d.screenData.cate_list.length;e++)null!=d.screenData.cate_list[e].sub_cate_list&&d.getCateNodeName(e+"",b+1);break;case 2:for(var e=0;e<d.screenData.cate_list[c[0]].sub_cate_list.length;e++)if(null!=d.screenData.cate_list[c].sub_cate_list[e].sub_cate_list)d.getCateNodeName(a+","+e,b+1);else if(d.screenData.cate_list[c[0]].sub_cate_list[e].disp_no==d.screenData.curDispNo)return d.screenData.cateNodeName[0]=d.screenData.cate_list[c[0]].disp_nm,d.screenData.cateNodeName[1]=d.screenData.cate_list[c[0]].sub_cate_list[e].disp_nm,void(d.screenData.cateNodeName[2]="");break;case 3:for(var e=0;e<d.screenData.cate_list[c[0]].sub_cate_list[c[1]].sub_cate_list.length;e++)if(d.screenData.cate_list[c[0]].sub_cate_list[c[1]].sub_cate_list[e].disp_no==d.screenData.curDispNo)return d.screenData.cateNodeName[0]=d.screenData.cate_list[c[0]].disp_nm,d.screenData.cateNodeName[1]=d.screenData.cate_list[c[0]].sub_cate_list[c[1]].disp_nm,void(d.screenData.cateNodeName[2]=d.screenData.cate_list[c[0]].sub_cate_list[c[1]].sub_cate_list[e].disp_nm)}},d.loadScreenData=function(a){if(console.log("스크린 데이터 로드..."),!d.screenData.pageEnd){d.screenData.page++,d.screenData.page>1?d.productListLoading=!0:d.pageLoading=!0;var b=g.petMalleventData+"?dispNo="+d.screenData.curDispNo+"&page="+d.screenData.page+"&pageSize="+d.screenData.pageSize;console.log(b),c.get(b).success(function(a){var b=[];b=a.dearpet_news,d.screenData.cate_list=b.cate_list.items,console.log(d.screenData.cate_list);for(var c=0;c<b.cate_list.items.length;c++)b.cate_list.items[c].subopen=!1;if(d.getCateNodeName("",1),null!=b.event_list){b.event_list.items;d.screenData.event_list=b.event_list.items;try{d.screenData.event_old_list=b.event_old_list.items}catch(e){d.screenData.event_old_list=[]}d.screenData.pageEnd=!0,j(function(){for(var a=0;a<d.screenData.event_list.length;a++)d.screenData.event_list[a].big=!1,d.screenData.event_list[a].open=!1,$("#swaglist_cont"+a).height()>35&&(d.screenData.event_list[a].big=!0)},100),d.contMoreClick=function(a){a.open=!a.open,a.more=!a.more},d.screenData.galleryTotal<d.screenData.page*d.screenData.pageSize&&(d.screenData.pageEnd=!0,d.productMoreScroll=!1),d.productListLoading=!1,d.pageLoading=!1}})}};var m=i.getSessionStorage(d.screenID+"Loc"),n=i.getSessionStorage(d.screenID+"Data"),o=i.getSessionStorage(d.screenID+"ScrollY");if(m==a.location.href&&d.locationHistoryBack){var p=JSON.parse(n);d.pageLoading=!1,d.pageOptions=p.pageOptions,d.screenData=p.screenData,j(function(){b.element(e).scrollTop(o)},800)}else d.loadScreenData(),"y"==l&&j(function(){b.element(e).scrollTop(o)},800);b.element(e).on("unload",function(a){var c={};c.pageOptions=d.pageOptions,c.screenData=d.screenData,!h.query.localtest&&d.leavePageStroage&&(i.setSessionStorage(d.screenID+"Loc",f.absUrl()),i.setSessionStorage(d.screenID+"Data",c,"json"),i.setSessionStorage(d.screenID+"ScrollY",b.element(e).scrollTop()))})}]),d.filter("hidestr",function(){return function(a){var b="";if(a!=c){b=a.substr(0,3);for(var d=3;d<a.length;d++)b+="*"}return b}}),d.directive("lotteContainer",["$window","LotteCommon","$timeout",function(a,c,d){return{templateUrl:"/lotte/resources_dev/mall/pet/dearpet_news_container.html",replace:!0,link:function(d,e,f){d.mallMainClick=function(b){var e=c.petMallMainUrl+"?"+d.baseParam;b&&(e+="&tclick="+b),a.location.href=e},d.mallProductClick=function(b,e){var f=c.prdviewUrl+"?"+d.baseParam+"&goods_no="+b.goods_no+"&curDispNoSctCd=95";e&&(f+="&tclick="+e),a.location.href=f},d.eventClick=function(b,c){var e=b.img_link+"&"+d.baseParam;c&&(e+="&tclick="+c),a.location.href=e},d.idChange=function(a){for(var b=a.substr(0,3),c=3;c<a.length;c++)b+="*";return b};var g=b.element(a),h=b.element("body"),i=g.height(),j=h[0].scrollHeight,k=4;g.on("scroll",function(a){!d.productMoreScroll||d.productListLoading||d.pageLoading||(j=h[0].scrollHeight,k=g.width()>=640?2:4,j-i*k>i&&g.scrollTop()+i>=j-i*k&&d.loadScreenData())})}}}]),d.directive("petMallCtg",["$window","LotteCommon",function(a,b){return{templateUrl:"/lotte/resources_dev/mall/pet/pet_mall_ctg_container.html",link:function(c,d,e){c.menuCategoryClick=function(a){c.menuCategory1Click(a)},c.menuCategory1Click=function(d,e){if(d.sub_cate_list||(d.sub_cate_list=[]),!d.sub_cate_list.length){var f=b.petMalleventUrl+"?"+c.baseParam+"&curDispNo="+d.disp_no+"&cateDepth="+d.cate_depth;return f+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no+"&beforeNo="+d.disp_no,void(a.location.href=f)}c.screenData.selectCate1==d.disp_no?d.subopen=!d.subopen:d.subopen=!0,c.screenData.selectCate1=d.disp_no,c.sendTclick("m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no)},c.menuCategory2Click=function(d,e){switch(c.menuCategory2Index=0,e||(e=""),d.dearpet_depth_cd.toString()){case"20":var f=b.petMallgalleryUrl+"?"+c.baseParam+"&curDispNo="+d.disp_no+"&beforeNo="+e.disp_no+"&cateDepth="+d.cate_depth;f+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no,a.location.href=f;break;case"21":var f=b.petMalleventUrl+"?"+c.baseParam+"&curDispNo="+d.disp_no+"&beforeNo="+e.disp_no+"&cateDepth="+d.cate_depth;f+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no,a.location.href=f;break;default:var f=b.petMallProdListUrl+"?"+c.baseParam+"&curDispNo="+d.disp_no+"&beforeNo="+e.disp_no+"&cateDepth="+d.cate_depth+"&title="+d.disp_nm;f+="&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no,a.location.href=f}}}}}]),d.directive("subHeaderEach",["$window",function(a){return{replace:!0,link:function(c,d,e){function f(){c.appObj.isNativeHeader&&(i=0),h.scrollTop()>=0?g.attr("style","z-index:100;position:fixed;top:"+i+"px;width:100%"):g.removeAttr("style")}c.gotoPrepage=function(){c.sendTclick("m_RDC_header_new_pre"),history.go(-1)};var g=b.element(d),h=b.element(a),i=c.subHeaderHeight;h=b.element(a),i=c.subHeaderHeight,h.on("scroll",function(a){f(),setTimeout(f,300)})}}}]),d.directive("depFilterLayer",["$window",function(a){return{replace:!0,link:function(c,d,e){var f=(b.element("body"),b.element("#headerSpace"));b.element(a).on("scroll",function(a){var b=c.headerHeight;this.pageYOffset>b?(f.css("height",d[0].offsetHeight+"px"),d[0].style.cssText="padding:0;z-index:49;position:fixed;top:"+c.subHeaderHeight+"px;width:100%;"):(f.css("height","0px"),d[0].style.cssText="")})}}}])}(window,window.angular);