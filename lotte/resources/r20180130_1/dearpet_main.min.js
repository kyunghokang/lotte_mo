!function(a,b,c){"use strict";var d=b.module("lotteSns",[]),e="[롯데닷컴 이거어때?]\n";d.controller("smsBoxCtrl",["$scope","$http","LotteCommon",function(a,b,c){a.sendSMSData=function(){var d={msg:a.smsTxt,phone_no:a.sms_phoneNo};b({url:c.sendEventSms,data:$.param(d),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(b){b.indexOf("정상적으로 처리되었습니다")>-1?alert("문자가 발송되었습니다."):alert(b),a.hideSharePop()}).error(function(a){console.log("Error Data : 데이터 로딩 에러")})}}]),d.directive("shareBox",["$window","$location","LotteCommon","commInitData","$http","$timeout",function(d,e,f,g,h,i){return{templateUrl:"/lotte/resources_dev/sns/share_box.html",replace:!0,link:function(e,j,k){function l(a){return 10>a?"0"+a:a+""}function m(a,b,c,d,e,f){var g=new Date(a,b,c,d,e,f);return a&&b&&c&&(g.setFullYear(a),g.setMonth(b-1),g.setDate(c),d&&g.setHours(d),e&&g.setMinutes(e),f&&g.setSeconds(f)),g.getTime()}function n(a){return(a+"").length>1?a:"0"+a}function o(){return g.query.goods_no?void h.get("/product/regBestProd.do",{params:{goods_no:g.query.goods_no,sum_dt:v}}).success(function(a){}).error(function(){}):!1}function p(){if(e.share_img&&""!=e.share_img)var a=e.share_img;else if(y<m(2017,4,24,0,0))var a="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg";else var a="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png";e.cnShareUrl=e.cnShareUrl.replace(/(&)/g,"%26"),e.subTitle=e.getDearPetShareTitle(e.subTitle).replace(/(&)/g,"")+e.prdComment.replace(/(&)/g,"");var b="http://m.facebook.com/sharer.php?s=100&u="+encodeURIComponent(f.facebookUrl+"?fb_yn=Y&shareUrl="+e.cnShareUrl+"&shareTitle="+e.getDearPetShareTitle(e.subTitle)+"&shareImg="+a);d.open(b)}function q(){var a=(e.subTitle+e.prdComment,"https://twitter.com/share?text="+encodeURIComponent(e.getDearPetShareTitle(e.subTitle)+e.prdComment+" ")+"&url="+encodeURIComponent(e.cnShareUrl));d.open(a)}var r=new Date,s=r.getFullYear()+"",t=r.getMonth()+1+"",u=r.getDate()+"",v=s+n(t)+n(u),w=new Date,x=w.getFullYear()+l(w.getMonth()+1)+l(w.getDate()),y=w.getTime();if(g.query.testDate){g.query.testDate;x=g.query.testDate,y=m(x.substring(0,4),x.substring(4,6),x.substring(6,8),x.substring(8,10),x.substring(10,12),x.substring(12,14))}var z=function(){i(function(){b.element(document.querySelector("#sms_phoneNo")).focus()})};e.shareSNS=function(a,b){if(("/product/m/product_view.do"==d.location.pathname||"/product/m/product_view_dev.html"==d.location.pathname)&&o(),e.loginInfo.isLogin){var g=f.baseUrl+"/event/regEvent.do?"+e.baseParam,i=f.baseUrl+"/event/saveClover.do?"+e.baseParam,j=e.share_evt_no;b!=c&&""!=b&&(j=b);h({method:"POST",url:g,data:{evt_no:j},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}}),h({method:"POST",url:i,data:{evt_no:j},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}if(e.appObj.isApp)return e.sendAppShare(a),!1;switch(a){case"sms":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.smsCdn,e.showSmsBox();break;case"kakaotalk":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.talkCdn,e.sendKakaoTalk();break;case"kakaostory":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.stotyCdn,e.sendKakaoStory();break;case"facebook":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.faceCdn,e.sendFacebook();break;case"twitter":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.twitCdn,e.sendTwitter();break;case"url_copy":e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.urlCdn,e.urlCopyClick(e.cnShareUrl)}},e.urlCopyClick=function(a){e.sendTclick(e.tClickBase+"share_Clk_Pop_5"),e.urlCopyFlag=!e.urlCopyFlag},e.showSmsBox=function(){if(e.sendTclick(e.tClickBase+"share_Clk_Pop_6"),e.appObj.isTablet)e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl,b.element(document).on("focus","input, textarea",function(a){j[0].style.cssText=""});else if(e.appObj.isAndroid)if(e.appObj.isTablet)e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl;else{var c=encodeURIComponent(e.getDearPetShareTitle(e.subTitle).replace(/(&)/g,"%26")+e.prdComment.replace(/(&)/g,"%26")+" "+e.cnShareUrl.replace(/(&)/g,"%26"));a.open("sms:?body="+c)}else e.sharePopVisible?e.isBeforeShareBox=!0:e.sharePopVisible=!0,e.contVisible=!1,e.shareBoxVisible=!1,e.smsBoxVisible=!0,e.sharePopTl="문자 보내기",e.smsTxt=e.getDearPetShareTitle(e.subTitle)+e.prdComment+" "+e.cnShareUrl,z()},e.sendAppShare=function(a){"sms"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_6"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.smsCdn),"kakaotalk"==a&&(e.appObj.isOldApp?e.kakaoType="":e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_1"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.talkCdn),"kakaostory"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_4"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.stotyCdn),"facebook"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_2"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.faceCdn),"twitter"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_3"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.twitCdn),"url_copy"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_5"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.urlCdn),"moreapp"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_8"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.appCdn),"mail"==a&&(e.kakaoType="",e.sendTclick(e.tClickBase+"share_Clk_Pop_7"),e.cnShareUrl="",e.cnShareUrl=e.noCdnUrl+"&cdn="+e.mailCdn),e.share_img&&""!=e.share_img?e.share_img=e.share_img:y<m(2017,4,24,0,0)?e.share_img="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg":e.share_img="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png";var b={url:e.cnShareUrl,title:e.kakaoType+e.getDearPetShareTitle(e.subTitle).replace(/#/gi,"")+e.prdComment.replace(/#/gi,""),imageUrl:e.share_img};e.appObj.isAndroid?d.lotteshare.callAndroid("lotteshare://"+a+"/query?"+JSON.stringify(b)):e.appObj.isIOS&&(d.location="lotteshare://"+a+"/query?"+JSON.stringify(b))},e.sendKakaoStory=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_4"),e.share_img&&""!=e.share_img?e.share_img=e.share_img:y<m(2017,4,24,0,0)?e.share_img="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg":e.share_img="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png",Kakao.Story.open({url:e.cnShareUrl,text:e.getDearPetShareTitle(e.subTitle)+e.prdComment+"\n",urlInfo:{images:[e.share_img]}})},e.sendKakaoTalk=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_1"),e.share_img&&""!=e.share_img?e.img_url=e.share_img:y<m(2017,4,24,0,0)?e.img_url="http://image.lotte.com/lotte/mobile/common/share_img_50th.jpg":e.img_url="http://image.lotte.com/lotte/mobile/common/share_img2016_v2.png",e.appShareUrl=e.cnShareUrl.replace("http","mlotte001"),Kakao.Link.sendTalkLink({label:e.getDearPetShareTitle(e.subTitle)+e.prdComment+"\n"+e.cnShareUrl,image:{src:e.img_url,width:"280",height:"280"},appButton:{text:"롯데닷컴",execParams:{iphone:{executeurl:e.appShareUrl},android:{executeurl:e.appShareUrl}}},installTalk:!0})},e.sendFacebook=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_2"),p()},e.sendTwitter=function(){e.sendTclick(e.tClickBase+"share_Clk_Pop_3"),q()}}}}]),d.directive("smsBox",["$window",function(a){return{templateUrl:"/lotte/resources_dev/sns/sms_box.html",controller:"smsBoxCtrl",link:function(a,c,d){a.focusInput=!0,a.sendShareSMS=function(){$.isNumeric(a.sms_phoneNo)&&a.sms_phoneNo.length<=11&&a.sms_phoneNo.length>=10?a.sendSMSData():alert("휴대폰 번호를 정상적으로 입력해주세요.")},a.appObj.isIOS&&b.element(document).on("focus","input, textarea",function(a){c[0].style.cssText=""})}}}]),d.directive("numericOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){var b=a?a.replace(/[^\d.-]/g,""):null;return b!=a&&(d.$setViewValue(b),d.$render()),b})}}}),d.directive("sharePop",["$window","$location","LotteCommon","$timeout",function(d,f,g,h){return{templateUrl:"/lotte/resources_dev/sns/share_pop.html",replace:!0,link:function(d,f,i){function j(){var b={};return a.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,d){b[c]=d}),b}function k(){var a=j(),b=["c","cdn","cn","schema","tclick","udid","v"],c="",d="";for(var e in a)b.indexOf(e)>=0||(c+=d+e+"="+a[e],d="&");return c}d.isBeforeShareBox=!1,d.sharePopVisible=!1,d.shareBoxVisible=!1,d.snsTitle="친구에게 공유하기",d.getDearPetShareTitle=function(a){try{d.shareCodeis&&(a="["+d.shareCodeis+" "+d.subTitle+"]\n",e="")}catch(b){}try{"DearpetGallary"==d.screenID||"Mombaby"==d.screenID||d.shareNoFixMessage||(a=e+a)}catch(b){a=e+a}try{a=a.replace("[[","["),a=a.replace("]]","]")}catch(b){console.log("shareTitle replace err")}return a},d.showSharePop=function(a,e){try{Kakao.cleanup(),1==d.appObj.isSktApp?Kakao.init("7a460fb5cdebe4589041db57d906ddda"):Kakao.init("574659987ca46095c123d71f72abac14")}catch(f){if(console.log("PC-MODE"),location.host.indexOf("localhost")<0)return}a||(a={}),d.prdComment="",d.share_path=location.pathname,d.testParam=j();try{a.prdComment=a.prdComment.replace(/[<]br[\/][>]/gi,"\n")}catch(f){}var i=new Date,l=i.getFullYear().toString(),m=(i.getMonth()+1).toString(),n=i.getDate().toString();switch(d.nowDate=l+(m[1]?m:"0"+m[0])+(n[1]?n:"0"+n[0]),d.nowDate>=20180101&&d.nowDate<20180201?d.share_evt_no="338338":d.nowDate>=20180201&&d.nowDate<20180301?d.share_evt_no="338339":d.nowDate>=20171201&&d.nowDate<20180101?d.share_evt_no="329939":d.share_evt_no="302853","/mylotte/product/m/mylotte_crit_view.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.subTitle=" [상품평] ",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," "),b.isDefined(a.goodsNo)?d.goodsNo=a.goodsNo:d.goodsNo="",b.isDefined(a.shareImg)?d.share_img=a.shareImg:d.share_img=""):"/product/m/product_view.do"==d.share_path||"/product/m/sub/product_comment.do"==d.share_path||"/product/m/sub/product_comment_detail.do"==d.share_path?(d.share_path="/product/m/product_view.do",b.isDefined(a.prdComment)?"Y"==a.healthfood_yn?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=a.goodsNm,d.prdComment=""):(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=" [상품평] ",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ")):(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=a.goodsNm,d.prdComment="")):"/product/m/photoreview.do"==d.share_path?"Y"==a.healthfood_yn?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=a.mgoods_nm,d.prdComment=""):(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=" [상품평] ",d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ")):"/mall/pet/mitou_gallery.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.bbsNo=a.bbsNo,d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ")):"/mall/baby/baby_main.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.prdComment=a.prdComment.replace(/\<br[\/]*\>/g," ")):"/product/m/product_list.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg):"/planshop/m/planshop_view.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg):"/product/m/product_view_gucci.do"==d.share_path?(d.snsTitle="친구에게 공유하기",d.share_img=a.shareImg,d.goodsNo=a.goodsNo,d.subTitle=d.$$childHead.BasicData.product.mgoods_nm):(d.snsTitle="친구에게 공유하기",d.prdComment="",d.share_img=""),d.param="","/product/m/product_view.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo),"/product/m/photoreview.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo,d.share_path="/product/m/product_view.do"),"/mylotte/product/m/mylotte_crit_view.do"==d.share_path&&(d.param="?goods_no="+d.goodsNo),("/product/m/comment_rewrite.do"==d.share_path||"/product/m/comment_write.do"==d.share_path)&&(d.param="?goods_no="+d.testParam.goods_no),"/product/m/product_list.do"==d.share_path&&(b.isDefined(d.testParam.ss_yn)?d.testParam.ss_yn="&ss_yn="+d.testParam.ss_yn:d.testParam.ss_yn="",b.isDefined(d.testParam.shoppingholicYn)?d.testParam.shoppingholicYn="&shoppingholicYn="+d.testParam.shoppingholicYn:d.testParam.shoppingholicYn="",b.isDefined(d.testParam.planShopGubun)?d.testParam.planShopGubun="&planShopGubun="+d.testParam.planShopGubun:d.testParam.planShopGubun="",d.param="?curDispNo="+d.testParam.curDispNo+d.testParam.ss_yn+d.testParam.shoppingholicYn+d.testParam.planShopGubun),"/planshop/m/planshop_view.do"==d.share_path&&(d.param="?spdp_no="+d.testParam.spdp_no),"/event/m/eventSaunMain.do"==d.share_path&&(d.param="?evt_no="+d.testParam.evt_no),"/styleshop/styleshop.do"==d.share_path&&(d.param="?disp_no="+d.testParam.disp_no),"/styleshop/styleshopmen.do"==d.share_path&&(d.param="?keyword="+d.testParam.keyword),"/mall/pet/dearpet_gallery.do"==d.share_path&&(d.param="?curDispNo="+d.testParam.curDispNo+"&beforeNo="+d.testParam.beforeNo+"&cateDepth="+d.testParam.cateDepth),"/mall/baby/baby_main.do"==d.share_path&&(d.param="?dispNo="+d.testParam.dispNo+"&dcate="+d.testParam.dcate+"&mcate="+d.testParam.mcate),"/event/m/kids/experience_view.do"==d.share_path&&(d.param="?evt_no="+d.testParam.evt_no),"/product/m/product_view_gucci.do"==d.share_path&&(d.param="?goods_no="+d.testParam.goods_no),"/category/m/brand_prod_list.do"==d.share_path&&(d.param="?upBrdNo="+(d.testParam.upBrdNo||"")),"/brand/bestbrandMain.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),"/brand/bestbrandSub.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),"/mall/samsung/bestsamsung_main.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),"/mall/samsung/bestsamsung_sub.do"==d.share_path&&(d.param="?curDispNo="+(d.testParam.curDispNo||"")),d.share_path){case g.styleRecomUrl:case g.specialMallUrl:case g.specialSubUrl:a!=c&&a.shareImg!=c&&(d.share_img=a.shareImg),d.param="?"+k()}(d.param+"").length>0&&(d.param+="&"),-1==(d.param+"").indexOf("?")&&(d.param="?"+d.param),1==d.appObj.isSktApp?d.noCdnUrl=location.protocol+"//"+location.hostname+d.share_path+d.param+"cn=171127":"/mylotte/product/m/mylotte_crit_view.do"==d.share_path||"/product/m/comment_rewrite.do"==d.share_path||"/product/m/comment_write.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/product/m/product_view.do"+d.param+"&cn=123624":"/mall/pet/dearpet_gallery.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/mall/pet/dearpet_gallery.do"+d.param:"/category/m/brand_prod_list.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/category/m/brand_prod_list.do"+d.param+"curDispNoSctCd="+(d.testParam.curDispNoSctCd||"")+"&cn=123624":"/brand/bestbrandMain.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/brand/bestbrandMain.do"+d.param+"curDispNo="+(d.testParam.curDispNo||"")+"&cn=123624":"/brand/bestbrandSub.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+"/brand/bestbrandSub.do"+d.param+"curDispNo="+(d.testParam.curDispNo||"")+"&cateSelected="+(d.testParam.cateSelected||"")+"&cn=123624":"/mall/samsung/bestsamsung_sub.do"==d.share_path?d.noCdnUrl=location.protocol+"//"+location.hostname+d.share_path+d.param+"&cateSelected="+(d.testParam.cateSelected||"")+"&cn=123624":d.noCdnUrl=location.protocol+"//"+location.hostname+d.share_path+d.param+"cn=123624",1==d.appObj.isSktApp?(d.talkCdn="3093671",d.twitCdn="3093668",d.stotyCdn="3093670",d.smsCdn="3093672",d.mailCdn="3158697",d.faceCdn="3093669",d.urlCdn="3158696",d.appCdn="3158696"):(d.talkCdn="2929723",d.twitCdn="2929720",d.stotyCdn="2929722",d.smsCdn="2929725",d.mailCdn="2929724",d.faceCdn="2929721",d.urlCdn="2929719",d.appCdn="2929719"),console.log("opt",e),b.isDefined(e)||(d.talkFlag=!0,d.twitFlag=!0,d.stotyFlag=!0,d.smsFlag=!0,d.mailFlag=!0,d.faceFlag=!0,d.appObj.isAndroid?(d.urlFlag=!0,d.urlCopyFlag=!1):d.appObj.isIOS?d.appObj.isOldApp?(d.urlFlag=!1,d.urlCopyFlag=!1):(d.urlFlag=!0,d.urlCopyFlag=!1):(d.urlFlag=!1,d.urlCopyFlag=!1),d.appObj.isApp&&(d.appObj.isAndroid?d.appFlag=!0:d.appFlag=!1)),"crit"==e&&(d.talkFlag=!0,d.twitFlag=!1,d.stotyFlag=!0,d.smsFlag=!0,d.mailFlag=!0,d.faceFlag=!0,d.urlFlag=!1,d.urlCopyFlag=!1,d.appFlag=!1),d.sharePopVisible=!0,d.shareBoxVisible=!0,d.sharePopTl="이거어때?",a.tclick?d.sendTclick(a.tclick):"/mall/pet/dearpet_gallery.do"==d.share_path?d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Shr"+d.testParam.curDispNo):"/brand/bestBrandMain.do"==d.share_path||"/brand/bestBrandSub.do"==d.share_path?d.sendTclick("m_DC_"+d.screenID+"_"+d.mallID+"_share"):"/mall/samsung/bestsamsung_main.do"==d.share_path||"/mall/samsung/bestsamsung_sub.do"==d.share_path?d.sendTclick("m_DC_SpeMall_Samsung_share"):d.sendTclick("m_RDC_ProdDetail_Clk_SNS"),d.dimmedOpen({target:"pop_sns",callback:this.hideSharePop}),d.LotteDimm.dimmedOpacity="0.6",h(function(){b.element("#lotteDimm").css("z-index","110")})},d.hideSharePop=function(){d.isBeforeShareBox?(d.shareBoxVisible=!0,d.smsBoxVisible=!1,d.sharePopTl="이거어때?",d.isBeforeShareBox=!1,d.dimmedClose({target:"pop_sns"})):(d.contVisible=!0,d.sharePopVisible=!1,d.shareBoxVisible=!1,d.smsBoxVisible=!1,d.sharePopTl="",d.smsTxt="",d.sms_phoneNo="",d.dimmedClose({target:"pop_sns"}))}}}}])}(window,window.angular);var transformJsonToParam=function(a){var b=[];for(var c in a)if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c][d]));else b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},isSwipeActive=!1,isSwipeLock=!1,isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1;!function(a,b,c){"use strict";var d=[],e=b.module("lotteNgSwipe",[]);e.controller("lotteNgSwipeCtrl",["$scope",function(a){}]),e.factory("lotteNgSwipe",["$interval","$timeout","$window",function(c,d,e){function f(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function g(c,d,e){if(e.SLIDE_SWIPE){var f=d[0].offsetWidth-e.LEFT_MARGIN-e.RIGHT_MARGIN;0==f&&(f=a.innerWidth);var g=f/e.DISP_COUNT,h=0;if(s=d[0].offsetWidth-g-e.LEFT_MARGIN,!(d.find("ul, ol").eq(0).find(">li").length>=1||d.find(">li").length>=1)||e.LOADING_ELEMENT||e.LEFT_ELEMENT||e.RIGHT_ELEMENT)e.LOADING_ELEMENT||b.element(d).eq(0).css(q());else{if(-1!=d.context.className.indexOf("recommond_swipe"))var i=d.find(">li");else var i=d.find("ul, ol").eq(0).find(">li").length>1?d.find("ul, ol").eq(0).find(">li"):d.find(">li");var j=c,k=0,l=null;for(k;k<i.length;j++,k++)l=i.eq(j),h=j>=k||0>j?0>j?g*d.find(">li").length+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*k+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*-(c-j)+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0),-1!=d.context.className.indexOf("latest_swipe")&&a.innerWidth>=640?(f=a.innerWidth,l.css({width:f/2,backfaceVisibility:"hidden",position:"absolute",left:h})):l.css({width:f/e.DISP_COUNT,backfaceVisibility:"hidden",position:"absolute",left:h}),j+1>=d.find(">li").length&&(j=-1);t=i.length,b.element(d).eq(0).css(p(0)),b.element(d).find(">li").css("top",0).eq(0).css("position","relative")}}}function h(a){for(var b={totalwidth:0,width:[],paddingleft:[],marginleft:[],paddingright:[],marginright:[]},c=0;c<a.find(">li").length;c++){var d=a.find(">li:eq("+c+")");b.width[c]=parseInt(d.width()),b.width[c]+=b.marginleft[c]=parseInt(d.css("margin-left")),b.width[c]+=b.marginright[c]=parseInt(d.css("margin-right")),b.width[c]+=b.paddingleft[c]=parseInt(d.css("padding-left")),b.width[c]+=b.paddingright[c]=parseInt(d.css("padding-right")),b.totalwidth+=b.width[c]}return b}function i(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}function j(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(0,c.SWIPE_SPEED)),(c.LOADING_ELEMENT||c.LEFT_ELEMENT||c.LEFT_ELEMENT)&&b.element(c.LOADING_ELEMENT).css(p(0,c.SWIPE_SPEED))}function k(c,d,e,f){var g=h(c);if(a.innerWidth-d.LEFT_MARGIN-d.RIGHT_MARGIN>g.totalwidth)return!1;for(var j=a.innerWidth/2,k=g.width[e]/2,m=0,n=0;n<g.width.length&&n!=e;n++)m+=g.width[n];var o=i(c),q=-1*(m-j+k);f?(q>0?q=0:q<-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)&&(q=-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)),b.element(c).eq(0).css(p(q))):Math.abs(m)>j&&g.totalwidth-a.innerWidth+d.RIGHT_MARGIN>Math.abs(q)?l(c[0],d,o,q):Math.abs(m)<=j?l(c[0],d,o,0):l(c[0],d,o,-1*(g.totalwidth-a.innerWidth)-d.RIGHT_MARGIN)}function l(a,c,d,e){return d==e?!0:(b.element(a).on(u,function(a){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(e,c.SWIPE_SPEED)),void(c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(e,c.SWIPE_SPEED))))}function m(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED))}function n(a,c,d,e,f){return 0>d?f=f+c.DISP_COUNT>c.MAX_SLIDE?c.MAX_SLIDE:f+c.DISP_COUNT:f-=c.DISP_COUNT,c.EDGE_LAST&&(f==t-1||f==t-2&&d>0)&&(e-=s),b.element(a).on(u,function(d){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),g(f,a,c),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED)),f}function o(b,c,d){var e=i(b);return e>0?(m(b[0],c,e,0),e=0):Math.abs(e)+a.innerWidth>Math.abs(d.totalwidth)+c.RIGHT_MARGIN&&(m(b[0],c,e,d.totalwidth-a.innerWidth+c.RIGHT_MARGIN),e=-1*(d.totalwidth-a.innerWidth)),e}function p(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function q(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}}function r(a){return a||(a=""),{"-webkit-transition":a,"-moz-transition":a,"-o-transition":a,transition:a}}var s=0,t=0,u="transitionend.ngswipe webkitTransitionEnd.ngswipe oTransitionEnd.ngswipe MSTransitionEnd.ngswipe";return{unbind:function(a){a.off("touchstart.ngswipe mousedown.ngswipe touchcancel.ngswipe touchmove.ngswipe mousemove.ngswipe touchend.ngswipe mouseup.ngswipe")},bind:function(d,g,k){var l,r,u,v,w=d[0],x=!1,y=g.FIRST_INDEX,z=b.element(d).scope(),A=!1,B=!1,C=[],D=0,E=0,F=0,G=!0,H=(g.DISP_COUNT,navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1),I=!0,J=30,K=b.element(e).scrollTop();g.SLIDE_MENU_SWIPE&&b.element(w).css(p(0)),d.on("touchstart.ngswipe mousedown.ngswipe",function(c){if(c.stopPropagation(),H){var j=b.element(e).scrollTop();j+J>K&&K>j-J?I=!0:(I=!1,K=j)}A=!1,B=!1,g.SLIDE_MENU_SWIPE&&(C=h(d),G=a.innerWidth-g.LEFT_MARGIN-g.RIGHT_MARGIN>C.totalwidth?!1:!0),isSwipeLock||G&&(a.innerWidth>=900&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_640:g.RESPONSIVE_SWIPE&&(g.DISP_COUNT=g.RESPONSIVE_SWIPE_320),g.MAX_SLIDE=d.find(">li").length-1,(!(g.MAX_SLIDE<1)||g.LOADING_ELEMENT||g.LEFT_ELEMENT||g.RIGHT_ELEMENT)&&(u=f(c),u.x+=g.EDGE_LAST&&y==t-1?s:0,x=!0,l=0,r=0,isSwipeActive=!0,v=u,y=z.swipeIdx,E=(new Date).getTime(),g.SLIDE_MENU_SWIPE&&(C=h(d),D=i(d)),k.start&&k.start(u,c),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none")))}),d.on("touchcancel.ngswipe",function(a){x=!1,j(w,g,u,v)}),d.on("touchmove.ngswipe mousemove.ngswipe",function(a){if(x&&G&&u){var c=f(a);c.x+=g.EDGE_LAST&&y==t-1?s:0,l+=Math.abs(c.x-v.x),r+=Math.abs(c.y-v.y),v=c;var d,e;d=Math.abs(c.x-u.x),e=Math.abs(c.y-u.y),A||(B=d>e,A=!0);var h=v.x-u.x;if(h>0?a.moveto="right":a.moveto="left",B&&(I||!H)){a.preventDefault(),a.stopPropagation();g.SLIDE_MENU_SWIPE?b.element(w).css(p(c.x-u.x+D)):b.element(w).css(p(c.x-u.x)),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(c.x-u.x))),"left"==a.moveto?(g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(p(0))):(g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(p(0))),k.move&&k.move(c,a)}}}),d.on("touchend.ngswipe mouseup.ngswipe",function(h){if(h.stopPropagation(),A=!1,B&&(I||!H)){if(!x||!G)return;x=!1,isSwipeActive=!1;var i=d[0].offsetWidth,l=Math.abs(v.x-u.x),r=v.x-u.x;if(F=(new Date).getTime(),r>0?h.moveto="right":h.moveto="left",h.max=g.MAX_SLIDE,g.SLIDE_MENU_SWIPE){var z=v.x-u.x+D,J=-80,L="left"==h.moveto?z+J:z-J,M="left"==h.moveto?-5:5;if(Math.abs(v.x-u.x)>5&&400>=F-E)var N=c(function(){z+=M,b.element(d).eq(0).css(p(z)),(L>=z&&"left"==h.moveto||z>=L&&"right"==h.moveto||z>0||z<=-C.totalwidth+a.innerWidth)&&(D=o(d,g,C),c.cancel(N))},10);else D=o(d,g,C)}else if(i*g.MAX_RATIO<=l){if(g.SLIDE_SWIPE){if(y>=g.MAX_SLIDE&&0>r||0>y&&r>0||0==y&&r>0||g.MAX_SLIDE+1<=g.DISP_COUNT||y+g.DISP_COUNT>g.MAX_SLIDE&&"left"==h.moveto)return void j(w,g,u,v+(g.EDGE_LAST&&y==t-1?s:0));if(g.SLIDE_SWIPE)var i=i-g.LEFT_MARGIN-g.RIGHT_MARGIN;y=n(d,g,r,i,y),h.idx=y}else m(w,g,r,i);var O=f(h);O.x+=g.EDGE_LAST&&y==t-1?s:0;k.end&&k.end(O,h)}else j(w,g,u,v),b.element(d).eq(0).css(q())}H&&(K=b.element(e).scrollTop(),I=!0),u=null})},moveSwipeX:n,positionReCalc:g,resetSwipe:j,moveMenuSwipe:k,getListInfo:h}}]),e.directive("lotteNgListSwipe",["$window","$parse","$timeout","lotteNgSwipe",function(e,f,g,h){return{link:function(i,j,k){function l(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function m(){var c=j[0];if(a.innerWidth>=900&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_640:p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),0!=i.swipeIdx&&p.DISP_COUNT>1){var d=i.swipeIdx%p.DISP_COUNT;0!=d&&(i.swipeIdx-=d)}if(i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),p.SLIDE_MENU_SWIPE){var e=h.getListInfo(j);e.width.length>1&&a.innerWidth-p.LEFT_MARGIN-p.RIGHT_MARGIN>e.totalwidth&&b.element(c).css(l(0))}p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)}function n(a,b){if(!(LeftSwipeStartExec&&"left"==a.moveto||RightSwipeStartExec&&"right"==a.moveto)){"left"==a.moveto?LeftSwipeStartExec=!0:RightSwipeStartExec=!0;var c=null;i.$apply(function(){return c=q(i.$parent,{$event:{idx:a.idx,max:b.MAX_SLIDE,moveto:a.moveto}})})}}function o(a,c){if(isSwipeActive)return g(function(){o(a,c)},100),!1;var d=null;i.$apply(function(){return d=r(i.$parent,{$event:{idx:a.idx,max:c.MAX_SLIDE,moveto:a.moveto}}),"translateX_Reset"==d&&g(function(){b.element(j).eq(0).css(l(0))},500),d})}var p={MAX_RATIO:k.swipeMaxRatio?k.swipeMaxRatio:.3,MIN_DISTANCE:k.swipeMinDistance?k.swipeMinDistance:25,SWIPE_LOOP:k.swipeLoop?k.swipeLoop:!1,LEFT_ELEMENT:k.swipeLeftEl?k.swipeLeftEl:null,RIGHT_ELEMENT:k.swipeRightEl?k.swipeRightEl:null,LOADING_ELEMENT:k.swipeLoadingEl?k.swipeLoadingEl:null,LOADING_ELEMENT_ZINDEX:k.swipeLoadingElZindex?k.swipeLoadingElZindex:50,SLIDE_SWIPE:k.swipeSlideItem?k.swipeSlideItem:!1,SLIDE_MENU_SWIPE:k.swipeSlideMenu?k.swipeSlideMenu:!1,RESPONSIVE_SWIPE:k.swipeResponsive?k.swipeResponsive:!1,RESPONSIVE_SWIPE_320:parseInt(k.swipeResponsive320)?parseInt(k.swipeResponsive320):1,RESPONSIVE_SWIPE_640:parseInt(k.swipeResponsive640)?parseInt(k.swipeResponsive640):2,RESPONSIVE_SWIPE_900:parseInt(k.swipeResponsive900)?parseInt(k.swipeResponsive900):2,AUTO_HEIGHT:k.swipeAutoheight?k.swipeAutoheight:!1,DISP_COUNT:k.swipeDispCount?parseInt(k.swipeDispCount):1,FIRST_INDEX:k.swipeFirstIndex?parseInt(k.swipeFirstIndex):0,LEFT_MARGIN:k.swipeLeftMargin?parseInt(k.swipeLeftMargin):0,RIGHT_MARGIN:k.swipeRightMargin?parseInt(k.swipeRightMargin):0,START_EXEC:k.swipeStartExec?k.swipeStartExec:null,EXEC:k.swipeEndExec?k.swipeEndExec:null,LIST_SCOPE:k.swipeListModel?k.swipeListModel:null,SWIPE_ID:k.swipeId?k.swipeId:"",MAX_SLIDE:0,SWIPE_SPEED:k.swipSpeed?k.swipSpeed:150,IGNORE_DESTORY:k.ignoreDestory?k.ignoreDestory:!1,EDGE_LAST:k.swipeEdgeLast?!0:!1};i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),i.swipeBullet=[];var q=null,r=null;if(null!=p.START_EXEC&&(q=f(p.START_EXEC)),null!=p.EXEC&&(r=f(p.EXEC)),p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.SLIDE_MENU_SWIPE&&(i.moveMenuSwipe=function(a){i.moveMenuSwipeFnc(a,!1)},i.moveMenuSwipeFnc=function(a,b){h.moveMenuSwipe(j,p,a,b)}),p.SLIDE_MENU_SWIPE||p.SLIDE_SWIPE||(i.translateX_Reset=function(){console.log("스와이프 좌표 리셋"),b.element(j).eq(0).css(l(0)),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css(l(0))}),i.setSlide=function(a){0>a?a=p.MAX_SLIDE:a>p.MAX_SLIDE&&(a=0),i.swipeIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.goSlide=function(a){h.positionReCalc(a,j,p),i.swipeIdx=i.swipeBulletIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC));
},i.nextSlide=function(){i.swipeIdx!=p.MAX_SLIDE&&(h.moveSwipeX(j,p,-1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx+=p.DISP_COUNT,i.swipeBulletIdx++,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.beforeSlide=function(){0!=i.swipeIdx&&(h.moveSwipeX(j,p,1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx-=p.DISP_COUNT,i.swipeBulletIdx--,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.ngswipeInit=function(){if(p.SLIDE_SWIPE){i.swipeBullet=[],p.MAX_SLIDE=j.find(">li").length;for(var a=0;a<p.MAX_SLIDE/p.DISP_COUNT;a++)i.swipeBullet.push(a)}p.MAX_SLIDE<i.swipeIdx?(i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),h.positionReCalc(i.swipeIdx,j,p),g(function(){i.$apply()})):i.swipeIdx||(i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),i.swipeIdx=p.FIRST_INDEX,g(function(){i.$apply()}))},i.resetSwipePos=function(){h.positionReCalc(i.swipeIdx,j,p)},null!=p.LIST_SCOPE){var s=null;i.$watch(p.LIST_SCOPE,function(a,b){if(a!=c&&a.length>=1){if(s!=a[0]&&(i.swipeIdx=0,i.swipeBulletIdx=0,s=a[0]),"recommondSwipe_0"==k.swipeId||"lastestSwipe_0"==k.swipeId)var d=2e3;else var d=100;g(function(){i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)},d)}},!0)}m(),-1==d.indexOf(p.SWIPE_ID)&&d.push(p.SWIPE_ID);var t=b.element(e);t.on("orientationchange.ngswipe resize.ngswipe",m),i.$on("$destroy",function(){h.unbind(j)}),h.bind(j,p,{start:function(a,b){},move:function(a,b){return null!=p.START_EXEC?(isLoadingData=!0,n(b,p)):void 0},cancel:function(){isLoadingData=!1},end:function(a,b){return isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1,i.swipeIdx=b.idx?b.idx:0,i.swipeBulletIdx=parseInt(b.idx/p.DISP_COUNT),i.$apply(),null!=p.EXEC?o(b,p):void 0}})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteNgSwipe","ngTouch","lotteSns","lotteSlider"]);d.controller("DearpetMainCtrl",["$http","$scope","$window","LotteCommon","LotteUtil","$timeout",function(d,e,f,g,h,i){function j(a){var b;try{b=a}catch(c){b=null}return b}function k(a){if(!e.screenData.pet_list||!e.screenData.pet_list.length)return void e.getProductList();var b=e.screenData.pet_list,c=j(b[a].bbs_no||b[a].bbc_no);switch(b[a].type){case"10":e.screenData.take="a";break;case"20":e.screenData.take="b";break;default:e.screenData.take="a"}e.getProductList(c)}function l(a){var b,f=e.screenData.pet_list;for(var h in f){var i=f[h]||f[h];if((i.bbs_no||i.bbc_no)==a&&(b=h,i.active))return}d.get(g.petMallpetMainPetActiveData+"?bbc_no="+(a&&a!=c?a:"")).success(function(a){for(var c in f)f[c].active=!1;f[b].active=!0})}function m(a){var c="swag"==a?"우리 아이 뽐내기 소식이 아직 없어요~<br> 어서 우리 아이를 뽐내보세요~":"아직 좋아요♡ 한 게시물이 없어요~ 뽐내기 둘러보시고 ♡ 해보세요~",d="뽐내러 가기",e=["<div class='mdDialog'>","<div class='mdDiallog_pop_up'>","<div class='mdDialog_body'>","<div class=''>"+c+"</div>","</div>","<div class='mdDialog_foot clear'>","<button onclick='getScope().popState()'>취소</button>","<button onclick='getScope().popState(true)'>"+d+"</button>","</div>","</div>","</div>"];b.element("body").append(e.join(""))}function n(){var a=location.href,b=/^http:\/\/([a-z0-9-_\.]*)[\/\?]/i;try{a=a.match(b),a=a[1],a=a.replace("www.","")}catch(c){return console.log("localhost"),null}return-1!=a.indexOf("mo.lotte.com")&&(a="mo.lotte.com"),-1!=a.indexOf("m.lotte.com")&&(a="m.lotte.com"),a}function o(){return Math.floor(a.innerWidth/4.5)}e.isMain=!0,e.showWrap=!0,e.contVisible=!0,e.subTitle="미미뚜뚜",e.pageLoading=!1,e.shareNoFixMessage=!0,e.shareCodeis="MIMI TOUTOU",e.shareRendingURL=location.href,(e.screenDataReset=function(){e.screenData={page:0,dispNo:5553935,showAllCategory:!1,selectCate1:0,selectCate2:0,selectCate3:0,selectedCategory:0,cate_list:[],top_banner:[],newBest:[],swgView:[],dearpetGramView:[],dearpetCampain:[],strategeList:[],photoView:[],themePlan:null,weekBestList:[],ctgDispNo:"",ctgName:"",ctgBeforeName:"",ctgDepth:"",take:"a",pet_list:[],recom_list:[],swag_count:0,like_count:0,pet_recom_code:"",dataLoadFlog:!1,activePetCode:"",event_banner:"",story_banner:[],advice_banner:"",storyBanner:[]}})(),e.petTclickList={share:"m_DC_SpeDisp_Dearpet_Clk_Shr",write:"m_DC_SpeDisp_Dearpet_Clk_Btn08",edit:"m_DC_SpeDisp_Dearpet_Clk_Btn10",active:"m_DC_SpeDisp_Dearpet_Clk_Btn11",photo:"m_DC_SpeDisp_Dearpet_Clk_Btn09",petIndicator:"m_DC_SpeDisp_Dearpet_Swp_page",myswag:"m_DC_SpeDisp_Dearpet_Clk_Btn12",mylikepost:"m_DC_SpeDisp_Dearpet_Clk_Btn13",petPrd1:"m_DC_SpeDisp_Dearpet_Prd_J0",petPrd2:"m_DC_SpeDisp_Dearpet_Prd_K0",ban10:"m_DC_SpeDisp_Dearpet_Clk_Ban_10",ban11:"m_DC_SpeDisp_Dearpet_Clk_Ban_11",ban12:"m_DC_SpeDisp_Dearpet_Clk_Ban_12"},e.shareTiclick=e.petTclickList.share,e.checkHasSub=function(a){return b.forEach(a,function(a){null!=a.sub_cate_list&&a.sub_cate_list.length?(a.hasSub=!0,a.sub_cate_list=e.checkHasSub(a.sub_cate_list)):a.hasSub=!1}),a},e.loadScreenData=function(a){console.log("스크린 데이터 로드..."),e.screenData.cate_list.length||(e.pageLoading=!0),e.productListLoading=!0,d.get(g.petMallMainData+"?"+e.baseParam+"&dispNo="+e.screenData.dispNo+"&pet_no="+e.screenData.pet_recom_code).success(function(d){var f=[];if(d.dearpet_main!=c){if(e.screenData.take=a?a:"a",f=d.dearpet_main,e.screenData.cate_list.length||(e.screenData.cate_list=f.cate_list.items),e.screenData.cate_list.length)for(var g=0;g<e.screenData.cate_list.length;++g){var h=e.screenData.cate_list[g].disp_nm;if(h.length>3){var i=h.substr(0,3);h=i+"<br>"+h.substr(3),e.screenData.cate_list[g].disp_nm=h}}if(!e.screenData.pet_list.length){try{e.screenData.pet_list=f.pet_list.items||[]}catch(j){}for(var g=0;g<e.screenData.pet_list.length;++g){var l=e.screenData.pet_list[g].active,m=e.screenData.pet_list[g].birthday,n=m.replace(/\./gi,""),o=n.substr(0,4),p=n.substr(4,2),q=n.substr(6,2);n=o+"."+p+"."+q,e.screenData.pet_list[g].active="Y"==l||"boolean"==typeof l&&l||"string"==typeof l&&"true"==l?!0:!1,e.screenData.pet_list[g].birthday=n,console.log(e.screenData.pet_list[g].disp_no)}}e.screenData.swag_count=f.swag_count,e.screenData.like_count=f.like_count,b.forEach(e.screenData.cate_list,function(a,b){null!=a.sub_cate_list&&a.sub_cate_list.length?(a.hasSub=!0,a.sub_cate_list=e.checkHasSub(a.sub_cate_list)):a.hasSub=!1}),e.screenData.dataLoadFlog||(e.screenData.top_banner=f.top_banner.items,e.screenData.swagView=f.swag,e.screenData.dearpetGramView=f.dearpetgram,e.screenData.photoView=f.photo_review,e.screenData.strategeList=f.stratege.items,e.screenData.dearpetCampain=f.dearpet_campain,e.screenData.dearpetCampainList=f.dearpet_campain.items,e.screenData.event_banner=f.event_banner,e.screenData.story_banner=f.story_banner,e.screenData.advice_banner=f.advice_banner),e.productListLoading=!1,e.pageLoading&&(e.pageLoading=!1),e.screenData.dataLoadFlog=!0,k(0)}}).error(function(a){console.log("Error Data : 데이터 로딩 에러"),e.productListLoading=!1,e.pageLoading=!1})},e.getProductList=function(a,b){d.get(g.petMallpetMainPetProductData+"?bbc_no="+(a&&a!=c?a:"")).success(function(a){var b=a.dearpet_main;e.screenData.storyBanner=[],b.age_recom_list||(b.age_recom_list={});b.age_recom_list.ctgName||"";b.age_recom_list.prd_list||(b.age_recom_list={});var c=[];try{for(var d=0;d<b.age_recom_list.prd_list.items.length;++d)3>d&&c.push(b.age_recom_list.prd_list.items[d])}catch(f){}b.recom_list||(b.recom_list={});b.recom_list.ctgName||"";b.recom_list.prd_list||(b.recom_list.prd_list={});var g=[];try{for(var d=0;d<b.recom_list.prd_list.items.length;++d)3>d&&g.push(b.recom_list.prd_list.items[d])}catch(f){}var h=[];g.length&&h.push({title:"말하지 않아도<br>케어해줄께",items:g,tclick:e.petTclickList.petPrd1}),c.length&&h.push({title:"지금 나이에<br>챙겨줘야 할 추천 상품",items:c,tclick:e.petTclickList.petPrd2}),e.screenData.recom_list=h,setTimeout(function(){e.screenData.storyBanner=b.story_banner},500),console.log(b.story_banner);try{e.screenData.newBestList=j(b.new_best.prd_list.items)}catch(f){e.screenData.newBestList=[]}try{e.screenData.weekBestList=j(b.week_best.prd_list.items)}catch(f){e.screenData.weekBestList=[]}try{e.screenData.themePlan=j(b.theme_plan)}catch(f){e.screenData.themePlan=[]}})},e.loadScreenData(),e.swpControl={swpIdx:1,control:null,setControl:function(a){e.swpControl.control=a},getControl:function(){return e.swpControl.control},end:function(a){e.swpControl.swpIdx=a,console.log(a)}};try{e.useLoginState=getLoginInfo().isLogin}catch(p){e.useLoginState=!1}e.petSwipeIndex=0,e.goPage=function(b,c){var d="&";c&&-1!=b.indexOf("?")&&(d="?"),a.location.href=b},e.petFunc=function(a,b){switch(a){case"insert":if(!e.loginInfo.isLogin&&n()){alert("로그인 후 이용하실 수 있습니다.");var c="targetUrl="+encodeURIComponent("http://"+n()+"/"+g.petMallpetWriteUrl+"?"+e.baseParam+"&dispMode=edit&tclick="+e.petTclickList.write,"UTF-8");return void(location.href=g.loginUrl+"?"+e.baseParam+"&"+c)}e.goPage(g.petMallpetWriteUrl+"?"+e.baseParam+"&tclick="+e.petTclickList.write);break;case"edit":e.goPage(g.petMallpetWriteUrl+"?"+e.baseParam+"&dispMode=edit&bidx="+b+"&tclick="+e.petTclickList.edit);break;case"active":e.sendTclick(e.petTclickList.active),l(b);break;case"myswag":if(e.screenData.swag_count){var d=g.petMallgalleryUrl,f="&curDispNo=5566438&beforeNo=5566305&cateDepth=3&tclick="+e.petTclickList.myswag;d+="?"+e.baseParam+f+"&type=mySwagList",e.goPage(d)}else m("swag");break;case"likePost":if(e.screenData.like_count){var d=g.petMallgalleryUrl,f="&beforeNo=5566305&tclick="+e.petTclickList.mylikepost;d+="?"+e.baseParam+f+"&type=myLikeList",e.goPage(d)}else m("like");break;case"indicator":e.sendTclick(e.petTclickList.petIndicator+b);break;case"petPhoto":e.goPage(g.petMallpetWriteUrl+"?"+e.baseParam+"&dispMode=edit&bidx="+b+"&tclick="+e.petTclickList.photo)}},e.petSwipeEnd=function(a){e.petSwipeIndex!=a&&(e.petSwipeIndex=a,e.sendTclick(e.petTclickList.petIndicator+(a+1)),k(a))},e.popState=function(a){if(!a)return void b.element(".mdDialog").remove();var c=g.petMallgalleryUrl+"?"+e.baseParam+"&curDispNo=5566438&beforeNo=5566305&cateDepth=3&tclick=m_DC_SpeDisp_Dearpet_Clk_5566438";e.goPage(c)},e.petShare=function(a){e.sendTclick(e.petTclickList.share),e.showSharePop(a),i(function(){getScope().share_img=a.shareImg,getScope().noCdnUrl=location.href},300)},e.ctgReSize=o();var q=a.innerWidth;b.element(f).bind("resize",function(){parseInt(q)!=parseInt(a.innerWidth)&&(q=a.innerWidth,e.ctgReSize=o(),i(function(){b.element(".ctg_list_big").scope().reset()},500))}),e.tob_banner_click=function(b){e.sendTclick(e.petTclickList.ban10),a.location.href=b+"&"+e.baseParam}}]),d.directive("lotteContainer",["$window","LotteCommon","$timeout","AppDownBnrService","LotteLink",function(b,c,d,e,f){return{templateUrl:"/lotte/resources_dev/mall/pet/dearpet_main_container.html",replace:!0,link:function(d,e,f){d.tabDepChange=function(a){d.screenData.take=a;var b="";"a"==a?b="m_DC_SpeDisp_Dearpet_Clk_Tap01":"b"==a&&(b="m_DC_SpeDisp_Dearpet_Clk_Tap02"),b&&d.sendTclick("m_DC_SpeDisp_Dearpet_Clk_Tap0"+("a"==a?"1":"2"))},d.goSubCategory=function(b,c){b&&(a.location.href=b+"&"+d.baseParam+(c?"&tclick="+c:""))},d.BannerClick=function(b,c){b&&(a.location.href=b+"&"+d.baseParam+(c?"&tclick="+c:""))},d.stategeBannerClick=function(b,c){b&&(a.location.href=b+"&"+d.baseParam+"&curDispNoSctCd=95"+(c?"&tclick="+c:""))},d.mallProductClick=function(a,e){var f=c.prdviewUrl+"?"+d.baseParam+"&goods_no="+a+"&curDispNoSctCd=95";e&&(f+="&tclick="+e),b.location.href=f},d.mallMainClick=function(a){var e=c.petMallMainUrl+"?"+d.baseParam;a&&(e+="&tclick="+a),b.location.href=e},d.galleryMoreClick=function(a,e){var f=$(a.target),g=f.parent();d.screenData.ctgDispNo=g.data("ctgDispNo"),d.screenData.ctgName=g.data("ctgName"),d.screenData.ctgBeforeDispNo=g.data("ctgBeforeDispNo"),d.screenData.ctgDepth=g.data("ctgDepth");var h=c.petMallgalleryUrl+"?"+d.baseParam+"&curDispNo="+d.screenData.ctgDispNo+"&beforeNo="+d.screenData.ctgBeforeDispNo+"&cateDepth="+d.screenData.ctgDepth;h+="&tclick="+e,b.location.href=h},d.gallerydearpetClick=function(a,e,f){var g=$(a.target),h=g.parent();d.screenData.ctgDispNo=h.data("ctgDispNo"),d.screenData.ctgName=h.data("ctgName"),d.screenData.ctgBeforeDispNo=h.data("ctgBeforeDispNo"),d.screenData.ctgDepth=h.data("ctgDepth");var i=c.petMallgalleryUrl+"?"+d.baseParam+"&curDispNo="+d.screenData.ctgDispNo+"&beforeNo="+d.screenData.ctgBeforeDispNo+"&cateDepth="+d.screenData.ctgDepth+"&bbc_no="+e;i+="&tclick="+f,b.location.href=i},d.story_banner_swipe_click=function(a,c){console.log(a);var a=a+"&"+d.baseParam+"&tclick=m_DC_SpeDisp_Dearpet_Clk_Prd_M"+c;b.location.href=a},d.advice_banner_click=function(a,c){console.log(a);var a=a+"?"+d.baseParam+"&tclick="+c;b.location.href=a}}}}]),d.filter("hidestr",function(){return function(a){var b="";if(a!=c){b=a.substr(0,3);for(var d=3;d<a.length;d++)b+="*"}return b}}),d.directive("petMallCtg",["$window","LotteCommon",function(a,b){return{templateUrl:"/lotte/resources_dev/mall/pet/pet_mall_ctg_container.html",link:function(c,d,e){c.menuCateLink=function(d,e){var f=b.petMallProdListUrl+"?curDispNo="+d.disp_no;switch(d.sub_cate_list||(d.sub_cate_list=[]),d.sub_cate_list.length&&(f=b.petMallProdListUrl+"?beforeNo="+d.disp_no+"&curDispNo="+d.sub_cate_list[0].disp_no),String(d.disp_no)){case"5566305":f=b.petMallgalleryUrl+"?curDispNo=5566436&beforeNo="+d.disp_no;break;case"5572261":0!=d.sub_cate_list.length?(f=5585896==d.sub_cate_list[0].disp_no?b.petMalleventUrl:b.petMallStoryUrl,f=f+"?curDispNo="+d.sub_cate_list[0].disp_no+"&beforeNo="+d.disp_no):f=b.petMalleventUrl+"?curDispNo="+d.disp_no+"&beforeNo="+d.disp_no}f+="&"+c.baseParam+"&tclick=m_DC_SpeDisp_Dearpet_Clk_"+d.disp_no,a.location.href=f}}}}]),d.directive("subHeaderEach",["$window","$timeout","AppDownBnrService",function(a,c,d){return{replace:!0,link:function(a,e,f){a.subHeaderFixed=!0;b.element(e),a.subHeaderHeight;a.$on("winScroll",function(b,e){e.scrollPos>=d.appDownBnrInfo.height||e.scrollPos<0?a.headerFixed=!0:(a.headerFixed=!1,console.log("fix")),c(function(){a.$apply()})})}}}]),d.directive("dearPetCategory",["$window","$timeout",function(a,c){return{link:function(a,d,e){function f(){var c=a.screenData.cate_list.length,e=b.element(d),f=e.parent()[0].offsetWidth,g=Math.floor(f/4.5),h=Math.ceil(g*c);b.element(e).css({width:h+"px"}),b.forEach(e.children(),function(a,c){b.element(a).css({width:g+"px"})})}c(f)}}}]),d.directive("hwSlider",["$timeout","$window",function(a,c){return{restrict:"A",replace:!0,scope:{selector:"=?",slideindex:"=?"},link:function(d,e,f){function g(){k.parentWidth=b.element(k.container[0].parentElement).width(),k.parentHeight=b.element(k.container[0].parentElement).height()}function h(){l=b.element(c).innerWidth(),k={touchPos:0,targetX:0,parentWidth:0,parentHeight:0,dragis:!1,itemList:[],containerWidth:0,containerHeight:0,initiTime:f.hwSlideInitTime,duration:".2",arr_pos:[],width320:f.width320,width640:f.width640,width900:f.width900,maxWidth:f.maxWidth,drag:f.drag||!0,space:f.slideSpace||0,dispStyle:f.displayStyle||"inline-block",activeClass:f.itemActiveClass||"active",scrollingIs:f.slidePos||"horizontal",container:f.dragTarget?b.element(b.element(e)[0].querySelector(f.dragTarget)):b.element(e),cleave:0},g(),k.parentWidth<640&&(k.cleave=k.width320),k.parentWidth>640&&k.parentWidth<900&&(k.cleave=k.width640),k.parentWidth>=900&&k.parentWidth<940&&(k.cleave=k.width900),k.parentWidth>=940&&(k.cleave=0);var a=0;0!=k.cleave&&(a=Math.ceil(k.parentWidth/k.cleave)),k.itemList=k.container[0].children,b.forEach(k.itemList,function(c,e,f){var g=b.element(c);"vertical"==k.scrollingIs?(g.css("height",g.height()+"px"),k.containerHeight+=g.height(),k.arr_pos.push(k.containerHeight)):(g.css({display:k.dispStyle,width:a||k.maxWidth}),k.containerWidth+=g.width(),k.arr_pos.push(k.containerWidth)),d.selector=d.slideis,d.slideindex=d.currentCnt}),k.container.css("vertical"==k.scrollingIs?"height":"width",("vertical"==k.scrollingIs?k.containerHeight:k.containerWidth)+"px"),console.log(k.drag),d.loadFlag||"true"!=k.drag||(k.container.bind("touchstart touchmove touchend",function(a){if(!(k.containerWidth<=k.parentWidth)){var b="vertical"==k.scrollingIs?a.originalEvent.changedTouches[0].clientY:a.originalEvent.changedTouches[0].clientX;switch(a.type){case"touchstart":k.dragis=!0,k.touchPos=b;break;case"touchmove":i(k.touchPos-b);break;case"touchend":k.dragis=!1,k.targetX=k.targetX-(k.touchPos-b),j()}}}),b.element(k.itemList).bind("click",function(){d.slideis(b.element(this).index(),!0)}),d.loadFlag=!0)}function i(a,b,c){var d=a-k.space,e=k.targetX-d;k.containerWidth-k.parentWidth;if(!b&&k.targetX-d>0){var f=(k.targetX-d)/100*180;e=k.targetX-d-.4*f}if(!b&&k.targetX-d<-(k.containerWidth-k.parentWidth)){var f=Math.abs(k.targetX-d+(k.containerWidth-k.parentWidth))/100*180;e=k.targetX-d+.4*f}var g={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":("vertical"==k.scrollingIs?"translateY(":"translateX(")+(c?d:b?d:e)+"px)","-webkit-transition":"-webkit-transform ease "+(k.dragis?"0":k.duration)+"s"};b||(g["-webkit-transition"]="",g["-moz-transition"]="",g.transition=""),k.container.css(g),b&&(k.targetX=d)}function j(){k.touchPos=0;var a=0,b="vertical"==k.scrollingIs?-(k.container.height()-parentHeight):-(k.container.width()-k.parentWidth);return k.targetX>a?void i(a,!0):void(k.targetX<b&&i(b>a?a:b,!0))}var k={},l=0;d.currentCnt=-1,d.loadFlag=!1,b.element(c).bind("resize",function(e){Math.ceil(b.element(c).innerWidth())!=Math.ceil(l)&&(h(),a(function(){d.currentCnt>-1?d.slideis(d.currentCnt):i(0,!0)},200))}),d.slideis=function(a,c){c?d.$apply(function(){d.currentCnt=d.slideindex=a}):d.currentCnt=d.slideindex=a,b.element(k.itemList).removeClass(k.activeClass),b.element(k.itemList[a]).addClass(k.activeClass);var e="vertical"==k.scrollingIs?-k.arr_pos[a]+(k.parentHeight/2+Math.ceil(b.element(k.itemList[a]).height()/2)):-k.arr_pos[a]+(k.parentWidth/2+Math.ceil(b.element(k.itemList[a]).width()/2));e<("vertical"==k.scrollingIs?-(k.container.height()-k.parentHeight):-(k.container.width()-k.parentWidth))&&(e="vertical"==k.scrollingIs?-(k.container.height()-k.parentHeight):-(k.container.width()-k.parentWidth)),i(e>0?0:e,!0,!0)},a(h,f.hwSlideInitTime)}}}]),d.directive("refeshSize",["$timeout",function(c){return{link:function(d,e,f){function g(){var a=b.element(e).find(".swipeBox").children().length;b.element(".my_pet_list").find(".swipeBox").css({width:100*a+"%"})}b.element(a).bind("resize",function(){c(function(){g()},1e3)}),c(g,1e3)}}}])}(window,window.angular);