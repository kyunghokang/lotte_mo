function getByteLength(a,b,c,d){for(b=c=0;d=a.charCodeAt(c++);b+=d>>11?2:1);return b}!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteUtil"]);d.controller("productQuestWriteCtrl",["$scope","$http","$window","LotteCommon","LotteCookie","LotteUtil",function(a,b,c,d,e,f){a.showWrap=!0,a.contVisible=!0,a.subTitle="상품 문의하기",a.actionBar=!0,a.gucci=c.location.pathname.indexOf("gucci")>-1?!0:!1;var g=new Date;a.now=g,a.fail=!1,a.write_box=!0,a.inq_ans_cont="",a.goods_no=f.getParameter("goods_no"),a.usm_goods_no=f.getParameter("usm_goods_no"),a.goods_no&&b.get(d.productQuestGoodsDetail+"?goods_no="+a.goods_no).success(function(b){a.productInfo=b.product_quest_goods_detail}).error(function(a){ajaxResponseErrorHandler(a)}),a.linkToProductView=function(){c.location.href=d.productviewUrl+"?"+a.baseParam+"&curDispNo="+f.getParameter("curDispNo")+"&goods_no="+a.goods_no+"&usm_goods_no="+a.usm_goods_no},a.goLogin=function(){var b="&targetUrl="+encodeURIComponent(c.location.href,"UTF-8");c.location.href=d.loginUrl+"?"+a.baseParam+b},a.questionUrl=d.questionUrl+"?"+a.baseParam}]),d.directive("lotteContainer",[function(){return{templateUrl:"/lotte/resources_dev/product/product_quest_write_container.html",replace:!0,link:function(a,b,c){}}}]),d.directive("writeBox",["$http","$window","LotteCommon",function(a,b,c){return{templateUrl:"/lotte/resources_dev/product/write_box.html",replace:!0,link:function(b,d,e){document.querySelector("#inq_ans_cont").focus(),b.byteCheck=function(){var a=b.inq_ans_cont||(b.inq_ans_cont="");if(b.bytes=getByteLength(a),b.bytes>=2001){alert("최대 2000byte까지 작성하실 수 있습니다.");for(var c=0;;)if(c=getByteLength(a=a.substring(0,a.length-1)),2001>c){b.inq_ans_cont=a,b.bytes=c;break}}},b.questionSubmit=function(){if(0==b.inq_ans_cont.length)return alert("문의 내용을 입력해주세요"),!1;if(b.inq_ans_cont.length<10)return alert("10자 이상 내용을 입력해주세요"),!1;var d={goods_no:b.goods_no,usm_goods_no:b.usm_goods_no,inq_ans_cont:b.inq_ans_cont};a({url:c.productQuestSave+"?"+b.baseParam,data:$.param(d),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(a,d,e,f){b.gucci?(b.$parent.order_submit_end=!0,b.$parent.inq_ans_cont=b.inq_ans_cont):location.replace(c.mylotteReinquiryDetailUrl+"?"+b.baseParam+"&inq_no="+a.product_quest_save.inq_no)}).error(function(a){ajaxResponseErrorHandler(a)})}}}}])}(window,window.angular);var ajaxResponseFailHandler=function(a){alert("처리중 오류가 발생하였습니다."),a&&a()},ajaxResponseErrorHandler=function(a,b){if(a.error){var c=a.error.response_code,d=a.error.response_msg;if("9004"==c){var e="targetUrl="+encodeURIComponent(location.href,"UTF-8");location.href="/login/m/loginForm.do?"+e}else alert("["+c+"] "+d)}else alert("처리중 오류가 발생하였습니다.");b&&b()};