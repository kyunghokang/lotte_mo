!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteSns"]);d.controller("ExperienceMainCtrl",["$http","$scope","LotteCommon",function(a,b,c){b.showWrap=!0,b.contVisible=!0,b.subTitle="유아동 체험단",b.pageLoading=!1,b.isShowThisSns=!0,b.ingEventViewFlag=!0,b.endEventViewFlag=!1,b.ingEventList=[],b.endEventList=[],b.end_tot_cnt=0,b.TopeventList=!1;var d=c.kidsExperienceMainData;b.loadScreenData=function(){console.log("스크린 데이터 로드..."),b.pageLoading=!0,a.get(d).success(function(a){b.maxData=a,b.EventList=a.end_list.items,b.ingEventList=a.ing_list.items,b.evtFaqList=a.evt_faq.items,b.end_tot_cnt=a.end_list.total_count,b.currentTotal=a.end_list.total_count;for(var c=0;c<a.end_list.items.length;c++)a.end_list.items[c].evt_strt_dtime=a.end_list.items[c].evt_strt_dtime.split("2017").join("17"),a.end_list.items[c].evt_strt_dtime=a.end_list.items[c].evt_strt_dtime.split("2016").join("16"),a.end_list.items[c].evt_end_dtime=a.end_list.items[c].evt_end_dtime.split("2017").join("17"),a.end_list.items[c].evt_end_dtime=a.end_list.items[c].evt_end_dtime.split("2016").join("16"),a.end_list.items[c].winner_dtime=a.end_list.items[c].winner_dtime.split("2017").join("17"),a.end_list.items[c].winner_dtime=a.end_list.items[c].winner_dtime.split("2016").join("16");b.pageLoading=!1}).error(function(a,c,d,e){console.log("Error Data : ",c,d,e),b.pageLoading=!1})},b.loadScreenData(),b.ingEventClick=function(){b.endEventViewFlag=!1,b.ingEventViewFlag=!0,b.sendTclick("m_DC_KidsEventList_Clk_Tap01")},b.endEventClick=function(){b.currentStart=0,b.currentTotal=0,b.page_end=0,b.thisPage=0,b.PageSize=5,b.thisPage++,b.page_end<b.thisPage&&0!=b.page_end||(b.endEventViewFlag=!0,b.ingEventViewFlag=!1,b.currentStart=0,b.currentTotal=b.end_tot_cnt,b.endEventList=[],b.moreList(b.currentStart,b.PageSize),b.sendTclick("m_DC_KidsEventList_Clk_Tap02"))},b.moreListClick=function(){b.moreList(b.currentStart,b.PageSize),b.sendTclick("m_DC_KidsEventList_Clk_Btn_G")},b.moreList=function(a,c){for(var d=a;d<b.maxData.end_list.total_count&&a+c>d;d++){var e=b.maxData.end_list.items[d];b.endEventList.push(e)}b.currentStart=b.currentStart+b.PageSize}}]),d.directive("lotteContainer",["$http","LotteCommon","$window",function(a,b,c){return{templateUrl:"/lotte/resources_dev/event/m/kids/experience_main_container.html",replace:!0,link:function(d,e,f){d.faqIdx=-1,d.faqAccordion=function(a){d.faqIdx==a?d.faqIdx=-1:d.faqIdx=a},d.ProductClick=function(a,e){var f=b.prdviewUrl+"?"+d.baseParam+"&goods_no="+a+"&curDispNoSctCd=12";e&&(f+="&tclick="+e),c.location.href=f},d.goEvtViewClick=function(a,e){var f=b.kidsExperienceDetailUrl+"?"+d.baseParam+"&evt_no="+a;e&&(f+="&tclick="+e),c.location.href=f},d.getCommentWriteUrl=function(e,f,g){if(null==d.loginInfo||!d.loginInfo.isLogin){var h="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href="/login/m/loginForm.do?"+h)}a.get(b.kidsExperiencePrizewinnerData+"?&evt_no="+e).success(function(a){if("Y"==a.winner_yn){var h=b.kidscommentWriteUrl+"?"+d.baseParam+"&isKids=Y&evt_no="+e+"&goods_no="+f+"&isKidsApp=Y";g&&(h+="&tclick="+g),c.location.href=h}else("N"==a.winner_yn||""==a.winner_yn)&&alert("체험단 당첨자인 경우에만 작성하실 수 있습니다")})},d.goEvtWinnerClick=function(a,e){var f=b.kidsExperienceWinnerUrl+"?"+d.baseParam+"&evt_no="+a;e&&(f+="&tclick="+e),c.location.href=f},d.goFaq=function(){$("body").animate({scrollTop:"500px"},500,"swing",function(){setTimeout(function(){$("body").animate({scrollTop:$(".evt_faq").position().top-45},0)},1)}),d.sendTclick("m_DC_KidsEventList_Clk_Btn_A")}}}}]),d.filter("strToDate",[function(){return function(a){return null==a||""==a?"":a.substr(0,4)+"."+a.substr(4,2)+"."+a.substr(6,2)}}]),d.filter("strToDate_end",[function(){return function(a){return null==a||""==a?"":a.substr(0,2)+"."+a.substr(2,2)+"."+a.substr(4,2)}}])}(window,window.angular);