var isSwipeActive=!1,isSwipeLock=!1,isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1;!function(a,b,c){"use strict";var d=[],e=b.module("lotteNgSwipe",[]);e.controller("lotteNgSwipeCtrl",["$scope",function(a){}]),e.factory("lotteNgSwipe",["$interval","$timeout","$window",function(c,d,e){function f(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function g(c,d,e){if(e.SLIDE_SWIPE){var f=d[0].offsetWidth-e.LEFT_MARGIN-e.RIGHT_MARGIN;0==f&&(f=a.innerWidth);var g=f/e.DISP_COUNT,h=0;if(s=d[0].offsetWidth-g-e.LEFT_MARGIN,!(d.find("ul, ol").eq(0).find(">li").length>=1||d.find(">li").length>=1)||e.LOADING_ELEMENT||e.LEFT_ELEMENT||e.RIGHT_ELEMENT)e.LOADING_ELEMENT||b.element(d).eq(0).css(q());else{if(-1!=d.context.className.indexOf("recommond_swipe"))var i=d.find(">li");else var i=d.find("ul, ol").eq(0).find(">li").length>1?d.find("ul, ol").eq(0).find(">li"):d.find(">li");var j=c,k=0,l=null;for(k;k<i.length;j++,k++)l=i.eq(j),h=j>=k||0>j?0>j?g*d.find(">li").length+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*k+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*-(c-j)+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0),-1!=d.context.className.indexOf("latest_swipe")&&a.innerWidth>=640?(f=a.innerWidth,l.css({width:f/2,backfaceVisibility:"hidden",position:"absolute",left:h})):l.css({width:f/e.DISP_COUNT,backfaceVisibility:"hidden",position:"absolute",left:h}),j+1>=d.find(">li").length&&(j=-1);t=i.length,b.element(d).eq(0).css(p(0)),b.element(d).find(">li").css("top",0).eq(0).css("position","relative")}}}function h(a){for(var b={totalwidth:0,width:[],paddingleft:[],marginleft:[],paddingright:[],marginright:[]},c=0;c<a.find(">li").length;c++){var d=a.find(">li:eq("+c+")");b.width[c]=parseInt(d.width()),b.width[c]+=b.marginleft[c]=parseInt(d.css("margin-left")),b.width[c]+=b.marginright[c]=parseInt(d.css("margin-right")),b.width[c]+=b.paddingleft[c]=parseInt(d.css("padding-left")),b.width[c]+=b.paddingright[c]=parseInt(d.css("padding-right")),b.totalwidth+=b.width[c]}return b}function i(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}function j(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(0,c.SWIPE_SPEED)),(c.LOADING_ELEMENT||c.LEFT_ELEMENT||c.LEFT_ELEMENT)&&b.element(c.LOADING_ELEMENT).css(p(0,c.SWIPE_SPEED))}function k(c,d,e,f){var g=h(c);if(a.innerWidth-d.LEFT_MARGIN-d.RIGHT_MARGIN>g.totalwidth)return!1;for(var j=a.innerWidth/2,k=g.width[e]/2,m=0,n=0;n<g.width.length&&n!=e;n++)m+=g.width[n];var o=i(c),q=-1*(m-j+k);f?(q>0?q=0:q<-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)&&(q=-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)),b.element(c).eq(0).css(p(q))):Math.abs(m)>j&&g.totalwidth-a.innerWidth+d.RIGHT_MARGIN>Math.abs(q)?l(c[0],d,o,q):Math.abs(m)<=j?l(c[0],d,o,0):l(c[0],d,o,-1*(g.totalwidth-a.innerWidth)-d.RIGHT_MARGIN)}function l(a,c,d,e){return d==e?!0:(b.element(a).on(u,function(a){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(e,c.SWIPE_SPEED)),void(c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(e,c.SWIPE_SPEED))))}function m(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED))}function n(a,c,d,e,f){return 0>d?f=f+c.DISP_COUNT>c.MAX_SLIDE?c.MAX_SLIDE:f+c.DISP_COUNT:f-=c.DISP_COUNT,c.EDGE_LAST&&(f==t-1||f==t-2&&d>0)&&(e-=s),b.element(a).on(u,function(d){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),g(f,a,c),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED)),f}function o(b,c,d){var e=i(b);return e>0?(m(b[0],c,e,0),e=0):Math.abs(e)+a.innerWidth>Math.abs(d.totalwidth)+c.RIGHT_MARGIN&&(m(b[0],c,e,d.totalwidth-a.innerWidth+c.RIGHT_MARGIN),e=-1*(d.totalwidth-a.innerWidth)),e}function p(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function q(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}}function r(a){return a||(a=""),{"-webkit-transition":a,"-moz-transition":a,"-o-transition":a,transition:a}}var s=0,t=0,u="transitionend.ngswipe webkitTransitionEnd.ngswipe oTransitionEnd.ngswipe MSTransitionEnd.ngswipe";return{unbind:function(a){a.off("touchstart.ngswipe mousedown.ngswipe touchcancel.ngswipe touchmove.ngswipe mousemove.ngswipe touchend.ngswipe mouseup.ngswipe")},bind:function(d,g,k){var l,r,u,v,w=d[0],x=!1,y=g.FIRST_INDEX,z=b.element(d).scope(),A=!1,B=!1,C=[],D=0,E=0,F=0,G=!0,H=(g.DISP_COUNT,navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1),I=!0,J=30,K=b.element(e).scrollTop();g.SLIDE_MENU_SWIPE&&b.element(w).css(p(0)),d.on("touchstart.ngswipe mousedown.ngswipe",function(c){if(c.stopPropagation(),H){var j=b.element(e).scrollTop();j+J>K&&K>j-J?I=!0:(I=!1,K=j)}A=!1,B=!1,g.SLIDE_MENU_SWIPE&&(C=h(d),G=a.innerWidth-g.LEFT_MARGIN-g.RIGHT_MARGIN>C.totalwidth?!1:!0),isSwipeLock||G&&(a.innerWidth>=900&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_640:g.RESPONSIVE_SWIPE&&(g.DISP_COUNT=g.RESPONSIVE_SWIPE_320),g.MAX_SLIDE=d.find(">li").length-1,(!(g.MAX_SLIDE<1)||g.LOADING_ELEMENT||g.LEFT_ELEMENT||g.RIGHT_ELEMENT)&&(u=f(c),u.x+=g.EDGE_LAST&&y==t-1?s:0,x=!0,l=0,r=0,isSwipeActive=!0,v=u,y=z.swipeIdx,E=(new Date).getTime(),g.SLIDE_MENU_SWIPE&&(C=h(d),D=i(d)),k.start&&k.start(u,c),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none")))}),d.on("touchcancel.ngswipe",function(a){x=!1,j(w,g,u,v)}),d.on("touchmove.ngswipe mousemove.ngswipe",function(a){if(x&&G&&u){var c=f(a);c.x+=g.EDGE_LAST&&y==t-1?s:0,l+=Math.abs(c.x-v.x),r+=Math.abs(c.y-v.y),v=c;var d,e;d=Math.abs(c.x-u.x),e=Math.abs(c.y-u.y),A||(B=d>e,A=!0);var h=v.x-u.x;if(h>0?a.moveto="right":a.moveto="left",B&&(I||!H)){a.preventDefault(),a.stopPropagation();g.SLIDE_MENU_SWIPE?b.element(w).css(p(c.x-u.x+D)):b.element(w).css(p(c.x-u.x)),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(c.x-u.x))),"left"==a.moveto?(g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(p(0))):(g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(p(0))),k.move&&k.move(c,a)}}}),d.on("touchend.ngswipe mouseup.ngswipe",function(h){if(h.stopPropagation(),A=!1,B&&(I||!H)){if(!x||!G)return;x=!1,isSwipeActive=!1;var i=d[0].offsetWidth,l=Math.abs(v.x-u.x),r=v.x-u.x;if(F=(new Date).getTime(),r>0?h.moveto="right":h.moveto="left",h.max=g.MAX_SLIDE,g.SLIDE_MENU_SWIPE){var z=v.x-u.x+D,J=-80,L="left"==h.moveto?z+J:z-J,M="left"==h.moveto?-5:5;if(Math.abs(v.x-u.x)>5&&400>=F-E)var N=c(function(){z+=M,b.element(d).eq(0).css(p(z)),(L>=z&&"left"==h.moveto||z>=L&&"right"==h.moveto||z>0||z<=-C.totalwidth+a.innerWidth)&&(D=o(d,g,C),c.cancel(N))},10);else D=o(d,g,C)}else if(i*g.MAX_RATIO<=l){if(g.SLIDE_SWIPE){if(y>=g.MAX_SLIDE&&0>r||0>y&&r>0||0==y&&r>0||g.MAX_SLIDE+1<=g.DISP_COUNT||y+g.DISP_COUNT>g.MAX_SLIDE&&"left"==h.moveto)return void j(w,g,u,v+(g.EDGE_LAST&&y==t-1?s:0));if(g.SLIDE_SWIPE)var i=i-g.LEFT_MARGIN-g.RIGHT_MARGIN;y=n(d,g,r,i,y),h.idx=y}else m(w,g,r,i);var O=f(h);O.x+=g.EDGE_LAST&&y==t-1?s:0;k.end&&k.end(O,h)}else j(w,g,u,v),b.element(d).eq(0).css(q())}H&&(K=b.element(e).scrollTop(),I=!0),u=null})},moveSwipeX:n,positionReCalc:g,resetSwipe:j,moveMenuSwipe:k,getListInfo:h}}]),e.directive("lotteNgListSwipe",["$window","$parse","$timeout","lotteNgSwipe",function(e,f,g,h){return{link:function(i,j,k){function l(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function m(){var c=j[0];if(a.innerWidth>=900&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_640:p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),0!=i.swipeIdx&&p.DISP_COUNT>1){var d=i.swipeIdx%p.DISP_COUNT;0!=d&&(i.swipeIdx-=d)}if(i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),p.SLIDE_MENU_SWIPE){var e=h.getListInfo(j);e.width.length>1&&a.innerWidth-p.LEFT_MARGIN-p.RIGHT_MARGIN>e.totalwidth&&b.element(c).css(l(0))}p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)}function n(a,b){if(!(LeftSwipeStartExec&&"left"==a.moveto||RightSwipeStartExec&&"right"==a.moveto)){"left"==a.moveto?LeftSwipeStartExec=!0:RightSwipeStartExec=!0;var c=null;i.$apply(function(){return c=q(i.$parent,{$event:{idx:a.idx,max:b.MAX_SLIDE,moveto:a.moveto}})})}}function o(a,c){if(isSwipeActive)return g(function(){o(a,c)},100),!1;var d=null;i.$apply(function(){return d=r(i.$parent,{$event:{idx:a.idx,max:c.MAX_SLIDE,moveto:a.moveto}}),"translateX_Reset"==d&&g(function(){b.element(j).eq(0).css(l(0))},500),d})}var p={MAX_RATIO:k.swipeMaxRatio?k.swipeMaxRatio:.3,MIN_DISTANCE:k.swipeMinDistance?k.swipeMinDistance:25,SWIPE_LOOP:k.swipeLoop?k.swipeLoop:!1,LEFT_ELEMENT:k.swipeLeftEl?k.swipeLeftEl:null,RIGHT_ELEMENT:k.swipeRightEl?k.swipeRightEl:null,LOADING_ELEMENT:k.swipeLoadingEl?k.swipeLoadingEl:null,LOADING_ELEMENT_ZINDEX:k.swipeLoadingElZindex?k.swipeLoadingElZindex:50,SLIDE_SWIPE:k.swipeSlideItem?k.swipeSlideItem:!1,SLIDE_MENU_SWIPE:k.swipeSlideMenu?k.swipeSlideMenu:!1,RESPONSIVE_SWIPE:k.swipeResponsive?k.swipeResponsive:!1,RESPONSIVE_SWIPE_320:parseInt(k.swipeResponsive320)?parseInt(k.swipeResponsive320):1,RESPONSIVE_SWIPE_640:parseInt(k.swipeResponsive640)?parseInt(k.swipeResponsive640):2,RESPONSIVE_SWIPE_900:parseInt(k.swipeResponsive900)?parseInt(k.swipeResponsive900):2,AUTO_HEIGHT:k.swipeAutoheight?k.swipeAutoheight:!1,DISP_COUNT:k.swipeDispCount?parseInt(k.swipeDispCount):1,FIRST_INDEX:k.swipeFirstIndex?parseInt(k.swipeFirstIndex):0,LEFT_MARGIN:k.swipeLeftMargin?parseInt(k.swipeLeftMargin):0,RIGHT_MARGIN:k.swipeRightMargin?parseInt(k.swipeRightMargin):0,START_EXEC:k.swipeStartExec?k.swipeStartExec:null,EXEC:k.swipeEndExec?k.swipeEndExec:null,LIST_SCOPE:k.swipeListModel?k.swipeListModel:null,SWIPE_ID:k.swipeId?k.swipeId:"",MAX_SLIDE:0,SWIPE_SPEED:k.swipSpeed?k.swipSpeed:150,IGNORE_DESTORY:k.ignoreDestory?k.ignoreDestory:!1,EDGE_LAST:k.swipeEdgeLast?!0:!1};i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),i.swipeBullet=[];var q=null,r=null;if(null!=p.START_EXEC&&(q=f(p.START_EXEC)),null!=p.EXEC&&(r=f(p.EXEC)),p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.SLIDE_MENU_SWIPE&&(i.moveMenuSwipe=function(a){i.moveMenuSwipeFnc(a,!1)},i.moveMenuSwipeFnc=function(a,b){h.moveMenuSwipe(j,p,a,b)}),p.SLIDE_MENU_SWIPE||p.SLIDE_SWIPE||(i.translateX_Reset=function(){console.log("스와이프 좌표 리셋"),b.element(j).eq(0).css(l(0)),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css(l(0))}),i.setSlide=function(a){0>a?a=p.MAX_SLIDE:a>p.MAX_SLIDE&&(a=0),i.swipeIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.goSlide=function(a){h.positionReCalc(a,j,p),i.swipeIdx=i.swipeBulletIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.nextSlide=function(){i.swipeIdx!=p.MAX_SLIDE&&(h.moveSwipeX(j,p,-1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx+=p.DISP_COUNT,i.swipeBulletIdx++,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.beforeSlide=function(){0!=i.swipeIdx&&(h.moveSwipeX(j,p,1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx-=p.DISP_COUNT,i.swipeBulletIdx--,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.ngswipeInit=function(){if(p.SLIDE_SWIPE){i.swipeBullet=[],p.MAX_SLIDE=j.find(">li").length;for(var a=0;a<p.MAX_SLIDE/p.DISP_COUNT;a++)i.swipeBullet.push(a)}p.MAX_SLIDE<i.swipeIdx?(i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),h.positionReCalc(i.swipeIdx,j,p),g(function(){i.$apply()})):i.swipeIdx||(i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),i.swipeIdx=p.FIRST_INDEX,g(function(){i.$apply()}))},i.resetSwipePos=function(){h.positionReCalc(i.swipeIdx,j,p)},null!=p.LIST_SCOPE){var s=null;i.$watch(p.LIST_SCOPE,function(a,b){if(a!=c&&a.length>=1){if(s!=a[0]&&(i.swipeIdx=0,i.swipeBulletIdx=0,s=a[0]),"recommondSwipe_0"==k.swipeId||"lastestSwipe_0"==k.swipeId)var d=2e3;else var d=100;g(function(){i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)},d)}},!0)}m(),-1==d.indexOf(p.SWIPE_ID)&&d.push(p.SWIPE_ID);var t=b.element(e);t.on("orientationchange.ngswipe resize.ngswipe",m),i.$on("$destroy",function(){h.unbind(j)}),h.bind(j,p,{start:function(a,b){},move:function(a,b){return null!=p.START_EXEC?(isLoadingData=!0,n(b,p)):void 0},cancel:function(){isLoadingData=!1},end:function(a,b){return isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1,i.swipeIdx=b.idx?b.idx:0,i.swipeBulletIdx=parseInt(b.idx/p.DISP_COUNT),i.$apply(),null!=p.EXEC?o(b,p):void 0}})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteUtil","lotteNgSwipe"]);d.controller("wishCtrl",["$scope","$http","$filter","LotteCommon","LotteCookie","LotteUtil","$timeout","$window","LotteStorage","commInitData","lotteNgSwipe",function(c,d,e,f,g,h,i,j,k,l,m){if(c.useTestData=!1,c.isWishDebug=!1,c.showWrap=!0,c.contVisible=!0,c.subTitle="위시리스트",c.screenId="wish",c.itemCountPerPage=20,c.currentPageNo=0,c.initLoadingProductList=!1,c.loadedProductList=[],c.loadedSoldoutProductList=[],c.currentCategory="",c.currentCategoryName="카테고리 전체",c.categoryList=[[{ctg_nm:"전체보기",curDispNo:""},{ctg_nm:"화장품",curDispNo:"5537261"},{ctg_nm:"잡화/슈즈/명품",curDispNo:"5537262"},{ctg_nm:"패션의류",curDispNo:"5537263"},{ctg_nm:"스포츠/레저",curDispNo:"5537264"},{ctg_nm:"유아동",curDispNo:"5537265"}],[{ctg_nm:"가전/가구",curDispNo:"5537266"},{ctg_nm:"생활/식품",curDispNo:"5537267"}]],c.categoryOpenState=!1,c.categorySwipeIdx=0,c.productTotalCount=0,c.soldOutProductTotalCount=0,c.checkedGettingSmartPic=!1,c.isSelectedAll=!1,c.isOpenSoldoutSection=!1,c.instantDelay=2e3,c.isShowNormalListLoadingBar=!1,c.isShowSoldoutListLoadingBar=!1,c.historyBackFlag="HISTORY_BACK",c.quickDay=!0,c.commonAlramInfo={is_block:!1,is_show:!1,message:""},c.couponPopupInfo={isShow:!1,couponNo:0,cookieName:""},c.showCouponPopup=!0,c.getTclickCode=function(a,b,d,e,f,g){var h="wish",i=c.tClickBase+h+"_Clk";return i+=a?"_Prd":"",i+=b?"_Btn":"",i+=d?"_Lnk":"",i+=e?"_"+e:"",i+=f?"_idx"+f:"",i+=g?"_page"+g:""},c.getTclickParam=function(a,b,d,e,f,g){return"&tclick="+c.getTclickCode(a,b,d,e,f,g)},c.isAdultUser=function(){return"Y"==g.getCookie("ADULTYN")},c.showInstantMessage=function(a){c.commonAlramInfo.is_block||(c.commonAlramInfo.is_block=!0,c.commonAlramInfo.message=a,c.commonAlramInfo.is_show=!0,i(function(){c.commonAlramInfo.is_show=!1,c.commonAlramInfo.is_block=!1},c.instantDelay))},c.closeCouponPopup=function(){c.dimmedClose(),c.couponPopupInfo.isShow=!1},c.stopShowingCouponPopup=function(a){var b=a||1,d="no";g.setCookie(c.couponPopupInfo.cookieName,d,b),c.closeCouponPopup()},c.downloadCoupon=function(){return c.loginInfo.isLogin?void d({method:"POST",url:f.cartRegCouponData+"?"+c.baseParam,data:{cpn_issu_no:c.couponPopupInfo.couponNo,dup_cpn_yn:"Y"},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){console.log(a);var b=a.data_set.is_issued,d=a.data_set.result;alert(d.replace("\\n","\n")),b&&c.stopShowingCouponPopup(),c.closeCouponPopup()}).error(function(a){ajaxResponseErrorHandler(a,function(){}),c.closeCouponPopup()}):void c.loginProc("N")},c.getProductSortNo=function(a){var d=0,e=1;return b.forEach(c.loadedProductList,function(b,c){b.goodsNo==a.goodsNo&&b.itemNo==a.itemNo?d=e:++e}),d},c.isEllotteWeb=function(){return h.isEllotte()},c.getFormattedGoodsNm=function(a){var b="";return a.brand&&(c.isEllotteWeb()||(b="["+a.brand+"] ")),b+=a.goodsNm},c.isShowEllotteBrandNm=function(a){return c.isEllotteWeb()&&a.brand},c.getProductByIndex=function(a){return c.loadedProductList[a]},c.isNeededOption=function(a){var b=!1;return("Y"===a.item_mgmt_yn||a.is_sale_promotion)&&(b=!0),b},c.isCheckedSmartPic=function(a){return a.is_checked_ship},c.existMoreItem=function(){return c.loadedProductList.length<c.productTotalCount},c.notExistWishItem=function(){return c.initLoadingProductList&&0==c.loadedProductList.length},c.notExistSoldoutWishItem=function(){return 0==c.soldOutProductTotalCount},c.notExistAnyWishItem=function(){return c.notExistWishItem()&&c.notExistSoldoutWishItem()},c.getPriceInfo=function(a){var b=0,c=0,d=0;return a.instCpnSalePrc?(c=a.instCpnSalePrc,b=a.speSaleAmt):(c=a.speSaleAmt,"Y"==a.prcDifViewYn&&(b=a.salePr)),0!=b&&0!=c&&b!=c&&(d=parseInt((b-c)/b*100)),{original:b,discounted:c,sale_rate:d}},c.getValidOrderQuantity=function(a){var b=1;if("Y"==a.pur_qty_lmt_yn){var c="";a.brand&&(c+="["+a.brand+"]"),c+=a.goodsNm,a.min_lmt_qty>1&&(b=a.min_lmt_qty,alert(c+" 상품은 최소 "+b+"개 이상 주문이 가능합니다."))}return b},c.toggleCheckAllItem=function(a){c.isSelectedAll=a?!1:!c.isSelectedAll,b.forEach(c.loadedProductList,function(a,b){a.is_checked=c.isSelectedAll})},c.changeEachCheckbox=function(a){var d=!c.getProductByIndex(a).is_checked;if(c.getProductByIndex(a).is_checked=d,d){var e=!0;b.forEach(c.loadedProductList,function(a,b){a.is_checked||(e=!1)}),c.isSelectedAll=e}else c.isSelectedAll=d},c.getCheckedProducts=function(){return e("filter")(c.loadedProductList,{is_checked:!0})},c.getCheckedProductSeqs=function(){var a=[];return b.forEach(c.getCheckedProducts(),function(b,c){a.push(b.seq)}),a},c.getSoldoutProductSeqs=function(){var a=[];return b.forEach(c.loadedSoldoutProductList,function(b,c){a.push(b.seq)}),a},c.uncheckAllExceptMe=function(a){c.toggleCheckAllItem(!0),c.getProductByIndex(a).is_checked=!0},c.deleteOneProduct=function(a,b){c.uncheckAllExceptMe(a),c.deleteProduct([b],"one")},c.deleteAllProduct=function(){var a=confirm("위시리스트 상품을 전체 삭제하시겠습니까?");return a?(c.requestDeleteProductByStat(!1,"all",function(){c.loadedProductList=[],c.productTotalCount=0}),void(c.soldOutProductTotalCount>0&&c.deleteAllSoldoutProduct(!0))):!1},c.deleteMultiProduct=function(){var a=c.getCheckedProductSeqs();c.deleteProduct(a,"multi")},c.deleteProduct=function(a,b){if(0==c.getCheckedProducts().length)return c.showInstantMessage("상품을 선택해 주세요."),!1;var d=confirm("상품을 삭제하시겠습니까?");return d?void c.requestDeleteProductBySeqs(a,b,function(a){for(var b=0;b<c.loadedProductList.length;b++)for(var d=c.loadedProductList[b],e=0;e<a.length;e++)if(d.seq===a[e]){c.loadedProductList.splice(b,1),b--;break}c.productTotalCount-=a.length}):!1},c.deleteOneSoldoutProduct=function(a,b){var d=confirm("상품을 삭제하시겠습니까?");return d?void c.requestDeleteProductBySeqs([b],"soldout-one",function(){c.loadedSoldoutProductList.splice(a,1)}):!1},c.deleteAllSoldoutProduct=function(a){if(!a){var b=confirm("상품을 전체 삭제하시겠습니까?");if(!b)return!1}c.requestDeleteProductByStat(!0,"soldout-all",function(){c.loadedSoldoutProductList=[],c.soldOutProductTotalCount=0})},c.requestDeleteProductBySeqs=function(a,b,e,g){var h=a.join(","),i="";"multi"==b?(i=c.getTclickParam(null,!0,null,1,null),c.sendTclick(c.getTclickCode(null,!0,null,1,null))):"one"==b&&(i=c.getTclickParam(null,!0,null,3,null),c.sendTclick(c.getTclickCode(null,!0,null,3,null))),d({method:"POST",url:f.wishDeleteData+"?"+c.baseParam+i,data:{goods_seqs:h},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b){var d=b.result_count||0;d>0?(c.showInstantMessage("삭제 되었습니다."),e&&e(a)):ajaxResponseFailHandler(function(){g&&g(a)})}).error(function(b){ajaxResponseErrorHandler(b,function(){g&&g(a)})})},c.requestDeleteProductByStat=function(a,b,e,g){var h="";"all"==b&&(h=c.getTclickParam(null,!0,null,2,null),c.sendTclick(c.getTclickCode(null,!0,null,2,null))),d({method:"POST",url:f.wishDeleteAllByStatData+"?"+c.baseParam+h,data:{soldout_yn:a?"Y":"N"},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b){var d=b.result_count||0;d>0?(c.showInstantMessage("삭제 되었습니다."),e&&e(a)):ajaxResponseFailHandler(function(){g&&g(a)})}).error(function(b){ajaxResponseErrorHandler(b,function(){g&&g(a)})})},c.isNeededOptionIfSoGoGoodsDetailView=function(a,b){return c.isNeededOption(a)?(alert("이 상품은 옵션이 있는 상품입니다.\n상품상세에서 옵션을 선택해 주세요."),c.goGoodsDetail(a,!1,b),!0):!1},c.checkedGettingSmartPicIfSoGoGoodsDetailView=function(a,b){return 1==c.isCheckedSmartPic(a)?(alert("스마트픽 찾기를 선택하셨습니다.\n상품상세에서 옵션(예약정보)을 선택해 주세요."),c.goGoodsDetail(a,!1,b),!0):!1},c.avaliableAddCart=function(a){return c.isNeededOptionIfSoGoGoodsDetailView(a,"cart")?!1:c.checkedGettingSmartPicIfSoGoGoodsDetailView(a,"cart")?!1:!0},c.addCart=function(a,b,d){var e=c.getProductByIndex(a);pticketCheck(0,e.goodsNo,function(e){e||c.addCart2(a,b,d)})},c.addCart2=function(a,e,g){c.uncheckAllExceptMe(a);var h=c.getProductByIndex(a);if(c.avaliableAddCart(h)){var i="N";2==h.is_checked_ship&&c.artQuick(h,a)&&(i="Y");var k=1;c.sendTclick(c.getTclickCode(null,!0,null,4,null)),d({method:"POST",url:f.cartAddFromWishData+"?"+c.baseParam+c.getTclickParam(null,!0,null,4,null),data:{goods_no:h.goodsNo,item_no:h.itemNo,goods_choc_desc:h.goodsChocDesc,goods_cmps_cd:h.goodsCmpsCd,ord_qty:k,infw_disp_no:h.infwDispNo,infw_disp_no_sct_cd:h.infwDispNoSctCd,conr_no:h.conrNo,smp_vst_shop_no:h.smpVstShopNo,smp_vst_rsv_dtime:h.smpVstRsvDtime,smp_tp_cd:h.smp_tp_cd,smp_deli_loc_sn:h.smp_deli_loc_sn,smp_prod_yn:h.smp_only_yn,cart_sct_cd:10,master_goods_yn:"Y",qs_yn:i},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(d){var f=d.result;f?(c.openCireleSystemAlert({type:"cartPop"}),e&&e(a)):ajaxResponseFailHandler(function(){g&&g(a)});try{b.element(j).trigger("refreshCartCount")}catch(h){}}).error(function(b){ajaxResponseErrorHandler(b,function(){g&&g(a)},h)})}},c.goGoodsDetail=function(b,d,e){var f="",g="";if(!b.is_interpark_ticket){if("-23"==b.resultCd);else{if("30"==b.saleStatCd)return void alert("상품 판매가 종료되었습니다.");f=b.seq,g=b.itemNo}if("Y"==b.minority_limit_yn)return c.isAdultUser()?void 0:void alert("이 상품은 법률규정에 의하여 만 19세 이상 성인만 조회 및 구매가 가능합니다.");var h=[];h.push("curDispNo="+b.infwDispNo),h.push("curDispNoSctCd="+b.infwDispNoSctCd),h.push("goods_no="+b.goodsNo),h.push("wish_lst_sn="+f),h.push("item_no="+g);var j="";d||("goods"==e?j=c.getTclickParam(!0,null,null,null,c.getProductSortNo(b)):"cart"==e?(j=c.getTclickParam(null,!0,null,4,null),c.sendTclick(c.getTclickCode(null,!0,null,4,null))):"order"==e&&(j=c.getTclickParam(null,!0,null,5,null),c.sendTclick(c.getTclickCode(null,!0,null,5,null)))),a.location.hash=c.historyBackFlag,i(function(){location.href="/product/m/product_view.do?"+c.baseParam+"&"+h.join("&")+j},1e3)}},c.goOrder=function(a){var b=c.getProductByIndex(a);if(!c.isNeededOptionIfSoGoGoodsDetailView(b,"order")&&!c.checkedGettingSmartPicIfSoGoGoodsDetailView(b,"order")){var d="N";if(2==b.is_checked_ship&&c.artQuick(b,a)&&(d="Y"),"N"==b.tworld_sell_yn)return void alert("T월드 모바일 구매불가 상품입니다.");if("N"==b.sale_possible_yn)return void alert("모바일 구매 불가상품 입니다.");var e=c.getValidOrderQuantity(b),g=[];g.push("goodsno="+b.goodsNo),g.push("goodsCmpsCd="+b.goodsCmpsCd),g.push("infwDispNo="+b.infwDispNo),g.push("infwDispNoSctCd="+b.infwDispNoSctCd),g.push("mastDispNo="+b.dispNo),g.push("qty="+e),g.push("qs_yn="+d),pticketCheck(0,b.goodsNo,function(a){a||(location.href=f.orderFormUrl+"?"+c.baseParam+"&"+g.join("&"))})}},c.registRestockAlram=function(a){d({method:"POST",url:f.systemRestockAlramData+"?"+c.baseParam+c.getTclickParam(null,!0,null,7,null),data:{mbr_no:c.loginInfo.mbrNo,spdp_goods_no:"",goods_no:a.goodsNo,item_no:a.itemNo,channel:"2"},transformRequest:transformJsonToParam,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){var b=a.RESPONSE_CODE,d=a.RESPONSE_MSG,e=a.APP_PUSH_YN,f=a.PHONE;"0000"==b?c.openCireleSystemAlert({type:"alarmPop",app_push_yn:e,phone:f}):alert(d)}).error(function(a){alert("처리중 오류가 발생하였습니다.")})},c.loadSoldoutProduct=function(){if(0==c.loadedSoldoutProductList.length){var a="";a=c.useTestData?"/lotte/resources_dev/data/mylotte/wish/m/wish_soldout_list_data.html?":f.wishSoldoutListData+"?",a+=c.baseParam+c.getTclickParam(null,!0,null,6,null),d.get(a).success(function(a){c.loadedSoldoutProductList=a.result,c.isShowSoldoutListLoadingBar=!1}).error(function(a){c.isShowSoldoutListLoadingBar=!1,ajaxResponseErrorHandler(a,function(){})})}},c.toggleSoldoutSection=function(){c.isOpenSoldoutSection?c.isShowSoldoutListLoadingBar=!1:0==c.loadedSoldoutProductList.length?c.isShowSoldoutListLoadingBar=!0:c.isShowSoldoutListLoadingBar=!1,c.isOpenSoldoutSection=!c.isOpenSoldoutSection,c.loadSoldoutProduct(),c.sendTclick(c.getTclickCode(null,!0,null,6,null))},c.dispBanner=!1,c.productListLoading=!0,c.swipeList=!1,c.makeProductListUrl=function(){++c.currentPageNo;var a=[];a.push("sale_stat_cd=10"),a.push("display_cnt="+c.itemCountPerPage),a.push("page_num="+c.currentPageNo),a.push("category="+c.currentCategory);var b="";return b=c.useTestData?"/lotte/resources_dev/data/mylotte/wish/m/wish_normal_list_data.html?":f.wishListData+"?"+a.join("&")+"&",b+=c.baseParam,c.currentPageNo>1&&(b+=c.getTclickParam(null,!0,null,null,null,c.currentPageNo),c.sendTclick(c.getTclickCode(null,!0,null,null,null,c.currentPageNo))),b},c.showHideCategory=function(){c.categoryOpenState=!c.categoryOpenState,c.sendTclick(c.getTclickCode(null,!0,null,"Cate",null))},c.wishCateClick=function(a){c.currentPageNo=0,c.currentCategory=a.curDispNo,"전체보기"==a.ctg_nm?c.currentCategoryName="카테고리 전체":c.currentCategoryName=a.ctg_nm,c.loadMoreProduct(),c.sendTclick(c.getTclickCode(null,!0,null,"Catesub"+a.curDispNo,null))},c.loadMoreProduct=function(){c.initLoadingProductList&&(c.isShowNormalListLoadingBar=!0),d.get(c.makeProductListUrl()).success(function(a){a.result?(c.currentPageNo<=1&&(c.loadedProductList.length=0),Array.prototype.push.apply(c.loadedProductList,a.result)):c.loadedProductList.length=0,1==c.currentPageNo&&(c.productTotalCount=a.resultCnt,c.soldOutProductTotalCount=a.resultSoldoutCnt,c.couponPopupInfo.isShow="Y"==a.popup_view_yn&&c.showCouponPopup,c.couponPopupInfo.couponNo=a.cpn_issu_no?a.cpn_issu_no:"",c.couponPopupInfo.cookieName=a.cookie_name?a.cookie_name.toUpperCase():"",c.couponPopupInfo.isShow&&c.showCouponPopup&&(c.dimmedOpen({target:"CouponPopup",callback:c.closeCouponPopup}),c.showCouponPopup=!1)),c.holiday=a.quick_dlv_holiday,1==p()&&b.forEach(c.loadedProductList,function(a){a.dept_main_inv_qty>0&&(a.isQuickPrd=!0)}),c.initLoadingProductList=!0,c.isShowNormalListLoadingBar=!1}).error(function(a){c.isShowNormalListLoadingBar=!1,ajaxResponseErrorHandler(a,function(){})})},b.element(j).on("unload",function(){k.setSessionStorage(c.screenId+"ScrollY",b.element(j).scrollTop()),k.setSessionStorage(c.screenId+"Data",{loadedProductList:c.loadedProductList,productTotalCount:c.productTotalCount,loadedSoldoutProductList:c.loadedSoldoutProductList,currentPageNo:c.currentPageNo,soldOutProductTotalCount:c.soldOutProductTotalCount,isOpenSoldoutSection:c.isOpenSoldoutSection,currentCategory:c.currentCategory,currentCategoryName:c.currentCategoryName,categoryOpenState:c.categoryOpenState,categorySwipeIdx:$("#cateSwipeCurPage").data("curPage"),holiday:c.holiday},"json")}),a.location.hash=="#/"+c.historyBackFlag){var n=k.getSessionStorage(c.screenId+"ScrollY"),o=JSON.parse(k.getSessionStorage(c.screenId+"Data"));i(function(){b.element(j).scrollTop(n),p()},1e3),c.loadedProductList=o.loadedProductList,c.productTotalCount=o.productTotalCount,c.currentPageNo=o.currentPageNo,c.currentCategory=o.currentCategory,c.currentCategoryName=o.currentCategoryName,c.categoryOpenState=o.categoryOpenState,c.categorySwipeIdx=o.categorySwipeIdx,c.holiday=o.holiday,c.loadedSoldoutProductList=o.loadedSoldoutProductList,c.soldOutProductTotalCount=o.soldOutProductTotalCount,c.isOpenSoldoutSection=o.isOpenSoldoutSection,c.initLoadingProductList=!0,c.isShowNormalListLoadingBar=!1}else c.loadMoreProduct();c.quickPopClk=function(){$(".commonPop.quick_layer").addClass("on")},c.close_quickPop=function(){$(".commonPop.quick_layer").removeClass("on")};var p=function(){var a=new Date,b=a.getHours(),d=a.getMinutes(),e=a.getSeconds();return a=""+(10>b?"0"+b:b)+(10>d?"0"+d:d)+(10>e?"0"+e:e),c.holiday?(c.quickDay=!1,"holi"):"090000">a||a>"163000"?(c.quickDay=!1,"time"):!0};c.artQuick=function(a,b){var d=p(),e="";switch(d=0==a.dept_main_inv_qty?"main":d){case"holi":e="공휴일 및 롯데백화점 본점 휴무일,\n배송마감일에는\n퀵 배송 주문이 불가합니다.";break;case"time":e="퀵 배송 주문은 09:00 ~ 16:30에만 가능합니다.";break;case"main":e="롯데백화점 본점 스마트픽 상품만\n퀵 배송 받을 수 있습니다."}return 1==d?!0:(c.loadedProductList[b].isQuickPrd=!1,void alert(e))}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/mylotte/wish/m/wish_container.html",
replace:!0,link:function(a,b,c){}}}),d.directive("wishlistNormalProductList",function(){return{restrict:"E",templateUrl:"/lotte/resources_dev/mylotte/wish/m/wish_normal_list_container.html",replace:!0,link:function(a,b,c){}}}),d.directive("wishlistSoldoutProductList",function(){return{restrict:"E",templateUrl:"/lotte/resources_dev/mylotte/wish/m/wish_soldout_list_container.html",replace:!0,link:function(a,b,c){}}})}(window,window.angular);var transformJsonToParam=function(a){var b=[];for(var c in a)if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c][d]));else b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},ajaxResponseFailHandler=function(a){alert("처리중 오류가 발생하였습니다."),a&&a()},ajaxCount=0,ajaxResponseErrorHandler=function(a,b,c){if(a.error){var d=a.error.response_code,e=a.error.response_msg;if("5000"==d){var f="";return c.brand&&(f+="["+c.brand+"]"),f+=e,void alert(f)}if("9003"==d){0==ajaxCount&&(alert(e),++ajaxCount);var g="&targetUrl="+encodeURIComponent(location.href,"UTF-8");location.href="/login/m/loginForm.do?"+g}}else alert("처리중 오류가 발생하였습니다.");b&&b()};