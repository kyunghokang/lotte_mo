{"version":3,"file":"giftcheck.min.js","sources":["giftcheck.js"],"names":["searchOrdDeliveryListClose","$","hide","find","remove","scrollYN","trigger","document","scrollTop","offset","top","scroll","type","css","overflow","on","event","preventDefault","stopPropagation","browserChk","history","pushState","off","state","back","searchOrdDeliveryListPop","deli_cnt","single","tag","dlvp_sn","val","crspk_map_url","show","html","attr","browser","ua","window","navigator","userAgent","indexOf","sendTclick","tclick","angular","undefined","addressInfoModule","module","controller","$scope","LotteCommon","directive","$window","$timeout","$parse","$http","templateUrl","replace","link","el","attrs","has_address","pageGubun","subTitle","setGiftData","giftData","setTimeout","console","log","selectAddr","loginInfo","isLogin","user_addr_info","default_addr","addr1","ord_addr_info","user_msg","telAr","addr_tel","split","oinfo","indlvpsn","inpbasedlvpyn","inprmitnm","r_name","inpdlvpnm","addr_name","inpzip1","addr_post","substr","inpzip2","inpaddr1","inpaddr2","addr2","stnm_inp_zip1","stnm_inp_zip2","stnm_inp_addr1","stnm_inp_addr2","incellsctno","incelltxnono","incellendno","stnm_addr_post","stnm_addr1","stnm_addr2","getlastAddress","result","alert","msgData","writeMessage","length","focus","idx","is_default","message","messageChange","myAddrChange","flag","checkField","fieldID","str","app","commInitData","loading","showWrap","contVisible","order_no","query","key","decodeURI","test","presentListUrl","baseParam","presentShop","mainUrl","appBanner","get","mainPopupData","params","success","data","app_down_popup","load","reqParam","orderNo","KEY","mbr_no","mbrNo","url","giftCheckUrl","param","method","headers","Content-Type","gift_state","location","href","checkGiftPage","getGoodsList","gift_msg_info","msg","myAddr_tab","bg_color","zeroOpt","gift_prd_info","opt_item_lst","optlist","i","push","opt_tval","ordDtlSn","ord_dtl_sn","error","LotteLink","gotoApp","appDeepLink","confirm_submit","password","reject_msg","confirm_gift","result_code","err_msg","error_msg","reload","gift_epilogue","recom_prd_lst","refuseLayerFlag","refuse_rLayer","optFlag","changeOpt","initOptCheck","getOptionString","sel","opts","len","opt_list","join","saveOpt","item","opt","no","arr","optvalue","old_no","item_qty","selected_opt","opt_value","item_no","inv_qty","path","presentDetailOption","ord_no","goods_no","chg_item_no","rel_qty","productDetailPop","detailHtml","ProductDetailLayer","productProductDetailHtmlData","max","replaceAll","closeProductDetailLayer","searchStr","replaceStr","gotoLink","index","prdviewUrl","k","opt_value_lst","treecheck","eq","checkZero","checkOptCnt","checkTime","selectID","level","list","key2","j","rvalue","concat","obj","cnt","return_value","i2","appObj","isApp","appDownBann","appDownBnrClose"],"mappings":"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","sourceRoot":"/","sourcesContent":["//===== 배송지 주소 관련 추가 스크립트\r\n// 배송지 팝업 닫기\r\nfunction searchOrdDeliveryListClose(){\r\n    // $(\".lpoint_btn3\").show();\r\n    $(\"#ordSearchDeliPop\").hide();\r\n    $(\"#ordSearchDeliPop\").find(\"iframe\").remove();\r\n    scrollYN('Y','DELI');\r\n    $(\"#ordSearchDeliInfo input\").trigger(\"change\");\r\n    $(\"#change_mode\").trigger(\"click\");\r\n    //console.log(\"top\", $(\"#addressInfoCtrlContainer\").offset().top - 150);\r\n    $(document).scrollTop($(\"#addressInfoCtrlContainer\").offset().top - 150);\r\n}\r\n\r\n// 스크롤 방지\r\nfunction scrollYN(scroll,type){\r\n     if(scroll == 'N'){\r\n        // 부모창 스크롤 방지\r\n        $('html, body').css({'overflow': 'hidden'});\r\n        if(type == 'DELI'){\r\n            $('body').on('scroll touchmove mousewheel', function(event) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return false;\r\n            });\r\n        }\r\n        //이력추가\r\n        if(browserChk() != 'Safari'){\r\n            history.pushState('history1', '');\r\n        }\r\n     }else{\r\n        // 부모창 스크롤 풀기\r\n        $('html, body').css({'overflow': 'visible'});\r\n        if(type == 'DELI'){\r\n            $('body').off('scroll touchmove mousewheel');\r\n        }\r\n        if(browserChk() != 'Safari'){\r\n            if(history.state != null){\r\n                history.back();\r\n            }\r\n        }\r\n     }\r\n}\r\n\r\n// 배송지 팝업\r\nfunction searchOrdDeliveryListPop(deli_cnt,single){\r\n    var tag = '<iframe id=\"deliIframe\" src=\"\"></iframe>'\r\n    var dlvp_sn = $(\"input[name=indlvpsn]\").val();\r\n    var crspk_map_url = \"/popup/ord_search_delivery_list.do?deli_cnt=\"+deli_cnt+\"&selectedDlvpSn=\"+dlvp_sn+\"&single=\"+single;\r\n    //crspk_map_url = \"/mylotte/find_address.html\";//test\r\n    // iframe 보이기 및 url, parameter 셋팅\r\n    $(\"#ordSearchDeliPop\").show();\r\n    $(\"#ordSearchDeliPop\").html(tag);\r\n    $(\"#ordSearchDeliPop\").find(\"iframe\").attr(\"src\", crspk_map_url);\r\n    scrollYN('N','DELI');\r\n}\r\n\r\n// 브라우저 체크\r\nfunction browserChk(){\r\n    var browser = \"\";\r\n    var ua = window.navigator.userAgent;\r\n    if(ua.indexOf('Safari') > 0) {\r\n        if(ua.indexOf('Chrome') > 0) browser = \"Chrome\";\r\n        else browser = \"Safari\";\r\n    }\r\n    return browser;\r\n}\r\nfunction sendTclick(tclick){\r\n    \r\n}\r\n\r\n(function(window, angular, undefined) {\r\n\t'use strict';\r\n\r\n\tvar addressInfoModule = angular.module('addressInfo', [\r\n        'lotteComm'        \r\n    ]);\r\n    \r\n\taddressInfoModule.controller('AddressInfoCtrl', [\"$scope\", \"LotteCommon\", function ($scope, LotteCommon) {\r\n\t\t\r\n\t}]);\r\n\r\n\taddressInfoModule.directive('addressInfo', ['LotteCommon','$window', '$timeout', '$parse', '$http', function (LotteCommon,$window, $timeout, $parse, $http) {\r\n        return {\r\n            templateUrl : '/lotte/resources_dev/mylotte/address_info.html',\r\n            replace : true,\r\n            link : function($scope, el, attrs) {\r\n                $scope.has_address = false; //기본 주소지의 존재 여부\r\n                $scope.pageGubun = false; //선물함 상세페이지\r\n                if($scope.subTitle == '선물 확인'){\r\n                    $scope.pageGubun = true; //선물확인 페이지\r\n                }\r\n                var setGiftData = function(){\r\n                    if($scope.giftData == undefined){\r\n                        setTimeout(function(){                                        \r\n                            setGiftData();\r\n                        }, 500);\r\n                        console.log(\"load again\");\r\n                    }else{\r\n                        var selectAddr = {};\r\n                        if($scope.loginInfo.isLogin){\r\n                            if($scope.giftData.user_addr_info != undefined && $scope.giftData.user_addr_info.default_addr.addr1 != undefined){\r\n                                selectAddr = $scope.giftData.user_addr_info.default_addr;\r\n                                $scope.has_address = true;\r\n                            }                            \r\n                            if($scope.giftData.ord_addr_info != undefined && $scope.giftData.ord_addr_info.addr1 != undefined){\r\n                                selectAddr = $scope.giftData.ord_addr_info;\r\n                                $scope.has_address = true;\r\n                            }                                                                            \r\n                        }else{\r\n                            if($scope.giftData.ord_addr_info != undefined && $scope.giftData.ord_addr_info.addr1 != undefined){\r\n                                selectAddr = $scope.giftData.ord_addr_info;\r\n                                $scope.has_address = true;\r\n                            }                                                                            \r\n                        }\r\n                        $scope.user_msg = \"배송메시지\";\r\n                        if($scope.has_address){ //주소가 있으면                          \r\n                            var telAr = selectAddr.addr_tel.split(\"-\");\r\n                            //기본 주소 세팅\r\n                            $scope.oinfo = {\r\n                                indlvpsn : selectAddr.dlvp_sn,\r\n                                inpbasedlvpyn : '',\r\n                                inprmitnm : selectAddr.r_name,\r\n                                inpdlvpnm : selectAddr.addr_name,\r\n                                inpzip1: selectAddr.addr_post.substr(0,3),\r\n                                inpzip2: selectAddr.addr_post.substr(3,3),\r\n                                inpaddr1: selectAddr.addr1,\r\n                                inpaddr2: selectAddr.addr2,\r\n                                stnm_inp_zip1: '',\r\n                                stnm_inp_zip2: '',\r\n                                stnm_inp_addr1 :'',\r\n                                stnm_inp_addr2:'',                                \r\n                                incellsctno: telAr[0],\r\n                                incelltxnono: telAr[1],\r\n                                incellendno: telAr[2]\r\n                            }\r\n                            //도로명 주소가 있는 경우 추가 세팅\r\n                            if(selectAddr.stnm_addr_post != null && selectAddr.stnm_addr_post != ''){\r\n                                $scope.oinfo.stnm_inp_zip1 = selectAddr.stnm_addr_post.substr(0,3);\r\n                                $scope.oinfo.stnm_inp_zip2 = selectAddr.stnm_addr_post.substr(3,3);\r\n                                $scope.oinfo.stnm_inp_addr1 = selectAddr.stnm_addr1;\r\n                                $scope.oinfo.stnm_inp_addr2 = selectAddr.stnm_addr2;\r\n                            }\r\n                        }else{\r\n                            $scope.oinfo = {\r\n                                indlvpsn : '',\r\n                                inpbasedlvpyn : '',\r\n                                inprmitnm : '',\r\n                                inpdlvpnm : '',\r\n                                inpzip1: '',\r\n                                inpzip2: '',\r\n                                inpaddr1: '',\r\n                                inpaddr2: '',\r\n                                stnm_inp_zip1: '',\r\n                                stnm_inp_zip2: '',\r\n                                stnm_inp_addr1 :'',\r\n                                stnm_inp_addr2:'',\r\n                                incellsctno: '',\r\n                                incelltxnono: '',\r\n                                incellendno: ''\r\n                            }                                              \r\n                        }                         \r\n                    }                   \r\n                }\r\n                \r\n                setTimeout(function(){                                        \r\n                    setGiftData();\r\n                }, 5);\r\n                //주소 찾기 정보를 최종으로 리턴하는 함수\r\n                $scope.getlastAddress = function(){                    \r\n                    var result = {};\r\n                    if($scope.oinfo.inpaddr1 == '' && $scope.oinfo.stnm_inp_addr1 == ''){//입력한 주소가 없으면 \r\n                        alert(\"주소찾기를 완료해주세요.\");                        \r\n                    }else{ //주소가 있으면 \r\n                        var msgData = $(\"#message\").val();\r\n                        if($scope.writeMessage){\r\n                            msgData = $(\"#message2\").val();\r\n                            if(msgData.length < 1){\r\n                                alert(\"배송메시지를 입력해주세요.\"); \r\n                                $(\"#message2\").focus();\r\n                                return result;\r\n                            }\r\n                        }\r\n                        //데이타 구성 \r\n                        result = {\r\n                          \"idx\" : 0,\r\n                          \"is_default\" : $scope.oinfo.inpbasedlvpyn,\r\n                          \"dlvp_sn\" : $scope.oinfo.indlvpsn,\r\n                          \"r_name\" : $scope.oinfo.inprmitnm,\r\n                          \"addr_name\" : $scope.oinfo.inpdlvpnm,\r\n                          \"addr_post\" : $scope.oinfo.inpzip1 +\"\"+$scope.oinfo.inpzip2,\r\n                          \"addr1\" : $scope.oinfo.inpaddr1,\r\n                          \"addr2\" : $scope.oinfo.inpaddr2,\r\n                          \"addr_tel\" :$scope.oinfo.incellsctno +\"-\"+ $scope.oinfo.incelltxnono +\"-\"+ $scope.oinfo.incellendno,\r\n                          \"message\" : msgData,\r\n                          \"stnm_addr_post\" : $scope.oinfo.stnm_inp_zip1 +\"\"+$scope.oinfo.stnm_inp_zip2,\r\n                          \"stnm_addr1\" : $scope.oinfo.stnm_inp_addr1,\r\n                          \"stnm_addr2\" : $scope.oinfo.stnm_inp_addr2\r\n                        }\r\n                    }\r\n                    return result;\r\n                }                \r\n                $scope.writeMessage = false;\r\n                $scope.messageChange = function(){\r\n                    console.log(\"in\", $(\"#message\").val());\r\n                    if($(\"#message\").val() == ''){\r\n                        $scope.writeMessage = true;\r\n                    }                    \r\n                }\r\n                //외부에서 세팅하기 위해 호출\r\n                $scope.myAddrChange = function(flag){\r\n                    if(flag){\r\n                        if($scope.oinfo.inpaddr1 != '' || $scope.oinfo.stnm_inp_addr1 != ''){\r\n                            $scope.has_address = true;\r\n                        }\r\n                    }else{\r\n                        $scope.has_address = false;    \r\n                    }                    \r\n                }\r\n                //입력필드 검사\r\n                $scope.checkField = function(message, fieldID){\r\n                    var str = $(fieldID).val();\r\n                    if(str == \"\"){\r\n                        alert(message + \" 입력해주세요.\");\r\n                        $(fieldID).focus();\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n        };\r\n        \r\n\t}]);\r\n\r\n})(window, window.angular);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n(function(window, angular, undefined) {\n    'use strict';\n\n    var app = angular.module('app', [\n        'lotteComm',\n        'lotteSrh',\n        'lotteSideCtg',\n        // 'lotteSideMylotte',\n        'lotteCommFooter',\n        'addressInfo'\n    ]);\n\n    app.controller('giftcheckCtrl', ['$scope', 'LotteCommon','$http','commInitData', function($scope, LotteCommon,$http,commInitData) {\n        $scope.loading = false;\n        $scope.state = 0; //0 일반, 1 거절, 2 이미 취소,거절 \n        $scope.showWrap = true;\n        $scope.contVisible = true;\n        $scope.subTitle = \"선물 확인\"; //서브헤더 타이틀\n        $scope.order_no = commInitData.query[\"orderNo\"];\n        $scope.key = decodeURI(commInitData.query[\"key\"]);\n        $scope.test = decodeURI(commInitData.query[\"test\"]);\n        $scope.presentListUrl =  LotteCommon.presentListUrl +'?'+baseParam; //선물함 경로\n        $scope.presentShop = LotteCommon.mainUrl +'?'+baseParam+'&dispNo=5556743'; //선물매장으로가기\n        //앱다운로드 배너 \n        $scope.appBanner = null;\n        $http.get(LotteCommon.mainPopupData, {params:{}})\n        .success(function(data) {\n            $scope.appBanner = data.app_down_popup[0];\n        });        \n        \n        $scope.load = function(){\n            var reqParam = {\n                orderNo :  $scope.order_no,\n                KEY : $scope.key,\n                mbr_no : $scope.loginInfo.mbrNo\n            };\n            //basic data\n            $http({url: LotteCommon.giftCheckUrl,\n                data: $.param(reqParam),\n                method: 'POST',\n                headers: {'Content-Type' : 'application/x-www-form-urlencoded'}\n                }).success(function(data) {\n                    $scope.giftData = data;\n                    /*gift_state\n                    0 : 기본\n                    1 : 배송지정보 x -> 선물함으로 이동\n                    2 : 주문취소 -> 거절화면으로 이동\n                    3 : 거절 -> 거절화면으로 이\n                    */\n                    //test code\n                    if($scope.test == \"0\"){\n                        $scope.giftData.gift_state = 0;\n                    }\n                \n                    if($scope.giftData.gift_state == \"1\"){\n                        //선물함으로 이동\n                        location.href =  $scope.presentListUrl;\n                    }else if($scope.giftData.gift_state == \"2\" || $scope.giftData.gift_state == \"3\"){\n                            $scope.state = 2;\n                            $scope.subTitle = \"선물 확인 완료\";                            \n                            $scope.checkGiftPage = true; //선물확인 -> 확인 완료(true)\n                            $scope.getGoodsList();                          \n                    }else if($scope.giftData.gift_state == \"4\"){ //20160907 add case\n                            $scope.state = 4;\n                            $scope.subTitle = \"선물 확인\";                            \n                            $scope.checkGiftPage = true; //선물확인 -> 확인 완료(true)\n                            $scope.getGoodsList();                          \n                    }else if($scope.giftData.gift_state == undefined){\n                        console.log(\"데이타 로드 실패\");\n                        return;\n                    }else{\n                        $scope.loading = true; //선물확인 페이지 로딩\n                    }\n                \n                    if($scope.giftData.gift_msg_info.msg != undefined){\n                        $scope.giftData.gift_msg_info.msg = $scope.giftData.gift_msg_info.msg.replace(/\\n/g, \"<br />\");\n                    }\n                    //로그인한 상태에서 사용자가 입력한 배송지가 없으면\n                    if($scope.loginInfo.isLogin && $scope.giftData.user_addr_info != undefined){\n                        $scope.myAddr_tab = true;\n                    }\n                \n                    if($scope.giftData.gift_msg_info.bg_color == undefined){\n                        $scope.giftData.gift_msg_info.bg_color = \"#ffffff\";\n                    }\n                    //옵션 수량 관련 체크 하여 품절인것만 모음 ========== 옵션 품절 처리 ==============\n                    $scope.zeroOpt = [];\n                    if($scope.giftData.gift_prd_info.opt_item_lst != undefined){\n                        var optlist = $scope.giftData.gift_prd_info.opt_item_lst;\n                        if(optlist.length > 1){\n                            for(var i=0; i< optlist.length; i++){\n                                //if(optlist[i].inv_qty == 0){\n                                    $scope.zeroOpt.push(optlist[i].opt_tval.split(\" x \"));\n                                //}\n                            }\n                        }                           \n                    }\n                    //console.log($scope.zeroOpt);\n                    //$scope.loginInfo.isLogin = true;\n                    \n                    // 배송불가지역 확인 추가\n\t\t\t\t\t$scope.giftData.orderNo = $scope.order_no;\n\t\t\t\t\t$scope.giftData.ordDtlSn = $scope.giftData.gift_prd_info.ord_dtl_sn;\n                \n                    //$scope.giftData.ord_addr_info 정보가 있으면 새로운 배송지에 그 내용을 입력 20161125                    \n                    if($scope.giftData.ord_addr_info != undefined && $scope.giftData.ord_addr_info != null && $scope.giftData.ord_addr_info.addr_post != undefined){   \n                        $scope.myAddrChange(false);\n                    }                    \n\t\t\t\t\t\n                }).error(function () {});\n            \n\n        }\n        setTimeout(function(){\n            $scope.load();    \n        }, 500);\n        \n    }]);\n\n    app.directive('lotteContainer', ['LotteCommon','$http','LotteLink', function(LotteCommon, $http, LotteLink) {\n        return {\n            templateUrl : '/lotte/resources_dev/mylotte/giftcheck_container.html',\n            replace : true,\n            link : function($scope, el, attrs) {\n                //appdown\n                $scope.gotoApp = function(){\n                    LotteLink.appDeepLink(\"lotte\", \"http://m.lotte.com\", null, null); // 앱 딥링크 params : lotte/ellotte, 딥링크URL (없을 경우 default 현재 URL, tclick, referrer)\n                }\n                \n                $scope.checkGiftPage = false; //선물확인 -> 확인 완료(true)\n                //선물확인, 거절\n                $scope.confirm_submit = function(flag){\n                    //submit\n                    var reqParam = {\n                        order_no :  $scope.order_no,\n                        key : $scope.key,\n                        ordDtlSn : $scope.giftData.gift_prd_info.ord_dtl_sn,\n                        addr1:\"\",\n                        addr2:\"\",\n                        addr_name:\"\",\n                        addr_post:\"\",\n                        addr_tel:\"\",\n                        password:\"\",\n                        r_name:\"\",\n                        message:\"\",\n                        dlvp_sn : \"\"\n                    };                    \n                    if(flag){//받기\n                        //data check    \n                        reqParam = $scope.getlastAddress(); //배송정보\n                        if(reqParam.message == undefined){\n                            return;\n                        } \n                        //console.log(reqParam);\n                        if($scope.checkField(\"비밀번호를\", \"#pass1\") ||\n                            $scope.checkField(\"비밀번호를\", \"#pass2\")){\n                            return;\n                        }\n                        if($(\"#pass1\").val() != $(\"#pass2\").val()){\n                            alert(\"비밀번호가 일치하지 않습니다.\");\n                            $(\"#pass2\").val(\"\");\n                            $(\"#pass2\").focus();\n                            return;\n                        }\n                        if($(\"#agreeInfoCheck:checked\").length == 0){\n                            alert(\"선물 수령을 위한 정보제공에 대하여 동의해주세요.\");\n                            return;                            \n                        }\n                        reqParam.ordDtlSn = $scope.giftData.gift_prd_info.ord_dtl_sn;\n                        reqParam.order_no = $scope.order_no;\n                        reqParam.key = $scope.key;\n                        reqParam.password = $(\"#pass1\").val();\n                        reqParam.reject_msg = \"\";\n                    }else{ //거절 이후 화면                         \n                        if($(\"#refuse_message\").val() == ''){\n                            alert(\"거절 메시지를 선택해주세요.\");\n                            return;\n                        }                        \n                        reqParam.reject_msg = $(\"#refuse_message\").val();\n                        $scope.state = 2;\n                    }\n                    $http.get(LotteCommon.confirm_gift, {params:reqParam})\n                        .success(function(data) {\n                            if(data.result.result_code == \"0000\"){                                \n                                $(window).scrollTop(0);\n                                $scope.subTitle = \"선물 확인 완료\";\n                                $scope.checkGiftPage = true; //선물확인 -> 확인 완료(true)\n                                $scope.getGoodsList();\n                            }else{\n                                // 조회 실패\n                            \tif(data.result != undefined){\n\t                                var err_msg = data.result.error_msg;\n\t                                if(err_msg == undefined || err_msg == \"\"){\n\t                                \terr_msg = \"선물 확인 중 에러가 발생했습니다.\";\n\t                                }\n\t                                alert(err_msg);\n\t                                console.log(data.result.result_code, data.result.error_msg);\n                            \t}\n                                if(!flag){\n                                    location.reload();//거절이면 리로드\n                                }\n                            }\n\n                        }).error(function (data) {\n                            console.log(data.result.result_code, data.result.error_msg);\n                            if(data.result.result_code == \"ETC\"){\n                                location.reload();\n                            }\n                    });\n                }                \n                //받기 완료 후 이거어때 리스트 호출 \n                \n                $scope.getGoodsList = function(){\n                    $http.get(LotteCommon.gift_epilogue, {params:null})\n                        .success(function(data) {\n                            $scope.recom_prd_lst = data.recom_prd_lst;\n                        }).error(function () {\n                    });                                        \n                }\n                \n                //선물 거절 layer ==============================\n                $scope.refuseLayerFlag = false;\n                $scope.refuse_rLayer = function(flag){\n                    if(flag){\n                        $(window).scrollTop(0);\n                    }                    \n                    $scope.refuseLayerFlag = flag;\n                }\n\n                //옵션 변경 ===============================\n                $scope.optFlag = false; //옵션변경창\n                $scope.changeOpt = function(){\n                    $scope.optFlag = !$scope.optFlag;\n                    if($scope.optFlag){\n                        $scope.initOptCheck() ; //첫번째 옵션 초기화 = 옵션 품절 처리 ==\n                    }\n                        \n                }\n                \n                $scope.getOptionString = function(){\n                    var opts = [];\n                    var sel;\n                    var len = $scope.giftData.gift_prd_info.opt_list.length;\n                    for(var i=0; i<len; i++){\n                        sel = $(\"#prod_option_\" + i);                        \n                        opts.push(sel.val());//0721 수정\n                    }\n                    return opts.join(\" x \");\n                }     \n                $scope.saveOpt = function(){\n                    if($scope.giftData.gift_prd_info.opt_item_lst == undefined){ return; }\n\n                    var opt = $scope.getOptionString();\n                    var no = -1;\n                    var arr = $scope.giftData.gift_prd_info.opt_item_lst;\n                    var len = arr.length;\n                    var item;\n\n                    var optvalue = \"\"; \n                    var old_no = \"\";\n                    var item_qty = 0;\n                    for(var i=0; i<$scope.giftData.gift_prd_info.opt_list.length; i++){\n                        if(i > 0){\n                            optvalue += \" x \";\n                        }\n                        optvalue += $scope.giftData.gift_prd_info.selected_opt[i].opt_value;//0721 수정\n                    }\n                    \n                    for(i=0; i<len; i++){\n                        item = arr[i];\n                        if(item.opt_tval == opt){ //0721 수정\n                            no = item.item_no;\n                            item_qty = item.inv_qty;\n                        }\n                        if(item.opt_tval == optvalue){//0721 수정\n                            old_no = item.item_no;\n                        }\n                    }\n                    if(old_no == no){\n                        alert(\"동일한 옵션을 선택하셨습니다.\");\n                        return;\n                    }                    \n                    \n                    if(item_qty == 0){\n                        alert(\"재고 수량이 부족합니다.\");\n                        return;\n                    }                    \n                    \n                    if(no < 0){ return; }\n\n                    var path = LotteCommon.presentDetailOption;\n                    var param = {\n                        ord_no\t\t:$scope.order_no,\n                        ord_dtl_sn\t:$scope.giftData.gift_prd_info.ord_dtl_sn,\n                        goods_no\t:$scope.giftData.gift_prd_info.goods_no,\n                        item_no\t\t:old_no,\n                        chg_item_no\t: no,\n                        rel_qty\t\t: $scope.giftData.gift_prd_info.rel_qty                        \n                    };\n                    //원주문 번호, 원주문일련번호, 상품번호, 변경 된 단품번호\n                    \n                    //$scope.UIStatus.isDataLoading = true;\n                    $http.get(path, {params:param})\n                    .success(function(data){                        \n                        //$scope.UIStatus.isDataLoading = false;\n                        if(data.result_code == \"0000\"){\n                            alert(\"저장하였습니다.\");\n                            $scope.optFlag = false;\n                            //변경한 정보로 갱신\n                            for(var i=0; i<$scope.giftData.gift_prd_info.selected_opt.length; i++){\n                                $scope.giftData.gift_prd_info.selected_opt[i].opt_value =  $(\"#prod_option_\" + i).val();\n                            }\n                            $scope.giftData.gift_prd_info.ord_dtl_sn = data.ord_dtl_sn;\n                        }else{\n                            // 조회 실패\n                            var err_msg = data.error_msg;\n                            if(err_msg == undefined || err_msg == \"\"){\n                                err_msg = \"변경 사항을 저장하지 못했습니다.\";\n                            }\n                            alert(err_msg);\n                        }\n                    })\n                    .error(function(){\n                        console.log('Data Error : 옵션 변경');\n                        //$scope.UIStatus.isDataLoading = false;\n                    });\n                };        \n                \n                //상품 기술서 팝업 =================\n                $scope.productDetailPop = false; //product detail popup \n                $scope.detailHtml = \"\";                \n                $scope.ProductDetailLayer = function(){ //open\n                    var reqParam = {\n                        goods_no : $scope.giftData.gift_prd_info.goods_no\n                    };                    \n                    $http.get(LotteCommon.productProductDetailHtmlData, {params:reqParam})\n                        .success(function(result) {\n                            var data = result.max;\n                            data = $scope.replaceAll(data,'\\\\\"', '\"');\n                            data = $scope.replaceAll(data,\"&#34;\", \"'\");\n                            $scope.detailHtml = $scope.replaceAll(data,\"\\r\\n\", \"\");\n                            $scope.productDetailPop = true;\n                        }).error(function () {\n\n                    });                    \n                    \n                }                \n                $scope.closeProductDetailLayer = function(){ //close\n                    $scope.productDetailPop = false;\n                }\n                $scope.replaceAll = function (str, searchStr, replaceStr) {\n                    if (str != undefined && str != null && str != \"\") {\n                        str = str.split(searchStr).join(replaceStr);\n                    }\n                    return str;\n                };\n                //상품 기술서 팝업 =================   \n                \n                //링크 이동 \n                $scope.gotoLink = function(item, index){\n                    var tclick = \"&tclick=m_DC_SrhResult_Clk_Prd_idx\" + (index + 1);\n                    /*\n                    index = index + 1;\n                    if(index < 10){\n                        tclick = tclick + \"0\" + index;\n                    }else{\n                        tclick = tclick + index;\n                    }\n                    */\n                    window.location.href =  LotteCommon.prdviewUrl + \"?\" + $scope.baseParam + \"&goods_no=\" + item.goods_no + tclick;     \n                };  \n                \n                \n                 //옵션 선택시 품절상품인 것 찾아서 안보이게 처리 ======================= 옵션 품절 처리 ==========================\n                $scope.initOptCheck = function(){\n                    var key = [0];\n                    var optlist = $scope.giftData.gift_prd_info.opt_list;                    \n                    for(var k = 0; k < optlist[0].opt_value_lst.length;k++){\n                        key[0] = optlist[0].opt_value_lst[k];\n                        if(optlist.length > 1){\n                            if($scope.treecheck(key, 1, optlist)){    \n                                $(\"#prod_option_0\").find(\"option\").eq(k+1).hide();\n                            }    \n                        }else{                            \n                            if($scope.checkZero(key)){ //재고 0인 것이 있으면\n                                $(\"#prod_option_0\").find(\"option\").eq(k+1).hide();\n                            }    \n                        }\n                    }                     \n                }\n                \n                $scope.checkOptCnt = function(index){\n                    //초기화  : 선택한 옵션 밑으로 초기화              \n                    var optlist = $scope.giftData.gift_prd_info.opt_list;\n                    if(optlist.length > 1){\n                        var key = [];                        \n                        var checkTime = true; //선택한 하위 옵션 한개만 품절 설정하도록 함\n                        var result;\n                        for(var i=0; i< optlist.length; i++){\n                            if(i > index){\n                                $(\"#prod_option_\" + i).find(\"option\").show();\n                                optlist[i].selectID = 0;\n                                //하위 옵션 검색\n                                //중간 옵션인 경우\n                                if(i < optlist.length - 1){\n                                    if(checkTime){\n                                        //하위 옵션의 레벨만큼 루프돌면서 체크 \n                                        //하위 옵션이 전체가 품절이어야 함.\n                                        key.push(0);\n                                        for(var k = 0; k < optlist[i].opt_value_lst.length;k++){\n                                            key[i] = optlist[i].opt_value_lst[k];\n                                            if($scope.treecheck(key, i + 1, optlist)){\n                                                $(\"#prod_option_\" + i).find(\"option\").eq(k+1).hide();\n                                            }    \n                                        }                                                                             \n                                        checkTime = false;\n                                    }\n                                }else{ //마지막 옵션인 경우\n                                    if(checkTime){\n                                        key.push(0);\n                                        for(var k = 0; k < optlist[i].opt_value_lst.length;k++){\n                                            key[i] = optlist[i].opt_value_lst[k];\n                                            result = $scope.checkZero(key);\n                                            //console.log(key[i], result);\n                                            if(result){ //재고 0인 것이 있으면\n                                                $(\"#prod_option_\" + i).find(\"option\").eq(k+1).hide();\n                                            }    \n                                        }                                         \n                                    }\n                                }                            \n                            }else{                            \n                                if(optlist[i].selectID == 0){\n                                    //상위 옵션을 선택하지 않으면 그 밑으로 다시 초기화 \n                                    for(; i< optlist.length; i++){\n                                        optlist[i].selectID = 0;\n                                    }\n                                    break;    \n                                }else{\n                                    //상위옵션 저장\n                                    key.push($(\"#prod_option_\" + i).val());\n                                }                            \n                            }\n                        }\n                        \n                    }\n                }    \n                $scope.treecheck = function(key, level, list){\n                    var key2, j;\n                    var rvalue = true;\n                    //서브노드 검색\n                    if(level < list.length - 1){ //마지막이 아니면                        \n                        key2 = key.concat(0);\n                        for(j = 0; j < list[level].opt_value_lst.length;j++){\n                            key2[level] = list[level].opt_value_lst[j];\n                            if(!$scope.treecheck(key2, level + 1, list)){ \n                                j = list[level].opt_value_lst.length;\n                                rvalue = false;\n                            }    \n                        }\n                    }else{ //마지막이면 \n                        key2 = key.concat(0);\n                        for(j = 0; j < list[level].opt_value_lst.length;j++){                            \n                            key2[level] = list[level].opt_value_lst[j];\n                            var result = $scope.checkZero(key2);\n                            if(!result){ //재고 0이 아닌것이 있으면                                  \n                                j = list[level].opt_value_lst.length;\n                                rvalue = false;                                 \n                            }                                    \n                        }\n                    }\n                    return rvalue;\n                }\n                $scope.checkZero = function(obj){\n                    var cnt = 0;\n                    var return_value = true;\n                    for(var i=0; i<$scope.zeroOpt.length; i++){\n                        cnt = 0;                        \n                        for(var i2=0; i2< $scope.zeroOpt[i].length; i2++){                            \n                            if(obj[i2] == $scope.zeroOpt[i][i2]){\n                                cnt ++;\n                            }                           \n                        }\n                        if(cnt == $scope.zeroOpt[i].length){\n                            i = $scope.zeroOpt.length;\n                            return_value = false; //일치하는게 있으면                            \n                        }\n                    }\n                    return return_value;;                    \n                }\n                \n               if(!$scope.appObj.isApp){\n                   $scope.appDownBann = true;\n               }\n\n               $scope.appDownBnrClose = function(){\n                   $scope.appDownBann = false;\n               }\n                \n            }\n        };\n    }]);\n       \n})(window, window.angular);\n"]}