function onYouTubeIframeAPIReady(){console.info("call"),player=new YT.Player("player",{videoId:$(".vodBox").attr("youtubeID"),playerVars:{rel:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerStateChange(a){1==a.data?$(".recom").hide():2==a.data&&$(".recom").show()}function onPlayerReady(a){$(window).scroll(function(){pauseVideo()}),$("#wrapper").on("touchend",function(){($("#main_mylotte").hasClass("on")||$("#s_category").hasClass("on")||!$(".pape span").hasClass("swiper-slide-active"))&&pauseVideo()})}!function(a,b,c){"use strict";function d(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals;if(b.isDefined(g&&g.$template)){var g=e.$new(),h=a.current;m=i(g,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()}),l=h.scope=g,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function e(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());f.controller&&(g.$scope=d,g=b(f.controller,g),f.controllerAs&&(d[f.controllerAs]=g),e.data("$ngControllerController",g),e.children().data("$ngControllerController",g)),h(d)}}}a=b.module("ngRoute",["ng"]).provider("$route",function(){function a(a,c){return b.extend(Object.create(a),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){return a="?"===d?d:null,d="*"===d?d:null,e.push({name:c,optional:!!a}),b=b||"",""+(a?"":b)+"(?:"+(a?b:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,g,h,i,j,k){function l(a){var d=s.current;(q=(p=n())&&d&&p.$$route===d.$$route&&b.equals(p.pathParams,d.pathParams)&&!p.reloadOnSearch&&!r)||!d&&!p||c.$broadcast("$routeChangeStart",p,d).defaultPrevented&&a&&a.preventDefault()}function m(){var a=s.current,d=p;q?(a.params=d.params,b.copy(a.params,g),c.$broadcast("$routeUpdate",a)):(d||a)&&(r=!1,(s.current=d)&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(o(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),h.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?i.get(a):i.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),c=k.getTrustedResourceUrl(c),b.isDefined(c)&&(d.loadedTemplateUrl=c,a=j(c))),b.isDefined(a)&&(e.$template=a),h.all(e)}}).then(function(e){d==s.current&&(d&&(d.locals=e,b.copy(d.params,g)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==s.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function n(){var c,f;return b.forEach(d,function(d,g){var h;if(h=!f){var i=e.path();h=d.keys;var j={};if(d.regexp)if(i=d.regexp.exec(i)){for(var k=1,l=i.length;l>k;++k){var m=h[k-1],n=i[k];m&&n&&(j[m.name]=n)}h=j}else h=null;else h=null;h=c=h}h&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function o(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var p,q,r=!1,s={routes:d,reload:function(){r=!0,c.$evalAsync(function(){l(),m()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw f("norout");var c={},d=this;b.forEach(Object.keys(a),function(b){d.current.pathParams[b]||(c[b]=a[b])}),a=b.extend({},this.current.params,a),e.path(o(this.current.$$route.originalPath,a)),e.search(b.extend({},e.search(),c))}};return c.$on("$locationChangeStart",l),c.$on("$locationChangeSuccess",m),s}]});var f=b.$$minErr("ngRoute");a.provider("$routeParams",function(){this.$get=function(){return{}}}),a.directive("ngView",d),a.directive("ngView",e),d.$inject=["$route","$anchorScroll","$animate"],e.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteUtil");d.service("StyleRecom",["$window","$http","LotteCommon","commInitData",function(a,b,d,e){function f(a){if(a==c)return[];if(a.status===!1)return console.warn(a.message),j(),[];if(a.list==c)return[];var b,d,e,f,h=a.list,i=[];for(var k in h)for(e=h[k],d=e.length,b=0;d>b;b++)f=e[b],f.category=parseInt(k,10),f.score=Math.round(100*f.score),f.rx1=Math.round(1e4*f.rx1)/100,f.rx2=Math.round(1e4*f.rx2)/100,f.ry1=Math.round(1e4*f.ry1)/100,f.ry2=Math.round(1e4*f.ry2)/100,f.genCd=a.genCd,i.push(f);return i=i.sort(g)}function g(a,b){var c=a.score,d=b.score;return c>d?-1:d>c?1:0}function h(a,b){var d=[];for(var e in a)if(getScope().isValidArray(a[e])){d=a[e];break}if(d==c||0==d.length)return void b([]);for(var f,g=d.length,h=0;g>h;h++)f=d[h],f.imgUrl2=f.imgUrl.replace(/_280/g,"_550");b(d)}function i(a,b){try{for(var d=b.length,e=0,f=0;d>f;f++)o[a+b[f]]!=c&&(e|=o[a+b[f]]);return e}catch(g){}return""}function j(){var a=getScope(),b=new Date,c=b.getHours(),d=10>c?"0"+c:""+c,e=a.tClickBase;""!=m&&(e=m),a.sendTclick(e+"ProdDetail_DataError_"+d)}var k=d.stylePushPrdData,l="/json/search/m/styleRecommCateGrpList.json",m="",n=400;this.setDotAPIUrl=function(a){k=a},this.setTclickBase=function(a){m=a},this.setSearchItemLimit=function(a){n=a};var o={F1:536870913,F2:536870914,F4:536870916,F8:536870920,F16:536870928,F32:536870944,M2:1073741826,M4:1073741828,M16:1073741840,M32:1073741856,A1:1,A2:2,A4:4,A8:8,A16:16,A32:32};this.gender={female:"F",male:"M",all:"A"},this.category={dresses:1,pants:2,shorts:4,skirts:8,tops:16,outers:32},this.detect=function(a,b,e){return a==c||""==a?(console.warn("NO IMAGE"),!1):b==c||"function"!=typeof b?(console.warn("NO CALLBACK FUNCTION"),!1):(isNaN(e)&&(e=""),$.ajax({url:d.styleRecomDetect+"?url="+encodeURIComponent(a)+"&goods_no="+e,type:"get",dataType:"json",async:!0,success:function(a){b(f(a))},error:function(a){j(),b([])}}),void getScope().sendTclick("DC_StyleReco_Detect"))},this.search=function(a,b,e,f,g,k){if(a==c||""==a)return console.warn("NO ID"),!1;if(b==c||""==b)return console.warn("NO SEX"),!1;if(e==c||0==e.length)return console.warn("NO CATEGORY"),!1;if("object"!=typeof e&&(e=[e]),g==c||"function"!=typeof g)return console.warn("NO CALLBACK FUNCTION"),!1;isNaN(k)&&(k="");var l=i(b,e);if(""==l)return console.warn("INCORRECT CATEGORY"),!1;var m={id:a,category:l,goods_no:k,recommcgcd:1,count:300},n=d.styleRecomSearch;if(f!=c||""!=f){var o=parseInt(f,10);isNaN(o)||(m.recommcgcd=o)}$.ajax({url:n,type:"POST",data:m,dataType:"JSON",async:!0,method:"POST",success:function(a){h(a,g)},error:function(a){j(),g([])}}),getScope().sendTclick("DC_StyleReco_Search")},this.cateList=function(a){$.ajax({url:l,type:"get",dataType:"json",async:!0,success:function(b){a(b.cateGrpList||[])},error:function(b){a([])}})}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular);var isSwipeActive=!1,isSwipeLock=!1,isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1;!function(a,b,c){"use strict";var d=[],e=b.module("lotteNgSwipe",[]);e.controller("lotteNgSwipeCtrl",["$scope",function(a){}]),e.factory("lotteNgSwipe",["$interval","$timeout","$window",function(c,d,e){function f(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function g(c,d,e){if(e.SLIDE_SWIPE){var f=d[0].offsetWidth-e.LEFT_MARGIN-e.RIGHT_MARGIN;0==f&&(f=a.innerWidth);var g=f/e.DISP_COUNT,h=0;if(s=d[0].offsetWidth-g-e.LEFT_MARGIN,!(d.find("ul, ol").eq(0).find(">li").length>=1||d.find(">li").length>=1)||e.LOADING_ELEMENT||e.LEFT_ELEMENT||e.RIGHT_ELEMENT)e.LOADING_ELEMENT||b.element(d).eq(0).css(q());else{if(-1!=d.context.className.indexOf("recommond_swipe"))var i=d.find(">li");else var i=d.find("ul, ol").eq(0).find(">li").length>1?d.find("ul, ol").eq(0).find(">li"):d.find(">li");var j=c,k=0,l=null;for(k;k<i.length;j++,k++)l=i.eq(j),h=j>=k||0>j?0>j?g*d.find(">li").length+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*k+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*-(c-j)+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0),-1!=d.context.className.indexOf("latest_swipe")&&a.innerWidth>=640?(f=a.innerWidth,l.css({width:f/2,backfaceVisibility:"hidden",position:"absolute",left:h})):l.css({width:f/e.DISP_COUNT,backfaceVisibility:"hidden",position:"absolute",left:h}),j+1>=d.find(">li").length&&(j=-1);t=i.length,b.element(d).eq(0).css(p(0)),b.element(d).find(">li").css("top",0).eq(0).css("position","relative")}}}function h(a){for(var b={totalwidth:0,width:[],paddingleft:[],marginleft:[],paddingright:[],marginright:[]},c=0;c<a.find(">li").length;c++){var d=a.find(">li:eq("+c+")");b.width[c]=parseInt(d.width()),b.width[c]+=b.marginleft[c]=parseInt(d.css("margin-left")),b.width[c]+=b.marginright[c]=parseInt(d.css("margin-right")),b.width[c]+=b.paddingleft[c]=parseInt(d.css("padding-left")),b.width[c]+=b.paddingright[c]=parseInt(d.css("padding-right")),b.totalwidth+=b.width[c]}return b}function i(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}function j(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(0,c.SWIPE_SPEED)),(c.LOADING_ELEMENT||c.LEFT_ELEMENT||c.LEFT_ELEMENT)&&b.element(c.LOADING_ELEMENT).css(p(0,c.SWIPE_SPEED))}function k(c,d,e,f){var g=h(c);if(a.innerWidth-d.LEFT_MARGIN-d.RIGHT_MARGIN>g.totalwidth)return!1;for(var j=a.innerWidth/2,k=g.width[e]/2,m=0,n=0;n<g.width.length&&n!=e;n++)m+=g.width[n];var o=i(c),q=-1*(m-j+k);f?(q>0?q=0:q<-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)&&(q=-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)),b.element(c).eq(0).css(p(q))):Math.abs(m)>j&&g.totalwidth-a.innerWidth+d.RIGHT_MARGIN>Math.abs(q)?l(c[0],d,o,q):Math.abs(m)<=j?l(c[0],d,o,0):l(c[0],d,o,-1*(g.totalwidth-a.innerWidth)-d.RIGHT_MARGIN)}function l(a,c,d,e){return d==e?!0:(b.element(a).on(u,function(a){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(e,c.SWIPE_SPEED)),void(c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(e,c.SWIPE_SPEED))))}function m(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED))}function n(a,c,d,e,f){return 0>d?f=f+c.DISP_COUNT>c.MAX_SLIDE?c.MAX_SLIDE:f+c.DISP_COUNT:f-=c.DISP_COUNT,c.EDGE_LAST&&(f==t-1||f==t-2&&d>0)&&(e-=s),b.element(a).on(u,function(d){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),g(f,a,c),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED)),f}function o(b,c,d){var e=i(b);return e>0?(m(b[0],c,e,0),e=0):Math.abs(e)+a.innerWidth>Math.abs(d.totalwidth)+c.RIGHT_MARGIN&&(m(b[0],c,e,d.totalwidth-a.innerWidth+c.RIGHT_MARGIN),e=-1*(d.totalwidth-a.innerWidth)),e}function p(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function q(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}}function r(a){return a||(a=""),{"-webkit-transition":a,"-moz-transition":a,"-o-transition":a,transition:a}}var s=0,t=0,u="transitionend.ngswipe webkitTransitionEnd.ngswipe oTransitionEnd.ngswipe MSTransitionEnd.ngswipe";return{unbind:function(a){a.off("touchstart.ngswipe mousedown.ngswipe touchcancel.ngswipe touchmove.ngswipe mousemove.ngswipe touchend.ngswipe mouseup.ngswipe")},bind:function(d,g,k){var l,r,u,v,w=d[0],x=!1,y=g.FIRST_INDEX,z=b.element(d).scope(),A=!1,B=!1,C=[],D=0,E=0,F=0,G=!0,H=(g.DISP_COUNT,navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1),I=!0,J=30,K=b.element(e).scrollTop();g.SLIDE_MENU_SWIPE&&b.element(w).css(p(0)),d.on("touchstart.ngswipe mousedown.ngswipe",function(c){if(c.stopPropagation(),H){var j=b.element(e).scrollTop();j+J>K&&K>j-J?I=!0:(I=!1,K=j)}A=!1,B=!1,g.SLIDE_MENU_SWIPE&&(C=h(d),G=a.innerWidth-g.LEFT_MARGIN-g.RIGHT_MARGIN>C.totalwidth?!1:!0),isSwipeLock||G&&(a.innerWidth>=900&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_640:g.RESPONSIVE_SWIPE&&(g.DISP_COUNT=g.RESPONSIVE_SWIPE_320),g.MAX_SLIDE=d.find(">li").length-1,(!(g.MAX_SLIDE<1)||g.LOADING_ELEMENT||g.LEFT_ELEMENT||g.RIGHT_ELEMENT)&&(u=f(c),u.x+=g.EDGE_LAST&&y==t-1?s:0,x=!0,l=0,r=0,isSwipeActive=!0,v=u,y=z.swipeIdx,E=(new Date).getTime(),g.SLIDE_MENU_SWIPE&&(C=h(d),D=i(d)),k.start&&k.start(u,c),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none")))}),d.on("touchcancel.ngswipe",function(a){x=!1,j(w,g,u,v)}),d.on("touchmove.ngswipe mousemove.ngswipe",function(a){if(x&&G&&u){var c=f(a);c.x+=g.EDGE_LAST&&y==t-1?s:0,l+=Math.abs(c.x-v.x),r+=Math.abs(c.y-v.y),v=c;var d,e;d=Math.abs(c.x-u.x),e=Math.abs(c.y-u.y),A||(B=d>e,A=!0);var h=v.x-u.x;if(h>0?a.moveto="right":a.moveto="left",B&&(I||!H)){a.preventDefault(),a.stopPropagation();g.SLIDE_MENU_SWIPE?b.element(w).css(p(c.x-u.x+D)):b.element(w).css(p(c.x-u.x)),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(c.x-u.x))),"left"==a.moveto?(g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(p(0))):(g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(p(0))),k.move&&k.move(c,a)}}}),d.on("touchend.ngswipe mouseup.ngswipe",function(h){if(h.stopPropagation(),A=!1,B&&(I||!H)){if(!x||!G)return;x=!1,isSwipeActive=!1;var i=d[0].offsetWidth,l=Math.abs(v.x-u.x),r=v.x-u.x;if(F=(new Date).getTime(),r>0?h.moveto="right":h.moveto="left",h.max=g.MAX_SLIDE,g.SLIDE_MENU_SWIPE){var z=v.x-u.x+D,J=-80,L="left"==h.moveto?z+J:z-J,M="left"==h.moveto?-5:5;if(Math.abs(v.x-u.x)>5&&400>=F-E)var N=c(function(){z+=M,b.element(d).eq(0).css(p(z)),(L>=z&&"left"==h.moveto||z>=L&&"right"==h.moveto||z>0||z<=-C.totalwidth+a.innerWidth)&&(D=o(d,g,C),c.cancel(N))},10);else D=o(d,g,C)}else if(i*g.MAX_RATIO<=l){if(g.SLIDE_SWIPE){if(y>=g.MAX_SLIDE&&0>r||0>y&&r>0||0==y&&r>0||g.MAX_SLIDE+1<=g.DISP_COUNT||y+g.DISP_COUNT>g.MAX_SLIDE&&"left"==h.moveto)return void j(w,g,u,v+(g.EDGE_LAST&&y==t-1?s:0));if(g.SLIDE_SWIPE)var i=i-g.LEFT_MARGIN-g.RIGHT_MARGIN;y=n(d,g,r,i,y),h.idx=y}else m(w,g,r,i);var O=f(h);O.x+=g.EDGE_LAST&&y==t-1?s:0;k.end&&k.end(O,h)}else j(w,g,u,v),b.element(d).eq(0).css(q())}H&&(K=b.element(e).scrollTop(),I=!0),u=null})},moveSwipeX:n,positionReCalc:g,resetSwipe:j,moveMenuSwipe:k,getListInfo:h}}]),e.directive("lotteNgListSwipe",["$window","$parse","$timeout","lotteNgSwipe",function(e,f,g,h){return{link:function(i,j,k){function l(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function m(){var c=j[0];if(a.innerWidth>=900&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_640:p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),0!=i.swipeIdx&&p.DISP_COUNT>1){var d=i.swipeIdx%p.DISP_COUNT;0!=d&&(i.swipeIdx-=d)}if(i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),p.SLIDE_MENU_SWIPE){var e=h.getListInfo(j);e.width.length>1&&a.innerWidth-p.LEFT_MARGIN-p.RIGHT_MARGIN>e.totalwidth&&b.element(c).css(l(0))}p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)}function n(a,b){if(!(LeftSwipeStartExec&&"left"==a.moveto||RightSwipeStartExec&&"right"==a.moveto)){"left"==a.moveto?LeftSwipeStartExec=!0:RightSwipeStartExec=!0;var c=null;i.$apply(function(){return c=q(i.$parent,{$event:{idx:a.idx,max:b.MAX_SLIDE,moveto:a.moveto}})})}}function o(a,c){if(isSwipeActive)return g(function(){o(a,c)},100),!1;var d=null;i.$apply(function(){return d=r(i.$parent,{$event:{idx:a.idx,max:c.MAX_SLIDE,moveto:a.moveto}}),"translateX_Reset"==d&&g(function(){b.element(j).eq(0).css(l(0))},500),d})}var p={MAX_RATIO:k.swipeMaxRatio?k.swipeMaxRatio:.3,MIN_DISTANCE:k.swipeMinDistance?k.swipeMinDistance:25,SWIPE_LOOP:k.swipeLoop?k.swipeLoop:!1,LEFT_ELEMENT:k.swipeLeftEl?k.swipeLeftEl:null,RIGHT_ELEMENT:k.swipeRightEl?k.swipeRightEl:null,LOADING_ELEMENT:k.swipeLoadingEl?k.swipeLoadingEl:null,LOADING_ELEMENT_ZINDEX:k.swipeLoadingElZindex?k.swipeLoadingElZindex:50,SLIDE_SWIPE:k.swipeSlideItem?k.swipeSlideItem:!1,SLIDE_MENU_SWIPE:k.swipeSlideMenu?k.swipeSlideMenu:!1,RESPONSIVE_SWIPE:k.swipeResponsive?k.swipeResponsive:!1,RESPONSIVE_SWIPE_320:parseInt(k.swipeResponsive320)?parseInt(k.swipeResponsive320):1,RESPONSIVE_SWIPE_640:parseInt(k.swipeResponsive640)?parseInt(k.swipeResponsive640):2,RESPONSIVE_SWIPE_900:parseInt(k.swipeResponsive900)?parseInt(k.swipeResponsive900):2,AUTO_HEIGHT:k.swipeAutoheight?k.swipeAutoheight:!1,DISP_COUNT:k.swipeDispCount?parseInt(k.swipeDispCount):1,FIRST_INDEX:k.swipeFirstIndex?parseInt(k.swipeFirstIndex):0,LEFT_MARGIN:k.swipeLeftMargin?parseInt(k.swipeLeftMargin):0,RIGHT_MARGIN:k.swipeRightMargin?parseInt(k.swipeRightMargin):0,START_EXEC:k.swipeStartExec?k.swipeStartExec:null,EXEC:k.swipeEndExec?k.swipeEndExec:null,LIST_SCOPE:k.swipeListModel?k.swipeListModel:null,SWIPE_ID:k.swipeId?k.swipeId:"",MAX_SLIDE:0,SWIPE_SPEED:k.swipSpeed?k.swipSpeed:150,IGNORE_DESTORY:k.ignoreDestory?k.ignoreDestory:!1,EDGE_LAST:k.swipeEdgeLast?!0:!1};i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),i.swipeBullet=[];var q=null,r=null;if(null!=p.START_EXEC&&(q=f(p.START_EXEC)),null!=p.EXEC&&(r=f(p.EXEC)),p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.SLIDE_MENU_SWIPE&&(i.moveMenuSwipe=function(a){i.moveMenuSwipeFnc(a,!1)},i.moveMenuSwipeFnc=function(a,b){h.moveMenuSwipe(j,p,a,b)}),p.SLIDE_MENU_SWIPE||p.SLIDE_SWIPE||(i.translateX_Reset=function(){console.log("스와이프 좌표 리셋"),b.element(j).eq(0).css(l(0)),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css(l(0))}),i.setSlide=function(a){0>a?a=p.MAX_SLIDE:a>p.MAX_SLIDE&&(a=0),i.swipeIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.goSlide=function(a){h.positionReCalc(a,j,p),i.swipeIdx=i.swipeBulletIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.nextSlide=function(){i.swipeIdx!=p.MAX_SLIDE&&(h.moveSwipeX(j,p,-1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx+=p.DISP_COUNT,i.swipeBulletIdx++,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.beforeSlide=function(){0!=i.swipeIdx&&(h.moveSwipeX(j,p,1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx-=p.DISP_COUNT,i.swipeBulletIdx--,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.ngswipeInit=function(){if(p.SLIDE_SWIPE){i.swipeBullet=[],p.MAX_SLIDE=j.find(">li").length;for(var a=0;a<p.MAX_SLIDE/p.DISP_COUNT;a++)i.swipeBullet.push(a)}p.MAX_SLIDE<i.swipeIdx?(i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),h.positionReCalc(i.swipeIdx,j,p),g(function(){i.$apply()})):i.swipeIdx||(i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),i.swipeIdx=p.FIRST_INDEX,g(function(){i.$apply()}))},i.resetSwipePos=function(){h.positionReCalc(i.swipeIdx,j,p)},null!=p.LIST_SCOPE){var s=null;i.$watch(p.LIST_SCOPE,function(a,b){if(a!=c&&a.length>=1){if(s!=a[0]&&(i.swipeIdx=0,i.swipeBulletIdx=0,s=a[0]),"recommondSwipe_0"==k.swipeId||"lastestSwipe_0"==k.swipeId)var d=2e3;else var d=100;g(function(){i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)},d)}},!0)}m(),-1==d.indexOf(p.SWIPE_ID)&&d.push(p.SWIPE_ID);var t=b.element(e);t.on("orientationchange.ngswipe resize.ngswipe",m),i.$on("$destroy",function(){h.unbind(j)}),h.bind(j,p,{start:function(a,b){},move:function(a,b){return null!=p.START_EXEC?(isLoadingData=!0,n(b,p)):void 0},cancel:function(){isLoadingData=!1},end:function(a,b){return isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1,i.swipeIdx=b.idx?b.idx:0,i.swipeBulletIdx=parseInt(b.idx/p.DISP_COUNT),i.$apply(),null!=p.EXEC?o(b,p):void 0}})}}}])}(window,window.angular);var callDownCpn;!function(a,b,c){"use strict";var d=b.module("lotteMainPop",[]);d.controller("lotteMainPopCtrl",["$scope","$window","$location","$http","LotteCommon","LotteUtil","LotteCookie","LotteStorage","AppDownBnrService","LotteLink","commInitData",function(a,c,d,e,f,g,h,i,j,k,l){a.loadMainPopup=function(d){function m(){e.get(f.mainPopupData,{params:o}).success(function(b){if(!i.getSessionStorage("appDownBnrHide")&&!a.appObj.isApp){var c=j.appDownBnrLoadDefer;b.app_down_popup&&b.app_down_popup.length>0&&c.resolve(b.app_down_popup)}a.mainPop=b.current_page_popup,a.hideActionBar=g.isApp()&&"F"==a.mainPop.ppp_prt_tp_cd&&"20"!=d.pppTgtPgCd&&"30"!=d.pppTgtPgCd?!0:!1,0!=a.mainPop.ppp_sn&&(callDownCpn=function(){a.dupCouponIssue("88045"),a.sendTclick("m_abtest_naverbanner_01")},a.dupCouponIssue=function(b){if(a.loginInfo.isLogin)b.length>0&&e({url:f.couponRegCouponData+"?"+a.baseParam,data:"cpn_issu_no="+b,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(b){b.result=b.result.replace("\\n"," "),"undefined"!=typeof g.getParameter("cn")&&"140924"==g.getParameter("cn")&&b.result.indexOf("발급받은")>-1?(alert("이달의 앱 쿠폰을 모두 받으셨습니다. 참좋은혜택 등급 쿠폰도 확인하세요!"),location.href=f.gdBenefitUrl+"?"+a.baseParam):alert(b.result),a.popClose()}).error(function(a){"1000"==a.error.response_code?alert(a.error.response_msg):ajaxResponseErrorHandler(a,function(){})});else{var c="?"+a.baseParam;c+="&targetUrl="+encodeURIComponent(location.href),i.setSessionStorage("alliancePopupPPPSN",a.mainPop.ppp_sn),location.href=f.loginUrl+c}},a.cookieName=a.mainPop.cookie_nm,null!=i.getSessionStorage("alliancePopupPPPSN")&&a.loginInfo.isLogin?a.dupCouponIssue(a.mainPop.cpn_no):a.screenType>1&&10==d.pppTgtPgCd||(a.isOpenPop=!0,a.popOpen()),i.delSessionStorage("alliancePopupPPPSN"))}).error(function(a){console.log("Error Data :  메인팝업")})}var n=l.query,o={ppp_tgt_pg_cd:d.pppTgtPgCd,cn:n.cn,udid:n.udid,schema:n.schema};g.getParameter("testDate")&&(o.testDate=g.getParameter("testDate")),a.hideActionBar=!1,a.cookieName=null,a.appActionBarHide=function(){a.appObj.isApp&&a.hideActionBar&&(location.href="lottebridge://lotteapps/fullscreenhide")},a.appActionBarShow=function(){a.appObj.isApp&&a.hideActionBar&&(location.href="lottebridge://lotteapps/fullscreenshow")},a.popOpen=function(){b.element(".main_popup").show()},a.popClose=function(){a.sendTclick("m_RDC_popup_Close"),b.element(".main_popup").remove()},a.popToday=function(){a.sendTclick("m_RDC_popup_stoptoday"),h.setCookie(a.cookieName,"Y",1),a.popClose()},a.chkAlliancePopupObj={flag:!0,imgPath:"",deepLinkFlag:!0,tclick:""},a.closeAlliancePopup=function(){a.chkAlliancePopupObj.flag=!1},a.allianceExcuteApp=function(b){var c=a.chkAlliancePopupObj.deepLinkFlag?null:"http://m.lotte.com";a.chkAlliancePopupObj.tclick?a.chkAlliancePopupObj.tclick:null;k.appDeepLink("lotte",c,a.chkAlliancePopupObj.tclick,b)},b.element(c).on("load",m)}}]),d.config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/)}]),d.directive("lotteMainPopup",["$window",function(a){return{templateUrl:"/lotte/resources_dev/layer/main_popup.html",controller:"lotteMainPopCtrl",replace:!0,link:function(a,b,c){a.isOpenPop=!1,a.loadMainPopup(c)}}}]),d.controller("appDownBnrCtrl",["$scope","AppDownBnrService",function(a,b){a.appBnrInfo=null,b.appDownSettingData().then(function(b){a.appBnrInfo=b})}]),d.directive("appDownBnr",["$location","LotteLink","LotteStorage","AppDownBnrService",function(a,b,c,d){return{templateUrl:"/lotte/resources_dev/layer/app_down_bnr.html",controller:"appDownBnrCtrl",replace:!0,link:function(e,f,g){e.appDown=function(){var c=null,f=d.appDownBnrInfo.linkUrl+"",g=""!=d.appDownBnrInfo.tclick?d.appDownBnrInfo.tclick:null;"./"!=f&&(c="http"==f.substring(0,4)?d.appDownBnrInfo.linkUrl:"/"==f.substring(0,1)?a.protocol()+"://"+a.host()+f:a.protocol()+"://"+a.host()+"/"+f),g&&e.sendTclick(g),b.appDeepLink("lotte",c,null,d.appDownBnrInfo.referrer)},e.appDownBnrClose=function(){return c.setSessionStorage("appDownBnrHide",!0),d.appDownBnrInfo.isShowFlag=!1,!1}}}}])}(window,window.angular);var LOGIN_EXCEPTION="9004",player=null;isLoop=!1;var pauseVideo=function(){player.pauseVideo()};!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteSns","lotteSlider","lotteNgSwipe","ngRoute","lotteMainPop"]);d.config(["$routeProvider",function(a){a.when("/",{routeName:"Default"}).when("/planProductDetail",{routeName:"planProductDetail"}).otherwise({redirectTo:"/"})}]),d.service("Fnproductview",function(){this.replaceAll=function(a,b,d){return a!=c&&null!=a&&""!=a&&(a=a.split(b).join(d)),a},this.isEmpty=function(a){var b=!0;return a!=c&&null!=a&&""!=a&&"null"!=a&&(b=!1),b},this.getNumberFormat=function(a){var b=/(-?[0-9]+)([0-9]{3})/;for(a=10*parseInt(a/10);b.test(a);)a=(a+"").replace(b,"$1,$2");return a},this.getNumberFormat2=function(a){var b=/(-?[0-9]+)([0-9]{3})/;for(a=parseInt(a);b.test(a);)a=(a+"").replace(b,"$1,$2");return a},this.toNumber=function(a){if(a==c||null==a||""==a||"null"==a)return 0;var b=this.objectToString(a);try{if(!(b.indexOf(",")>=0))return Number(b);Number(this.replaceAll(b,",",""))}catch(d){}},
this.objectToString=function(a){return a==c?"":a.toString()},this.goUrl=function(a,b,c,d){if(null!=d){this.getTclickCd(b.BasicData.elotte_yn,d)}var e="";e=c.indexOf("?")>=0?c+"&"+b.baseParam:c+"?"+b.baseParam,a.location.href=e},this.goToLogin=function(a,b,c){var d="&targetUrl="+encodeURIComponent(a.location.href,"UTF-8");c.indexOf("?")>0?a.location.href=c+"&"+b.baseParam+d:a.location.href=c+"?"+b.baseParam+d},this.toTimeObject=function(a){var b=a.substr(0,4),c=a.substr(4,2)-1,d=a.substr(6,2),e=a.substr(8,2),f=a.substr(10,2),f=a.substr(10,2);return new Date(b,c,d,e,f)},this.getHourInterval=function(a,b){var d=a==c?new Date:this.toTimeObject(a),e=this.toTimeObject(b),f=36e5;return parseInt((e-d)/f,10)},this.getMinuteIntervalStr=function(a,b){var d=a==c?new Date:this.toTimeObject(a),e=this.toTimeObject(b),f=parseInt((e-d)/6e4,10),g=parseInt(f/60),h=parseInt(f%60);10>f/60&&(g="0"+parseInt(f/60)),10>f%60&&(h="0"+parseInt(f%60));var i=g+"시간 "+h+"분";return i},this.toTimeString=function(a,b){var d=a.getFullYear(),e=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes(),i=a.getSeconds();1==(""+e).length&&(e="0"+e),1==(""+f).length&&(f="0"+f),1==(""+g).length&&(g="0"+g),1==(""+h).length&&(h="0"+h),1==(""+i).length&&(i="0"+i);var j=""+d+e+f+g+h+i;return b!=c&&(j=b.replace("YYYY",d.toString()).replace("YY",d.toString()).replace("MM",e).replace("DD",f).replace("HH",g).replace("MN",h).replace("SS",i)),j},this.httpPost=function(a,b,c){var d={};return d.isError=!1,d.result=null,a({method:"POST",url:b,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)null!=a[c]&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},data:c}).success(function(a){return d.isError=!1,d.result=a,d}).error(function(a){return d.isError=!0,d.result=a,d}),d},this.getTclickCd=function(a,b){var c="";return c=a?"el_m_o_"+b:"m_o_"+b},this.getObjListKey=function(a,b,c){for(var d=null,e=0;e<a.length;e++){var f=this.getObjKeyValue(a[e],b);if(f==c){d=a[e],d.disp_prio_rnk=e+1;break}}return d},this.getObjKeyValue=function(a,c){var d=null,e=!0;return b.forEach(a,function(a,b){1==e&&b==c&&(d=a,e=!1)}),d},this.getSubImgName=function(a){var b="";if(a.length>0){var c=a.split("|");b=c[0]}return b},this.logrecom_type_view_jsonp=function(a){for(var b=new String,c=0;c<a.items.length;c++)c>0&&(b+=","),b+="'"+a.items[c]+"'";return b}}),d.controller("ProductCtrl",["$http","$rootScope","$location","$scope","LotteCommon","LotteUtil","commInitData","Fnproductview","$timeout","$interval","$window","$compile","LotteCookie","StyleRecom","LotteStorage","AppDownBnrService","$route",function(d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u){function v(){var a=-1;switch(E){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:a=E;break;case 15:a=9;break;case 40:a=10;break;case 65:a=11}if(E++,E>90&&(E=0),a>=0){var c=-60*(a%10),d=10>a?0:-60;b.element(".recom .recom_btn").css("background-position",c+"px "+d+"px")}}g.showWrap=!0,g.contVisible=!0,g.subTitle="상품상세",g.screenID="product_view_2017",g.alert=function(a){o.alert(a)},g.Math=o.Math,g.sendTclick("m_RDC_ProdDetail_Enter");b.element("body")[0];g.stayLoading=!1,g.jsonLoading=!1,g.coachMarkPop=!1,g.alertTemplate={content:"",button:""};var w={type:"ship",onOff:{ship:!0,quick:!0,smartpic:!0},showMethodBox:!0,smartpicOnly:!1,smartpic:!1,crosspic:!1,quick:!1};g.pageUI={baseParam:g.baseParam,loadingFail:!1,isMyBrand:!1,showDatePicker:!1,showBrandAdd:!1,showBrandAddResult:!1,showCartAddResult:!1,showPlanDetail:!1,productInfoMoreBtn:!1,productInfoMoreBtnUp:!1,productInfoGradient:!1,todayArriveShipInfo:!1,time:{serverTime:"",localTime:"",quickTimeS:"",quickTimeE:""},giftServiceInfo:{showPopup:!1,giftPkgImgUrl:null,futMsgImgUrl:null},planProduct:{show:!1,idx:0,goodsNo:0,showSelectBox:!1,data:{}},wish:{},data:{},chanel:{selectColorNo:"",imgUrl:"",data:{}},myBrand:{},myBrandStr:"",loadData:{product_detail:null,planPrdInfo:null,product_saleBest:null,product_similarStyle:null,product_comment:null,product_qna:null,product_brandBest:null,product_bestView:null,product_mdRecom:null,product_togePlan:null,chanel_relation_info:null,product_bottom_banner:null},isLoad:{product_detail:!1,product_comment:!1,chanel_relation_info:!1},reqParam:{},popupQuickInfo:!1,popupQuickInfo2:!1,popupSmartPickInfo:!1,option:{goodsNo:0,planIdx:0,quickDisp:!1,lpayShow:!1,searchKey:"",showSoldout:!1,selectBox:!1,selectOption:[],selectStep:1,selectedType:"",selectedIdx:0,selectedBox:!1,selectedItem:{gift:[],buy:[],cart:[]},selectedPrice:{gift:0,buy:0,cart:0},selectedCnt:{gift:0,buy:0,cart:0},minorityLimit:{gift:!1,buy:!1,cart:!1},selectDateInputItem:{idx:null,inputIdx:null},inputOption:[],planSelect:!1,calendar:!1,data:{},deliveryMethod:{gift:{},buy:{},cart:{}}},togeListOpen:!1,mdNotiOpen:!0,colorSelectIdx:null,styleIconShow:!0},b.copy(w,g.pageUI.option.deliveryMethod.gift),b.copy(w,g.pageUI.option.deliveryMethod.buy),b.copy(w,g.pageUI.option.deliveryMethod.cart);var x=s.getLocalStorage("productCoachMarkPop");!x&&(!g.appObj.isApp||g.appObj.isApp&&g.appObj.isAndroid&&g.appObj.verNumber<=295||g.appObj.isApp&&g.appObj.isIOS&&g.appObj.verNumber<=2840)&&(g.coachMarkPop=!0,s.setLocalStorage("productCoachMarkPop","1")),g.coachMarkPopClose=function(){g.coachMarkPop=!1},g.showStayLoading=function(){g.stayLoading=!0},g.hideStayLoading=function(){g.stayLoading=!1},l.isEmpty(k.query.upCurDispNo)||(g.pageUI.reqParam.upCurDispNo=l.objectToString(k.query.upCurDispNo)),l.isEmpty(k.query.curDispNo)||(g.pageUI.reqParam.curDispNo=l.objectToString(k.query.curDispNo)),l.isEmpty(k.query.goods_no)||(g.pageUI.reqParam.goods_no=l.objectToString(k.query.goods_no),g.op_goods_no=g.pageUI.reqParam.goods_no),l.isEmpty(k.query.wish_lst_sn)||(g.pageUI.reqParam.wish_lst_sn=l.objectToString(k.query.wish_lst_sn)),l.isEmpty(k.query.cart_sn)||(g.pageUI.reqParam.cart_sn=l.objectToString(k.query.cart_sn)),l.isEmpty(k.query.item_no)||(g.pageUI.reqParam.item_no=l.objectToString(k.query.item_no)),l.isEmpty(k.query.genie_yn)||(g.pageUI.reqParam.genie_yn=l.objectToString(k.query.genie_yn)),l.isEmpty(k.query.curDispNoSctCd)||(g.pageUI.reqParam.curDispNoSctCd=l.objectToString(k.query.curDispNoSctCd)),l.isEmpty(k.query.late_view_yn)||(g.pageUI.reqParam.late_view_yn=l.objectToString(k.query.late_view_yn)),l.isEmpty(k.query.cn)||(g.pageUI.reqParam.cn=l.objectToString(k.query.cn)),l.isEmpty(k.query.cdn)||(g.pageUI.reqParam.cdn=l.objectToString(k.query.cdn)),g.lpyaIconCheck=function(){if(g.pageUI.data.commonInfo.lpayDispYn){var a=new Date,b=a.getFullYear()+""+a.getMonth()+a.getDate(),c={show:!0,date:b},d=s.getLocalStorage("lpayIconInfo");if(null!=d&&""!=d){var e=JSON.parse(d);e.date==b?e.show?g.pageUI.option.lpayShow=!0:g.pageUI.option.lpayShow=!1:(s.setLocalStorage("lpayIconInfo",c,"json"),g.pageUI.option.lpayShow=!0)}else s.setLocalStorage("lpayIconInfo",c,"json"),g.pageUI.option.lpayShow=!0}},g.goStyleRecom=function(b,c){r.setTclickBase=g.tClickRenewalBase;var d=g.pageUI.data.imgInfo.imgList[0],e=g.sb_index-1;!b&&0!==b&&g.pageUI.data.imglist.length>e&&g.pageUI.data.imglist[e]&&"img"==g.pageUI.data.imglist[e].type&&(d=g.pageUI.data.imglist[e].img),r.detect(d,function(b){if(b.length>0&&g.pageUI.data.imgInfo.styleShopUrl){var e="&tclick="+(c?c:"m_RDC_ProdDetail_Clk_RelSty"),f=h.isTestFlag?h.styleRecomUrl:g.pageUI.data.imgInfo.styleShopUrl;a.location.href=g.baseLink(f)+"&img="+d+e+"&goods_no="+k.query.goods_no}else{var i=(new Date).getHours();1==(""+i).length&&(i="0"+i),g.sendTclick("m_RDC_ProdDetail_DataError_HH_"+i+"_"+g.pageUI.data.commonInfo.goodsNo),alert("죄송합니다. 추천 상품을 준비중입니다.")}},k.query.goods_no)},g.numberFill=function(a,b){var c=""+a,d="00000000000000000";return d.substring(0,b-c.length)+c},g.soldOutCheck=function(a,b){for(i=0;i<g.pageUI.option.data[a].optDtlList.items.length;i++){var c=g.pageUI.option.data[a].optDtlList.items[i];if(!(0!=c.optValCd.indexOf(b+" x")&&c.optValCd!=b||0==c.invQty&&c.optStkYn))return console.log("qty::"+c.invQty+"++key::"+b),!1}return!0},g.productOptionDataProc=function(a,c){var d=b.element("#optionWrap").scope();if(g.pageUI.option.goodsNo=a,g.pageUI.option.data[a].optSelectList){for(var e=0;e<g.pageUI.option.data[a].optSelectList.items[0].itemList.items.length;e++){var f=g.pageUI.option.data[a].optSelectList.items[0].itemList.items[e].optValCd;g.pageUI.option.data[a].optSelectList.items[0].itemList.items[e].dtl=d.findOptionItem(a,f),g.pageUI.option.data[a].optSelectList.items[0].itemList.items[e].soldout=g.soldOutCheck(a,f)}g.pageUI.option.selectOption=[]}switch(c){case"cart":g.pageUI.option.selectedType="cart",d.showOptionBox();break;case"planBuy":g.pageUI.option.selectedType="buy",d.showOptionBox();break;case"planGift":if("1"==g.pageUI.option.data[a].dlvInfo.gubunCd||"2"==g.pageUI.option.data[a].dlvInfo.gubunCd||"3"==g.pageUI.option.data[a].dlvInfo.gubunCd||"6"==g.pageUI.option.data[a].dlvInfo.gubunCd||"9"==g.pageUI.option.data[a].dlvInfo.gubunCd)return g.productViewAlert({type:"alert",msg:"선택하신 상품은 선물하기 주문이 불가합니다.",time:2500}),!1;g.pageUI.option.selectedType="gift",d.showOptionBox();break;case"planCart":d.buyItNow("m_RDC_ProdDetail_Clk_PlanPrd_Cart")}m(function(){var d=b.element("#optionWrap").scope();d.setOptionLayer(a,c)},100)},g.loadProductOption=function(a,b,c){var e=h.productOptionData(a);c&&(e+="&curDispNoSctCd="+c),g.pageUI.option.data[a]?g.productOptionDataProc(a,b):(g.jsonLoading=!0,d.get(e).success(function(c){if(c.data){if(g.pageUI.option.data[a]=c.data,g.pageUI.data.commonInfo.chanelYn&&g.pageUI.option.data[a].optDtlList&&g.pageUI.option.data[a].optSelectList)for(var d=0;d<g.pageUI.option.data[a].optSelectList.items[0].itemList.items.length;d++){g.pageUI.option.data[a].optSelectList.items[0].itemList.items[d];for(var e=0;e<g.pageUI.option.data[a].optDtlList.items.length;e++){var f=g.pageUI.option.data[a].optDtlList.items[e];g.pageUI.option.data[a].optSelectList.items[0].itemList.items[d].optValCd==f.optValCd&&(g.pageUI.option.data[a].optSelectList.items[0].itemList.items[d].colorImgUrl=f.imgUrl?f.imgUrl:"")}}g.productOptionDataProc(a,b)}})["finally"](function(){g.jsonLoading=!1}))},g.addCartOptionSelect=function(a,c){var d=a.curDispNoSctCd;m(function(){b.element("#optPopupWrap").scrollTop(0)},300),g.loadProductOption(a.goodsNo,"cart",d),c&&g.sendTclick(c)},g.visitThreeTimesCheck=function(a,b){if("30"==g.pageUI.data.commonInfo.goodsCmpsCd||!b)return!1;var c=s.getLocalStorage("productVisitBrand"),d=new Date,e=d.getFullYear()+""+d.getMonth()+d.getDate(),f={visit:1,goods:"|"+a+"|"};if(""!=g.pageUI.myBrandStr&&g.pageUI.myBrandStr.indexOf("|"+b+"|")>=0)return!1;if(null!=c&&""!=c){var h=JSON.parse(c);if(h.brand[b]){if(h.date==e)return h.pass?!0:(h.brand[b].goods.indexOf(a)<0&&(h.brand[b].visit++,h.brand[b].goods+="|"+a+"|",s.setLocalStorage("productVisitBrand",h,"json")),h.brand[b].visit>=3&&(console.log("3회이상 방문+++++"),m(function(){g.showBrandAddToday()},100)),!0);h.date=e,h.pass=!1}h.brand[b]=f,s.setLocalStorage("productVisitBrand",h,"json")}else h={brand:{},pass:!1,date:e},h.brand[b]=f,s.setLocalStorage("productVisitBrand",h,"json")},g.goBrandPage=function(a){o.location.href=j.setUrlAddBaseParam(h.brandShopSubUrl,g.pageUI.baseParam+"&upBrdNo="+a+"&tclick=")},g.getMyBrandCnt=function(){var a=g.pageUI.myBrandStr,b=(a.split("|").length-1)/2;return b},g.brandBookMark=function(a,b,c,e){if(g.closeBrandAdd(),!g.loginInfo.isLogin)return alert("로그인 후 이용하실 수 있습니다."),l.goToLogin(o,g,h.loginUrl),!1;b||(b="add");var f="add"==b?"i":"d",i=h.myBrandInfo+"?flag="+f+"&brnd_no="+a,j=g.getMyBrandCnt();if(j>50)return void g.productViewAlert({type:"alert",msg:"브랜드 즐겨찾기는 최대 50개까지 가능합니다.",time:2500});var k={method:"get",url:i};g.jsonLoading=!0,d(k).success(function(d){"popup"==c?(g.pageUI.myBrandStr+="|"+a+"|",g.productViewAlert({type:"brand",time:2500,brandNo:a})):"add"==b?(g.pageUI.myBrandStr+="|"+a+"|",g.pageUI.loadData.product_brandBest.saveBrndYn=!0,g.productViewAlert({type:"alert",msg:e+" 브랜드를 즐겨찾기에 추가하였습니다.",time:2500})):"del"==b&&(g.pageUI.myBrandStr=g.pageUI.myBrandStr.replace("|"+a+"|",""),g.pageUI.loadData.product_brandBest.saveBrndYn=!1,g.pageUI.isMyBrand=!1,g.productViewAlert({type:"alert",msg:e+" 브랜드를 즐겨찾기에서 삭제하였습니다.",time:2500}))})["finally"](function(){g.jsonLoading=!1})},g.closeBrandAddToday=function(){var a=s.getLocalStorage("productVisitBrand"),b=JSON.parse(a);b.pass=!0,s.setLocalStorage("productVisitBrand",b,"json"),g.closeBrandAdd()},g.closeBrandAdd=function(){g.pageUI.showBrandAdd&&(g.pageUI.showBrandAdd=!1,g.dimmedClose())},g.showBrandAddToday=function(){g.pageUI.showBrandAdd=!0,g.dimmedOpen({target:"brandVisitThreeTimes",callback:this.closeBrandAdd}),g.LotteDimm.dimmedOpacity="0.6",m(function(){b.element("#lotteDimm").css("z-index","110")})},g.productDataLoad=function(){g.jsonLoading=!0,d.get(h.productProductView2017Data,{params:g.pageUI.reqParam}).success(function(c){if("30"==c.data.commonInfo.goodsCmpsCd&&c.data.commonInfo.chanelYn&&(c.data.commonInfo.chanelYn=!1),g.pageUI.data=c.data,g.pageUI.data){if(g.pageUI.data.imgInfo&&g.pageUI.data.imgInfo.imgList){g.pageUI.data.imglist=[];var d;for(d=0;d<g.pageUI.data.imgInfo.imgList.length;d++)g.pageUI.data.imglist[d]={},g.pageUI.data.imglist[d].img=g.pageUI.data.imgInfo.imgList[d],g.pageUI.data.imglist[d].type="img";(g.pageUI.data.imgInfo.wecandeoVodUrl||g.pageUI.data.imgInfo.youtubeVodUrl||g.pageUI.data.imgInfo.prdVodUrl)&&(g.pageUI.data.imglist[0].type="vodimg",g.pageUI.data.imglist[0].playidx=d,g.pageUI.data.imglist[d]={img:g.pageUI.data.imgInfo.wecandeoImgUrl,type:"vod"},g.pageUI.data.imgInfo.wecandeoVodUrl?g.pageUI.data.imglist[d].vodurl=g.pageUI.data.imgInfo.wecandeoVodUrl:g.pageUI.data.imgInfo.youtubeVodUrl?(g.pageUI.data.imglist[d].vodurl=g.pageUI.data.imgInfo.youtubeVodUrl,g.pageUI.data.imglist[d].type="youtube"):g.pageUI.data.imgInfo.prdVodUrl&&(g.pageUI.data.imglist[d].vodurl=g.pageUI.data.imgInfo.prdVodUrl))}if(g.pageUI.data.prdInfo&&(g.pageUI.data.prdInfo.flagData=[],g.pageUI.data.prdInfo.flag))for(d=0;d<g.pageUI.data.prdInfo.flag.length;d++)switch(g.pageUI.data.prdInfo.flagData[d]={},g.pageUI.data.prdInfo.flag[d]){case"dept":g.pageUI.data.prdInfo.flagData[d].name="롯데백화점",g.pageUI.data.prdInfo.flagData[d].css="depart";break;case"tvhome":g.pageUI.data.prdInfo.flagData[d].name="롯데홈쇼핑",g.pageUI.data.prdInfo.flagData[d].css="tv_shopping";break;case"himart":g.pageUI.data.prdInfo.flagData[d].name="하이마트",g.pageUI.data.prdInfo.flagData[d].css="himart";break;case"smartpick":g.pageUI.data.prdInfo.flagData[d].name="스마트픽",g.pageUI.data.prdInfo.flagData[d].css="smartpick"}g.lpyaIconCheck();var e=new Date;g.pageUI.data.commonInfo.nowServerTime||(g.pageUI.data.commonInfo.nowServerTime=l.toTimeString(e,"YYYYMMDDHHMNSS"));var f=g.pageUI.data.commonInfo.nowServerTime.substr(0,4),h=g.pageUI.data.commonInfo.nowServerTime.substr(4,2),i=g.pageUI.data.commonInfo.nowServerTime.substr(6,2),j=g.pageUI.data.commonInfo.nowServerTime.substr(8,2),k=g.pageUI.data.commonInfo.nowServerTime.substr(10,2),n=g.pageUI.data.commonInfo.nowServerTime.substr(12,2);if(g.pageUI.time.quickTimeS=new Date(f,h,i,"09","00","00","000","GMT+0900").toString(),g.pageUI.time.quickTimeE=new Date(f,h,i,"16","30","59","000","GMT+0900").toString(),g.pageUI.time.serverTime=new Date(f,h,i,j,k,n,"000","GMT+0900").toString(),g.pageUI.time.localTime=e.toString(),"30"==g.pageUI.data.commonInfo.goodsCmpsCd){if(g.pageUI.data.planPrdInfo)for(var d=0;d<g.pageUI.data.planPrdInfo.prdList.items.length;d++)g.pageUI.data.planPrdInfo.prdList.items[d].idx=d;0==g.pageUI.option.selectStep}else 1==g.pageUI.option.selectStep,g.loadProductOption(g.pageUI.reqParam.goods_no);g.pageUI.wish[g.pageUI.reqParam.goods_no]=g.pageUI.data.prdInfo.saveWishYn,g.pageUI.data.commonInfo.chanelYn&&(g.pageUI.chanel.imgUrl=g.pageUI.data.imglist[0].img),g.dataLoadAfterFunc(),m(function(){y.scrollTop(0)},100),m(function(){var a=[{i:g.pageUI.reqParam.goods_no,t:g.pageUI.data.prdInfo.goodsNm}];g.addWiderPlanetLog("Item",a)},3e3);var o=function(){if(0==b.element("#aceRetargetingDetail").length){var c=b.element("body")[0],d=document.createElement("script");d.type="text/javascript",d.id="aceRetargetingDetail",d.src="//static.tagmanager.toast.com/tag/view/830",d.onload=function(){a.ne_tgm_q=a.ne_tgm_q||[],a.ne_tgm_q.push({tagType:"detail",device:"mobile",uniqValue:"",pageEncoding:"utf-8",items:[{id:g.pageUI.reqParam.goods_no,price:g.pageUI.data.prdPriceInfo.price,quantity:"1",category:"",imgUrl:g.pageUI.data.imglist[0].img,name:g.pageUI.data.prdInfo.goodsNm,desc:"",link:"http://m.lotte.com/product/m/product_view.do?goods_no="+g.pageUI.reqParam.goods_no}]})},c.appendChild(d)}};o()}}).error(function(){g.pageUI.loadingFail=!0,console.log("Data Error : 상품기본정보 로드 실패")})["finally"](function(){g.loginInfo.isLogin?g.getMyBrandInfo():g.visitThreeTimesCheck(g.pageUI.reqParam.goods_no,g.pageUI.data.commonInfo.uprBrndNo),g.jsonLoading=!1})},g.dataLoadAfterFunc=function(){g.pageUI.data.mdNoticeInfo&&setTimeout(function(){g.pageUI.data.mdNoticeInfo.mdNtcFcont1=l.replaceAll(g.pageUI.data.mdNoticeInfo.mdNtcFcont1,"&#34;","'"),g.pageUI.data.mdNoticeInfo.mdNtcFcont1=l.replaceAll(g.pageUI.data.mdNoticeInfo.mdNtcFcont1,"\r\n",""),g.defenseBadHtml(g.pageUI.data.mdNoticeInfo.mdNtcFcont1,b.element("#mdNoti1")),g.pageUI.data.mdNoticeInfo.mdNtcFcont2=l.replaceAll(g.pageUI.data.mdNoticeInfo.mdNtcFcont2,"&#34;","'"),g.pageUI.data.mdNoticeInfo.mdNtcFcont2=l.replaceAll(g.pageUI.data.mdNoticeInfo.mdNtcFcont2,"\r\n",""),g.defenseBadHtml(g.pageUI.data.mdNoticeInfo.mdNtcFcont2,b.element("#mdNoti2"))},300),n(v,100)};var y=b.element(o);y.on({"unload.product":function(){var a={};if(!g.pageUI.data.prdInfo)return!1;a=g.pageUI;var c=[],d=s.getSessionStorage("lotteProductHistory");""!=d&&null!=d?(c=d.split(","),c.indexOf(g.pageUI.reqParam.goods_no+"")<0&&c.push(g.pageUI.reqParam.goods_no),c.length>10&&(s.delSessionStorage("lotteProduct2017Data"+c[0]),c.splice(0,1))):c.push(g.pageUI.reqParam.goods_no),d=c.toString(),s.setSessionStorage("lotteProductHistory",d),!k.query.localtest&&g.leavePageStroage&&(s.setSessionStorage("lotteProduct2017Loc"+g.pageUI.reqParam.goods_no,f.absUrl()),s.delSessionStorage("lotteProduct2017Data"+g.pageUI.reqParam.goods_no),s.setSessionStorage("lotteProduct2017Data"+g.pageUI.reqParam.goods_no,a,"json"),s.setSessionStorage("lotteProduct2017ScrollY"+g.pageUI.reqParam.goods_no,b.element(o).scrollTop()))},load:function(){}});var z=s.getSessionStorage("lotteProduct2017Loc"+g.pageUI.reqParam.goods_no),A=s.getSessionStorage("lotteProduct2017Data"+g.pageUI.reqParam.goods_no),B=s.getSessionStorage("lotteProduct2017ScrollY"+g.pageUI.reqParam.goods_no);if(f.host().match(/(m|mo|mt|mt2|mprj|mprj2)\.lotte\.com/i)&&z==f.absUrl()&&null!=A&&"true"!=k.query.localtest){var C=JSON.parse(A);C.data?(g.jsonLoading=!0,g.pageUI=C,g.lpyaIconCheck(),g.dataLoadAfterFunc(),m(function(){y.scrollTop(B),g.loginInfo.isLogin?g.getMyBrandInfo():g.visitThreeTimesCheck(g.pageUI.reqParam.goods_no,g.pageUI.data.commonInfo.uprBrndNo)},100)):g.productDataLoad()}else g.productDataLoad();e.$on("$routeChangeSuccess",function(a,c){"planProductDetail"==u.current.routeName?m(function(){g.pageUI.planProduct.goodsNo&&g.pageUI.planProduct.data?(b.element("#wrapper").addClass("hide_appdown_bnr"),b.element("html, body").css({overflow:"hidden",position:"fixed"}),g.dimmedOpen({dimmed:!1}),g.pageUI.planProduct.show=!0,m(function(){g.pageUI.planProduct.data[g.pageUI.planProduct.goodsNo].detailHtml&&(g.defenseBadHtml(g.pageUI.planProduct.data[g.pageUI.planProduct.goodsNo].detailHtml,b.element("#planDetailLayout")),g.prdDetailInfoModified(b.element("#planDetailLayout"),b.element("#planDetailLayout iframe, #planDetailLayout #sizeGuideTable .tabel_list_wrap >table"))),g.jsonLoading=!1},1e3)):location.href="#/"}):(b.element("html, body").css({overflow:"",position:""}),b.element("#wrapper").removeClass("hide_appdown_bnr"),g.dimmedClose(),g.pageUI.planProduct.show=!1,m(function(){g.pageUI.planProduct.beforeScrollPosY&&b.element(o).scrollTop(g.pageUI.planProduct.beforeScrollPosY),g.jsonLoading=!1},100))}),g.getMyBrandInfo=function(){var a=h.isTestFlag?"/json/brand/my_brnd_info.json":h.myBrandInfo,b={method:"get",url:a};d(b).success(function(a){if(a.data){var b=a.data;if(g.pageUI.myBrandStr="",!b.isBestBrand&&b.brndList){g.pageUI.myBrand=b.brndList.items;for(var c=0;c<b.brndList.items.length;c++)g.pageUI.myBrandStr+="|"+b.brndList.items[c].brdNo+"|"}}})["finally"](function(){g.visitThreeTimesCheck(g.pageUI.reqParam.goods_no,g.pageUI.data.commonInfo.uprBrndNo),g.pageUI.myBrandStr.indexOf("|"+g.pageUI.data.commonInfo.uprBrndNo+"|")>=0&&(g.pageUI.isMyBrand=!0)})},g.moreBuyPrdCartClick=function(){if(!g.loginInfo.isLogin)return alert("로그인을 해주세요."),l.goToLogin(o,g,h.loginUrl),!1;var a=b.element("#optionWrap").scope();a.buildCartForm(g.pageUI.data.moreBuyPrdInfo.prdList.items),a.cartAddProc(!0)},g.wishClick=function(a,b){var c="m_RDC_ProdDetail_Clk_Wsh";return b&&(c=b),g.sendTclick(c),g.loginInfo.isLogin?g.pageUI.wish[a]?(g.productViewAlert({type:"alert",msg:"이미 담은 상품 입니다.",time:2500}),!1):(console.log("위시 담기 시도 ::: "+a),g.pageUI.wish[a]=!0,a==g.pageUI.data.commonInfo.goodsNo&&(g.pageUI.data.prdInfo.saveWishYn=!0),void g.sendProductWish(a,function(b){b?g.productViewAlert({type:"alert",msg:"위시리스트에 담았습니다.",time:2500}):(g.pageUI.wish[a]=!1,a==g.pageUI.data.commonInfo.goodsNo&&(g.pageUI.data.prdInfo.saveWishYn=!1))})):(alert("로그인을 해주세요."),l.goToLogin(o,g,h.loginUrl),!1)},g.sb_index=1,g.swipeEnd=function(a){return a==g.prdSwipeCurIdx?!1:("vod"==g.pageUI.data.imglist[a].type?(g.pageUI.styleIconShow=!1,vod_useScroll=!0,g.swipeVideoStart()):"youtube"==g.pageUI.data.imglist[a].type?g.swipeYoutubeStart():(vod_useScroll=!1,g.pageUI.styleIconShow=!0,g.swipeVideoStop()),g.sb_index=a+1,void(g.prdSwipeCurIdx=a))},g.prdSwipeCurIdx=0,g.getProdDetailSwipeControl=function(a){g.swipeControl=a,g.prdSwipeCurIdx=g.swipeControl.getIndex()},g.swipeBefore=function(){g.indi_index=g.sb_index,g.indi_index--,g.swipeControl.moveIndex(g.indi_index-1),1==g.sb_index?g.sb_index=g.pageUI.data.imglist.length:g.sb_index--},g.swipeNext=function(){g.indi_index=g.sb_index,g.indi_index++,g.swipeControl.moveIndex(g.indi_index-1),g.sb_index==g.pageUI.data.imglist.length?g.sb_index=1:g.sb_index++},g.goSWipe=function(a){g.sendTclick("m_RDC_ProdDetail_Clk_vod"),g.swipeControl.moveIndex(a-1),g.sb_index=a-1},g.colorSelect=function(){g.pageUI.chanel.selectColorNo=this.item.colorNo,this.item.imgUrl?g.pageUI.chanel.imgUrl=this.item.imgUrl:g.pageUI.chanel.imgUrl=g.pageUI.data.imglist[0].img,g.pageUI.chanel.data=this.item},g.benefitAllView=function(){},g.moreClick=function(b,c){b&&(a.location.href=j.setUrlAddBaseParam(b,g.pageUI.baseParam+"&tclick="+c)),console.log(" More Click : ",b,"\n tclick : ",c)},g.linkClick=function(a,b){console.log("linkUrl",a),o.location.href=j.setUrlAddBaseParam(a,g.pageUI.baseParam+"&tclick="+b)},g.todayArriveShipInfoClick=function(a){g.dimmedOpen({target:"todayArriveShipInfo",callback:this.todayArriveShipInfoClose}),g.LotteDimm.dimmedOpacity="0.6",m(function(){b.element("#lotteDimm").css("z-index","110")}),g.pageUI.todayArriveShipInfo=!0},g.todayArriveShipInfoClose=function(){g.pageUI.todayArriveShipInfo=!1,g.dimmedClose()},g.giftServiceInfoClick=function(a,c){"op_prodDetail"==a?(g.pageUI.giftServiceInfo.giftPkgImgUrl=g.pageUI.data.basicInfo.giftPkgImgUrl,g.pageUI.giftServiceInfo.futMsgImgUrl=g.pageUI.data.basicInfo.futMsgImgUrl):"op_planProdDetail"==a&&(g.pageUI.giftServiceInfo.giftPkgImgUrl=g.pageUI.planProduct.data[g.pageUI.planProduct.goodsNo].basicInfo.giftPkgImgUrl,g.pageUI.giftServiceInfo.futMsgImgUrl=g.pageUI.planProduct.data[g.pageUI.planProduct.goodsNo].basicInfo.futMsgImgUrl),g.dimmedOpen({target:"giftServiceInfo",callback:this.giftServiceInfoClose}),g.LotteDimm.dimmedOpacity="0.6",m(function(){b.element("#lotteDimm").css("z-index","110")}),g.pageUI.giftServiceInfo.showPopup=!0,m(function(){b.element(".pop_gift").css("margin-top",-(b.element(".pop_gift").height()/2))})},g.giftServiceInfoClose=function(){g.pageUI.giftServiceInfo.showPopup=!1,g.dimmedClose()};var D=!0;g.swipeYoutubeStart=function(){D&&b.element("[id='vodBox']").each(function(a,b){var c="vodBoxDummy",d="playerDummy";if(0==a)$(b).attr("id",c),$(b).find("#player").attr("id",d);else{var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",e.type="text/javascript",e.charset="UTF-8",e.async="ture";var f=document.getElementById("player");f.parentNode.insertBefore(e,f)}})},g.swipeVideoStart=function(){m(function(){D?(b.element("[id='autoVideoPrdView']").each(function(a,d){var e="autoVideoPrdView"+a;$(d).attr("id",e);var f=b.element("#"+e).parents(".dummy");0==f.length&&autoVideoPlay(e,"#"+e,!1,c,!0)}),D=!1):autoVideoPlay("autoVideoPrdView1","#autoVideoPrdView1",!1,c,!0)},100)},g.swipeVideoStop=function(){$(".video_wrap video").each(function(a,b){$(b).siblings(".stop_cover:visible, .click_cover:visible").length>=1&&m(function(){$(b).siblings(".btn_move_stop").trigger("click")},10)})},g.prodImgDeatilView=function(a,b){a=a?a:0,o.location.href=j.setUrlAddBaseParam(h.prodSubImageDetailView,"goods_no="+g.pageUI.data.commonInfo.goodsNo+"&imgIdx="+a+"&"+g.pageUI.baseParam+(b?"&tclick="+b:""))},g.idxSetDigit=function(a){return 1==(""+a).length?"0"+a:a},g.gotoProductPage=function(a,b,c,d,e){if(g.pageUI.reqParam.goods_no==a)return y.scrollTop(0),!1;var f=[],i=s.getSessionStorage("lotteProductHistory");if(""!=i&&null!=i){f=i.split(",");var j=f.indexOf(a+"");j>=0&&(s.delSessionStorage("lotteProduct2017Data"+a),s.delSessionStorage("lotteProduct2017Loc"+a),s.delSessionStorage("lotteProduct2017ScrollY"+a),f.splice(j,1),i=f.toString(),s.setSessionStorage("lotteProductHistory",i))}o.location.href=g.baseLink(h.productviewUrl)+"&goods_no="+a+(b?"&curDispNo="+b:"")+(c?"&curDispNoSctCd="+c:"")+(d?"&tclick="+d:"")+(e?"&_reco="+e:""),d&&console.log("Product Click : ",a,"\n tclick : ",d)};var E=0;g.btnWish_click=function(){g.sendTclick("m_DC_ProdDetail_Clk_Btn_3")},g.showFadeInOutPop=function(a,c){var d=b.element(a);d.fadeIn(500,function(){m(function(){d.fadeOut(500)},c)})},g.goMemberInfoChange=function(){o.location.href=h.mylotteUrl+"?"+g.baseParam},g.productViewAlert=function(a){switch(a.type){case"alert":g.alertTemplate.content='<div class="msg"><span>'+a.msg+"</span></div>",g.alertTemplate.button="",b.element("#alertTemplateContent").html(g.alertTemplate.content);break;case"brand":g.pageUI.data.basicInfo.brndShopNm||(g.pageUI.data.basicInfo.brndShopNm=""),g.alertTemplate.content='<div class="msg"><span>'+g.pageUI.data.basicInfo.brndShopNm+"</span> 브랜드가 즐겨찾기에 추가되었습니다.</div>",g.alertTemplate.button='<p class="btn"><a ng-click="goBrandPage('+a.brandNo+')"><span class="right_clamp">마이 브랜드매장으로 이동</span></a></p>',b.element("#alertTemplateContent").html(g.alertTemplate.content);break;case"cart":try{b.element(o).trigger("refreshCartCount")}catch(c){}g.alertTemplate.content='<div class="msg"><span>장바구니에 담겼습니다.</span></div>',g.alertTemplate.button='<p class="btn"><a ng-click="gotoCart()"><span class="right_clamp">장바구니 바로가기</span></a></p>',b.element("#alertTemplateContent").html(g.alertTemplate.content);break;case"rent":g.alertTemplate.content='<div class="msg"><span>상담신청이 필요한 상품입니다.<br />상품상세에서 확인해주세요.</span></div>',g.alertTemplate.button='<p class="btn"><a ng-click="gotoProductPage(\''+a.goodsNo+"', "+(a.curDispNo?"'"+a.curDispNo+"', ":"null, ")+(a.curDispNoSctCd?"'"+a.curDispNoSctCd+"', ":"null, ")+(a.tclick?"'"+a.tclick+"', ":"null, ")+(a._reco?"'"+a._reco+"'":"null")+')"><span class="right_clamp">상품상세페이지로 가기</span></a></p>',b.element("#alertTemplateContent").html(g.alertTemplate.content);break;case"stockRechargeAlarm":a.data.PHONE?(g.alertTemplate.content='<div class="msg"><span>SMS 재입고 알림 신청되었습니다.</span></div>',g.alertTemplate.button='<p class="btn"><a ng-click="goMemberInfoChange()"><span class="right_clamp">'+a.data.PHONE+" 변경하기</span></a></p>"):g.alertTemplate.content='<div class="msg"><span>재입고 알림 신청되었습니다.</span></div>',b.element("#alertTemplateContent").html(g.alertTemplate.content)}m(function(){b.element("#alertTemplateButton").html(p(g.alertTemplate.button)(g))});var d=b.element("#productViewAlert");a.speed||(a.speed=500),a.time||(a.time=1e3),d.fadeIn(a.speed,function(){m(function(){d.fadeOut(a.speed)},a.time)})},g.productCommentDetailView=function(a){console.log("상품평 사진 클릭"),o.location.href=h.productSubCommentDetail+"?"+g.pageUI.baseParam+"&goods_no="+g.pageUI.reqParam.goods_no+"&idx="+a+"&tclick="},g.defenseBadHtml=function(a,b){a=a?a:"",a=a.replace(/<link(.*?)>/gi,""),a=a.replace(/<meta(.*?)>/gi,""),a=a.replace(/<script/gi,"<noscript"),a=a.replace(/<\/script/gi,"</noscript"),b.html(a),b.find("style, object, embed, noscript").remove()},g.prdDetailInfoModified=function(a,c){return a&&c?void c.each(function(c,d){var e=b.element(o),f=null,g=null,h=null,i=null,j=null,k=0,l=!1,m=50,n=1,p=0,q=0,r=0,s=e.width(),t=function(){},u=function(){},v=function(){};"TABLE"==d.tagName?(f=b.element('<div class="prddetail_scrollwrap"></div>'),g=b.element(d),h=b.element('<div class="prddetail_scrollbox"></div>'),i=b.element('<span class="scroll_arrow left">&lt;</span>'),j=b.element('<span class="scroll_arrow right">&gt;</span>'),t=function(){var a=h.scrollLeft();q=g.outerWidth(),a>5?(i.stop().css("opacity",0).show().animate({opacity:1},1e3),f.addClass("left_scroll")):(f.removeClass("left_scroll"),i.hide()),a+5<q-h.width()?(j.stop().css("opacity",0).show().animate({opacity:1},1e3),f.addClass("right_scroll")):(f.removeClass("right_scroll"),j.hide())},u=function(){g.after(f),f.append(h.append(g),i,j),h.on("scroll",t),v(),t()},v=function(){return s==e.width()?!1:(s=e.width(),q=g.outerWidth(),r=g.outerHeight(),l?(i.css("top",r/2-i.height()/2),j.css("top",r/2-j.height()/2)):(i.css("top",m),j.css("top",m)),void(g.width()>s-k?(h.attr("style","max-width:100%;overflow-x:scroll;width:"+(s-k)+"px !important"),i.show(),j.show()):(h.removeAttr("style"),i.hide(),j.hide())))}):"IFRAME"==d.tagName&&(f=b.element('<div class="resizer"></div>'),g=b.element(d),u=function(){g.after(f),f.append(g)},v=function(){n=a.width()/g.width(),p=g.height()*n,1>n&&(g.css({"-transform-origin":"0 0",transform:"scale("+n+", "+n+")"}),f.attr("style","overflow:hidden;height:"+Math.round(p)+"px !important"))}),u(),v(),e.on("resize.prdDetailInfoModified",v)}):!1};var F=function(){var a=localStorage.getItem("latelyGoods"),c=[],d={},e="",f="";if(null!=a){c=a.split("|"),d.goods_no=[];for(var h=0;h<c.length;h++)d.goods_no.push(c[h]);-1!=d.goods_no.indexOf(k.query.goods_no)&&d.goods_no.splice(d.goods_no.indexOf(k.query.goods_no),1),d.goods_no.push(k.query.goods_no),b.forEach(d,function(a,b){a.length>20&&a.splice(0,a.length-20),""!=e&&(e+="|"),e+=a.join("|")}),f=e,localStorage.setItem("latelyGoods",f),g.shareStorage("local","latelyGoods",f)}else f=k.query.goods_no,localStorage.setItem("latelyGoods",f),g.shareStorage("local","latelyGoods",f)};"Y"!=k.query.late_view_yn&&F()}]),d.directive("lotteContainer",["AppDownBnrService",function(a){return{templateUrl:"/lotte/resources_dev/product/m/product_view_2017_container.html",replace:!0,link:function(b,c,d){b.getColorRange=function(a,b){for(var c=[],d=0;a/b>d;d++)c.push(d);return c},b.$on("winScroll",function(c,d){a.appDownBnrInfo.isShowFlag?a.appDownBnrInfo.height:0,b.appObj.isApp?0:48;d.scrollPos>50&&(b.pageUI.option.lpayShow=!1)})}}}]),d.directive("chanelSubHeader",["AppDownBnrService",function(a){return{link:function(c,d,e){var f=b.element(d);c.$on("winScroll",function(b,d){var e=a.appDownBnrInfo.isShowFlag?a.appDownBnrInfo.height:0,g=c.appObj.isApp?0:48;d.scrollPos>e?f.css({position:"fixed",top:g+"px"}):f.removeAttr("style")})}}}]),d.filter("pageRange",[function(){return function(a,b,c){for(var d=[],e=0;e<a.length;e++)e>=b*c&&(b+1)*c>e&&d.push(a[e]);return d}}]),d.filter("starScorePolicy",function(){return function(a,b){if(!a)return 0;var d=5,e=Math.ceil(2*a)/2;return b!=c&&(e=e/d*b),e}}),d.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),d.directive("videoPoster",[function(){return{restrict:"A",link:function(a,c,d){d.videoPoster&&b.element(c).attr("poster",d.videoPoster);
}}}]),d.filter("txtCut5",function(){return function(a){return a.substring(0,5)}})}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("productOption",["$http","$timeout","$window","$location","LotteForm","LotteCommon","LotteCookie","LotteStorage","LotteUtil","Fnproductview",function(d,e,f,g,h,i,j,k,l,m){return{templateUrl:"/lotte/resources_dev/product/m/modules/product_option.html",replace:!0,link:function(g,j,l){function n(){var a,b,c,d=g.loginInfo.mbrNo+"_MO",e=0,f="",h=0,i=0,j="",k="";j=g.pageUI.data.commonInfo.collectDispSmlNm||"",a=g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length;for(var b=0;a>b;b++)c=g.pageUI.option.selectedItem[g.pageUI.option.selectedType][b],h=c.orderCnt,e=c.price*c.orderCnt,i=c.price,f=c.goodsNo+"_"+c.goodsNm,k=b,o(d,e,f,h,i,j,k)}function o(a,b,c,d,e,f,g){var h="https:"==location.protocol?"https:":"http:",i=new Image,j="10051",k=h+"//ntracker.nsm-corp.com";k+="/c/rcv.php?code=520&id="+j+"&trans="+encodeURI(a),k+="&value="+b+"&pc="+encodeURI(c)+"&pa="+d+"&pp="+e+"&pg="+encodeURI(f)+"&etc="+encodeURI(g),i.src=k}var p=b.element(f);g.calendar={date:[],year:"2017",month:"01",dispDate:new Date,today:new Date},p.on("orientationchange resize",function(){g.optLayerMaxH()}),g.optLayerMaxH=function(){var a=p.height(),c=b.element("header").height(),d=b.element(".optLayerHeader").height(),e=64;optPopup=0,0==d&&(d=91),g.appObj.isApp?optPopup=a-d-e:optPopup=a-c-d-e,b.element(".optPopupWrap").css({maxHeight:optPopup})},g.optLayerMaxH(),g.getFirstDay=function(a,b){return new Date(a,b,1).getDay()},g.getLastDay=function(a,b){return new Date(a,b+1,0).getDate()},g.addZero=function(a){return 10>a?"0"+a:a},g.setCalender=function(a,b){var c=null;c=a?new Date(a,b,1):new Date,g.calendar.date=[],g.calendar.dispDate=c;var d=g.getLastDay(c.getFullYear(),c.getMonth());g.calendar.year=c.getFullYear(),g.calendar.month=g.addZero(c.getMonth()+1);for(var e=0;d>e;e++){var f=new Date(c.getFullYear(),c.getMonth(),e+1),h=!1,i=!1;f.getFullYear()==g.calendar.today.getFullYear()&&f.getMonth()==g.calendar.today.getMonth()&&f.getDate()==g.calendar.today.getDate()&&(h=!0),f<g.calendar.today&&!h&&(i=!0),g.calendar.date.push({d:g.addZero(e+1)+"",isToday:h,isOld:i})}for(var j=new Date(c.getFullYear(),c.getMonth(),1),k=g.getLastDay(c.getFullYear(),c.getMonth()-1),e=0;e<j.getDay();e++)g.calendar.date.splice(0,0,{d:g.addZero(k-e)+"",isToday:!1,isOld:!0})},g.setCalender(),g.datePrev=function(){g.setCalender(g.calendar.dispDate.getFullYear(),g.calendar.dispDate.getMonth()-1)},g.dateNext=function(){g.setCalender(g.calendar.dispDate.getFullYear(),g.calendar.dispDate.getMonth()+1)},g.closeDatePicker=function(){g.pageUI.showDatePicker=!1},g.showDatePicker=function(a,b){g.pageUI.option.selectDateInputItem.idx=a.idx,g.pageUI.option.selectDateInputItem.inputIdx=b,g.pageUI.showDatePicker=!0},g.selectDate=function(){if(this.item.isOld)return g.productViewAlert({type:"alert",msg:"선택 하실수 없는 날짜 입니다.",time:2500}),!1;for(var a=0;a<g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length;a++){var b=g.pageUI.option.selectedItem[g.pageUI.option.selectedType][a];if(b.idx==g.pageUI.option.selectDateInputItem.idx){g.pageUI.option.selectedItem[g.pageUI.option.selectedType][a].inputValue[g.pageUI.option.selectDateInputItem.inputIdx]=g.calendar.year+"-"+g.calendar.month+"-"+this.item.d;break}}g.closeDatePicker()},g.lpayClose=function(){var a=new Date,b=a.getFullYear()+""+a.getMonth()+a.getDate(),c={show:!1,date:b};k.setLocalStorage("lpayIconInfo",c,"json"),g.pageUI.option.lpayShow=!1},g.showOptionBox=function(){g.resetOptionSelect(),"30"==g.pageUI.data.commonInfo.goodsCmpsCd?(g.pageUI.option.selectedBox=!0,g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length||(g.pageUI.option.selectBox=!0)):g.pageUI.option.data[g.pageUI.option.goodsNo]&&("object"==typeof g.pageUI.option.data[g.pageUI.option.goodsNo].optSelectList?(g.pageUI.option.selectedBox=!0,g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length||(g.pageUI.option.selectBox=!0)):g.pageUI.option.selectedBox=!0),g.pageUI.option.selectedBox&&b.element("#wrapper").addClass("hide_appdown_bnr"),e(function(){g.optLayerMaxH()},100)},g.buyItNow=function(a){if(g.pageUI.option.data.length<=0&&"30"!=g.pageUI.data.commonInfo.goodsCmpsCd)return!1;if(g.pageUI.option.selectedBox&&("buy"==g.pageUI.option.selectedType||"cart"==g.pageUI.option.selectedType)&&g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length>0){if(a!=c?g.sendTclick(a):g.sendTclick("m_RDC_ProdDetail_Clk_buy"),"quick"==g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].type){var b=new Date(g.pageUI.time.localTime),d=new Date(g.pageUI.time.serverTime),e=new Date(g.pageUI.time.serverTime),f=new Date(g.pageUI.time.quickTimeS),h=new Date(g.pageUI.time.quickTimeE),i=new Date-b;if(e.setTime(d.getTime()+i),console.log(e),f>e||e>h)return g.productViewAlert({type:"alert",msg:"퀵 배송 주문은 09:00 ~ 16:30에만 가능 합니다.",time:2500}),!1}g.buy()}else{if(a!=c?g.sendTclick(a):g.sendTclick("m_RDC_ProdDetail_Clk_Ordertry"),g.pageUI.planProduct.show&&"30"==g.pageUI.data.commonInfo.goodsCmpsCd)return g.loadProductOption(g.pageUI.planProduct.goodsNo,"planBuy"),!1;g.pageUI.option.selectedType="buy",g.showOptionBox()}},g.buyItGift=function(){if(g.pageUI.option.data.length<=0&&"30"!=g.pageUI.data.commonInfo.goodsCmpsCd)return!1;if(g.pageUI.option.selectedBox&&"gift"==g.pageUI.option.selectedType&&g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length>0)g.sendTclick("m_RDC_ProdDetail_Clk_gift"),g.buy();else{if(g.sendTclick("m_RDC_ProdDetail_Clk_gifttry"),g.pageUI.planProduct.show&&"30"==g.pageUI.data.commonInfo.goodsCmpsCd)return g.loadProductOption(g.pageUI.planProduct.goodsNo,"planGift"),!1;g.pageUI.option.selectedType="gift",g.showOptionBox()}},g.findOptionItem=function(a,c){for(var d=0;d<g.pageUI.option.data[a].optDtlList.items.length;d++)if(g.pageUI.option.data[a].optDtlList.items[d].optValCd==c)return g.pageUI.option.data[a].optDtlList.items[d].goodsNo=a,g.pageUI.option.data[a].optDtlList.items[d].goodsNm=g.pageUI.option.data[a].prdInfo.goodsNm,g.pageUI.option.data[a].optDtlList.items[d].price=g.pageUI.option.data[a].prdInfo.price,g.pageUI.option.data[a].optDtlList.items[d].dlvFee=g.pageUI.option.data[a].prdInfo.dlvFee,g.pageUI.option.data[a].optDtlList.items[d].quick=g.pageUI.option.data[a].prdInfo.quickPsbYn,g.pageUI.option.data[a].optDtlList.items[d].quickDispYn=g.pageUI.option.data[a].prdInfo.quickPsbDispYn,g.pageUI.option.data[a].optDtlList.items[d].entrNo=g.pageUI.option.data[a].prdInfo.entrNo,g.pageUI.option.data[a].optDtlList.items[d].rentalYn=g.pageUI.option.data[a].prdInfo.rentalYn,g.pageUI.option.data[a].optDtlList.items[d].minorityLimitYn=g.pageUI.option.data[a].prdInfo.minorityLimitYn,g.pageUI.option.data[a].optDtlList.items[d].dlvInfo={},b.copy(g.pageUI.option.data[a].dlvInfo,g.pageUI.option.data[a].optDtlList.items[d].dlvInfo),g.pageUI.option.data[a].prdInfo.imgUrl&&(g.pageUI.option.data[a].optDtlList.items[d].imgUrl=g.pageUI.option.data[a].prdInfo.imgUrl),g.pageUI.option.data[g.pageUI.option.goodsNo].prdInfo.purQtyLmtYn?g.pageUI.option.data[a].optDtlList.items[d].orderCnt=g.pageUI.option.data[a].prdInfo.minLmtQty:g.pageUI.option.data[a].optDtlList.items[d].orderCnt=1,g.pageUI.option.data[a].optDtlList.items[d]},g.resetOptionSelect=function(){g.pageUI.option.selectOption=[],g.pageUI.option.searchKey="","30"==g.pageUI.data.commonInfo.goodsCmpsCd&&"cart"!=g.pageUI.option.selectedType?g.pageUI.option.selectStep=0:g.pageUI.option.selectStep=1},g.getSelectKey=function(a){var b="";!g.pageUI.option.selectOption[0];for(var c=0;c<g.pageUI.option.selectOption.length;c++){var d=g.pageUI.option.data[a].optSelectList.items[c].itemList.items[g.pageUI.option.selectOption[c]];""!=b&&(b+=" x "),b+=d.optValCd}return b},g.getPlanIdx=function(a){if("30"!=g.pageUI.data.commonInfo.goodsCmpsCd)return 0;for(var b=0;b<g.pageUI.data.planPrdInfo.prdList.items.length;b++)if(g.pageUI.data.planPrdInfo.prdList.items[b].goodsNo==a)return g.pageUI.data.planPrdInfo.prdList.items[b].idx},g.rentalCheck=function(a){if(g.pageUI.option.selectedItem[a].length>0)for(var b=0;b<g.pageUI.option.selectedItem[a].length;b++)if("4"==g.pageUI.option.selectedItem[a][b].dlvInfo.gubunCd)return g.productViewAlert({type:"alert",msg:"렌탈상품 옵션선택은 1개만 가능합니다.",time:2500}),!1;return!0},g.setOptionLayer=function(a,c){if(g.pageUI.option.data[a].optSelectList)g.pageUI.option.selectBox=!0,g.pageUI.option.searchKey="",g.pageUI.option.selectStep=1;else{g.pageUI.option.selectBox=!1,g.pageUI.option.selectStep=0;var d=g.pageUI.option.data[a],e="30"==g.pageUI.data.commonInfo.goodsCmpsCd?!1:!0,f=g.pageUI.option.selectedType;""==f&&(f="buy");for(var h=0;h<g.pageUI.option.selectedItem[f].length;h++)if(g.pageUI.option.selectedItem[f][h].goodsNo==a)return"planCart"!=c&&"planBuy"!=c&&"buy"!=c&&g.productViewAlert({type:"alert",msg:"이미 선택된 옵션 입니다.",time:2500}),!1;g.pageUI.option.selectedIdx++;var i={idx:g.pageUI.option.selectedIdx,planIdx:g.getPlanIdx(a),protect:e,goodsNm:d.prdInfo.goodsNm,goodsNo:d.prdInfo.goodsNo,dlvInfo:d.dlvInfo,entrNo:d.prdInfo.entrNo,deptInvQty:d.prdInfo.deptInvQty,invQty:d.prdInfo.invQty,price:d.prdInfo.price,rentalYn:d.prdInfo.rentalYn,minorityLimitYn:d.prdInfo.minorityLimitYn,itemNo:0,optStkYn:!1,optValCd:"",optValue:"",imgUrl:d.prdInfo.imgUrl,quick:d.prdInfo.quickPsbYn,quickDispYn:d.prdInfo.quickPsbDispYn,smpDispYn:d.prdInfo.smpPsbYn,inputValue:[],orderCnt:d.prdInfo.minLmtQty};if("30"!=g.pageUI.data.commonInfo.goodsCmpsCd){if("cart"!=f&&(f="buy"),!g.deliveryMethodCheck(i))return!1;g.pageUI.option.selectedItem[f].push(i),g.pageUI.option.selectedPrice[f]+=g.pageUI.option.data[a].prdInfo.price*i.orderCnt,g.pageUI.option.selectedCnt[f]+=i.orderCnt,g.pageUI.option.deliveryMethod[f].onOff={},b.copy(g.getDeliveryMethod(i),g.pageUI.option.deliveryMethod[f].onOff),f="gift"}if("planGift"==c){if(f="gift",g.pageUI.option.selectedItem[f].length>0)return g.productViewAlert({type:"alert",msg:"선물하기 옵션 선택은 1개만 가능 합니다.",time:2500}),!1;g.pageUI.option.selectedItem[f]=[],g.pageUI.option.selectedPrice[f]=0,g.pageUI.option.selectedCnt[f]=0}else if("cart"==c&&"gift"==f)return!1;if(!g.rentalCheck(f))return!1;if(!g.deliveryMethodCheck(i))return!1;g.pageUI.option.selectedItem[f].push(i),g.pageUI.option.selectedPrice[f]+=g.pageUI.option.data[a].prdInfo.price*i.orderCnt,g.pageUI.option.selectedCnt[f]+=i.orderCnt}},g.selectOption=function(a,b){if(b.dtl&&b.soldout)return!1;if("gift"==g.pageUI.option.selectedType&&g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length>0)return g.productViewAlert({type:"alert",msg:"선물하기 옵션 선택은 1개만 가능 합니다.",time:2500}),!1;g.pageUI.option.searchKey="",g.pageUI.option.selectOption[a]=b.idx;var c=g.pageUI.option.goodsNo,d="";if(g.pageUI.option.data[c].optSelectList.items.length>a+1){d=g.getSelectKey(c);for(var e=0;e<g.pageUI.option.data[c].optSelectList.items[a+1].itemList.items.length;e++){var f=g.pageUI.option.data[c].optSelectList.items[a+1].itemList.items[e];if(g.pageUI.option.data[c].optSelectList.items[a+1].itemList.items[e].soldout=g.soldOutCheck(c,d+" x "+f.optValCd),g.pageUI.option.data[c].optSelectList.items.length==a+2){var h=g.findOptionItem(c,d+" x "+g.pageUI.option.data[c].optSelectList.items[a+1].itemList.items[e].optValCd);h?g.pageUI.option.data[c].optSelectList.items[a+1].itemList.items[e].dtl=h:(g.pageUI.option.data[c].optSelectList.items[a+1].itemList.items[e].dtl={},g.pageUI.option.data[c].optSelectList.items[a+1].itemList.items[e].soldout=!0)}}g.pageUI.option.selectStep++}else{d=g.getSelectKey(c);for(var e=0;e<g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length;e++){var i=g.pageUI.option.selectedItem[g.pageUI.option.selectedType][e].goodsNo+g.pageUI.option.selectedItem[g.pageUI.option.selectedType][e].optValCd;if(i==c+d)return g.productViewAlert({type:"alert",msg:"이미 선택된 옵션 입니다.",time:2500}),g.closeSelectBox(),!1}var f=g.findOptionItem(c,d);if("gift"==g.pageUI.option.selectedType&&g.pageUI.option.selectedItem[g.pageUI.option.selectedType].splice(0,g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length),!g.deliveryMethodCheck(f))return!1;g.pageUI.option.selectedIdx++,f.idx=g.pageUI.option.selectedIdx,f.planIdx=g.getPlanIdx(c),f.inputValue=[],b.colorImgUrl&&(f.colorImgUrl=b.colorImgUrl),g.pageUI.option.selectedItem[g.pageUI.option.selectedType].push(f),g.pageUI.option.selectedPrice[g.pageUI.option.selectedType]+=g.pageUI.option.data[c].prdInfo.price*f.orderCnt,g.pageUI.option.selectedCnt[g.pageUI.option.selectedType]+=f.orderCnt,g.pageUI.option.inputOption[f.itemNo]=[],g.resetOptionSelect(),g.closeSelectBox()}},g.openSelectBox=function(){return"gift"==g.pageUI.option.selectedType&&g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length>0?(g.productViewAlert({type:"alert",msg:"선물하기 옵션 선택은 1개만 가능 합니다.",time:2500}),!1):g.rentalCheck(g.pageUI.option.selectedType)?(g.resetOptionSelect(),void(g.pageUI.option.selectBox=!0)):!1},g.closeSelectBox=function(){g.resetOptionSelect(),g.pageUI.option.selectBox=!1,g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length<=0&&g.closeSelectedBox()},g.closeSelectedBox=function(){"30"!=g.pageUI.data.commonInfo.goodsCmpsCd&&(g.pageUI.option.goodsNo=g.pageUI.data.commonInfo.goodsNo),"cart"==g.pageUI.option.selectedType&&(g.pageUI.option.selectedItem[g.pageUI.option.selectedType]=[],g.pageUI.option.selectedPrice[g.pageUI.option.selectedType]=0,g.pageUI.option.selectedCnt[g.pageUI.option.selectedType]=0),g.pageUI.option.selectedType="",g.pageUI.option.selectedBox=!1,g.pageUI.option.selectBox||g.pageUI.planProduct.show||b.element("#wrapper").removeClass("hide_appdown_bnr"),g.pageUI.planProduct.show&&(g.appDownBnrFlag=!1)},g.removeSelect=function(){g.pageUI.option.selectedPrice[g.pageUI.option.selectedType]-=this.item.price*this.item.orderCnt,g.pageUI.option.selectedCnt[g.pageUI.option.selectedType]-=this.item.orderCnt;for(var a=g.pageUI.option.selectedItem[g.pageUI.option.selectedType],b=0;b<a.length;b++)if(this.item.idx==a[b].idx){g.pageUI.option.selectedItem[g.pageUI.option.selectedType].splice(b,1);break}if(g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length>0){g.pageUI.option.selectedItem[g.pageUI.option.selectedType][0].goodsNo;g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].onOff=g.getDeliveryMethod(g.pageUI.option.selectedItem[g.pageUI.option.selectedType][0]),g.deliveryMethodCheck(g.pageUI.option.selectedItem[g.pageUI.option.selectedType][0])}else g.pageUI.data.commonInfo.planPrdSmpYn&&"30"==g.pageUI.data.commonInfo.goodsCmpsCd?g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].showMethodBox=!0:g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].showMethodBox=!1;"cart"!=g.pageUI.option.selectedType||g.pageUI.option.data[g.pageUI.option.goodsNo].optSelectList||g.closeSelectedBox()},g.checkStock=function(a){var b=a.goodsNo;""==a.orderCnt||a.orderCnt<=0||!a.orderCnt||!parseInt(a.orderCnt)?(a.orderCnt=g.pageUI.option.data[b].prdInfo.minLmtQty?g.pageUI.option.data[b].prdInfo.minLmtQty:1,g.productViewAlert({type:"alert",msg:"최소 구매 수량은 "+a.orderCnt+"개 입니다.",time:2500})):a.orderCnt>20&&"gift"==g.pageUI.option.selectedType?(g.productViewAlert({type:"alert",msg:"구매 최대 수량은 20개 입니다.",time:2500}),a.orderCnt=20):g.pageUI.option.data[b].prdInfo.purQtyLmtYn?a.orderCnt>g.pageUI.option.data[b].prdInfo.maxLmtQty?(g.productViewAlert({type:"alert",msg:"최대 구매 수량은 "+g.pageUI.option.data[b].prdInfo.maxLmtQty+"개 입니다.",time:2500}),a.orderCnt=g.pageUI.option.data[b].prdInfo.maxLmtQty):(a.orderCnt<1||a.orderCnt<g.pageUI.option.data[g.pageUI.option.goodsNo].prdInfo.minLmtQty)&&(g.productViewAlert({type:"alert",msg:"최소 구매 수량은 "+g.pageUI.option.data[b].prdInfo.minLmtQty+"개 입니다.",time:2500}),a.orderCnt=g.pageUI.option.data[b].prdInfo.minLmtQty):a.orderCnt>a.invQty&&(g.productViewAlert({type:"alert",msg:"최대 구매 수량은 "+a.invQty+"개 입니다.",time:2500}),a.orderCnt=a.invQty),g.pageUI.option.selectedPrice[g.pageUI.option.selectedType]=0,g.pageUI.option.selectedCnt[g.pageUI.option.selectedType]=0;for(var c=0;c<g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length;c++){var a=g.pageUI.option.selectedItem[g.pageUI.option.selectedType][c];g.pageUI.option.selectedPrice[g.pageUI.option.selectedType]+=a.price*a.orderCnt,g.pageUI.option.selectedCnt[g.pageUI.option.selectedType]+=a.orderCnt}},g.addOrderCnt=function(){this.item.orderCnt++,g.checkStock(this.item)},g.subOrderCnt=function(){this.item.orderCnt--,g.checkStock(this.item)},g.changeStep=function(a){if(g.pageUI.option.selectStep<a)return!1;if(g.pageUI.option.searchKey="",g.pageUI.option.selectOption.length>0)if(0!=a){var b=g.pageUI.option.selectOption.length-(a-1);g.pageUI.option.selectOption.splice(a-1,b)}else g.pageUI.option.selectOption.splice(0,g.pageUI.option.selectOption.length);g.pageUI.option.selectStep=a},g.replaceKeywordText=function(a){return""!=g.pageUI.option.searchKey?a.replace(g.pageUI.option.searchKey,"<span>"+g.pageUI.option.searchKey+"</span>"):a},g.optionSearchKeyword=function(a){if(""!=g.pageUI.option.searchKey){if("prd"==a){if(this.item.goodsNm.toLowerCase().indexOf(g.pageUI.option.searchKey.toLowerCase())>=0)return!0}else if(this.list.optValue.toLowerCase().indexOf(g.pageUI.option.searchKey.toLowerCase())>=0)return!0;return!1}return!0},g.optionEmptySearchKeyword=function(a){if(""!=g.pageUI.option.searchKey){if("prd"==a)for(var b=0;b<g.pageUI.data.planPrdInfo.prdList.items.length;b++){var c=g.pageUI.data.planPrdInfo.prdList.items[b];if(c.goodsNm.toLowerCase().indexOf(g.pageUI.option.searchKey.toLowerCase())>=0)return!1}else for(var b=0;b<g.pageUI.option.data[g.pageUI.option.goodsNo].optSelectList.items.length;b++)for(var d=0;d<g.pageUI.option.data[g.pageUI.option.goodsNo].optSelectList.items[b].itemList.items.length;d++){var e=g.pageUI.option.data[g.pageUI.option.goodsNo].optSelectList.items[b].itemList.items[d];if(e.optValue.toLowerCase().indexOf(g.pageUI.option.searchKey.toLowerCase())>=0)return!1}return!0}return!1},g.selectPlanProduct=function(){return this.item.soldOutYn?!1:"30"!=g.pageUI.data.commonInfo.goodsCmpsCd||"gift"!=g.pageUI.option.selectedType||this.item.giftYn?(console.log("기획전 상품 선택"),void g.loadProductOption(this.item.goodsNo,"select")):!1},g.cartPlanProduct=function(a,b){console.log("기획전 상품 장바구니 선택"),g.loadProductOption(a,"planCart")},g.quickTimeCheck=function(){var a=new Date(g.pageUI.time.localTime),b=new Date(g.pageUI.time.serverTime),c=new Date(g.pageUI.time.serverTime),d=new Date(g.pageUI.time.quickTimeS),e=new Date(g.pageUI.time.quickTimeE),f=new Date-a;return c.setTime(b.getTime()+f),d>c||c>e?!1:!0},g.getDeliveryMethod=function(a){var b=a.goodsNo,c=g.pageUI.option.data[b].prdInfo.smpOnlyYn,d=a.smpDispYn,e=g.pageUI.option.data[b].prdInfo.smpPsbYn,f=g.pageUI.option.data[b].prdInfo.crspkPsbYn,h=a.quick,i=a.quickDispYn,j={ship:!0,quick:h,smartpic:d,smartpicFlag:e,crosspicFlag:f,smartCrossPic:e&&f};return f&&(j.ship=!0,j.quick=!1,j.smartpic=!0),d&&(j.quick=!0,j.smartpic=!0),c&&d&&(j.ship=!1,j.quick=!0,j.smartpic=!0),!c&&d&&(j.ship=!0,j.quick=!0,j.smartpic=!0),(c||d||f)&&(j.smartpic=!0),h&&i||(j.quick=!1),i&&(j.quick=!0),j.quick&&a.deptInvQty<1&&(j.quick=!1),"9"==g.pageUI.option.data[b].dlvInfo.gubunCd&&(j.ship=!0,j.quick=!1,j.smartpic=!1),j},g.showDeliveryMethodBox=function(){var a=""!=g.pageUI.option.selectedType?g.pageUI.option.selectedType:"buy";if("gift"==a)g.pageUI.option.deliveryMethod[a].type="ship",g.pageUI.option.deliveryMethod[a].showMethodBox=!1;else if(g.pageUI.option.deliveryMethod[a].onOff.ship&&g.pageUI.option.deliveryMethod[a].onOff.quick||g.pageUI.option.deliveryMethod[a].onOff.quick&&g.pageUI.option.deliveryMethod[a].onOff.smartpic||g.pageUI.option.deliveryMethod[a].onOff.smartpic&&g.pageUI.option.deliveryMethod[a].onOff.smartpic)g.pageUI.option.deliveryMethod[a].showMethodBox=!0;else if(!g.pageUI.option.deliveryMethod[a].onOff.ship||g.pageUI.option.deliveryMethod[a].onOff.quick||g.pageUI.option.deliveryMethod[a].onOff.smartpic)g.pageUI.option.deliveryMethod[a].showMethodBox=!0;else if(g.pageUI.data.commonInfo.planPrdSmpYn&&"30"==g.pageUI.data.commonInfo.goodsCmpsCd)g.pageUI.option.deliveryMethod[a].showMethodBox=!0;else{if(g.pageUI.data.prdInfo.flag)for(var b=0;b<g.pageUI.data.prdInfo.flag.length;b++)if("smartpick"==g.pageUI.data.prdInfo.flag[b])return g.pageUI.option.deliveryMethod[a].showMethodBox=!0,!0;g.pageUI.option.deliveryMethod[a].showMethodBox=!1}},g.deliveryMethodCheck=function(a){var c=(a.goodsNo,g.getDeliveryMethod(a)),d=""!=g.pageUI.option.selectedType?g.pageUI.option.selectedType:"buy";if(console.log("deliveryMethodCheck SelectedType : "+d),g.pageUI.option.selectedItem[d].length<=0)return g.pageUI.option.deliveryMethod[d].onOff={},b.copy(c,g.pageUI.option.deliveryMethod[d].onOff),c.quick&&(g.pageUI.option.quickDisp=!0,g.quickTimeCheck()||(g.pageUI.option.deliveryMethod[d].onOff.quick=!1)),"ship"!=g.pageUI.option.deliveryMethod[d].type||c.ship?"quick"!=g.pageUI.option.deliveryMethod[d].type||c.quick?"smartpic"!=g.pageUI.option.deliveryMethod[d].type||c.smartpic||(c.ship?g.pageUI.option.deliveryMethod[d].type="ship":c.quick&&(g.pageUI.option.deliveryMethod[d].type="quick")):c.ship?g.pageUI.option.deliveryMethod[d].type="ship":c.smartpic&&(g.pageUI.option.deliveryMethod[d].type="smartpic"):c.quick?g.pageUI.option.deliveryMethod[d].type="quick":c.smartpic&&(g.pageUI.option.deliveryMethod[d].type="smartpic"),g.showDeliveryMethodBox(),!0;var e=g.getDeliveryMethod(g.pageUI.option.selectedItem[d][0]);switch(g.pageUI.option.deliveryMethod[d].type){case"ship":if(c.ship!=g.pageUI.option.deliveryMethod[d].onOff.ship)return g.productViewAlert({type:"alert",msg:"택배가 불가한 상품입니다.",time:2500}),g.closeSelectBox(),!1;break;case"quick":if(c.quick!=g.pageUI.option.deliveryMethod[d].onOff.quick)return g.productViewAlert({type:"alert",msg:"퀵배송이 불가한 상품입니다.",time:2500}),g.closeSelectBox(),!1;break;case"smartpic":if(c.smartpic!=g.pageUI.option.deliveryMethod[d].onOff.smartpic)return g.productViewAlert({type:"alert",msg:"스마트픽이 불가한 상품입니다.",time:2500}),g.closeSelectBox(),!1;if(!e.smartpicFlag&&e.crosspicFlag&&c.smartpicFlag&&!c.crosspicFlag||e.smartpicFlag&&!e.crosspicFlag&&!c.smartpicFlag&&c.crosspicFlag||e.smartpicFlag&&e.crosspicFlag&&!c.smartpicFlag&&!c.crosspicFlag)return g.productViewAlert({type:"alert",msg:"구매가 함께 불가한 스마트픽 상품입니다.",time:2500}),g.closeSelectBox(),!1}g.pageUI.option.quickDisp=!1,g.pageUI.option.deliveryMethod[d].onOff={},b.copy(e,g.pageUI.option.deliveryMethod[d].onOff);var f=e.smartpicFlag,h=e.crosspicFlag;g.pageUI.option.minorityLimit[d]=!1;for(var i=0;i<=g.pageUI.option.selectedItem[d].length;i++){var j=null,k=null;i==g.pageUI.option.selectedItem[d].length?(k=a,j=c,g.pageUI.option.minorityLimit[d]=g.pageUI.option.minorityLimit[d]||a.minorityLimitYn?!0:!1):(k=g.pageUI.option.selectedItem[d][i],j=g.getDeliveryMethod(k),g.pageUI.option.minorityLimit[d]=g.pageUI.option.minorityLimit[d]||k.minorityLimitYn?!0:!1),g.pageUI.option.deliveryMethod[d].onOff.ship=g.pageUI.option.deliveryMethod[d].onOff.ship&&j.ship?!0:!1,g.pageUI.option.deliveryMethod[d].onOff.quick=g.pageUI.option.deliveryMethod[d].onOff.quick&&j.quick?!0:!1,g.pageUI.option.deliveryMethod[d].onOff.smartpic=g.pageUI.option.deliveryMethod[d].onOff.smartpic&&j.smartpic?!0:!1,g.pageUI.option.deliveryMethod[d].onOff.quick&&k.deptInvQty<1&&(g.pageUI.option.deliveryMethod[d].onOff.quick=!1),(!j.smartpicFlag&&j.crosspicFlag&&!h&&f||j.smartpicFlag&&!j.crosspicFlag&&h&&!f)&&(g.pageUI.option.deliveryMethod[d].onOff.smartpic=!1),f=f&&j.smartpicFlag?!0:!1,h=h&&j.crosspicFlag?!0:!1}return g.pageUI.option.deliveryMethod[d].onOff.quick&&(g.pageUI.option.quickDisp=!0,g.quickTimeCheck()||(g.pageUI.option.deliveryMethod[d].onOff.quick=!1)),g.showDeliveryMethodBox(),!0},g.showSoldOutClick=function(a){g.sendTclick(a)},g.shipClick=function(a){g.sendTclick(a)},g.popupQuickInfoClick=function(a){if(!g.pageUI.option.quickDisp||g.pageUI.popupQuickInfo)return!1;g.sendTclick(a);var c=g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].onOff.quick;c?(g.dimmedOpen({target:"popupQuickInfo",callback:this.popupQuickInfoClose}),g.pageUI.popupQuickInfo=!0):(g.dimmedOpen({target:"popupQuickInfo2",callback:this.popupQuickInfoClose}),g.pageUI.popupQuickInfo2=!0),g.LotteDimm.dimmedOpacity="0.6",e(function(){b.element("#lotteDimm").css("z-index","110")})},g.popupQuickInfoClose=function(){g.pageUI.popupQuickInfo=!1,g.pageUI.popupQuickInfo2=!1,g.dimmedClose()},g.popupSmartPickInfoClick=function(a){return!g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].onOff.smartpic||g.pageUI.popupSmartPickInfo?!1:(g.sendTclick(a),g.dimmedOpen({target:"popupSmartPickInfo",callback:this.popupSmartpicInfoClose}),g.LotteDimm.dimmedOpacity="0.6",e(function(){b.element("#lotteDimm").css("z-index","110")}),void(g.pageUI.popupSmartPickInfo=!0))},g.popupSmartpicInfoClose=function(){g.pageUI.popupSmartPickInfo=!1,g.dimmedClose()},g.cartAddProc=function(a){var c={};b.copy(g.pageUI.option.orderSendInfo,c),delete c.common,h.FormSubmitForAjax(i.cartCartInsData,c).success(function(c){try{b.element(f).trigger("refreshCartCount")}catch(d){}g.sendBuzzni&&g.sendBuzzni("cart",[g.pageUI.reqParam.goods_no]),g.productViewAlert({type:"cart",time:2500}),a||(g.closeSelectBox(),g.closeSelectedBox())}).error(function(a){console.log(a),a.error.response_code==LOGIN_EXCEPTION?(alert(a.error.response_msg),m.goToLogin(f,g,i.loginUrl)):"M000200"==a.error.response_code?alert(a.error.response_msg):(alert("프로그램 오류로 인해 처리되지 않았습니다."),console.log("[Error]Cart Save Fail",a.error.response_msg))}),a||n()},g.StockRechargeCall=function(a,b,c){g.sendTclick(c);var e=g.loginInfo.mbrNo;return g.loginInfo.isLogin?void d.get("/json/system/restock_alram.json",{params:{mbr_no:e,goods_no:a,spdp_goods_no:"",item_no:b,channel:"1"}}).success(function(a){"0000"==a.RESPONSE_CODE?g.productViewAlert({type:"stockRechargeAlarm",time:2500,data:a}):"1001"==a.RESPONSE_CODE?g.productViewAlert({type:"alert",msg:"상품정보가 없습니다.",time:2500}):"1003"==a.RESPONSE_CODE?g.productViewAlert({type:"alert",msg:"신청 정보가 이미 존재 합니다.",time:2500}):"1004"==a.RESPONSE_CODE?(alert("로그인을 해주세요."),m.goToLogin(f,g,i.loginUrl)):g.productViewAlert({type:"alert",msg:"상품정보가 없습니다.",time:2500})}).error(function(a){if(a.error){if("1001"==a.error.response_code)return g.productViewAlert({type:"alert",msg:"상품정보가 없습니다.",time:2500}),!0;if(a.error.response_code==LOGIN_EXCEPTION)return alert("로그인을 해주세요."),m.goToLogin(f,g,i.loginUrl),!0}g.productViewAlert({type:"alert",msg:"프로그램 오류로 인해 처리되지 않았습니다.",time:2500})}):(alert("로그인을 해주세요."),void m.goToLogin(f,g,i.loginUrl))},g.initOrderSendInfo=function(){g.pageUI.option.orderSendInfo={goods_no:"",item_no:"",goods_cmps_cd:"",goods_choc_desc:"",ord_qty:"",mast_disp_no:"",infw_disp_no:"",infw_disp_no_sct_cd:"",master_goods_yn:"",cart_sn:"",cmps_qty:"",shop_memo_tp_cd:"",shop_memo_cont:"",smp_vst_shop_no:"",smp_vst_rsv_dtime:"",conr_no:"",std_goods_no:"",smp_tp_cd:"",smp_deli_loc_sn:"",smartOrd:"",smp_prod_yn:"",smp_entr_no:"",smp_shop_no:"",is_ecoupon:"",entr_no:"",pImg:"",pTitle:"",pPrice:"",crspk_yn:"",crspk_psb_yn:"",crspk_corp_cd:"",crspk_corp_str_sct_cd:"",crspk_str_no:"",crspk_store:"",smp_only_yn:"",qs_yn:""}},g.buildCommonOrderForm=function(a){g.pageUI.option.orderSendInfo.common={};var c={};"cart"==g.pageUI.option.selectedType?c=g.pageUI.option.data[a]:(b.copy(g.pageUI.data,c),c.prdInfo.cartType=c.commonInfo.cartType,c.prdInfo.mdGsgrNo=c.commonInfo.mdGsgrNo,c.prdInfo.tdfSctCd=c.commonInfo.tdfSctCd,c.prdInfo.imgUrl=g.pageUI.data.imgInfo.imgList[0],c.prdInfo.mfcpNm=c.commonInfo.mfcpNm),g.pageUI.option.orderSendInfo.common.goodsNm=c.prdInfo.goodsNm,g.pageUI.option.orderSendInfo.common.cartType=c.prdInfo.cartType,g.pageUI.option.orderSendInfo.common.mdGsgrNo=c.prdInfo.mdGsgrNo,g.pageUI.option.orderSendInfo.common.maxLmtQty=c.prdInfo.maxLmtQty,g.pageUI.option.orderSendInfo.common.minLmtQty=c.prdInfo.minLmtQty,g.pageUI.option.orderSendInfo.common.tdfSctCd=c.prdInfo.tdfSctCd,g.pageUI.option.orderSendInfo.common.saveWishYn=c.prdInfo.saveWishYn,g.pageUI.option.orderSendInfo.common.imgUrl=c.prdInfo.imgUrl,g.pageUI.option.orderSendInfo.common.mfcpNm=c.prdInfo.mfcpNm,g.pageUI.option.orderSendInfo.common.brndNm=c.prdInfo.brndNm},g.buildCartForm=function(a){g.initOrderSendInfo(),"cart"==g.pageUI.option.selectedType?g.buildCommonOrderForm(a[0].goodsNo):g.buildCommonOrderForm(g.pageUI.reqParam.goods_no);for(var b=0;b<a.length;b++){var c="";0!=b&&(c=LOTTE_CONSTANTS.SPLIT_GUBUN_1),g.pageUI.option.orderSendInfo.goods_no+=c+a[b].goodsNo,g.pageUI.option.orderSendInfo.item_no+=c+(a[b].itemNo?a[b].itemNo:"0"),g.pageUI.option.orderSendInfo.goods_cmps_cd+=c+"50",g.pageUI.option.orderSendInfo.goods_choc_desc+=c+"",g.pageUI.option.orderSendInfo.ord_qty+=c+(a[b].cnt?a[b].cnt:1),g.pageUI.option.orderSendInfo.infw_disp_no+=c+(g.pageUI.reqParam.curDispNo?g.pageUI.reqParam.curDispNo:g.pageUI.data.commonInfo.curDispNo),g.pageUI.option.orderSendInfo.infw_disp_no_sct_cd+=c+(g.pageUI.reqParam.curDispNoSctCd?g.pageUI.reqParam.curDispNoSctCd:g.pageUI.data.commonInfo.curDispNoSctCd),g.pageUI.option.orderSendInfo.master_goods_yn+=c+"N",g.pageUI.option.orderSendInfo.cart_sn+=c+"",g.pageUI.option.orderSendInfo.cmps_qty+=c+"0",g.pageUI.option.orderSendInfo.mast_disp_no+=c+"",g.pageUI.option.orderSendInfo.shop_memo_tp_cd+=c+"",g.pageUI.option.orderSendInfo.shop_memo_cont+=c+"",g.pageUI.option.orderSendInfo.smp_vst_shop_no+=c+"",g.pageUI.option.orderSendInfo.smp_vst_rsv_dtime+=c+"",g.pageUI.option.orderSendInfo.conr_no+=c+"",g.pageUI.option.orderSendInfo.std_goods_no+=c+g.pageUI.reqParam.goods_no,g.pageUI.option.orderSendInfo.smp_tp_cd+=c+"",g.pageUI.option.orderSendInfo.smp_deli_loc_sn+=c+"",g.pageUI.option.orderSendInfo.smartOrd+=c+"",g.pageUI.option.orderSendInfo.smp_prod_yn+=c+"N",g.pageUI.option.orderSendInfo.smp_entr_no+=c+"",g.pageUI.option.orderSendInfo.smp_shop_no+=c+"",g.pageUI.option.orderSendInfo.is_ecoupon+=c+"",g.pageUI.option.orderSendInfo.crspk_yn+=c+"",g.pageUI.option.orderSendInfo.crspk_psb_yn+=c+"N",g.pageUI.option.orderSendInfo.crspk_corp_cd+=c+"",g.pageUI.option.orderSendInfo.crspk_corp_str_sct_cd+=c+"",g.pageUI.option.orderSendInfo.crspk_str_no+=c+"",g.pageUI.option.orderSendInfo.crspk_store+=c+"",g.pageUI.option.orderSendInfo.smp_only_yn+=c+"N",g.pageUI.option.orderSendInfo.qs_yn+=c+"N"}},g.buildOrderForm=function(){g.initOrderSendInfo(),"cart"==g.pageUI.option.selectedType?g.buildCommonOrderForm(g.pageUI.option.selectedItem[g.pageUI.option.selectedType][0].goodsNo):g.buildCommonOrderForm(g.pageUI.reqParam.goods_no);for(var a=0;a<g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length;a++){var d="";0!=a&&(d=LOTTE_CONSTANTS.SPLIT_GUBUN_1);var e=g.pageUI.option.selectedItem[g.pageUI.option.selectedType][a],f=e.goodsNo;if(g.pageUI.option.orderSendInfo.goods_no+=d+f,g.pageUI.option.orderSendInfo.item_no+=d+e.itemNo,g.pageUI.option.orderSendInfo.goods_cmps_cd+=d+(g.pageUI.option.data[f].prdInfo.goodsCmpsCd?g.pageUI.option.data[f].prdInfo.goodsCmpsCd:"50"),g.pageUI.option.orderSendInfo.goods_choc_desc+=d+"",g.pageUI.option.data[f].inputOptList!=c)for(var h=0;h<g.pageUI.option.data[f].inputOptList.items.length;h++){var i=g.pageUI.option.data[f].inputOptList.items[h];if(!e.inputValue.length||""==e.inputValue[h]||e.inputValue[h]==c)return g.productViewAlert({type:"alert",msg:"입력이 누락된 항목이 있습니다",time:2500}),"20"==i.valueType?g.showDatePicker(e,h):b.element("#item_"+f+"_"+e.idx+"_"+h).focus(),!1;var j=e.inputValue[h].replace(/-/gi,"");h>0&&(g.pageUI.option.orderSendInfo.goods_choc_desc+=LOTTE_CONSTANTS.SPLIT_GUBUN_3),g.pageUI.option.orderSendInfo.goods_choc_desc+=i.valueType,g.pageUI.option.orderSendInfo.goods_choc_desc+=":"+i.optNm,g.pageUI.option.orderSendInfo.goods_choc_desc+=":"+j}g.pageUI.option.orderSendInfo.ord_qty+=d+e.orderCnt,"cart"==g.pageUI.option.selectedType?(g.pageUI.option.orderSendInfo.infw_disp_no+=d+(g.pageUI.option.data[f].prdInfo.curDispNo?g.pageUI.option.data[f].prdInfo.curDispNo:""),g.pageUI.option.orderSendInfo.infw_disp_no_sct_cd+=d+(g.pageUI.option.data[f].prdInfo.curDispNoSctCd?g.pageUI.option.data[f].prdInfo.curDispNoSctCd:"")):(g.pageUI.option.orderSendInfo.infw_disp_no+=d+(g.pageUI.reqParam.curDispNo?g.pageUI.reqParam.curDispNo:g.pageUI.option.data[f].prdInfo.curDispNo),
g.pageUI.option.orderSendInfo.infw_disp_no_sct_cd+=d+(g.pageUI.reqParam.curDispNoSctCd?g.pageUI.reqParam.curDispNoSctCd:g.pageUI.option.data[f].prdInfo.curDispNoSctCd)),g.pageUI.option.orderSendInfo.master_goods_yn+=d+"N",g.pageUI.option.orderSendInfo.cart_sn+=d+"",g.pageUI.option.orderSendInfo.cmps_qty+=d+"0",g.pageUI.option.orderSendInfo.mast_disp_no+=d+g.pageUI.option.data[f].prdInfo.mastDispNo,g.pageUI.option.orderSendInfo.shop_memo_tp_cd+=d+"",g.pageUI.option.orderSendInfo.shop_memo_cont+=d+"",g.pageUI.option.orderSendInfo.smp_vst_shop_no+=d+"",g.pageUI.option.orderSendInfo.smp_vst_rsv_dtime+=d+"",g.pageUI.option.orderSendInfo.conr_no+=d+"",g.pageUI.option.orderSendInfo.std_goods_no+=d+g.pageUI.reqParam.goods_no,g.pageUI.option.orderSendInfo.smp_tp_cd+=d+"",g.pageUI.option.orderSendInfo.smp_deli_loc_sn+=d+"",g.pageUI.option.orderSendInfo.smartOrd+=d+"",g.pageUI.option.orderSendInfo.smp_prod_yn+=d+(g.pageUI.option.data[f].prdInfo.smpPsbYn?"Y":"N"),g.pageUI.option.orderSendInfo.smp_entr_no+=d+"",g.pageUI.option.orderSendInfo.smp_shop_no+=d+"",g.pageUI.option.orderSendInfo.is_ecoupon+=d+"",g.pageUI.option.data[f].prdInfo.rentalYn&&(g.pageUI.option.orderSendInfo.entr_no+=d+g.pageUI.option.data[f].prdInfo.entrNo,g.pageUI.option.orderSendInfo.pImg+=d+g.pageUI.option.data[f].prdInfo.imgUrl,g.pageUI.option.orderSendInfo.pTitle+=d+g.pageUI.option.data[f].prdInfo.goodsNm,g.pageUI.option.orderSendInfo.pPrice+=d+g.pageUI.option.data[f].prdInfo.price),g.pageUI.option.orderSendInfo.crspk_yn+=d+"",g.pageUI.option.orderSendInfo.crspk_psb_yn+=d+(g.pageUI.option.data[f].prdInfo.crspkPsbYn?"Y":"N"),g.pageUI.option.orderSendInfo.crspk_corp_cd+=d+"",g.pageUI.option.orderSendInfo.crspk_corp_str_sct_cd+=d+"",g.pageUI.option.orderSendInfo.crspk_str_no+=d+"",g.pageUI.option.orderSendInfo.crspk_store+=d+"",g.pageUI.option.orderSendInfo.smp_only_yn+=d+(g.pageUI.option.data[f].prdInfo.smpOnlyYn?"Y":"N");var k="";k=""!=g.pageUI.option.selectedType?g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].type:"",g.pageUI.option.orderSendInfo.qs_yn+=d+("quick"==k?"Y":"N")}return!0},g.checkImall=function(){var a="13145",b=g.pageUI.data.commonInfo.entrNo==a;return"cart"==g.pageUI.option.selectedType&&(b=g.pageUI.option.selectedItem[g.pageUI.option.selectedType][0].entrNo==a),b},g.imallProc=function(b){var c=g.pageUI.option.orderSendInfo.goods_no,e=g.pageUI.option.orderSendInfo.item_no,f=g.pageUI.option.orderSendInfo.ord_qty;d({url:i.productImallStockCheckData,method:"GET",async:!1,cache:!1,headers:{Accept:"application/json",Pragma:"no-cache"},params:{ord_qty:f,goods_no:c,item_no:e}}).success(function(c){if("cartAdd"==b)g.cartAddProc();else{var d;if(g.loginInfo.isLogin)d=i.secureUrl+"/order/m/order_form.do?"+g.baseParam+"&imallYN=Y&tclick=m_RDC_ProdDetail_Clk_order";else{var e=g.pageUI.option.minorityLimit[g.pageUI.option.selectedType]?"Y":"N";d=i.loginUrl+"?"+g.baseParam+"&fromPg="+LOTTE_CONSTANTS.IMALL_BUY_LOGIN+"&minority_yn="+e+"&smp_prod_yn=N&targetUrl="+encodeURIComponent(a.location.href,"UTF-8")+"&imallYN=Y&orderTclick=m_RDC_ProdDetail_Clk_order"}var f=j.find("#frm_send");f.attr("action",d),h.FormSubmit(f)}}).error(function(a){"1000"==a.error.response_code?alert(a.error.response_msg):alert("죄송합니다. 잠시 후 다시 이용해 주세요."),g.hideStayLoading()})},g.optionValueCheck=function(){var a=g.pageUI.data.commonInfo.entrNo;return"cart"==g.pageUI.option.selectedType&&(a=g.pageUI.option.selectedItem[g.pageUI.option.selectedType][0].entrNo),"443808"==a&&(g.pageUI.option.selectedCnt[g.pageUI.option.selectedType]>30||g.pageUI.option.selectedPrice[g.pageUI.option.selectedType]>15e5)?(alert("망고 상품의 경우 구매수량이 30개 이상 혹은 판매금액이 150만원 이상인 경우 구매가 제한되오니 구매를 원하시면 나눠서 구매해주세요!"),!1):!0},g.cartAdd=function(b){if(g.sendTclick(b),g.pageUI.option.selectedBox&&("buy"==g.pageUI.option.selectedType||"cart"==g.pageUI.option.selectedType)&&g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length>0){if(!g.buildOrderForm())return!1;if(!g.optionValueCheck())return!1;if(g.checkImall())g.imallProc("cartAdd");else{var c=null!=g.pageUI.option.orderSendInfo.smartOrd&&g.pageUI.option.orderSendInfo.smartOrd.indexOf("Y")>=0||"smartpic"==g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].type?!0:!1;if(c){var d=j.find("#frm_smart_send"),e=i.baseUrl+"/smartpick/m/smartpick_booking.do?"+g.baseParam;e+="&url_div=C",e+="&spick_app_yn=N",g.pageUI.option.orderSendInfo.back_url=encodeURIComponent(a.location.href,"UTF-8"),d.attr("action",e),h.FormSubmit(d)}else g.cartAddProc()}}else{if(g.pageUI.planProduct.show&&"30"==g.pageUI.data.commonInfo.goodsCmpsCd)return g.loadProductOption(g.pageUI.planProduct.goodsNo,"planBuy"),!1;g.pageUI.option.selectedType="buy",g.showOptionBox()}},g.buy=function(){if(!g.buildOrderForm())return!1;if(!g.pageUI.data.commonInfo.saleMobileYn)return alert("본 상품은 모바일 주문 불가능 상품 입니다."),!1;if(!g.optionValueCheck())return!1;if("gift"==g.pageUI.option.selectedType&&1!=g.pageUI.option.selectedItem[g.pageUI.option.selectedType].length)return alert("선물하기는 한개의 상품만 주문 가능 합니다."),!1;if(g.showStayLoading(),g.checkImall())g.imallProc();else{var b,c=null!=g.pageUI.option.orderSendInfo.smartOrd&&g.pageUI.option.orderSendInfo.smartOrd.indexOf("Y")>=0||"smartpic"==g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].type?!0:!1,d=j.find("#frm_send"),e=g.pageUI.option.minorityLimit[g.pageUI.option.selectedType]?"Y":"N";if(console.log("주문 체크 로그인값 ",g.loginInfo.isLogin),g.loginInfo.isLogin){console.log("주문 체크 로그인 한경우 ",g.loginInfo.isLogin);var f=g.pageUI.data.commonInfo.rentalYn;if("cart"==g.pageUI.option.selectedType&&(f=g.pageUI.option.selectedItem[g.pageUI.option.selectedType][0].rentalYn),c)d=j.find("#frm_smart_send"),b=i.baseUrl+"/smartpick/m/smartpick_booking.do?"+g.baseParam+"&gno=direct",i.isTestFlag&&(b="/smartpick/m/smartpick_booking_dev.html?"+g.baseParam),b+="&spick_app_yn=N";else if(f)d=j.find("#frm_rent_send"),b=i.secureUrl+"/product/m/product_rent.do?"+g.baseParam;else{m.getTclickCd("N","selectorder");b=i.secureUrl+"/order/m/order_form.do?"+g.baseParam}}else console.log("주문 체크 로그인 안한경우 ",g.loginInfo.isLogin),b=i.loginUrl+"?"+g.baseParam+"&fromPg="+LOTTE_CONSTANTS.ONENONE_BUY_LOGIN+"&smp_buy_yn="+(c?"Y":"N")+"&minority_yn="+e+"&targetUrl="+encodeURIComponent(a.location.href,"UTF-8"),g.pageUI.option.selectedItem[g.pageUI.option.selectedType][0].rentalYn&&(d=j.find("#frm_rent_send"),b=i.loginUrl+"?"+g.baseParam+"&fromPg="+LOTTE_CONSTANTS.ONENONE_BUY_LOGIN+"&isRental=Y&smp_buy_yn=N&minority_yn="+e+"&targetUrl="+encodeURIComponent(a.location.href,"UTF-8")),c&&(d=j.find("#frm_smart_send")),"gift"==g.pageUI.option.selectedType&&(b=i.loginUrl+"?"+g.baseParam+"&fromPg="+LOTTE_CONSTANTS.ONENONE_BUY_LOGIN+"&fromGift=1&isRental=N&smp_buy_yn=N&minority_yn="+e+"&targetUrl="+encodeURIComponent(a.location.href,"UTF-8"));"smartpic"==g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].type||f||-1!=b.indexOf(i.loginUrl)?"smartpic"!=g.pageUI.option.deliveryMethod[g.pageUI.option.selectedType].type&&!f&&b.indexOf(i.loginUrl)>-1&&(b+="&orderTclick=m_RDC_ProdDetail_Clk_order"):b+="&tclick=m_RDC_ProdDetail_Clk_order",g.pageUI.option.orderSendInfo.back_url=encodeURIComponent(a.location.href,"UTF-8"),d.attr("action",b),h.FormSubmit(d)}}}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("productDetailInfo",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(c,d,e,f,g,h,i,j){return{templateUrl:"/lotte/resources_dev/product/m/modules/product_detail_info.html",replace:!0,link:function(e,f,h){var i=b.element(f);e.viewPrdDetailPageBtn=!1,e.pageUI.productInfoMoreBtn=e.pageUI.productInfoMoreBtn?e.pageUI.productInfoMoreBtn:!1,e.pageUI.productInfoMoreBtnUp=e.pageUI.productInfoMoreBtnUp?e.pageUI.productInfoMoreBtnUp:!1,e.pageUI.productInfoGradient=e.pageUI.productInfoGradient?e.pageUI.productInfoGradient:!1,e.linkRealProdDetail=e.baseLink(g.productProductImgData)+"&goods_no="+e.pageUI.reqParam.goods_no,e.productInfoMoreCk=function(){d(function(){b.element("#detailLayout").height()>2e3&&(e.pageUI.productInfoMoreBtn=!0,e.pageUI.productInfoGradient=!0)},1500)},e.setDetailLayoutData=function(a){e.defenseBadHtml(a,b.element("#detailLayout")),e.prdDetailInfoModified(b.element("#detailLayout"),b.element("#detailLayout iframe, #detailLayout #sizeGuideTable .tabel_list_wrap >table"))},e.pageUI.loadData.product_detail&&(e.pageUI.isLoad.product_detail=!0,e.setDetailLayoutData(e.pageUI.loadData.product_detail)),e.loadProductDetailInfo=function(){if(!e.pageUI.isLoad.product_detail&&e.pageUI.data.callUrlInfo.prdDetailInfoUrl){e.pageUI.isLoad.product_detail=!0;var a=g.isTestFlag?g.productDetailData:e.pageUI.data.callUrlInfo.prdDetailInfoUrl;c.get(a).success(function(a){a.max&&(e.pageUI.loadData.product_detail=a.max,e.setDetailLayoutData(a.max),e.productInfoMoreCk())})}},e.productInfoDetailMore=function(){e.pageUI.productInfoMoreBtn=!1,e.pageUI.productInfoMoreBtnUp=!0},e.productInfoDetailMoreShow=function(){e.pageUI.productInfoMoreBtn=!0,e.pageUI.productInfoMoreBtnUp=!1,b.element(a).scrollTop(b.element("#productDetailSelect").offset().top+1962)},e.$on("winScroll",function(a,b){b.scrollPos+(e.appObj.isApp?0:48)>i.offset().top&&b.scrollPos<i.offset().top+i.height()-100?e.viewPrdDetailPageBtn=!0:e.viewPrdDetailPageBtn=!1,e.pageUI.isLoad.product_detail!==!0&&1.5*b.winHeight<=b.scrollPos+b.winHeight&&e.loadProductDetailInfo()})}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("planProductList",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,c,d,e,f,g,h,i){return{templateUrl:"/lotte/resources_dev/product/m/modules/plan_product_list.html",replace:!0,link:function(a,e,g){function h(c,d){a.defenseBadHtml(d,b.element(c)),a.prdDetailInfoModified(b.element(c),b.element(c+" iframe, "+c+" #sizeGuideTable .tabel_list_wrap >table"))}c(function(){a.pageUI.data.planPrdInfo.topHtml&&h("#planPrdTopHtml",a.pageUI.data.planPrdInfo.topHtml),a.pageUI.data.planPrdInfo.bottomHtml&&h("#planPrdBottomHtml",a.pageUI.data.planPrdInfo.bottomHtml)},100),a.planBenefitClick=function(b,c){var e=i.setUrlAddBaseParam(f.productCollectBenefitsUrl,a.pageUI.baseParam+"&goods_no="+b+"&curDispNo="+a.pageUI.reqParam.curDispNo+"&curDispNoSctCd="+a.pageUI.reqParam.curDispNoSctCd+"&"+a.pageUI.baseParam);d.location.href=e+(c?"&tclick="+c:"")},a.addCartClick=function(a){var c=b.element("#optionWrap").scope();console.log("plan cart goodsNo : ",a),c.cartPlanProduct(a,this.item.idx)},a.planProductDetailView=function(c){a.pageUI.planProduct.idx=this.$index,a.pageUI.planProduct.goodsNo=c;var e=b.element("#planProductDetail").scope();e.loadPlanProductDetail(c),a.pageUI.planProduct.beforeScrollPosY=b.element(d).scrollTop(),a.dimmedOpen({dimmed:!1})}}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("bestCategoryProducts",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,b,c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/product/m/modules/best_category_products.html",replace:!0,link:function(b,c,d){function f(a,c){a.prdList.items=a.prdList.items.slice(0,c),b.pageUI.loadData.product_saleBest=a}b.loadProductSaleBest=function(){if(!b.pageUI.isLoad.product_saleBest&&b.pageUI.data.callUrlInfo.saleBestInfoUrl){var c=e.rec_good+"&size=15&iids="+b.pageUI.data.commonInfo.goodsNo,d=e.isTestFlag?e.productSaleBestData:b.pageUI.data.callUrlInfo.saleBestInfoUrl;b.pageUI.isLoad.product_saleBest=!0,$.ajax({type:e.isTestFlag?"get":"post",async:!0,url:c,dataType:e.isTestFlag?"json":"jsonp",success:function(c){var e=[],g=0;if(c.results&&c.results.length>0){for(g;g<c.results.length;g++)e.push(c.results[g].itemId);a.get(d,{params:{goods_no:b.pageUI.data.commonInfo.goodsNo,goodsRelList:e.join(",")}}).success(function(a){a.data&&f(a.data,15)}).error(function(a){console.error("다른 고객들이 많이 산 (카테고리) 상품 조회 오류")})}},error:function(c,e,g){console.error("레코벨 데이터 호출 오류, 현재 상품번호만으로 호출"),a.get(d,{params:{goods_no:b.pageUI.data.commonInfo.goodsNo}}).success(function(a){a.data&&f(a.data,15)}).error(function(a){console.error("다른 고객들이 많이 산 (카테고리) 상품 조회 오류")})}})}},b.$on("winScroll",function(a,c){b.pageUI.isLoad.product_saleBest!==!0&&1.6*c.winHeight<=c.scrollPos+c.winHeight&&(console.log("product saleBest load"),b.loadProductSaleBest())})}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("similarStyleRecommend",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil","StyleRecom","LotteUserService","commInitData",function(a,b,d,e,f,g,h,i,j,k,l){return{templateUrl:"/lotte/resources_dev/product/m/modules/similar_style_recommend.html",replace:!0,link:function(a,b,e){a.similarSwipeIdx=0,a.similarSwipeContCnt=0,a.similarStyleRecomMoreUrl="",a.similarStyleSwipeEndHandler=function(b){a.similarSwipeIdx=b},a.loadProductSimilarStyle=function(){if(!a.pageUI.isLoad.product_similarStyle&&a.pageUI.data.callUrlInfo.styleRecommInfoUrl){a.pageUI.isLoad.product_similarStyle=!0;var b=(a.pageUI.data.imgInfo.imgList[0]+"").replace("_280","_550");j.setTclickBase=a.tClickRenewalBase,j.detect(b,function(b){if(b.length>0){var d=b[0].category,e="A",g=b[0].genCd;k.loadLoginInfoComplete.then(function(){1==d||8==d?e="F":"M"==g||"F"==g?e=g:a.loginInfo.isLogin&&a.loginInfo.genSctCd&&(e=a.loginInfo.genSctCd);var h=c;a.pageUI.data.imgInfo.styleRecommCatGrpCd!=c&&(h=a.pageUI.data.imgInfo.styleRecommCatGrpCd),j.setDotAPIUrl(a.pageUI.data.callUrlInfo.styleRecommInfoUrl),j.setSearchItemLimit(50),j.search(b[0].id,e,[d],h,function(b,c){a.similarStyleRecomMoreUrl=f.isTestFlag?f.styleRecomUrl+"?img=http://image.lotte.com/goods/81/72/32/17/17327281_1_550.jpg&cate=1":c;var d=b.slice(0,12),e=Math.floor(d.length/3);style_list=d.slice(0,3*e);var g=[],h=0,i=0;for(h;h<style_list.length;h++)h%6==0&&0!=h&&i++,"undefined"==typeof g[i]&&(g[i]=[]),g[i].push(style_list[h]);a.similarSwipeContCnt=i+1,a.pageUI.loadData.product_similarStyle=g},l.query.goods_no)})}},l.query.goods_no)}},a.$on("winScroll",function(b,c){if(a.pageUI.isLoad.product_similarStyle!==!0&&"undefined"!=typeof a.pageUI.data&&"undefined"!=typeof a.pageUI.data.imgInfo&&a.pageUI.data.imgInfo.styleRecomYn!==!1){try{switch(a.pageUI.data.imgInfo.styleDispCd){case 1:a.pageUI.data.imgInfo.styleIconYn=!0,a.pageUI.data.imgInfo.styleRecomYn=!1;break;case 2:a.pageUI.data.imgInfo.styleIconYn=!0,a.pageUI.data.imgInfo.styleRecomYn=!0;break;case 3:a.pageUI.data.imgInfo.styleIconYn=!1,a.pageUI.data.imgInfo.styleRecomYn=!0;break;default:a.pageUI.data.imgInfo.styleIconYn=!1,a.pageUI.data.imgInfo.styleRecomYn=!1}}catch(d){return}a.pageUI.data.imgInfo.styleRecomYn===!0&&1.6*c.winHeight<=c.scrollPos+c.winHeight&&(console.log("product similarStyle load"),a.loadProductSimilarStyle())}}),a.goStyleRecomMore=function(){var b="m_RDC_ProdDetail_Clk_RelSty_more";a.similarStyleRecomMoreUrl?d.location.href=a.baseLink(a.similarStyleRecomMoreUrl)+"&tclick="+b+"&goods_no="+l.query.goods_no:a.goStyleRecom(0,b)}}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("productComment",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil","Fnproductview",function(a,c,d,e,f,g,h,i,j){return{templateUrl:"/lotte/resources_dev/product/m/modules/product_comment.html",replace:!0,link:function(c,e,g){c.loadProductComment=function(){if(!c.pageUI.isLoad.product_comment&&c.pageUI.data.callUrlInfo.commentInfoUrl){c.pageUI.isLoad.product_comment=!0;var b=f.isTestFlag?f.productCommentData:c.pageUI.data.callUrlInfo.commentInfoUrl;a.get(b).success(function(a){a.data&&(c.pageUI.loadData.product_comment=a.data)})}},c.productInfoDetailMore=function(){c.pageUI.productInfoMoreBtn=!1},c.recommClick=function(b){c.loginInfo.isLogin?b.regRecommUrl&&(b.myRecomm=!0,b.recommYn=!0,a.get(f.isTestFlag?f.regRecomUrl:b.regRecommUrl).success(function(a){if(a.data){if(alert(a.data.resultMsg),a.data.resultCode)switch(a.data.resultCode){case"01":case"02":b.recommCnt=b.recommCnt+1;case"03":b.recommYn=!0;break;case"04":case"05":b.recommYn=!1}}else alert("다시 한번 시도해주시기 바랍니다."),b.recommYn=!1})):(alert("로그인을 해주세요."),j.goToLogin(d,c,f.loginUrl))},c.$on("winScroll",function(a,b){c.pageUI.isLoad.product_comment!==!0&&1.6*b.winHeight<=b.scrollPos+b.winHeight&&(console.log("product comment load"),c.loadProductComment())}),c.moreCmt=function(){b.element(".cmt_list_wrap .cmt_list li .cmtLongTxt").eq(this.$index).show(),b.element(".cmt_list_wrap .cmt_list li .cmtShortTxt").eq(this.$index).hide()}}}}]),d.filter("cmtShortTxt",function(){return function(a){return a.substring(0,73)}})}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("productQna",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,c,d,e,f,g,h,i){return{templateUrl:"/lotte/resources_dev/product/m/modules/product_qna.html",replace:!0,link:function(c,d,e){c.loadProductQnA=function(){if(!c.pageUI.isLoad.product_qna&&c.pageUI.data.callUrlInfo.qnaInfoUrl){c.pageUI.isLoad.product_qna=!0;var b=f.isTestFlag?f.productQnAData:c.pageUI.data.callUrlInfo.qnaInfoUrl;a.get(b).success(function(a){a.data&&(c.pageUI.loadData.product_qna=a.data)})}},c.$on("winScroll",function(a,b){c.pageUI.isLoad.product_qna!==!0&&1.6*b.winHeight<=b.scrollPos+b.winHeight&&(console.log("product qna load"),c.loadProductQnA())}),c.moreQuestion=function(){b.element(".qna_area li .question .qtLongTxt").eq(this.$index).show(),b.element(".qna_area li .question .qtShortTxt").eq(this.$index).hide()},c.moreAnswer=function(){b.element(".qna_area li .answer .asLongTxt").eq(this.$index).show(),b.element(".qna_area li .answer .asShortTxt").eq(this.$index).hide()}}}}]),d.filter("qtShortTxt",function(){return function(a){return a.substring(0,73)}}),d.filter("asShortTxt",function(){return function(a){return a.substring(0,46)}})}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("brandBest",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,b,c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/product/m/modules/brand_best.html",replace:!0,link:function(b,c,d){b.loadProductBrandBest=function(){if(!b.pageUI.isLoad.product_brandBest&&b.pageUI.data.callUrlInfo.brandBestInfoUrl){b.pageUI.isLoad.product_brandBest=!0;var c=e.isTestFlag?e.productBrandBestData:b.pageUI.data.callUrlInfo.brandBestInfoUrl;a.get(c).success(function(a){a.data&&(b.pageUI.loadData.product_brandBest=a.data,(b.pageUI.myBrandStr.indexOf("|"+b.pageUI.data.commonInfo.uprBrndNo+"|")>=0||b.pageUI.isMyBrand)&&(b.pageUI.loadData.product_brandBest.saveBrndYn=!0))})}},b.$on("winScroll",function(a,c){b.pageUI.isLoad.product_brandBest!==!0&&1.6*c.winHeight<=c.scrollPos+c.winHeight&&(console.log("product brandBest load"),b.loadProductBrandBest())}),b.addBrandFavoriteClick=function(a,c){b.pageUI.loadData.product_brandBest.saveBrndYn||b.pageUI.isMyBrand?b.brandBookMark(a,"del","",c):b.brandBookMark(a,"add","",c)}}}}]),d.filter("txt7Length",function(){return function(a){return a.substring(0,7)}})}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("productBestView",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil","commInitData",function(a,b,c,d,e,f,g,h,i){return{templateUrl:"/lotte/resources_dev/product/m/modules/product_best_view.html",replace:!0,link:function(b,c,d){function f(a,c){a.prdList.items=a.prdList.items.slice(0,c),b.pageUI.loadData.product_bestView=a}b.loadProductBestView=function(){if(!b.pageUI.isLoad.product_bestView&&b.pageUI.data.callUrlInfo.recommPrdInfoUrl){b.pageUI.isLoad.product_bestView=!0;var c=e.rec_good+"&size=15&iids="+b.pageUI.data.commonInfo.goodsNo;"ds"===i.query.mode&&(c=e.salebestlist_url_ds+"?size=15&iids="+b.pageUI.data.commonInfo.goodsNo);var d=e.isTestFlag?e.productBestViewData:b.pageUI.data.callUrlInfo.recommPrdInfoUrl;$.ajax({type:e.isTestFlag?"get":"post",async:!0,url:c,dataType:e.isTestFlag?"json":"jsonp",success:function(c){var e=[],g=0;if(c.results&&c.results.length>0){for(g;g<c.results.length;g++)e.push(c.results[g].itemId);a.get(d,{params:{goods_no:b.pageUI.data.commonInfo.goodsNo,goodsRelList:e.join(",")}}).success(function(a){a.data&&f(a.data,10)}).error(function(a){console.warn("다른 고객들이 함께 본 상품 조회 오류")})}},error:function(c,e,g){console.warn("레코벨 데이터 호출 오류, 현재 상품번호만으로 호출"),a.get(d,{params:{goods_no:b.pageUI.data.commonInfo.goodsNo}}).success(function(a){a.data&&f(a.data,10)}).error(function(a){console.warn("다른 고객들이 함께 본 상품 조회 오류")})}})}},b.$on("winScroll",function(a,c){b.pageUI.isLoad.product_bestView!==!0&&1.6*c.winHeight<=c.scrollPos+c.winHeight&&(console.log("product bestView load"),b.loadProductBestView())})}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("mdRecommendProduct",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,b,c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/product/m/modules/md_recommend_product.html",replace:!0,link:function(b,c,d){function f(a,c){if(a.prdList&&a.prdList.items){var d=g(a.prdList.items);a.prdList.items=d.slice(0,c),b.pageUI.loadData.product_mdRecom=a}}function g(a){var b=[],c=0;for(c;c<a.length;c++)a[c].isPlanPrd||b.push(a[c]);return b}function h(){if(b.pageUI.data.callUrlInfo.otherBuyInfoUrl){var c=e.recobellOtherBuyInfoUrl+"&iids="+b.pageUI.data.commonInfo.goodsNo,d=e.isTestFlag?e.otherBuyInfoUrl:b.pageUI.data.callUrlInfo.otherBuyInfoUrl;$.ajax({type:e.isTestFlag?"get":"post",async:!0,url:c,dataType:e.isTestFlag?"json":"jsonp",success:function(c){var e=[],g=0;if(c.results&&c.results.length>0){for(g;g<c.results.length;g++)e.push(c.results[g].itemId);a.get(d,{params:{goodsRelList:e.join(",")}}).success(function(a){a.data&&(f(a.data,6),b.pageUI.loadData.product_mdRecom.mdRecomProdTitle="다른 고객들이 함께 찾은 상품",b.pageUI.loadData.product_mdRecom.mdRecomType="other")}).error(function(a){console.warn("다른 고객이 함께 찾은 상품 조회 오류")})}else console.warn("레코벨 다른 고객이 함께 찾은 상품 없음")},error:function(a,b,c){console.warn("레코벨 다른 고객이 함께 찾은 상품 조회 오류")}})}}b.pageUI.loadData.product_mdRecom&&!b.pageUI.loadData.product_mdRecom.mdRecomProdTitle&&(b.pageUI.loadData.product_mdRecom.mdRecomProdTitle="MD가 추천한 상품"),b.pageUI.loadData.product_mdRecom&&!b.pageUI.loadData.product_mdRecom.mdRecomType&&(b.pageUI.loadData.product_mdRecom.mdRecomType="md"),b.loadProductMDRecom=function(){if(!b.pageUI.isLoad.product_mdRecom&&b.pageUI.data.callUrlInfo.mdRecommPrdInfoUrl){b.pageUI.isLoad.product_mdRecom=!0;var c=e.isTestFlag?e.productMDRecomData:b.pageUI.data.callUrlInfo.mdRecommPrdInfoUrl;a.get(c).success(function(a){a.data&&a.data.prdList&&a.data.prdList.items&&a.data.prdList.items.length>0?(f(a.data,15),b.pageUI.loadData.product_mdRecom.mdRecomType="md",b.pageUI.loadData.product_mdRecom.mdRecomProdTitle="MD가 추천한 상품"):h()}).error(function(a){console.warn("MD가 추천한 상품 데이터 오류"),h()})}},b.mdRecomAddCart=function(a){var c="m_RDC_ProdDetail_Swp_RelMD_Cart";console.log("$scope.pageUI.loadData.product_mdRecom.mdRecomType",b.pageUI.loadData.product_mdRecom.mdRecomType),"other"==b.pageUI.loadData.product_mdRecom.mdRecomType&&(c="m_RDC_ProdDetail_Swp_Relcodi_Cart"),b.addCartOptionSelect(a,c)},b.$on("winScroll",function(a,c){b.pageUI.isLoad.product_mdRecom!==!0&&1.6*c.winHeight<=c.scrollPos+c.winHeight&&(console.log("product mdRecom load"),b.loadProductMDRecom())})}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("togetherPlanList",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,b,c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/product/m/modules/together_plan_list.html",replace:!0,link:function(b,d,f){function g(a){return 1==(""+a).length?"0"+a:a}b.prdTogePlanCurIdx=0,b.prdTogePlanSwipeEnd=function(a){b.prdTogePlanCurIdx=a},b.loadProductTogePlan=function(){if(!b.pageUI.isLoad.product_togePlan&&b.pageUI.data.callUrlInfo.recommSpdpInfoUrl){b.pageUI.isLoad.product_togePlan=!0;var c=e.rec_plan+"&size=10&iids="+b.pageUI.data.commonInfo.goodsNo,d=e.isTestFlag?e.recommSpdpInfoUrl:b.pageUI.data.callUrlInfo.recommSpdpInfoUrl;$.ajax({type:e.isTestFlag?"get":"post",async:!0,url:c,dataType:e.isTestFlag?"json":"jsonp",success:function(c){var e=[],f=0;if(c.results&&c.results.length>0){for(f;f<c.results.length;f++)e.push((c.results[f].itemId+"").trim());a.get(d,{params:{spdp_no_list:e.join(",")}}).success(function(a){a.data&&(b.pageUI.loadData.product_togePlan=a.data)}).error(function(a){console.warn("추천기획전 조회 오류")})}},error:function(a,b,c){console.warn("레코벨 추천기획전 조회 오류")}})}},b.$on("winScroll",function(a,c){b.pageUI.isLoad.product_togePlan!==!0&&1.6*c.winHeight<=c.scrollPos+c.winHeight&&(console.log("product togePlan load"),b.loadProductTogePlan())}),b.togePlanGoPlanshop=function(a,d){var e="m_RDC_ProdDetail_Swp_RelPlan_Ban";a.linkUrl.indexOf("_reco=M_plan_detail")>-1&&(e="m_RDC_ProdDetail_Swp_RelRecoPlan_Ban"),c.location.href=b.baseLink(a.linkUrl)+"&tclick="+e+g(d+1)},b.getPageGroup=function(a,b){for(var c=[],d=0;a/b>d;d++)c.push(d);return c}}}}]),d.filter("paging",[function(){return function(a,b,c){for(var d=[],e=0;e<a.length;e++)e>=b*c&&(b+1)*c>e&&d.push(a[e]);return d}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("planProductDetail",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,d,e,f,g,h,i,j){return{templateUrl:"/lotte/resources_dev/product/m/modules/plan_product_detail.html",replace:!0,link:function(d,f,h){d.setPlanProductDetailLayoutData=function(a){d.defenseBadHtml(a,b.element("#planDetailLayout")),d.prdDetailInfoModified(b.element("#planDetailLayout"),b.element("#planDetailLayout iframe, #planDetailLayout #sizeGuideTable .tabel_list_wrap >table"))},d.loadPlanProductDetailInfo=function(){var b=g.isTestFlag?"/json/product/product_detail_60832055.json":g.productDetailData+"?goods_no="+d.pageUI.planProduct.goodsNo;a.get(b).success(function(a){a.max&&(d.pageUI.planProduct.data[d.pageUI.planProduct.goodsNo].detailHtml=a.max,d.setPlanProductDetailLayoutData(a.max))})},d.loadPlanProductDetail=function(c){var e=g.isTestFlag?"/json/product/product_view_418852201.json":g.productProductView2017Data+"?goods_no="+c;a.get(e).success(function(a){d.pageUI.planProduct.data[c]=a.data,setTimeout(function(){autoVideoPlay("autoVideoPlanDetail","#autoVideoPlanDetail")},1500),location.href="#/planProductDetail",d.pageUI.planProduct.prevIdx=d.getPrevPlanProdIdx(),d.pageUI.planProduct.nextIdx=d.getNextPlanProdIdx(),b.element("#planProductDetail").scrollTop(0)}).error(function(){d.pageUI.loadingFail=!0,console.log("Data Error : 기획상품 상세정보 데이터 로드 실패")})["finally"](function(){d.loadPlanProductDetailInfo()})},d.planProdSelectClick=function(a,c){d.pageUI.planProduct.showSelectBox=!1,d.pageUI.planProduct.idx=c,d.pageUI.planProduct.goodsNo=a,d.loadPlanProductDetail(a),b.element(document.getElementById("planProductDetailScrollArea")).scrollTop(0)},d.planProdSelectOpen=function(a){a&&a.stopPropagation(),d.pageUI.planProduct.showSelectBox=!d.pageUI.planProduct.showSelectBox,b.element(e).on("click.planProdSelectOpen",function(){b.element(e).off(".planProdSelectOpen"),d.pageUI.planProduct.showSelectBox=!1})},d.closePlanProductDetail=function(){location.href="#/"},d.getPrevPlanProdIdx=function(){for(var a,b=d.pageUI.planProduct.idx-1;b>=0;b--)if(d.pageUI.data.planPrdInfo.prdList.items[b].goodsNo&&!d.pageUI.data.planPrdInfo.prdList.items[b].soldOutYn){a=b;break}if(a==c)for(var b=d.pageUI.data.planPrdInfo.prdList.items.length-1;b>=0;b--)if(d.pageUI.data.planPrdInfo.prdList.items[b].goodsNo&&!d.pageUI.data.planPrdInfo.prdList.items[b].soldOutYn){a=b;break}return a},d.getNextPlanProdIdx=function(){for(var a,b=d.pageUI.planProduct.idx+1;b<d.pageUI.data.planPrdInfo.prdList.items.length;b++)if(d.pageUI.data.planPrdInfo.prdList.items[b].goodsNo&&!d.pageUI.data.planPrdInfo.prdList.items[b].soldOutYn){a=b;break}if(a==c)for(var b=0;b<d.pageUI.data.planPrdInfo.prdList.items.length;b++)if(d.pageUI.data.planPrdInfo.prdList.items[b].goodsNo&&!d.pageUI.data.planPrdInfo.prdList.items[b].soldOutYn){a=b;break}return a}}}}]),d.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("chanelRelationInfo",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,b,c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/product/m/modules/chanel_relation_info.html",replace:!0,link:function(b,c,d){b.loadChanelRelationInfo=function(){if(!b.pageUI.isLoad.chanel_relation_info&&b.pageUI.data.callUrlInfo.chanelRelInfoUrl){b.pageUI.isLoad.chanel_relation_info=!0;var c=e.isTestFlag?e.chanelRelInfoUrlData:b.pageUI.data.callUrlInfo.chanelRelInfoUrl;a.get(c).success(function(a){a.data&&(b.pageUI.loadData.chanel_relation_info=a.data)})}},b.$on("winScroll",function(a,c){b.pageUI.isLoad.chanel_relation_info!==!0&&1.6*c.winHeight<=c.scrollPos+c.winHeight&&(console.log("Chanel Realtion Info load"),b.loadChanelRelationInfo())})}}}])}(window,window.angular),function(a,b,c){var d=b.module("app");d.directive("productBottomBanner",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,b,c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/product/m/modules/product_bottom_banner.html",replace:!0,link:function(b,c,d){b.loadProductBottomBanner=function(){if(!b.pageUI.isLoad.product_bottom_banner&&(console.info(b.pageUI.data.callUrlInfo.footerBannerInfoUrl),b.pageUI.data.callUrlInfo.footerBannerInfoUrl)){b.pageUI.isLoad.product_bottom_banner=!0;var c=e.isTestFlag?e.productBottomBannerData:b.pageUI.data.callUrlInfo.footerBannerInfoUrl;a.get(c).success(function(a){a.data&&(b.pageUI.loadData.product_bottom_banner=a.data)})}},b.$on("winScroll",function(a,c){b.pageUI.isLoad.product_bottom_banner!==!0&&1.6*c.winHeight<=c.scrollPos+c.winHeight&&b.loadProductBottomBanner()})}}}])}(window,window.angular);