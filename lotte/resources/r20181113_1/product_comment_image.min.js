!function(a,b,c){"use strict";var d=b.module("product-sub-header",[]);d.directive("productSubHeader",["$http","$timeout","$window","$location","LotteCommon","LotteCookie","LotteStorage","LotteUtil",function(a,b,c,d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/product/m/sub/product_sub_header.html",replace:!0,link:function(a,b,c){a.gotoPrepage=function(){a.jsonLoading=!0,a.sendTclick("m_RDC_header_new_pre"),a.appObj.isNativeHeader?appSendBack():history.go(-1)}}}}]),"undefined"!=typeof module&&module.exports&&(module.exports=d.name)}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","product-sub-header"]);d.controller("ProductCommentImageCtrl",["$window","$http","$scope","$timeout","LotteCommon","commInitData",function(a,b,c,d,e,f){function g(a){var b={};b.photoItems=[],b.videoItems=[];for(var c=0;c<a.critList.items.length;c++){var d=a.critList.items[c];if(d.photoList&&d.photoList.items.length>0)if(d.videoUrl){var e={};e.critTpCd=d.critTpCd,e.videoUrl=d.videoUrl,e.critCont=d.critCont,e.total=d.photoList.items.length,e.imgMain=d.photoList.items[0].imgUrl,e.contsUrl=d.photoList.items[0].contsUrl,b.videoItems.push(e)}else for(var f=0;f<d.photoList.items.length;f++){var g={};g.critTpCd=d.critTpCd,g.critCont=d.critCont,g.total=d.photoList.items.length,g.imgUrl=d.photoList.items[f].imgUrl,g.contsUrl=d.photoList.items[f].contsUrl,b.photoItems.push(g)}}return b}c.showWrap=!0,c.contVisible=!0,c.productSubTitle="사진/영상 모아보기",c.screenID="product_comment_image",c.jsonLoading=!1,c.gaCtgName="MO_상품상세_사진/영상 모아보기",c.pageUI={selectTab:1,loadData:null,reqParam:{}},c.picHeight=parseInt(($(document).width()-28)/3,10),c.pageUI.reqParam.goods_no=f.query.goods_no?f.query.goods_no:"",c.pageUI.reqParam.usm_goods_no=f.query.usm_goods_no?f.query.usm_goods_no:"",c.loadData=function(){c.jsonLoading=!0,b.get(e.prodSubCommentImageData,{params:c.pageUI.reqParam}).success(function(a){a.data&&(c.pageUI.loadData=g(a.data))}).error(function(){console.log("Data Error : 상품평 상세보기 데이터 로드 실패")})["finally"](function(){c.jsonLoading=!1})},c.loadData(),c.addZero=function(a,b){for(var c=a+"",d=b||2;c.length<d;)c="0"+c;return c}}]),d.directive("lotteContainer",["$timeout","LotteUtil","LotteGA",function(a,b,c){return{templateUrl:"/lotte/resources_dev/product/m/sub/product_comment_image_container.html",replace:!0,link:function(d,e,f){d.linkClick=function(e,f){c.evtTag(d.gaCtgName,2==d.pageUI.selectTab?"영상 탭":"사진 탭",d.addZero(f,3)),a(function(){location.href=b.setUrlAddBaseParam(e,d.baseParam+"&tclick=")},300)},d.clickTab=function(a){d.pageUI.selectTab=a,c.evtTag(d.gaCtgName,2==a?"영상 탭":"사진 탭","탭 클릭")}}}}])}(window,window.angular);