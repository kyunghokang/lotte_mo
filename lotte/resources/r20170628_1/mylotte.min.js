!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.controller("MyLotteMainCtrl",["$scope","$http","$window","commInitData","LotteCommon","LotteCookie","LotteUtil",function(b,d,e,f,g,h,i){b.showWrap=!0,b.contVisible=!0,b.subTitle="마이롯데",b.isShowThisSns=!1,b.memberLoginPopup=!1,b.welcomeFlag=!1,b.isShowLoadingImage=!0,b.grockle_yn=!1;var j=null!=f.query.grockle_yn?f.query.grockle_yn:"N";b.grockle_yn="Y"==j?!0:!1,b.schema="",b.schema=null!=f.query.schema?f.query.schema:"",this.getCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""};var k="";typeof SEED_DATA!=c&&(k=SEED_DATA);var l=this.getCookie("SIMPLESIGNYN"),m=i.getLoginSeed().toUpperCase(),n=encodeURIComponent((""==b.schema?g.baseUrl:b.schema+g.baseUrl.replace("http",""))+"/"+(i.isSmp()?"main_smp.do":"main.do")+b.baseParam,"UTF-8"),o="";o=""==b.schema?encodeURIComponent(a.location.href,"UTF-8"):a.location.href.replace(/^http(s)?/,b.schema);var p=g.changeMyInfoUrl+"?sid="+m+"&returnurl="+o+"&main_url="+n+"&custid="+k+"&loginid="+h.getCookie("LOGINID")+"&pageflag=I&opentype=P&sch="+b.schema,q=g.memberOutUrl+"?sid="+m+"&returnurl="+o+"&main_url="+n+"&custid="+k+"&loginid="+h.getCookie("LOGINID")+"&opentype=P&sch="+b.schema,r=navigator.userAgent,s=g.mylotteMainData+"?smartAlarmViewTime="+localStorage.getItem("smart_alarm_view_time")+"&viewGoods="+localStorage.getItem("latelyGoods");d.get(s).success(function(a){1e3==a.resultCode?(b.contents={},b.subTitle="마이롯데",b.noData=!0,b.contVisible=!1):(b.myLotteMainInfo=a.mylotte,b.myGradeType=a.mylotte.mbrGradeCd,"80"==a.mylotte.mbrGradeCd&&"Y"!=a.mylotte.couponInfo.mbr_down_yn&&(b.welcomeFlag=!0),b.alarmFlag=!1,"Y"==b.myLotteMainInfo.newAlarmYn&&(b.alarmFlag=!0),p=g.changeMyInfoUrl+"?sid="+m+"&returnurl="+o+"&main_url="+n+"&custid="+b.myLotteMainInfo.seedCustId+"&loginid="+h.getCookie("LOGINID")+"&pageflag=I&opentype=P&sch="+b.schema,q=g.memberOutUrl+"?sid="+m+"&returnurl="+o+"&main_url="+n+"&custid="+b.myLotteMainInfo.seedCustId+"&loginid="+h.getCookie("LOGINID")+"&opentype=P&sch="+b.schema),b.isShowLoadingImage=!1}).error(function(a,c,d,e){console.log("Error Data : ",c,d,e),b.isShowLoadingImage=!1}),b.myLotteMainLinkObj={ordLstUrl:g.ordLstUrl+"?"+b.baseParam+"&searchFlag=D15&ordDtlStatCd=10&tclick=m_DC_MyPage_Clk_Btn_9",ordLstM1Url:g.ordLstUrl+"?"+b.baseParam+"&searchFlag=M1&ordDtlStatCd=10&tclick=m_DC_MyPage_Clk_Btn_9",ordCancelUrl:g.ordCancelUrl+"?"+b.baseParam+"&fromPg=3&ordListCase=3&tclick=m_DC_MyPage_Clk_Btn_10",ecouponListUrl:g.baseUrl+"/smartpick/smp_cpn_rfd_list.do?c=mlotte&udid=&v=&cn=&cdn=&tclick=m_DC_MyPage_Clk_Btn_11",attendEventUrl:g.baseUrl+"/event/m/directAttend.do?"+b.baseParam+"&tclick=m_dc_MyPage_Clk_Btn_attendcheck",critViewUrl:g.critViewUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_12",eventGumeUrl:g.eventGumeUrl+"?"+b.baseParam+"&search_div=event_list&tclick=m_DC_MyPage_Clk_Btn_13",mylotteReinquiryListUrl:g.mylotteReinquiryListUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_14",lPayEasyUrl:g.lPayEasyUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_14",orderAlarmYnUrl:g.orderAlarmYnUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_17",smartpayUrl:g.smartpayUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_15",questionUrl:g.questionUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_16",cscenterAnswerUrl:g.cscenterAnswerUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_19",friendCouponUrl:g.baseUrl+"/event/couponBook.do?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_1",gdBenefitUrl:g.gdBenefitUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_2",talkUrl:g.talkUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_22",talkIntroUrl:g.talkIntroUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_28",smartAlarmUrl:g.smartAlarmUrl+"?"+b.baseParam+"&curDispNoSctCd=22&tclick=m_DC_MyPage_Clk_Btn_23",wishLstUrl:g.wishLstUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_25",cscenterMain:"/custcenter/cscenter_main.do?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_18",QandA:"/mylotte/product/m/mylotte_reinquiry_list.do?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_16",ordLst2Url:g.ordLstUrl+"?"+b.baseParam+"&fromPg=3&tclick=m_DC_MyPage_Clk_Btn_10",presentList:g.presentListUrl+"?"+b.baseParam},b.myLotteLateProd=function(){setTimeout(function(){e.location.href=g.lateProdUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_26&viewGoods="+localStorage.getItem("latelyGoods")})},b.lPointClick=function(){e.location.href=g.pointInfoUrl+"?"+b.baseParam+"&point_div=lt_point&tclick=m_DC_MyPage_Clk_Btn_3"},b.lMoneyClick=function(){e.location.href=g.pointInfoUrl+"?"+b.baseParam+"&point_div=l_point&tclick=m_DC_MyPage_Clk_Btn_4"},b.depositClick=function(){e.location.href=g.pointInfoUrl+"?"+b.baseParam+"&point_div=deposit&tclick=m_DC_MyPage_Clk_Btn_5"},b.couponClick=function(){e.location.href=g.pointInfoUrl+"?"+b.baseParam+"&point_div=coupon&tclick=m_DC_MyPage_Clk_Btn_6"},b.cloverClick=function(){e.location.href=g.pointInfoUrl+"?"+b.baseParam+"&point_div=clover&tclick=m_DC_MyPage_Clk_Btn_7"},b.smartPickClick=function(){e.location.href=g.smartPickListUrl+"?"+b.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_8"},b.ordDetailClick=function(a){var c=a.toString().substr(1,1);e.location.href=g.ordLstUrl+"?"+b.baseParam+"&searchFlag=D15&ordDtlStatCd=10&orderListType="+a+"&tclick=m_DC_MyPage_Clk_Lnk_"+c},b.welcomeClose=function(){b.welcomeFlag=!1},b.goPointCoupon=function(){var a=$location.protocol()+"://"+$location.host();e.location.href=a+"/mylotte/pointcoupon/point_info.do?"+b.baseParam+"&point_div=coupon"},b.memeberChagne=function(){if(b.loginInfo.isLogin)if(0==b.myLotteMainInfo.valid_login)console.log("2015년4월20일 이전 로그인 유저"),b.memberLoginPopup=!0,b.dimmedOpen({target:"memberPopup",callback:b.closePopup});else{if("Y"==l)return alert("간편회원의 정보변경/탈퇴는 PC에서만 가능합니다."),!1;b.sendTclick("m_DC_MyPage_Clk_Btn_20"),outLink(p)}else alert("로그인 후 이용 가능합니다.")},b.memberOut=function(){if(b.loginInfo.isLogin)if(0==b.myLotteMainInfo.valid_login)console.log("2015년4월20일 이전 로그인 유저"),b.memberLoginPopup=!0,b.dimmedOpen({target:"memberPopup",callback:b.closePopup});else{if("Y"==l)return alert("간편회원의 정보변경/탈퇴는 PC에서만 가능합니다."),!1;b.sendTclick("m_DC_MyPage_Clk_Btn_21"),outLink(q)}else alert("로그인 후 이용 가능합니다.")},b.goLoginClick=function(){var a="&tclick=m_DC_MyPage_Clk_Btn_27&targetUrl="+encodeURIComponent(g.mylotteUrl+"?"+b.baseParam,"UTF-8");e.location.href=g.loginUrl+"?"+b.baseParam+a},b.goFamilySite=function(c){if(b.appObj.isIOS&&b.appObj.isApp){b.sendTclick("m_DC_Mypage_Clk_Btn_28");$.ajax({type:"post",async:!1,url:g.getJoinBtnViewAjaxUrl,success:function(d){if(d=d.result.trim(),"Y"==d)alert("[아이디/비밀번호 찾기, 회원가입] 서비스는 일시적으로 롯데닷컴/엘롯데 PC를 통해 이용가능합니다. 이용에 불편을 드려 죄송합니다.");else{var e="member.lpoint.com/door/user/mobile/",f=encodeURIComponent((""==b.schema?g.baseUrl:b.schema+g.baseUrl.replace("http",""))+"/"+(i.isSmp()?"main_smp.do":"main.do")+b.baseParam,"UTF-8"),h="",j=a.location.href;j=""==b.schema?encodeURIComponent(a.location.href,"UTF-8"):encodeURIComponent(j.replace(b.web_scheme,b.schema),"UTF-8"),"id"==c?h="requestId.jsp":"passwd"==c?h="requestPasswd.jsp":"mem_reg"==c&&(h="login_common.jsp"),e+=h+"?sid="+i.getLoginSeed()+"&returnurl="+j+"&main_url="+f,e+="&sch="+b.schema,b.sendOutLink("https://"+e,"family")}},error:function(a){alert(a.message)}})}else b.goFamilySite2(c)},b.goFamilySite2=function(c){if("id"==c?b.sendTclick("m_DC_login_clk_Lnk_1"):"passwd"==c?b.sendTclick("m_DC_login_clk_Lnk_2"):"mem_reg"==c&&b.sendTclick("m_DC_Mypage_Clk_Btn_28"),"N"==b.joinBtnViewYn){var d=/iphone|ipad/gi.test(navigator.appVersion);if(("id"==c||"passwd"==c||"mem_reg"==c)&&d)return void alert("[아이디/비밀번호 찾기, 회원가입] 서비스는 일시적으로 롯데닷컴/엘롯데 PC를 통해 이용가능합니다. 이용에 불편을 드려 죄송합니다.")}var e="member.lpoint.com/door/user/mobile/",f=encodeURIComponent((""==b.schema?g.baseUrl:b.schema+g.baseUrl.replace("http",""))+"/"+(i.isSmp()?"main_smp.do":"main.do")+b.baseParam,"UTF-8"),h="",j=a.location.href;j=""==b.schema?encodeURIComponent(a.location.href,"UTF-8"):encodeURIComponent(j.replace(b.web_scheme,b.schema),"UTF-8"),"id"==c?h="requestId.jsp":"passwd"==c?h="requestPasswd.jsp":"mem_reg"==c&&(h="login_common.jsp"),e+=h+"?sid="+i.getLoginSeed()+"&returnurl="+j+"&main_url="+f,e+="&sch="+b.schema,""!=b.schema?i.boolAppInstall(r)?a.location="family://"+e:i.boolAndroid(r)&&a.myJs.callAndroid("https://"+e):a.open("https://"+e,"family")},b.closePopup=function(){b.memberLoginPopup=!1,b.dimmedClose()}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/mylotte/m/mylotte_main_container.html",replace:!0,link:function(a,b,c){}}}),d.filter("textOrNumber",["$filter",function(a){return function(b,c){return isNaN(b)?b:a("number")(b,c)}}]),d.directive("memberPopup",["$window","$location",function(a,b){return{templateUrl:"/lotte/resources_dev/mylotte/m/popup_mem.html",replace:!0,link:function(a,b,c){}}}]),d.directive("welcomePopup",["$window","$location",function(a,b){return{templateUrl:"/lotte/resources_dev/mylotte/m/popup_welcomePop.html",replace:!0,link:function(a,b,c){}}}])}(window,window.angular);