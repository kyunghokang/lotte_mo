var PRESENT_COMMON={DELIVER_STAT:{10:"주문접수",11:"주문완료",12:"주문취소",13:"출고지시",14:"발송대기",15:"상품준비",16:"발송불가",17:"발송완료",18:"배송완료",19:"반품접수",20:"반품진행",21:"반품완료",22:"발송약정"},DELIVER_DTL_STAT:{10:"발송완료",20:"상품배송접수",30:"상품이동중",40:"영업소도착",50:"택배기사출발",60:"배송완료"},DELIVER_MSG:{10:"주문일로부터 2일간 미입금시 주문이 취소됩니다.",11:"선물을 수락하셨습니다!",12:"주문이 취소 되었습니다.",13:"고객님의 주문이 업체에 전달되었습니다.",14:"주문상태를 확인하는 중입니다.",15:"고객님께 발송할 상품을 준비하고 있습니다.",16:"상품 발송이 불가한 상태입니다. 주문취소 또는 상담원에게 문의해주세요.",17:"택배사로 상품이 전달되었습니다.",18:"고객님께 상품 배송이 완료되었습니다.",19:"반품 접수되었으며, 반품완료 후 결제금액이 환불됩니다.",20:"반품 접수되었으며, 반품완료 후 결제금액이 환불됩니다.",21:"반품이 완료 되었습니다.",22:"상품 발송이 늦어지고 있습니다. 빠르게 준비하도록 하겠습니다.",23:"선물을 수락하셨습니다!",24:"아직 선물을 수락하지 않으셨어요!",25:"주문취소가 완료되었습니다.",26:"선물거절로 주문 건이 취소되었습니다.",27:"선물거절로 취소처리 중입니다.",28:"선물 주소지 등록 전입니다. 고객센터에서 연락드릴 예정입니다."},CHANGEORDER_MSG:["받으신 선물을 반품 신청하시면, 롯데닷컴 고객센터에서 순차적으로 반품 처리를 진행합니다.","반품 관련 문의사항이 있으시면 롯데닷컴 고객센터 (1577-1110)로 연락주세요.","받으신 선물을 교환 신청하시면, 롯데닷컴 고객센터에서 순차적으로 교환 처리를 진행합니다.","교환 관련 문의사항이 있으시면 롯데닷컴 고객센터 (1577-1110)로 연락주세요.","신청하신 선물 반품 건을 고객센터에서 확인중입니다.","신청하신 선물 교환 건을 고객센터에서 확인중입니다."]};!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteUtil","addressInfo"]);d.controller("presentDetailCtrl",["$scope","$http","$filter","LotteCommon","LotteCookie","LotteUtil","$timeout","$window","LotteStorage","commInitData",function(a,b,c,d,e,f,g,h,i,j){a.useTestData=!1,a.isWishDebug=!1,a.showWrap=!0,a.contVisible=!0,a.subTitle="받은 선물 상세",a.screenId="present_detail",a.itemCountPerPage=20,a.currentPageNo=0,a.UIData={},a.UIData.orderNo=""+j.query.orderNo,a.UIData.ordDtlSn=""+j.query.ordDtlSn,a.UIData.enableOptionList=[],a.UIStatus={isOptionChanging:!1,isAddressChanging:!1,isCouponSending:!1,isDataLoading:!1},a.LV={SESSION_ID:"PRESENT_DETAIL",HASH_STRING:"prsdtl"},a.LV.DELIVER_STAT=PRESENT_COMMON.DELIVER_STAT,a.LV.DELIVER_DTL_STAT=PRESENT_COMMON.DELIVER_DTL_STAT,a.LV.DELIVER_MSG=PRESENT_COMMON.DELIVER_MSG,a.URLs={PRESENT_DETAIL:d.presentDetailData,WRITE_COMMENT:d.presentWriteCommentUrl,PRODUCT_VIEW:d.prdviewUrl,PRESENT_OPTION:d.presentDetailOption,PRESENT_ADDRESS:d.presentDetailAddress,MAIN_URL:d.mainUrl},a.convertOrderNumber=function(a){return a.indexOf("-")>=0?a:a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6,8)+"-"+a.substring(8,a.length)}}]),d.directive("lotteContainer",["LotteStorage","$timeout","$http","$window","LotteCommon",function(d,e,f,g,h){return{templateUrl:"/lotte/resources_dev/mylotte/present/present_detail_container.html",replace:!0,link:function(d,i,j){d.startOver=function(){return d.UIData.orderNo==c||""==d.UIData.orderNo||d.UIData.ordDtlSn==c||""==d.UIData.ordDtlSn?(console.warn("조회할 데이터가 없습니다."),!1):void d.loadDetailData()},d.loadDetailData=function(){d.UIStatus.isDataLoading=!0;var a=d.URLs.PRESENT_DETAIL,b={orderNo:d.UIData.orderNo,ordDtlSn:d.UIData.ordDtlSn,mbr_no:d.loginInfo.mbrNo};f.get(a,{params:b}).success(function(a){var b;if(a.gift_info!=c){a.gift_info.status!=c&&(b=parseInt(a.gift_info.status),isNaN(b)?a.gift_info.status_no=0:a.gift_info.status_no=b),a.gift_info.use_yn!=c&&(b=parseInt(a.gift_info.use_yn),isNaN(b)?a.gift_info.use_yn_no=0:a.gift_info.use_yn_no=b);var e=a.gift_info.status+"";switch(a.gift_info.canceled=!1,a.gift_info.commentable=!1,a.gift_info.optionable=!1,e){case"12":a.gift_info.canceled=!0;break;case"10":case"11":a.gift_info.optionable=!0;break;case"17":case"18":a.gift_info.commentable=!0}("01"!=a.gift_info.type||a.gift_prd_info.opt_list==c)&&(a.gift_info.optionable=!1)}a.gift_msg_info!=c&&a.gift_msg_info.msg!=c&&(a.gift_msg_info.msg=a.gift_msg_info.msg.replace(/\n/g,"<br />")),a.recom_prd_lst!=c&&a.recom_prd_lst.length>9&&(a.recom_prd_lst.length=9),d.UIData.detail_data=a,d.sortDisableOptionList(),d.UIStatus.isDataLoading=!1,d.giftData=d.UIData.detail_data,d.giftData.orderNo=d.UIData.orderNo,d.giftData.ordDtlSn=d.UIData.ordDtlSn}).error(function(){console.log("Data Error : 받은 선물함"),d.UIStatus.isDataLoading=!1})},d.showOptionChange=function(){d.UIStatus.isOptionChanging=!d.UIStatus.isOptionChanging,d.UIStatus.isOptionChanging&&e(function(){var a,b,c;$(".list_option dl:not(.opt_txt)").each(function(e,f){a=$(f),b=a.find("dt").text(),c=a.find("dd select"),c.val(d.getSelectedOption(b)),d.UIStatus.previousOption=d.getOptionItemNo().item_no}),d.checkSoldoutOption()},1)},d.hideOptionChange=function(){d.UIStatus.isOptionChanging&&d.showOptionChange()},d.sortDisableOptionList=function(){if(d.UIData.enableOptionList.length=0,d.UIData.detail_data.gift_prd_info!=c&&d.UIData.detail_data.gift_prd_info.opt_item_lst!=c)for(var a,b,e=d.UIData.detail_data.gift_prd_info.opt_item_lst,f=e.length,g=0;f>g;g++)a=e[g],b=parseInt(a.item_no,10),a.inv_qty>0&&(d.UIData.enableOptionList[b]=a.opt_tval)},d.checkSoldoutOption=function(){try{var a,b,c,e,f=[],g=[],h=[],i=[];for(b=d.UIData.detail_data.gift_prd_info.opt_list.length,a=0;b>a;a++){var j=$("#prod_option_"+a);g.push(j),h.push(j.val()),i.push(j.find("option").length)}var k,l,m;for(a=0;b>a;a++){for(j=g[a],f=j.find("option"),e=i[a],k=[].concat(h),c=0;e>c;c++)m=f.eq(c),k[a]=m.val(),l=k.join(" x "),d.UIData.enableOptionList.indexOf(l)>=0?m.removeClass("na"):m.addClass("na");f.eq(j.prop("selectedIndex")).hasClass("na")?j.addClass("na"):j.removeClass("na")}}catch(n){}},d.getSelectedOption=function(a){if(d.UIData.detail_data.gift_prd_info.selected_opt!=c)for(var b,e=d.UIData.detail_data.gift_prd_info.selected_opt.length,f=0;e>f;f++)if(b=d.UIData.detail_data.gift_prd_info.selected_opt[f],b.opt_name==a)return b.opt_value;return""},d.getOptionString=function(){try{for(var a,b=[],c=d.UIData.detail_data.gift_prd_info.opt_list.length,e=0;c>e;e++)a=$("#prod_option_"+e),b.push(a.val());return b.join(" x ")}catch(f){return""}},d.getOptionItemNo=function(){for(var a,b=d.getOptionString(),c=d.UIData.detail_data.gift_prd_info.opt_item_lst,e=c.length,f=0;e>f;f++)if(a=c[f],a.opt_tval==b)return a;return{item_no:-1,opt_val_cd:"",inv_qty:0}},d.changeOption=function(){if(d.UIData.detail_data.gift_prd_info.opt_item_lst!=c){var a=d.getOptionItemNo(),b=a.item_no,e=d.UIStatus.previousOption;if(0>b)return void alert("재고 수량이 부족합니다.");if(b==e)return void alert("동일한 옵션을 선택하셨습니다.");if(a.inv_qty!=c&&0==a.inv_qty)return void alert("재고 수량이 부족합니다.");var g=d.URLs.PRESENT_OPTION,h={ord_no:d.UIData.orderNo,ord_dtl_sn:d.UIData.ordDtlSn,goods_no:d.UIData.detail_data.gift_prd_info.goods_no,chg_item_no:b,rel_qty:d.UIData.detail_data.gift_prd_info.rel_qty,item_no:e};d.UIStatus.isDataLoading=!0,f.get(g,{params:h}).success(function(a){if(d.UIStatus.isDataLoading=!1,"0000"==a.result_code)d.UIData.ordDtlSn=a.ord_dtl_sn,d.updateSelectedOption();else{var b=a.error_msg;(b==c||""==b)&&(b="변경 사항을 저장하지 못했습니다."),alert(b)}}).error(function(){console.log("Data Error : 옵션 변경"),d.UIStatus.isDataLoading=!1})}},d.updateSelectedOption=function(){var a,b,c,e,f,g=d.UIData.detail_data.gift_prd_info.selected_opt,h=g.length;$(".list_option .opt_select").each(function(d,i){for(a=$(i),b=a.find("dt").text(),c=a.find("dd select").val(),e=0;h>e;e++)if(f=g[e],f.opt_name==b){f.opt_value=c;break}}),d.UIStatus.previousOption=d.getOptionItemNo().item_no},d.optionChangeListener=function(a){e(function(){d.checkSoldoutOption()},0)},g.optionChangeListener=d.optionChangeListener,d.showAddressChange=function(){d.UIStatus.isAddressChanging=!d.UIStatus.isAddressChanging},d.hideAddressChange=function(){d.UIStatus.isAddressChanging=!1},d.saveAddressChange=function(){var a=b.element("#addressInfoCtrlContainer").scope().getlastAddress();if(a.addr1!=c){a.dlvp_sn==c&&(a.dlvp_sn=""),a.message==c&&(a.message=""),a.post_no=a.addr_post;var e=d.URLs.PRESENT_ADDRESS;a.ord_no=d.UIData.orderNo,a.ordDtlSn=d.UIData.ordDtlSn,a.goods_no=d.UIData.detail_data.gift_prd_info.goods_no,d.UIStatus.isDataLoading=!0,f.get(e,{params:a}).success(function(b){if(d.UIStatus.isDataLoading=!1,b.result&&"0000"==b.result.result_code)d.UIData.detail_data.addr_info.addr_name=a.addr_name,d.UIData.detail_data.addr_info.r_name=a.r_name,d.UIData.detail_data.addr_info.addr_detail=a.addr1+" "+a.addr2,d.UIData.detail_data.addr_info.addr_tel=a.addr_tel,d.UIData.detail_data.addr_info.addr_phone="",d.UIData.detail_data.addr_info.addr_msg=a.message,d.hideAddressChange();else{var e=b.result.error_msg;(e==c||""==e)&&(e="배송지를 저장하지 못했습니다."),alert(e)}}).error(function(){console.log("Data Error : 배송지 변경"),d.UIStatus.isDataLoading=!1})}},d.showSendCouponLayer=function(){d.UIStatus.isCouponSending=!d.UIStatus.isCouponSending},d.sendCouponMsg=function(){alert("send coupon")},d.goCommentWrite=function(){var a=d.URLs.WRITE_COMMENT;a+="?goods_no="+d.UIData.detail_data.gift_prd_info.goods_no,a+="&order_no="+d.UIData.detail_data.gift_info.order_no,a+="&ord_dtl_sn="+d.UIData.detail_data.gift_info.ord_dtl_sn,a+="&"+baseParam,location.href=a},d.thankProductClick=function(b){var c=d.URLs.PRODUCT_VIEW+"?"+d.baseParam+"&goods_no="+b.goods_no;a.location.href=c},d.checkDeliveryState=function(){var b=d.UIData.detail_data.delivery_info,e=d.UIData.detail_data.gift_info,f=b.url;"17"==e.status&&e.detail_status!=c&&""!=e.detail_status?(f="/mylotte/purchase/m/smart_deli_info.do?"+d.baseParam+"&ord_no="+e.order_no+"&dlv_unit_sn="+e.dlv_unit_sn+"&inv_no="+b.invoice,location.href=f):d.appObj.isApp?openNativePopup("배송조회",f):a.open(f)},d.co_msg=PRESENT_COMMON.CHANGEORDER_MSG,d.er_psb_case=0,d.er_index=-1,d.open_er_psb=function(a,b){null==a.gift_info.ob_cd||""==a.gift_info.ob_cd?3==b?(d.selectOptList=null,d.er_psb_case=b):d.er_psb_case=b:"114"==a.gift_info.ob_cd&&3==b?alert("해당 선물은 반품 진행중입니다."):"115"==a.gift_info.ob_cd&&1==b?alert("해당 선물은 교환 진행중입니다."):d.er_psb_case=b+1},d.close_er_psb=function(){d.er_psb_case=0,d.er_index=-1},d.checkStatus=function(a){var b=d.LV.DELIVER_STAT[a.gift_info.status];return"14"==a.gift_info.sct||"16"==a.gift_info.sct?b="교환"+b:"15"==a.gift_info.sct?b="교환주문취소":"17"==a.gift_info.sct&&(b="교환반품취소"),"17"==a.gift_info.status&&a.gift_info.detail_status!=c&&""!=a.gift_info.detail_status&&(b=d.LV.DELIVER_DTL_STAT[a.gift_info.detail_status]),b},d.send_er_psb=function(a){var b="",e="",g="";if("114"==a){if(b=$("#rfg_select").val(),g="선물 반품이 신청되었습니다.","0"==b)return void alert("반품사유를 선택해 주세요.")}else{if(b=$("#exch_select").val(),e=$("#opt_select").val(),g="선물 교환이 신청되었습니다.","0"==e)return void alert("상품옵션을 선택해 주세요.");if("0"==b)return void alert("교환사유를 선택해 주세요.")}f({url:h.gift_change,method:"GET",async:!1,cache:!1,headers:{Accept:"application/json",Pragma:"no-cache"},params:{ordNo:d.UIData.detail_data.gift_info.order_no,ordDtlSn:d.UIData.detail_data.gift_info.ord_dtl_sn,ob_job_tp_cd:a,ob_rsn_cd:b,item_no:e}}).success(function(a){a.result_code!=c&&"ETC"==a.result_code?alert(a.error_msg):(alert(g),location.reload())})},e(function(){d.startOver()},0)}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("addressInfo",["lotteComm"]);d.controller("AddressInfoCtrl",["$scope","LotteCommon",function(a,b){}]),d.directive("addressInfo",["LotteCommon","$window","$timeout","$parse","$http",function(a,b,d,e,f){return{templateUrl:"/lotte/resources_dev/mylotte/address_info.html",replace:!0,link:function(b,d,e){b.myAddr_tab=!1,b.addressTab=!1,b.searchJListInput=!0,b.searchJListInput2=!0,b.searchJListFlag=!1,b.searchJList,b.moreAddress=!1,b.seq3_J_1_flag=!1,b.zipcode,b.addrData,b.searchAddressFlag=!1,b.addr_layer=!1,b.selectedAddress=null,b.editMode=!1,b.s_init=function(a){b.searchJListInput=!0,b.searchJListInput2=!0,b.searchJListFlag=!1,b.searchAddressFlag=!1,b.searchJList=[],b.moreAddress=!1,b.seq3_J_1_flag=!1,b.zipcode="",b.addrData=null,$("#inp_seq1_J_1").val(""),$("#key1_seq1_N_1").val(""),$("#key2_seq1_N_1").val(""),$("#key3_seq1_N_1").val(""),$("#key4_seq1_N_1").val(""),$("#key5_seq1_N_1").val(""),b.address_post="",b.address1="",b.address2="",b.inpcell1="010",b.inpcell2="",b.inpcell3="",(a==c||"all"==a)&&(b.addressTab=!1,b.inprmitnm="",b.inpdlvpnm="",b.editMode=!1,null!=b.selectedAddress&&$('input:radio[name="detail_list"]').prop("checked",!1))},b.search_step1=function(a){b.s_init("sa_btn"),b.searchAddressFlag=a},b.search_step2=function(a){b.searchJListInput=!0,b.searchJListInput2=!0,b.searchJListFlag=!1,b.searchJList=[],b.moreAddress=!1,b.seq3_J_1_flag=!1,b.addressTab=a},b.myAddrChange=function(a){a&&b.giftData.user_addr_info==c||(b.s_init(),b.myAddr_tab=a,b.giftData.ord_addr_info==c||null==b.giftData.ord_addr_info||a||(b.selectedAddress=b.giftData.ord_addr_info,b.editMyAddr(),b.editMode=!1))},b.addrLayer_show=function(a){b.addr_layer=a},b.list_edit=function(a,c){$("#tl_d"+a).trigger("click"),b.selectedAddress=c,b.editMyAddr(),b.addrLayer_show(!1)};var g=!1;b.list_del=function(c,d){return $("#tl_d"+c).trigger("click"),1==$("#filterType >ul >li").size()?(alert("마지막 배송지입니다."),!1):void(confirm("내 배송지 목록에서 삭제하시겠습니까?")&&(g?alert("배송지 삭제중입니다."):(g=!0,$.ajax({type:"post",async:!1,url:a.delete_address_list+"?dlvp_sn="+d.dlvp_sn+"&index="+d.idx+"&mbr_no="+b.loginInfo.mbrNo,success:function(a){return"0000"==a.result.response_code&&(d.del=!0),g=!1,!0},error:function(){g=!1}}))))},b.editMyAddr=function(){if(null==b.selectedAddress)for(var a=0;a<b.giftData.user_addr_info.addr_list.length;a++)b.giftData.user_addr_info.default_addr.addr_name==b.giftData.user_addr_info.addr_list[a].addr_name&&(b.selectedAddress=b.giftData.user_addr_info.addr_list[a]);if(b.editMode=!0,b.myAddr_tab=!1,b.searchAddressFlag=!1,b.inprmitnm=b.selectedAddress.r_name?b.selectedAddress.r_name:"",b.inpdlvpnm=b.selectedAddress.addr_name?b.selectedAddress.addr_name:"",b.address_post=b.selectedAddress.addr_post?b.selectedAddress.addr_post:"",b.address1=b.selectedAddress.addr1?b.selectedAddress.addr1:"",b.address2=b.selectedAddress.addr2?b.selectedAddress.addr2:"",b.selectedAddress.addr_tel){var c=b.selectedAddress.addr_tel.split("-");c&&3==c.length&&(b.inpcell1=c[0],b.inpcell2=parseInt(c[1],10),b.inpcell3=parseInt(c[2],10))}},b.addrLayer_select=function(){if(!$('input:radio[name="detail_list"]').is(":checked"))return b.selectedAddress=null,alert("배송지를 선택해 주세요"),!1;var a=$('input:radio[name="detail_list"]:checked').val();b.selectedAddress=b.giftData.user_addr_info.addr_list[a],b.giftData.user_addr_info.default_addr={},b.giftData.user_addr_info.default_addr.r_name=b.selectedAddress.r_name,b.giftData.user_addr_info.default_addr.addr_name=b.selectedAddress.addr_name,b.giftData.user_addr_info.default_addr.addr_post=b.selectedAddress.addr_post,b.giftData.user_addr_info.default_addr.addr1=b.selectedAddress.addr1,b.giftData.user_addr_info.default_addr.addr2=b.selectedAddress.addr2,b.giftData.user_addr_info.default_addr.addr_tel=b.selectedAddress.addr_tel,b.giftData.user_addr_info.default_addr.dlvp_sn=b.selectedAddress.dlvp_sn,b.addrLayer_show(!1)},b.searchAddress=function(d,e,g){var h={proc_div:e,addr_gbn:g,deli_cnt:d},i=null,j="";if("S"==e&&"J"==g){if(j=$.trim($("#inp_seq1_J_1").val()),j.length<=0)return alert("읍/면/동을 입력해 주세요."),$("#inp_seq1_J_1").focus(),!1;h.dong_nm=j,i=function(a){b.searchJListFlag=!0,b.searchJList=a.addr_lst}}else if("M"==e&&"J"==g){var k=$("#inp_seq2_J_1");if($.trim(k.val()).length<=0)return alert("상세주소를 입력해 주세요."),k.focus(),!1;h.zipcode=b.zipcode,h.addr1=b.txt_seq2_J_1,h.addr2=$("#inp_seq2_J_1").val(),i=function(a){b.addrData=a,b.searchJListFlag=!1,b.moreAddress=!1,b.seq3_J_1_flag=!0,b.noneData=!1,b.addrData.s_addr==c&&b.addrData.n_addr==c&&b.addrData.ipt_addr2!=c&&(b.noneData=!0,b.addrData.ipt_addr2.post_addr=b.addrData.ipt_addr2.addr1,b.addrData.ipt_addr2.dtl_addr=b.addrData.ipt_addr2.addr2)}}else if("S"==e&&"N"==g){var l=$("#key1_seq1_N_1"),m=$("#key2_seq1_N_1"),n=$("#key3_seq1_N_1"),o=$("#key4_seq1_N_1"),p=$("#key5_seq1_N_1"),q=!1;if(l.add(m).add(n).each(function(){return $.trim($(this).val()).length<=0?(alert("조회 필수항목을 입력해 주세요."),$(this).focus(),q=!0,!1):void 0}),q)return!1;h.keyword1=l.val(),h.keyword2=m.val(),h.keyword3=n.val(),""!=o.val()&&(h.keyword4=o.val()),""!=p.val()&&(h.keyword5=p.val()),i=function(a){b.searchJListFlag=!0,b.searchJList=a.addr_lst}}h.order_no=b.giftData.orderNo,h.ord_dtl_sn=b.giftData.ordDtlSn,f.get(a.searchAddress,{params:h}).success(function(a){if("IMPS_RGN"==a.result_code||"ETC"==a.result_code){var b=a.error_msg;return(b==c||""==b)&&(b="배송지를 조회하지 못했습니다."),void alert(b)}i!=c&&i(a)}).error(function(){})},b.other_address_post="",b.other_address1="",b.other_address2="",b.addrGubun=!1,b.selectAddress=function(a,c,d){if("SJ"==a)b.searchJListInput=!1,b.searchJListInput2=!1,b.txt_seq2_J_1=c.post_addr,b.inp_seq2_J_1=c.dtl_addr,b.zipcode=c.post_no,b.searchJListFlag=!1,b.moreAddress=!0,$("#inp_seq2_J_1").val(""),$("#inp_seq2_J_1").focus();else if("MJa"==a)b.searchAddressFlag=!1,b.seq3_J_1_flag=!1,b.address_post=c.post_no,b.address1=c.post_addr,b.address2=c.dtl_addr,b.other_address_post=b.addrData.n_addr[d].post_no,b.other_address1=b.addrData.n_addr[d].post_addr,b.other_address2=b.addrData.n_addr[d].dtl_addr,b.addrGubun=!1;else if("MJ"==a){b.searchAddressFlag=!1,b.seq3_J_1_flag=!1,b.address_post=c.post_no,b.address1=c.post_addr,b.address2=c.dtl_addr;try{b.other_address_post=b.addrData.s_addr[d].post_no,b.other_address1=b.addrData.s_addr[d].post_addr,b.other_address2=b.addrData.s_addr[d].dtl_addr}catch(e){b.other_address_post="",b.other_address1="",b.other_address2=""}b.addrGubun=!0}else"MJ_c"==a&&(b.searchAddressFlag=!1,b.seq3_J_1_flag=!1,b.address_post=c.post_no,b.address1=c.post_addr,b.address2=c.dtl_addr,b.other_address_post="",b.other_address1="",b.other_address2="",b.addrGubun=b.addressTab)};var h=function(a,b){var c=$(b).val();return""==c?(alert(a+" 입력해주세요."),$(b).focus(),!0):!1};b.checkField=h,b.writeMessage=!1,b.messageChange=function(){"write"==$("#message").val()&&(b.writeMessage=!0)},b.getlastAddress=function(){var a=null,d=$("#message").val();if(b.writeMessage&&(d=$("#message2").val()),b.loginInfo.isLogin){if(b.myAddr_tab&&!b.editMode)a=b.giftData.user_addr_info.default_addr,a.message=d,a.stnm_addr_post="",a.stnm_addr1="",a.stnm_addr2="";else if(!b.myAddr_tab&&b.editMode){if(b.searchAddressFlag)return alert("주소찾기를 완료해주세요."),{};if(h("받는분을","#inprmitnm1")||h("주소를","#address1")||h("나머지 주소를","#address2")||h("전화번호를","#inpcell2")||h("전화번호를","#inpcell3"))return{};a={idx:b.selectedAddress.idx,is_default:b.selectedAddress.is_default,dlvp_sn:b.selectedAddress.dlvp_sn,r_name:$("#inprmitnm1").val(),addr_post:b.address_post,addr1:$("#address1").val(),addr2:$("#address2").val(),addr_tel:b.inpcell1+"-"+$("#inpcell2").val()+"-"+$("#inpcell3").val(),message:d}}else if(!b.myAddr_tab&&!b.editMode){if(b.searchAddressFlag||""==b.address_post)return alert("주소찾기를 완료해주세요."),{};if(h("받는분을","#inprmitnm1")||h("주소를","#address1")||h("나머지 주소를","#address2")||h("전화번호를","#inpcell2")||h("전화번호를","#inpcell3"))return{};a=b.getResult("#inprmitnm1",d)}}else{if(b.searchAddressFlag||""==b.address_post||b.address_post==c)return alert("주소찾기를 완료해주세요."),{};if(h("받는분을","#inprmitnm2")||h("주소를","#address1")||h("나머지 주소를","#address2")||h("전화번호를","#inpcell2")||h("전화번호를","#inpcell3"))return{};a=b.getResult("#inprmitnm2",d)}return a},b.getResult=function(a,d){var e={r_name:$(a).val(),message:d,addr_tel:b.inpcell1+"-"+$("#inpcell2").val()+"-"+$("#inpcell3").val()};return b.giftData.ord_addr_info!=c&&null!=b.giftData.ord_addr_info&&$("#address1").val()==b.giftData.ord_addr_info.addr1?(e.dlvp_sn=b.giftData.ord_addr_info.dlvp_sn,e.stnm_addr_post="",e.stnm_addr1="",e.stnm_addr2="",e.addr_post="",e.addr1="",e.addr2=""):(e.dlvp_sn="",b.addrGubun?(console.log("도로명주소 입력한경우"),e.addr_post=b.other_address_post,e.addr1=b.other_address1,e.addr2=b.other_address2,e.stnm_addr_post=b.address_post,e.stnm_addr1=$("#address1").val(),e.stnm_addr2=$("#address2").val()):(console.log("지번주소 입력한경우"),e.stnm_addr_post=b.other_address_post,e.stnm_addr1=b.other_address1,e.stnm_addr2=b.other_address2,e.addr_post=b.address_post,e.addr1=$("#address1").val(),e.addr2=$("#address2").val())),e}}}}])}(window,window.angular);