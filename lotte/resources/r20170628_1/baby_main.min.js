function calcBytes(a){var b=0;for(i=0;i<a.length;i++){var c=a.charAt(i);escape(c).length>4?b+=2:"\n"==c?"\r"!=a.charAt(i-1)&&(b+=1):b+="<"==c||">"==c?4:1}return b}function maxLengthCheck(a,b,c,d){var e,f,g=c.value.length,h=parseInt(a),i="",j=0;if(0==g)null!=document.getElementById("spn_input_char")&&(document.getElementById("spn_input_char").innerText=h);else for(k=0;k<g;k++){if(e=c.value.charAt(k),"\n"==e&&j++,escape(e).length>4?h-=2:h--,0>h){alert("총 한글 "+a/2+"자 영문 "+a+"자 까지 쓰실 수 있습니다."),c.value=i;break}if(null!=b&j>parseInt(b)){alert("라인수 "+b+"라인을 넘을 수 없습니다."),j=0,f=i.length-1,c.value=i.substring(0,f);break}null!=document.getElementById("spn_input_char")&&(document.getElementById("spn_input_char").innerText=h),i+=e}}!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteSideMylotte","lotteCommFooter","lotteProduct","lotteNgSwipe","lotteSns"]);d.controller("BabyMainCtrl",["$http","$scope","LotteCommon","LotteStorage","commInitData","LotteUtil","$timeout",function(d,e,f,g,h,i,j){e.screenID="Mombaby",e.isMain=!0,e.showWrap=!0,e.contVisible=!0,e.subTitle="맘&베이비",e.isShowThisSns=!0,e.allProductFlag=!0,e.allSubCateFlag=!0,e.sortCateTop,e.subCateSelectTop,e.chanceSeason=!0,e.templateType="list",e.isProductLoading=!0,e.dataLoadingFinish=!1,e.curDispNoSctCd=85,e.curDispNo="",e.share_img="",e.inFantUi={d_cate:h.query.dcate,m_cate:h.query.mcate,sort:1,cur_key:"",sub_dispNo:h.query.dispNo},e.preview=h.query.preview,e.preview==c&&(e.preview=""),e.inFantUi.sub_dispNo==c&&(e.inFantUi.sub_dispNo="5571266"),e.inFantUi.d_cate==c||0==e.inFantUi.d_cate?e.inFantUi.d_cate=0:e.inFantUi.d_cate=parseInt(e.inFantUi.d_cate)-1,e.inFantUi.m_cate==c||0==e.inFantUi.m_cate?e.inFantUi.m_cate=0:e.inFantUi.m_cate=parseInt(e.inFantUi.m_cate)-1,e.curDispNo=e.inFantUi.sub_dispNo,(e.screenDataReset=function(){e.screenData={page:0,max:10,load_more:!0,strategeList:[],take:"a",active:!1}})(),e.addZero=function(a){return 10>a&&(a="0"+a),a},e.checkHasSub=function(a){return b.forEach(a,function(a){null!=a.sub_cate_list&&a.sub_cate_list.length?(a.hasSub=!0,a.sub_cate_list=e.checkHasSub(a.sub_cate_list)):a.hasSub=!1}),a},e.pageLoading=!0,e.loadScreenData=function(a){console.log("스크린 데이터 로드..."),e.screenData.page++,e.productListLoading=!0,d.get(f.infantMainData+"?dispNo="+e.inFantUi.sub_dispNo+"&preview="+e.preview).success(function(a){function d(a){return(a+"").length<2?"0"+a:a+""}var f=[];if(j(function(){b.element(".unitWrap").length>0&&(e.sortCateTop=b.element(".unitWrap").offset().top-e.headerHeight-54)},1500),e.screenData.html_0=null,e.screenData.html_1=null,e.screenData.html_2=null,e.screenData.html_3=null,e.screenData.html_4=null,e.screenData.StrategeList=null,e.screenData.BestBrandList=null,e.screenData.KeyWrodList=null,e.screenData.FreeTester=null,e.screenData.UsefulTip=null,e.screenData.PhotoReview=null,e.total_product=null,e.screenData.ProductList=null,e.divObjNoParam="",a.baby_main!=c){if(f=a.baby_main,e.screenData.cate_list=f.cate_list.items,e.screenData.cateName=f.cate_list.items[e.inFantUi.d_cate].sub_cate_list[e.inFantUi.m_cate].disp_nm,null!=f.topHtml&&(e.screenData.html_0=e.replaceHTML(f.topHtml.items[0].html_cont)),null!=f.freeHtml&&(e.screenData.html_1=e.replaceHTML(f.freeHtml.items[0].html_cont)),null!=f.freeHtml2&&(e.screenData.html_2=e.replaceHTML(f.freeHtml2.items[0].html_cont)),null!=f.freeHtml3&&(e.screenData.html_3=e.replaceHTML(f.freeHtml3.items[0].html_cont)),null!=f.freeHtml4&&(e.screenData.html_4=e.replaceHTML(f.freeHtml4.items[0].html_cont)),null!=f.keywordList&&(e.screenData.KeyWrodList=f.keywordList),null!=f.stratege){if("brand"==f.stratege.items[0].itemType||f.stratege.items[0].itemType==c&&"브랜드 할인쿠폰"==f.stratege.items[0].title?(e.screenData.StrategeList=[],e.screenData.StrategeList.push({title:"수량한정찬스",prd_list:{items:null}}),e.screenData.StrategeList.push(f.stratege.items[0])):1==f.stratege.items.length&&"brand"!=f.stratege.items[0].itemType?(e.screenData.StrategeList=[],e.screenData.StrategeList.push(f.stratege.items[0]),e.screenData.StrategeList.push({title:"브랜드 할인쿠폰"})):e.screenData.StrategeList=f.stratege.items,null!=e.screenData.StrategeList[0].prd_list.items){e.screenData.StrBgImg=e.screenData.StrategeList[0].prd_list.items[0].imgUrl550,e.screenData.SoldOutChk_1=e.screenData.StrategeList[0].prd_list.items[0].invQty,e.screenData.SoldOutChk_2=e.screenData.StrategeList[0].prd_list.items[0].soldOut,e.screenData.take="a",(e.screenData.SoldOutChk_1<1||1==e.screenData.SoldOutChk_2)&&(e.screenData.take="b");var g=e.screenData.StrategeList[0].prd_list.items[0].startDate,h=new Date;h=h.getFullYear()+"-"+d(h.getMonth()+1)+"-"+d(h.getDate())+" "+d(h.getHours())+":"+d(h.getMinutes())+":"+d(h.getSeconds())+".0",g>h&&(e.chanceSeason=!1)}else e.screenData.take="b";null!=e.screenData.StrategeList[0].img_list&&(1==e.screenData.gallery_list[0].img_list.items.length&&(e.screenData.StrBadge=e.screenData.StrategeList[0].img_list.items[0].img_url),e.screenData.StrategeList[0].img_list.items.length>1&&(e.screenData.StrSoldOut=e.screenData.StrategeList[0].img_list.items[1].img_url)),e.screenData.StrCoupon=null,null!=e.screenData.StrategeList[1].html_list&&(e.screenData.StrCoupon=e.replaceHTML(e.screenData.StrategeList[1].html_list.items[0].html_cont))}if((e.screenData.SoldOutChk_1<1||1==e.screenData.SoldOutChk_2)&&(e.soldOutActive=!0),e.screenData.BestBrandList=f.bestBrandList,null!=f.keywordList&&(e.screenData.KeyWordList=f.keywordList.keyword_list.items),e.screenData.FreeTester=f.freeBannerList,e.screenData.UsefulTip=f.userfulTip,e.screenData.PhotoReview=f.photoReview,e.productListLoading=!1,e.pageLoading=!1,null!=f.prd_list){e.total_product=f.prd_list.items,e.dataLoadingFinish=!0,e.selectCate=0,e.allList=[],e.itemCateDataList=[{divObjNo:"",divObjNm:"전체상품보기",dispPrioRnk:0,imgUrl:null,lnkUrl:null,goodsCnt:0}];var i,k;for(i=0;i<e.total_product.length;i++)for(e.itemCateDataList.push({divObjNo:"0"+i,divObjNm:e.total_product[i].title,dispPrioRnk:0,imgUrl:null,lnkUrl:null,goodsCnt:e.total_product[i].prdList.items.length}),i>0&&e.allList.push({cateflag:!0,divObjNm:e.total_product[i].title,count:e.total_product[i].prdList.items.length,id:"0"+i}),k=0;k<e.total_product[i].prdList.items.length;k++)e.total_product[i].prdList.items[k].divObjNo=i,e.total_product[i].prdList.items[k].divObjNm=e.total_product[i].title,e.total_product[i].prdList.items[k].cnt=e.total_product[i].prdList.items.length,e.allList.push(e.total_product[i].prdList.items[k]);e.screenData.ProductList=e.allList.slice(0,10*e.screenData.page),e.screenData.cate_first=e.itemCateDataList[1].divObjNm,e.screenData.cate_count=e.itemCateDataList[1].goodsCnt,e.divName=e.itemCateDataList[e.selectCate].divObjNm,e.share_img=e.screenData.ProductList[0].img_url}}}).error(function(a){console.log("Error Data : 데이터 로딩 에러"),e.productListLoading=!1,e.pageLoading=!1})},e.setSort=function(a){e.inFantUi.sort=a,e.screenData.page=0,e.screenData.load_more=!0,e.babyTipData("")},e.babyTipData=function(a){e.screenData.page++,e.screenData.load_more&&d.get(f.infantTipData+"?dispNo="+e.inFantUi.sub_dispNo+"&page="+e.screenData.page+"&pageSize=10&sort="+e.inFantUi.sort+"&preview="+e.preview).success(function(b){var g=[];if(b.baby_tip!=c)if(e.screenData.take=a?a:"a",g=b.baby_tip,1==e.screenData.page)e.screenData.max=g.max_count,null!=g.top_text?e.screenData.baby_tip_title=g.top_text.items[0].title:e.screenData.baby_tip_title="",null!=g.btn_text?e.screenData.baby_tip_btn=g.btn_text.items[0].title:e.screenData.baby_tip_btn="등록하기",e.screenData.gallery_list=[],null!=g.gallery_list&&(e.screenData.gallery_list=g.gallery_list.items,j(function(){for(var a=0;a<e.screenData.gallery_list.length;a++)e.screenData.gallery_list[a].big=!1,e.screenData.gallery_list[a].open=!1,$("#swaglist_cont"+a).height()>37&&(e.screenData.gallery_list[a].big=!0)},100),1==e.screenData.gallery_list[0].img_list.items.length&&(e.share_img=e.screenData.gallery_list[0].img_list.items[0].img_url)),e.screenData.cate_list=g.cate_list.items,e.screenData.cateName=g.cate_list.items[e.inFantUi.d_cate].sub_cate_list[e.inFantUi.m_cate].disp_nm,e.contMoreClick=function(a){a.open=!a.open,a.more=!a.more},e.screenData.galleryTotal<e.screenData.page*e.screenData.pageSize&&(e.screenData.pageEnd=!0,e.productMoreScroll=!1),e.productListLoading=!1,e.pageLoading=!1,e.commentListIndex=-1,e.commentViewClick=function(a,b){e.commentListIndex==b||(e.sendTclick("m_DC_SpeDisp_Mombaby_Clk_Btn08"),e.commentListIndex=b,d.get(f.infantTipCommentListData+"?bbc_no="+a.bbc_no).success(function(a){if(e.sendTclick(""),e.commentViewFlag=!e.commentViewFlag,e.commentListData=[],null!=a.comment_list.comment){for(var b=0;b<a.comment_list.comment.items.length;b++)a.comment_list.comment.items[b].cont=a.comment_list.comment.items[b].cont.split("&#34;").join('"'),a.comment_list.comment.items[b].cont=a.comment_list.comment.items[b].cont.split("&lt;").join("<"),a.comment_list.comment.items[b].cont=a.comment_list.comment.items[b].cont.split("&gt;").join(">");e.commentListData=a.comment_list.comment.items}}))};else if(null!=g.gallery_list){for(var h=0;h<g.gallery_list.items.length;h++)e.screenData.gallery_list.push(g.gallery_list.items[h]);j(function(){for(var a=0;a<e.screenData.gallery_list.length;a++)e.screenData.gallery_list[a].big=!1,e.screenData.gallery_list[a].open=!1,$("#swaglist_cont"+a).height()>36&&(e.screenData.gallery_list[a].big=!0)},100)}})},e.babyPhotoData=function(a){e.screenData.page++,e.screenData.load_more&&d.get(f.infantPhotoData+"?dispNo="+e.inFantUi.sub_dispNo+"&curDispNo="+e.inFantUi.cur_key+"&page="+e.screenData.page+"&pageSize=10&preview="+e.preview).success(function(a){var b=[];if(a.baby_photo!=c)if(b=a.baby_photo,e.pageLoading=!1,1==e.screenData.page)e.screenData.max=b.max_count,e.screenData.gallery_list=[],null!=b.gallery_list&&(e.screenData.gallery_list=b.gallery_list.items,j(function(){for(var a=0;a<e.screenData.gallery_list.length;a++)e.screenData.gallery_list[a].big=!1,e.screenData.gallery_list[a].open=!1,$("#swaglist_cont"+a).height()>36&&(e.screenData.gallery_list[a].big=!0)},100),1==e.screenData.gallery_list[0].img_list.items.length&&(e.share_img=e.screenData.gallery_list[0].img_list.items[0].img_url)),null!=b.keywordList?e.screenData.KeyWordListTab=b.keywordList.keyword_list.items:e.screenData.KeyWordListTab=null,e.screenData.cate_list=b.cate_list.items,e.screenData.cateName=b.cate_list.items[e.inFantUi.d_cate].sub_cate_list[e.inFantUi.m_cate].disp_nm,setTimeout(function(){e.checkBtnPos()},500);else if(null!=b.gallery_list){for(var d=0;d<b.gallery_list.items.length;d++)e.screenData.gallery_list.push(b.gallery_list.items[d]);j(function(){for(var a=0;a<e.screenData.gallery_list.length;a++)e.screenData.gallery_list[a].big=!1,e.screenData.gallery_list[a].open=!1,$("#swaglist_cont"+a).height()>35&&(e.screenData.gallery_list[a].big=!0)},100)}})},e.sortCateTop=0,b.element(a).on("scroll.baby_story",function(a){if(0==e.inFantUi.d_cate){if("swipe"!=e.templateType&&null!=e.screenData.ProductList){var d=1,f=0,g=0,h=174,i=e.screenType,j=0;"image"==e.templateType&&(h=parseInt($(".prod_list_02 > li:first-child").height()),i+=1);for(var k=[0];f<e.screenData.ProductList.length;f++)e.screenData.ProductList[f].cateflag?(k.push(g),g+=49,j=0):(0==j&&(g+=h),j+=1,j>=i&&(j=0));for(f=0;f<k.length;f++)this.pageYOffset-e.sortCateTop>k[f]&&(d=f+1);e.fixflag||(d=0),d<e.itemCateDataList.length&&(e.divName=e.itemCateDataList[d].divObjNm),this.pageYOffset>b.element("#footer").offset().top-600&&e.getProductDataLoad()}}else 1==e.inFantUi.d_cate?this.pageYOffset>b.element("#footer").offset().top-600&&(e.screenData.gallery_list!=c&&10*e.screenData.page<e.screenData.max?e.babyTipData():e.screenData.load_more=!1):2==e.inFantUi.d_cate&&this.pageYOffset>b.element("#footer").offset().top-600&&(e.screenData.gallery_list!=c&&10*e.screenData.page<e.screenData.max?e.babyPhotoData():e.screenData.load_more=!1)}),b.element(a).on("resize.key",function(a){e.checkBtnPos()}),e.checkBtnPos=function(){if(2==e.inFantUi.d_cate&&e.screenData.KeyWordListTab){var a=$("#baby_keyword > li:last-child").offset().top;null!=a&&a>260?e.keyword_btn_show=!0:e.keyword_btn_show=!1,e.$apply()}},e.loadPhotoReview=function(a){e.inFantUi.cur_key=a,e.screenData.page=0,e.screenData.load_more=!0,e.babyPhotoData("")},e.getProductDataLoad=function(){e.screenData.page++,0==e.selectCate?e.screenData.ProductList.length<e.allList.length?e.screenData.ProductList=e.allList.slice(0,10*e.screenData.page):e.screenData.page--:e.screenData.ProductList.length<e.total_product[e.selectCate-1].prdList.items.length?e.screenData.ProductList=e.total_product[e.selectCate-1].prdList.items.slice(0,10*e.screenData.page):e.screenData.page--},e.replaceHTML=function(a){return a=a.replace(/\<br(.*?)\>|\<p\>\&nbsp\;\<\/p\>|\<p\>\<br(.*?)\>\&nbsp\;\<\/p\>|null/g,""),a=a.replace(/\&\#34\;/g,'"').replace(/\&lt\;/g,"<").replace(/\&gt\;/g,">")},0==e.inFantUi.d_cate?e.loadScreenData():1==e.inFantUi.d_cate?e.babyTipData():2==e.inFantUi.d_cate&&e.babyPhotoData(),e.gotoProduct=function(a,b,c){location.href=e.baseLink(f.prdviewUrl)+"&curDispNo="+e.inFantUi.sub_dispNo+"&curDispNoSctCd="+e.curDispNoSctCd+"&goods_no="+a+"&tclick="+b+c},e.gotoLink=function(a,b,c){null!=a?location.href=e.baseLink(a)+"&tclick="+b+c:console.log("링크가 없습니다.")},e.gotoSearch=function(a,b,c){var d="&reqType=N&keyword="+a+"&curDispNo="+e.inFantUi.sub_dispNo+"&tclick="+b+c;location.href=e.baseLink(f.searchUrl)+d}}]),d.filter("hidestr",function(){return function(a){var b="";if(a!=c){b=a.substr(0,3);for(var d=3;d<a.length;d++)b+="*"}return b}}),d.directive("lotteContainer",["$http","LotteCommon",function(c,d){return{templateUrl:"/lotte/resources_dev/mall/baby/baby_main_container.html",replace:!0,link:function(c,d,e){c.allProductOpenFlag=!1,c.allProductClick=function(){c.allProductOpenFlag=!c.allProductOpenFlag},c.sortCateClick=function(a,b,d){c.selectCate=d,c.screenData.page=1,c.divObjNoParam=a,c.inFantUi.cur_key="",c.sendTclick("m_DC_SpeDisp_Mombaby_ClkW_Rst_B"+c.addZero(d+1)),0==d?(c.screenData.ProductList=c.allList.slice(0,10*c.screenData.page),c.screenData.cate_first=c.itemCateDataList[1].divObjNm,c.screenData.cate_count=c.itemCateDataList[1].goodsCnt):(c.screenData.ProductList=c.total_product[d-1].prdList.items.slice(0,10*c.screenData.page),c.screenData.cate_first=c.itemCateDataList[c.selectCate].divObjNm,c.screenData.cate_count=c.itemCateDataList[c.selectCate].goodsCnt),c.divName=c.itemCateDataList[c.selectCate].divObjNm,$("#curcatenm").text(c.divName),c.allProductOpenFlag=!1,c.checkfirst_color()},c.swipefnc=function(){setTimeout(function(){c.$apply(function(){var a=parseInt($("#swipe_indi").attr("val")),d=c.findfirstCate(c.screenData.ProductList[0].divObjNo);if(0==a)c.screenData.cate_first=d.divObjNm,c.screenData.cate_count=d.goodsCnt;else{var e=b.element(".prod_list_03 > li").eq(a);c.screenData.cate_first=e.attr("item_nm"),c.screenData.cate_count=e.attr("item_cnt")}c.checkfirst_color()})},300)},c.findfirstCate=function(a){var d={divObjNo:"",divObjNm:"",goodsCnt:0};return b.forEach(c.itemCateDataList,function(b,c){b.divObjNo==a&&(d=b)}),d},c.checkfirst_color=function(){c.screenData.cate_first==c.itemCateDataList[1].divObjNm?c.firstcate_flag=!1:c.firstcate_flag=!0},c.tabDepChange=function(a){if("a"==a&&null==c.screenData.StrategeList[0].prd_list.items)return void console.log("상품이 없음");if("b"==a&&null==c.screenData.StrCoupon)return void console.log("이벤트 없음");c.screenData.take=a;var b="";"a"==a?b="m_DC_SpeDisp_Mombaby_Clk_Tap01":"b"==a&&(b="m_DC_SpeDisp_Mombaby_Clk_Tap02"),c.sendTclick(b)},c.stategeBannerClick=function(b,d){b&&(a.location.href=b+"&"+c.baseParam+"&curDispNo="+c.inFantUi.sub_dispNo+"&curDispNoSctCd="+c.curDispNoSctCd+(d?"&tclick="+d:""))},c.popOption={open:!1,cnt:0,data:[],zoomPopup:function(a,b,d){"mom"==a&&(a=parseInt($("ol#ii_"+b).find("li.active").attr("v")),0==$("ol#ii_"+b).length&&(a=0)),c.popOption.cnt=a,c.popOption.data=d?[c.screenData.gallery_list[b]]:c.screenData.gallery_list[b].img_list.items,c.popOption.popState()},next:function(){c.popOption.cnt<c.popOption.data.length-1&&c.popOption.cnt++},prev:function(){c.popOption.cnt>0&&c.popOption.cnt--},popState:function(){c.popOption.open=!c.popOption.open,c.popOption.open?$("body").addClass("no-scroll"):$("body").removeClass("no-scroll")}},c.changeTemplate=function(a){c.sendTclick(c.tClickBase+"Mombaby_Clk_Pico_"+a),c.firstcate_flag=!1,c.templateType=a}}}}]),d.directive("infantMallCtg",["$window","LotteCommon","AppDownBnrService",function(a,c,d){return{templateUrl:"/lotte/resources_dev/mall/baby/baby_mall_ctg_container.html",link:function(e,f,g){function h(){e.appObj.isNativeHeader&&(k=0),j.scrollTop()>=46?i.attr("style","z-index:10;position:fixed;top:"+k+"px;width:100%"):i.removeAttr("style")}b.element("body"),b.element("#headerSpace"),b.element("#container");e.menufix=!1;var i=b.element(f).find(".ctg_list"),j=b.element(a),k=e.subHeaderHeight;j.on("scroll",function(a){h(),setTimeout(h,300)}),e.$watch(function(){return d.appDownBnrInfo.isShowFlag},function(a,b){h()}),e.headerMenuClick=function(a,b,d){null!=e.screenData.cate_list&&(e.screenData.cate_list[b].sub_cate_list.length<=e.inFantUi.m_cate&&(e.inFantUi.m_cate=0),e.inFantUi.sub_dispNo=e.screenData.cate_list[b].sub_cate_list[e.inFantUi.m_cate].disp_no,e.curDispNo=e.inFantUi.sub_dispNo),""==d&&(d="m_DC_SpeDisp_Mombaby_Clk_0"+(b+1)),location.href=e.baseLink(c.infantMainUrl)+"&dispNo="+e.inFantUi.sub_dispNo+"&dcate="+(b+1)+"&mcate="+(e.inFantUi.m_cate+1)+"&tclick="+d}}}}]),d.directive("subHeaderEach",["$window","AppDownBnrService",function(a,b){return{replace:!0,restrict:"C",link:function(a,b,c){}}}]),d.directive("subCateSelect",["$window","$timeout","$location",function(c,d,e){return{templateUrl:"/lotte/resources_dev/mall/baby/baby_sub_ctg_select_container.html",replace:!0,link:function(c,d,e){c.allSubCateClick=function(){c.sendTclick(""),c.allSubCateOpenFlag=!c.allSubCateOpenFlag},c.subCateClick=function(d,e){c.sendTclick("m_DC_SpeDisp_Mombaby_Clk_"+c.addZero(e+1)),b.element(a).scrollTop(0),c.allSubCateOpenFlag=!1,c.inFantUi.m_cate=e,c.inFantUi.sub_dispNo=d,c.curDispNo=c.inFantUi.sub_dispNo,c.screenData.page=0,c.screenData.load_more=!0,c.screenData.max=10,0==c.inFantUi.d_cate?c.loadScreenData():1==c.inFantUi.d_cate?c.babyTipData():2==c.inFantUi.d_cate&&c.babyPhotoData()}}}}]),d.directive("sortCate",["$window","$timeout","$location",function(a,b,c){return{templateUrl:"/lotte/resources_dev/product/m/product_list_select_container2.html",replace:!0,link:function(a,b,c){}}}]),d.directive("commentModule",["$window","$http","$timeout","LotteCommon","LotteCookie",function(a,c,d,e,f){return{templateUrl:"/lotte/resources_dev/mall/baby/baby_comment.html",replace:!0,link:function(a,f,g){a.input={},a.input.commentTxt="",a.commentListIndex,a.commentListClick=function(b){a.commentListIndex==b?a.commentListIndex=null:a.commentListIndex=b},a.reqDetailParam={NoArrList:[]},a.commentList=[],a.commentListPage=1,a.focuseIn=function(){d(function(){a.screenData.active=!0},300),console.log("focusIn")},a.focuseOut=function(){d(function(){a.screenData.active=!1},300),console.log("focusOut")},a.registerCheck=function(){if(console.log("regist"),null==a.loginInfo||!a.loginInfo.isLogin){var b="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href="/login/m/loginForm.do?"+b)}},a.register=function(d,f){if(null==a.loginInfo||!a.loginInfo.isLogin){var g="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href="/login/m/loginForm.do?"+g)}var h=b.element("#head_sub");h.attr("style","position:fixed; top:0"),a.sendTclick("m_DC_SpeDisp_Mombaby_Clk_Btn_09");var i=a.input.commentTxt,j=document.querySelector("#commentTxt");return 0==i.trim().length?(alert("댓글을 남겨주세요."),j.focus(),!1):calcBytes(i)>400?(alert("댓글은 200자[한글기준] 이내로 제한되어 있습니다."),j.focus(),!1):($.ajax({type:"POST",url:e.infantTipCommentWriteData+"?bb_tgt_no="+a.item.bbc_no,data:{cont:i}}).success(function(b){"reg_success"==b.commentInsert.response_code?(alert("등록되었습니다."),c.get(e.infantTipCommentListData+"?bbc_no="+a.item.bbc_no).success(function(b){if(a.commentData=b.comment_list,a.commentListData=[],null!=b.comment_list.comment){for(var c=0;c<b.comment_list.comment.items.length;c++)b.comment_list.comment.items[c].cont=b.comment_list.comment.items[c].cont.split("&#34;").join('"'),b.comment_list.comment.items[c].cont=b.comment_list.comment.items[c].cont.split("&lt;").join("<"),b.comment_list.comment.items[c].cont=b.comment_list.comment.items[c].cont.split("&gt;").join(">");a.commentListData=b.comment_list.comment.items,a.commentLoginidData=b.comment_list.comment.items.login_id,a.item.reply_count+=1}}),a.input.commentTxt=""):"reg_fail"==b.commentInsert.response_code&&alert("등록이 실패되었습니다.")}),!1)},a.idChange=function(a){for(var b=a.substr(0,3),c=3;c<a.length;c++)b+="*";return b},a.deleteComment=function(b,d,f){var g=confirm("댓글을 삭제하시겠습니까?");return g?(c.get(e.infantTipCommentDeleteData+"?bbTgtNo="+a.item.bbc_no+"&bbcNo="+f.bbc_no).success(function(b){"del_success"==b.commentDelete.response_code&&(alert("삭제되었습니다."),a.commentListData.splice(d,1),a.item.reply_count-=1)}),void console.log(a.commentListData)):!1}}}}]),d.directive("infantMallPhotoview",["$http","$window","LotteCommon","$timeout","commInitData",function(a,b,c,d,e){return{templateUrl:"/lotte/resources_dev/mall/baby/baby_mall_photoview.html",link:function(a,d,e){a.keyword_more=!1,a.moreKeyword=function(){a.keyword_more?a.keyword_more=!1:a.keyword_more=!0},a.contMoreClick=function(a){a.open=!a.open,a.more=!a.more},a.mallProductClick=function(d,e){var f=c.prdviewUrl+"?"+a.baseParam+"&goods_no="+d.goods_no+"&curDispNo="+a.inFantUi.sub_dispNo+"&curDispNoSctCd="+a.curDispNoSctCd;e&&(f+="&tclick="+e),b.location.href=f}}}}]),d.directive("infantMallTip",["$http","$window","LotteCommon","$timeout","commInitData","LotteStorage",function(a,b,c,d,e,f){return{templateUrl:"/lotte/resources_dev/mall/baby/baby_mall_useful_tip.html",link:function(d,e,g){d.swagWriteGo=function(a){if(null==d.loginInfo||!d.loginInfo.isLogin){var e="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href="/login/m/loginForm.do?"+e)}if(d.appObj.isApp)if(d.appObj.isAndroid&&!d.appObj.isSktApp&&d.appObj.verNumber>=276||d.appObj.isAndroid&&d.appObj.isSktApp&&d.appObj.verNumber>=212||d.appObj.isIOS&&!d.appObj.isIpad&&d.appObj.verNumber>=2690||d.appObj.isIOS&&d.appObj.isIpad&&d.appObj.verNumber>=235){var g=c.infantTipWriteUrl+"?"+d.baseParam+"&top=136";a&&(g+="&tclick="+a),f.setSessionStorage("param_more1",d.screenData.cateName),f.setSessionStorage("param_more2",d.inFantUi.sub_dispNo),b.location.href=g}else confirm("롯데닷컴 앱 업데이트 후 이용 가능합니다. 지금 업데이트 하시겠습니까?")&&(location.href=c.appDown+"?"+d.baseParam);else confirm("롯데닷컴 앱에서 이용 가능합니다. 지금 설치하시겠습니까?")&&(location.href=c.appDown+"?"+d.baseParam)},d.recomm_click=function(b){if(null==d.loginInfo||!d.loginInfo.isLogin){var c="targetUrl="+encodeURIComponent(location.href,"UTF-8");return void(location.href="/login/m/loginForm.do?"+c)}a.get("/json/mall/baby_recomm_save.json?bbcNo="+b.bbc_no).success(function(a){"reg_success"==a.result?(alert("추천하셨습니다."),b.like_count+=1,$("#recomm_"+b.bbc_no).addClass("on")):"reg_duplicate"==a.result?alert("이미 추천하셨습니다."):"reg_mywrit"==a.result?alert("본인이 작성한 글에는 추천 하실 수 없습니다."):alert("다시 한번 시도해주시기 바랍니다."),d.sendTclick("m_DC_SpeDisp_Mombaby_Clk_Btn_07")})},d.deleteSwag=function(b,e){var f=confirm("글을 삭제하시겠습니까?");return f?void a.get(c.infantTipDeleteData+"?bbcNo="+b.bbc_no).success(function(a){"0000"==a.comment_delete.response_code&&(alert("삭제되었습니다"),d.screenData.gallery_list.splice(e,1),console.log(d.screenData.gallery_list.length),d.modifyOpen=null)}):!1},d.modifyOpen,d.modifyClick=function(a,b){d.modifyOpen==b?(d.modifyOpen=null,$("#swaglist_"+a.bbc_no).removeClass("on")):(d.modifyOpen=b,$("#swaglist_"+a.bbc_no).addClass("on"))},d.hideModify=function(a,b){d.modifyOpen=null,$("#swaglist_"+a.bbc_no).removeClass("on")},d.getswagRewriteUrl=function(a,b){var e=d.baseParam+"&bbcNo="+a.bbc_no+"&dispNo="+d.inFantUi.sub_dispNo;return c.infantTipRewriteUrl+"?"+e}}}}])}(window,window.angular);