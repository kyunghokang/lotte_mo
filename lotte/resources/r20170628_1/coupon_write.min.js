!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.controller("CouponWriteCtrl",["$scope","$http","$window","$timeout","LotteCommon","LotteForm",function(a,c,d,e,f,g){a.showWrap=!0,a.contVisible=!0,a.subTitle="페이퍼 쿠폰 등록",a.regist=!1,a.clickLimitI=0,a.couponWrite=function(c){a.clickLimitI++,a.regist=!0,a.clickLimitI<2&&e(function(){return b.isDefined(c)?(g.FormSubmitForAjax(f.paperCouponSaveUrl,{paper_no:c}).success(function(b){if("-9"==b.resultMsg){alert("로그인 후 응모가능합니다."),a.regist=!1;var c="&targetUrl="+encodeURIComponent(d.location.href,"UTF-8");d.location.href=f.loginUrl+"?"+a.baseParam+c}else"-1"==b.resultMsg?(alert("쿠폰 번호 확인 후 다시 입력해 주세요."),a.regist=!1,d.location.href=f.paperCouponUrl+"?"+a.baseParam+"&point_div=coupon&tclick=m_mylayer_coupon"):"-2"==b.resultMsg?(alert("이미 발급된 페이퍼 쿠폰입니다.."),a.regist=!1,d.location.href=f.paperCouponUrl+"?"+a.baseParam+"&point_div=coupon&tclick=m_mylayer_coupon"):(alert("페이퍼 쿠폰이 등록되었습니다."),a.regist=!1,d.location.href=f.pointInfoUrl+"?"+a.baseParam+"&point_div=coupon&tclick=m_mylayer_coupon");a.clickLimitI=0}).error(function(a){console.log("Error Data : ",status,headers,config)}),void(a.regist=!1)):(alert("쿠폰 번호를 입력 해 주세요."),a.regist=!1,a.clickLimitI=0,!1)},200)}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/mylotte/pointcoupon/m/coupon_write_container.html",replace:!0,link:function(a,b,c){}}}),d.directive("numericOnly",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){var b=a?zue.replace(/[^\d.-]/g,""):null;return b!=a&&(d.$setViewValue(b),d.$render()),b})}}})}(window,window.angular);var transformJsonToParam=function(a){var b=[];for(var c in a)if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c][d]));else b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};