!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter"]);d.controller("findIdCtrl",["$scope","$filter","$sce","$http","$window","LotteCommon","LotteUtil","commInitData",function(a,b,c,d,e,f,g,h){a.showWrap=!0,a.contVisible=!0,a.subTitle="계정 찾기",a.actionBar=!0,a.screenID="FindID",a.formVal={},a.formVal.mbr_name="",a.formVal.hpNum={},a.formVal.hpNum.hpno_2="",a.formVal.hpNum.hpno_3="",a.formVal.cert_no="",a.re_send_sms_yn="",a.dbClick=!1,a.smsSendCnt=0,a.schema=null!=h.query.schema?h.query.schema:"",$.ajax({type:"post",async:!1,url:f.simpleSignMemberIdFindUrl,success:function(b){a.hp_list=b},error:function(a){alert("핸드폰 국번 로딩 실패")}})}]),d.directive("lotteContainer",["LotteUtil","LotteCommon",function(b,c){return{templateUrl:"/lotte/resources_dev/login/find_id_container.html",replace:!0,link:function(d,e,f){d.fn_SendSms=function(a){if($("#sendSMS").hide(),$("#reSendSMS").show(),d.smsSendCnt>=10)return void alert("일 인증번호 발송 횟수가 초과 되었습니다.\n내일 다시 시도해 주세요.");if(b.korWordCheck($("#mbr_name"),$("#mbr_name").val())&&b.numWordCheck($("#hpno_2"),$("#hpno_2").val())&&b.numWordCheck($("#hpno_3"),$("#hpno_3").val())){d.cell_sct_no=$("#mbr_name").val(),d.cell_no=$("#hpno_1").val()+$("#hpno_2").val()+$("#hpno_3").val(),d.mksh_cert_sn=$("#mksh_cert_sn").val();var e="&cell_sct_no="+d.cell_sct_no;e+="&cell_no="+d.cell_no,e+="&re_send_sms_yn="+d.re_send_sms_yn,e+="&mksh_cert_sn="+d.mksh_cert_sn,e+="&cert_no=",e+="&certGubun=1",console.log("requestData : "+e),$.ajax({type:"post",async:!1,url:c.simpleSignMemberCertificationUrl+"?"+d.baseParam,data:e,success:function(a){""!=a?(alert("인증번호를 발송 하였습니다."),$("#sendSMS").hide(),$("#reSendSMS").show(),$("#mksh_cert_sn").val(a.result),d.smsSendCnt++,console.log("smsSendCnt : "+d.smsSendCnt)):alert("인증번호 발송에 실패 하였습니다.\n휴대폰번호를 확인해 주세요.")}})}},d.fn_reSendSms=function(){d.re_send_sms_yn="Y",d.fn_SendSms()},d.fn_CertifySMS=function(){if(!d.dbClick){if(!b.korWordCheck($("#mbr_name"),$("#mbr_name").val()))return;if(!b.numWordCheck($("#hpno_2"),$("#hpno_2").val()))return;if(!b.numWordCheck($("#hpno_3"),$("#hpno_3").val()))return;if(""==d.formVal.cert_no)return void alert("입력되지 않은 정보가 있습니다.");d.cell_sct_no=$("#mbr_name").val(),d.cell_no=$("#hpno_1").val()+$("#hpno_2").val()+$("#hpno_3").val(),d.mksh_cert_sn=$("#mksh_cert_sn").val();var a="&cell_sct_no="+d.cell_sct_no;a+="&cell_no="+d.cell_no,a+="&re_send_sms_yn="+d.re_send_sms_yn,a+="&mksh_cert_sn="+d.mksh_cert_sn,a+="&cert_no="+d.formVal.cert_no,a+="&certGubun=2",console.log("requestData : "+a),$.ajax({type:"post",async:!1,url:c.simpleSignMemberCertificationUrl+"?"+d.baseParam,data:a,success:function(a){a=a.result.trim(),"-99"==a?alert("인증번호가 일치하지 않습니다.\n다시 입력해주세요."):"-90"==a?alert("기간이 경과되었습니다.\n인증번호를 다시 받아 주세요."):"success"==a&&(d.dbClick=!0,d.fn_successCertify())},error:function(a){alert("에러 발생 :"+a)}})}},d.fn_successCertify=function(){document.findMemberForm.action=c.simpleSignMemberIdFindAfter,document.findMemberForm.submit()},d.maxLengthCheck=function(a){a.value.length>a.maxLength&&(a.value=a.value.slice(0,a.maxLength))},d.goFamilySite=function(e){if("N"==d.joinBtnViewYn){var f=/iphone|ipad/gi.test(navigator.appVersion);if("mem_reg"==e&&f)return void alert("죄송합니다. 일시적으로 닷컴/엘롯데 PC를 통해서만 회원가입이 가능합니다.")}var g="member.lpoint.com/door/user/mobile/",h=encodeURIComponent((""==d.schema?c.baseUrl:d.schema+c.baseUrl.replace("http",""))+"/"+(b.isSmp()?"main_smp.do":"main.do")+d.baseParam,"UTF-8"),i="",j="";j=""==d.schema?encodeURIComponent(a.location.href,"UTF-8"):a.location.href.replace(/^http(s)?/,d.schema),"id"==e?i="requestId.jsp":"passwd"==e?i="requestPasswd.jsp":"mem_reg"==e&&(i="login_common.jsp"),g+=i+"?sid="+b.getLoginSeed()+"&returnurl="+j+"&main_url="+h,g+="&sch="+d.schema;var k=navigator.userAgent;""!=d.schema?b.boolAppInstall(k)?a.location="family://"+g:b.boolAndroid(k)&&a.myJs.callAndroid("https://"+g):a.open("https://"+g,"family")}}}}])}(window,window.angular);