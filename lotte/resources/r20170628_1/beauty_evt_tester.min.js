!function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteSns"]);d.controller("evtTesterCtrl",["$http","$scope","commInitData","LotteCommon","LotteUtil","LotteCookie",function(b,d,e,f,g,h){d.showWrap=!0,d.contVisible=!0,d.subTitle="테스터 이벤트 신청하기",d.pageLoading=!0,d.isShowThisSns=!0,d.evtNo="",d.addrRe=!0;var i=h.getCookie("SIMPLESIGNYN"),j=g.getLoginSeed().toUpperCase(),k="";k=""==d.schema?encodeURIComponent(a.location.href,"UTF-8"):a.location.href.replace(/^http(s)?/,d.schema);var l;e.query.evtNo!=c&&(d.evtNo=e.query.evtNo),d.roadData=function(){b.get(f.beautyEvtTesterData+"?evt_no="+d.evtNo).success(function(a){d.evtData=a.tester_evt,d.select_addr=a.user_addr_info.addr_list[0],d.dlvp_sn=d.select_addr.dlvp_sn,d.evtData.evtStrDate=d.evtData.evtStrDate.replace(/(\d{4})(\d{2})/,"$1.$2."),d.evtData.evtEndDate=d.evtData.evtEndDate.replace(/(\d{4})(\d{2})/,"$1.$2."),d.evtData.winDate=d.evtData.winDate.replace(/(\d{4})(\d{2})/,"$1.$2."),l=f.changeMyInfoUrl+"?sid="+j+"&returnurl="+k+"&custid="+d.evtData.seedCustId+"&loginid="+h.getCookie("LOGINID")+"&pageflag=I&opentype=P&sch="+d.schema,d.pageLoading=!1}).error(function(a){d.pageLoading=!1})},d.roadData(),d.testerPrdClk=function(a){var b=f.prdviewUrl+"?goods_no="+a+"&"+d.baseParam;location.href=b},d.changeAddr=function(a){if(a)d.roadData(),d.addrRe=!0;else if(d.loginInfo.isLogin){if("Y"==i)return alert("간편회원의 정보변경은 PC에서만 가능합니다."),!1;outLink(l),d.addrRe=!1}else alert("로그인 후 이용 가능합니다.")},d.tstSubmit=function(){if(""==d.evt_tit||d.evt_tit==c)alert("제목을 작성해주세요.");else if(d.evt_tit.length<4)alert("제목을 한글 3자 이상 입력하세요.");else if(""==d.evt_con||d.evt_con==c)alert("사연을 반드시 등록해주세요.");else{var a={evt_no:d.evtNo,bbc_tit_nm:d.evt_tit,bbc_fcont:d.evt_con,dlvp_sn:d.dlvp_sn};$.ajax({type:"post",async:!1,url:f.beautyEvtTesterSave,data:a,success:function(a){a.indexOf("0000")>-1?(alert("신청이 완료되었습니다."),location.replace(f.cateMidBeauty)):a.indexOf("dup.err")>-1&&alert("이미 신청하셨습니다.")}})}}}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/category/m/beauty_evt_tester_container.html",replace:!0,link:function(a,b,c){}}})}(window,window.angular);