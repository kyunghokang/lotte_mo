var isSwipeActive=!1,isSwipeLock=!1,isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1;!function(a,b,c){"use strict";var d=[],e=b.module("lotteNgSwipe",[]);e.controller("lotteNgSwipeCtrl",["$scope",function(a){}]),e.factory("lotteNgSwipe",["$interval","$timeout","$window",function(c,d,e){function f(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function g(c,d,e){if(e.SLIDE_SWIPE){var f=d[0].offsetWidth-e.LEFT_MARGIN-e.RIGHT_MARGIN;0==f&&(f=a.innerWidth);var g=f/e.DISP_COUNT,h=0;if(s=d[0].offsetWidth-g-e.LEFT_MARGIN,!(d.find("ul, ol").eq(0).find(">li").length>=1||d.find(">li").length>=1)||e.LOADING_ELEMENT||e.LEFT_ELEMENT||e.RIGHT_ELEMENT)e.LOADING_ELEMENT||b.element(d).eq(0).css(q());else{if(-1!=d.context.className.indexOf("recommond_swipe"))var i=d.find(">li");else var i=d.find("ul, ol").eq(0).find(">li").length>1?d.find("ul, ol").eq(0).find(">li"):d.find(">li");var j=c,k=0,l=null;for(k;k<i.length;j++,k++)l=i.eq(j),h=j>=k||0>j?0>j?g*d.find(">li").length+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*k+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0):g*-(c-j)+e.LEFT_MARGIN+(e.EDGE_LAST&&c==i.length-1?s:0),-1!=d.context.className.indexOf("latest_swipe")&&a.innerWidth>=640?(f=a.innerWidth,l.css({width:f/2,backfaceVisibility:"hidden",position:"absolute",left:h})):l.css({width:f/e.DISP_COUNT,backfaceVisibility:"hidden",position:"absolute",left:h}),j+1>=d.find(">li").length&&(j=-1);t=i.length,b.element(d).eq(0).css(p(0)),b.element(d).find(">li").css("top",0).eq(0).css("position","relative")}}}function h(a){for(var b={totalwidth:0,width:[],paddingleft:[],marginleft:[],paddingright:[],marginright:[]},c=0;c<a.find(">li").length;c++){var d=a.find(">li:eq("+c+")");b.width[c]=parseInt(d.width()),b.width[c]+=b.marginleft[c]=parseInt(d.css("margin-left")),b.width[c]+=b.marginright[c]=parseInt(d.css("margin-right")),b.width[c]+=b.paddingleft[c]=parseInt(d.css("padding-left")),b.width[c]+=b.paddingright[c]=parseInt(d.css("padding-right")),b.totalwidth+=b.width[c]}return b}function i(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}function j(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(0,c.SWIPE_SPEED)),(c.LOADING_ELEMENT||c.LEFT_ELEMENT||c.LEFT_ELEMENT)&&b.element(c.LOADING_ELEMENT).css(p(0,c.SWIPE_SPEED))}function k(c,d,e,f){var g=h(c);if(a.innerWidth-d.LEFT_MARGIN-d.RIGHT_MARGIN>g.totalwidth)return!1;for(var j=a.innerWidth/2,k=g.width[e]/2,m=0,n=0;n<g.width.length&&n!=e;n++)m+=g.width[n];var o=i(c),q=-1*(m-j+k);f?(q>0?q=0:q<-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)&&(q=-(g.totalwidth-a.innerWidth+d.RIGHT_MARGIN)),b.element(c).eq(0).css(p(q))):Math.abs(m)>j&&g.totalwidth-a.innerWidth+d.RIGHT_MARGIN>Math.abs(q)?l(c[0],d,o,q):Math.abs(m)<=j?l(c[0],d,o,0):l(c[0],d,o,-1*(g.totalwidth-a.innerWidth)-d.RIGHT_MARGIN)}function l(a,c,d,e){return d==e?!0:(b.element(a).on(u,function(a){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(e,c.SWIPE_SPEED)),void(c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(e,c.SWIPE_SPEED))))}function m(a,c,d,e){isSwipeActive=!0,b.element(a).on(u,function(a){isSwipeActive=!1,c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED))}function n(a,c,d,e,f){return 0>d?f=f+c.DISP_COUNT>c.MAX_SLIDE?c.MAX_SLIDE:f+c.DISP_COUNT:f-=c.DISP_COUNT,c.EDGE_LAST&&(f==t-1||f==t-2&&d>0)&&(e-=s),b.element(a).on(u,function(d){c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(r()),g(f,a,c),b.element(this).css(r()).off(u)}).css(p(d>=0?e:-e,c.SWIPE_SPEED)),c.LOADING_ELEMENT&&b.element(c.LOADING_ELEMENT).css(p(d>=0?e:-e,c.SWIPE_SPEED)),f}function o(b,c,d){var e=i(b);return e>0?(m(b[0],c,e,0),e=0):Math.abs(e)+a.innerWidth>Math.abs(d.totalwidth)+c.RIGHT_MARGIN&&(m(b[0],c,e,d.totalwidth-a.innerWidth+c.RIGHT_MARGIN),e=-1*(d.totalwidth-a.innerWidth)),e}function p(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function q(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}}function r(a){return a||(a=""),{"-webkit-transition":a,"-moz-transition":a,"-o-transition":a,transition:a}}var s=0,t=0,u="transitionend.ngswipe webkitTransitionEnd.ngswipe oTransitionEnd.ngswipe MSTransitionEnd.ngswipe";return{unbind:function(a){a.off("touchstart.ngswipe mousedown.ngswipe touchcancel.ngswipe touchmove.ngswipe mousemove.ngswipe touchend.ngswipe mouseup.ngswipe")},bind:function(d,g,k){var l,r,u,v,w=d[0],x=!1,y=g.FIRST_INDEX,z=b.element(d).scope(),A=!1,B=!1,C=[],D=0,E=0,F=0,G=!0,H=(g.DISP_COUNT,navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1),I=!0,J=30,K=b.element(e).scrollTop();g.SLIDE_MENU_SWIPE&&b.element(w).css(p(0)),d.on("touchstart.ngswipe mousedown.ngswipe",function(c){if(c.stopPropagation(),H){var j=b.element(e).scrollTop();j+J>K&&K>j-J?I=!0:(I=!1,K=j)}A=!1,B=!1,g.SLIDE_MENU_SWIPE&&(C=h(d),G=a.innerWidth-g.LEFT_MARGIN-g.RIGHT_MARGIN>C.totalwidth?!1:!0),isSwipeLock||G&&(a.innerWidth>=900&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&g.RESPONSIVE_SWIPE?g.DISP_COUNT=g.RESPONSIVE_SWIPE_640:g.RESPONSIVE_SWIPE&&(g.DISP_COUNT=g.RESPONSIVE_SWIPE_320),g.MAX_SLIDE=d.find(">li").length-1,(!(g.MAX_SLIDE<1)||g.LOADING_ELEMENT||g.LEFT_ELEMENT||g.RIGHT_ELEMENT)&&(u=f(c),u.x+=g.EDGE_LAST&&y==t-1?s:0,x=!0,l=0,r=0,isSwipeActive=!0,v=u,y=z.swipeIdx,E=(new Date).getTime(),g.SLIDE_MENU_SWIPE&&(C=h(d),D=i(d)),k.start&&k.start(u,c),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none"),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css({position:"fixed",zIndex:g.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-w.offsetTop,height:a.innerHeight-w.offsetTop,width:"100%",left:w.offsetWidth,right:"auto"}).removeClass("none")))}),d.on("touchcancel.ngswipe",function(a){x=!1,j(w,g,u,v)}),d.on("touchmove.ngswipe mousemove.ngswipe",function(a){if(x&&G&&u){var c=f(a);c.x+=g.EDGE_LAST&&y==t-1?s:0,l+=Math.abs(c.x-v.x),r+=Math.abs(c.y-v.y),v=c;var d,e;d=Math.abs(c.x-u.x),e=Math.abs(c.y-u.y),A||(B=d>e,A=!0);var h=v.x-u.x;if(h>0?a.moveto="right":a.moveto="left",B&&(I||!H)){a.preventDefault(),a.stopPropagation();g.SLIDE_MENU_SWIPE?b.element(w).css(p(c.x-u.x+D)):b.element(w).css(p(c.x-u.x)),g.LOADING_ELEMENT&&b.element(g.LOADING_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(c.x-u.x))),"left"==a.moveto?(g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(p(0))):(g.LEFT_ELEMENT&&b.element(g.LEFT_ELEMENT).css(b.extend({left:c.x-u.x<=0?w.offsetWidth:"auto",right:c.x-u.x<=0?"auto":w.offsetWidth},p(0))),g.RIGHT_ELEMENT&&b.element(g.RIGHT_ELEMENT).css(p(0))),k.move&&k.move(c,a)}}}),d.on("touchend.ngswipe mouseup.ngswipe",function(h){if(h.stopPropagation(),A=!1,B&&(I||!H)){if(!x||!G)return;x=!1,isSwipeActive=!1;var i=d[0].offsetWidth,l=Math.abs(v.x-u.x),r=v.x-u.x;if(F=(new Date).getTime(),r>0?h.moveto="right":h.moveto="left",h.max=g.MAX_SLIDE,g.SLIDE_MENU_SWIPE){var z=v.x-u.x+D,J=-80,L="left"==h.moveto?z+J:z-J,M="left"==h.moveto?-5:5;if(Math.abs(v.x-u.x)>5&&400>=F-E)var N=c(function(){z+=M,b.element(d).eq(0).css(p(z)),(L>=z&&"left"==h.moveto||z>=L&&"right"==h.moveto||z>0||z<=-C.totalwidth+a.innerWidth)&&(D=o(d,g,C),c.cancel(N))},10);else D=o(d,g,C)}else if(i*g.MAX_RATIO<=l){if(g.SLIDE_SWIPE){if(y>=g.MAX_SLIDE&&0>r||0>y&&r>0||0==y&&r>0||g.MAX_SLIDE+1<=g.DISP_COUNT||y+g.DISP_COUNT>g.MAX_SLIDE&&"left"==h.moveto)return void j(w,g,u,v+(g.EDGE_LAST&&y==t-1?s:0));if(g.SLIDE_SWIPE)var i=i-g.LEFT_MARGIN-g.RIGHT_MARGIN;y=n(d,g,r,i,y),h.idx=y}else m(w,g,r,i);var O=f(h);O.x+=g.EDGE_LAST&&y==t-1?s:0;k.end&&k.end(O,h)}else j(w,g,u,v),b.element(d).eq(0).css(q())}H&&(K=b.element(e).scrollTop(),I=!0),u=null})},moveSwipeX:n,positionReCalc:g,resetSwipe:j,moveMenuSwipe:k,getListInfo:h}}]),e.directive("lotteNgListSwipe",["$window","$parse","$timeout","lotteNgSwipe",function(e,f,g,h){return{link:function(i,j,k){function l(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c}function m(){var c=j[0];if(a.innerWidth>=900&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_900:a.innerWidth>=640&&p.RESPONSIVE_SWIPE?p.DISP_COUNT=p.RESPONSIVE_SWIPE_640:p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css("min-height",a.innerHeight-c.offsetTop+"px"),0!=i.swipeIdx&&p.DISP_COUNT>1){var d=i.swipeIdx%p.DISP_COUNT;0!=d&&(i.swipeIdx-=d)}if(i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),p.SLIDE_MENU_SWIPE){var e=h.getListInfo(j);e.width.length>1&&a.innerWidth-p.LEFT_MARGIN-p.RIGHT_MARGIN>e.totalwidth&&b.element(c).css(l(0))}p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.LEFT_ELEMENT&&b.element(p.LEFT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),p.RIGHT_ELEMENT&&b.element(p.RIGHT_ELEMENT).css({position:"fixed",zIndex:p.LOADING_ELEMENT_ZINDEX,minHeight:a.innerHeight-c.offsetTop,height:a.innerHeight-c.offsetTop,width:"100%",left:c.offsetWidth,right:"auto"}).removeClass("none"),i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)}function n(a,b){if(!(LeftSwipeStartExec&&"left"==a.moveto||RightSwipeStartExec&&"right"==a.moveto)){"left"==a.moveto?LeftSwipeStartExec=!0:RightSwipeStartExec=!0;var c=null;i.$apply(function(){return c=q(i.$parent,{$event:{idx:a.idx,max:b.MAX_SLIDE,moveto:a.moveto}})})}}function o(a,c){if(isSwipeActive)return g(function(){o(a,c)},100),!1;var d=null;i.$apply(function(){return d=r(i.$parent,{$event:{idx:a.idx,max:c.MAX_SLIDE,moveto:a.moveto}}),"translateX_Reset"==d&&g(function(){b.element(j).eq(0).css(l(0))},500),d})}var p={MAX_RATIO:k.swipeMaxRatio?k.swipeMaxRatio:.3,MIN_DISTANCE:k.swipeMinDistance?k.swipeMinDistance:25,SWIPE_LOOP:k.swipeLoop?k.swipeLoop:!1,LEFT_ELEMENT:k.swipeLeftEl?k.swipeLeftEl:null,RIGHT_ELEMENT:k.swipeRightEl?k.swipeRightEl:null,LOADING_ELEMENT:k.swipeLoadingEl?k.swipeLoadingEl:null,LOADING_ELEMENT_ZINDEX:k.swipeLoadingElZindex?k.swipeLoadingElZindex:50,SLIDE_SWIPE:k.swipeSlideItem?k.swipeSlideItem:!1,SLIDE_MENU_SWIPE:k.swipeSlideMenu?k.swipeSlideMenu:!1,RESPONSIVE_SWIPE:k.swipeResponsive?k.swipeResponsive:!1,RESPONSIVE_SWIPE_320:parseInt(k.swipeResponsive320)?parseInt(k.swipeResponsive320):1,RESPONSIVE_SWIPE_640:parseInt(k.swipeResponsive640)?parseInt(k.swipeResponsive640):2,RESPONSIVE_SWIPE_900:parseInt(k.swipeResponsive900)?parseInt(k.swipeResponsive900):2,AUTO_HEIGHT:k.swipeAutoheight?k.swipeAutoheight:!1,DISP_COUNT:k.swipeDispCount?parseInt(k.swipeDispCount):1,FIRST_INDEX:k.swipeFirstIndex?parseInt(k.swipeFirstIndex):0,LEFT_MARGIN:k.swipeLeftMargin?parseInt(k.swipeLeftMargin):0,RIGHT_MARGIN:k.swipeRightMargin?parseInt(k.swipeRightMargin):0,START_EXEC:k.swipeStartExec?k.swipeStartExec:null,EXEC:k.swipeEndExec?k.swipeEndExec:null,LIST_SCOPE:k.swipeListModel?k.swipeListModel:null,SWIPE_ID:k.swipeId?k.swipeId:"",MAX_SLIDE:0,SWIPE_SPEED:k.swipSpeed?k.swipSpeed:150,IGNORE_DESTORY:k.ignoreDestory?k.ignoreDestory:!1,EDGE_LAST:k.swipeEdgeLast?!0:!1};i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(i.swipeIdx/p.DISP_COUNT),i.swipeBullet=[];var q=null,r=null;if(null!=p.START_EXEC&&(q=f(p.START_EXEC)),null!=p.EXEC&&(r=f(p.EXEC)),p.RESPONSIVE_SWIPE&&(p.DISP_COUNT=p.RESPONSIVE_SWIPE_320),p.SLIDE_MENU_SWIPE&&(i.moveMenuSwipe=function(a){i.moveMenuSwipeFnc(a,!1)},i.moveMenuSwipeFnc=function(a,b){h.moveMenuSwipe(j,p,a,b)}),p.SLIDE_MENU_SWIPE||p.SLIDE_SWIPE||(i.translateX_Reset=function(){console.log("스와이프 좌표 리셋"),b.element(j).eq(0).css(l(0)),p.LOADING_ELEMENT&&b.element(p.LOADING_ELEMENT).css(l(0))}),i.setSlide=function(a){0>a?a=p.MAX_SLIDE:a>p.MAX_SLIDE&&(a=0),i.swipeIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.goSlide=function(a){h.positionReCalc(a,j,p),i.swipeIdx=i.swipeBulletIdx=a,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC))},i.nextSlide=function(){i.swipeIdx!=p.MAX_SLIDE&&(h.moveSwipeX(j,p,-1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx+=p.DISP_COUNT,i.swipeBulletIdx++,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.beforeSlide=function(){0!=i.swipeIdx&&(h.moveSwipeX(j,p,1,j[0].offsetWidth-10,i.swipeIdx),i.swipeIdx-=p.DISP_COUNT,i.swipeBulletIdx--,null!=p.EXEC&&(r(i.$parent,{$event:{idx:i.swipeIdx,max:p.MAX_SLIDE}}),console.log("Call swipe exec. "+p.EXEC)))},i.ngswipeInit=function(){if(p.SLIDE_SWIPE){i.swipeBullet=[],p.MAX_SLIDE=j.find(">li").length;for(var a=0;a<p.MAX_SLIDE/p.DISP_COUNT;a++)i.swipeBullet.push(a)}p.MAX_SLIDE<i.swipeIdx?(i.swipeIdx=p.FIRST_INDEX,i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),h.positionReCalc(i.swipeIdx,j,p),g(function(){i.$apply()})):i.swipeIdx||(i.swipeBulletIdx=parseInt(p.FIRST_INDEX/p.DISP_COUNT),i.swipeIdx=p.FIRST_INDEX,g(function(){i.$apply()}))},i.resetSwipePos=function(){h.positionReCalc(i.swipeIdx,j,p)},null!=p.LIST_SCOPE){var s=null;i.$watch(p.LIST_SCOPE,function(a,b){if(a!=c&&a.length>=1){if(s!=a[0]&&(i.swipeIdx=0,i.swipeBulletIdx=0,s=a[0]),"recommondSwipe_0"==k.swipeId||"lastestSwipe_0"==k.swipeId)var d=2e3;else var d=100;g(function(){i.ngswipeInit(),h.positionReCalc(i.swipeIdx,j,p)},d)}},!0)}m(),-1==d.indexOf(p.SWIPE_ID)&&d.push(p.SWIPE_ID);var t=b.element(e);t.on("orientationchange.ngswipe resize.ngswipe",m),i.$on("$destroy",function(){h.unbind(j)}),h.bind(j,p,{start:function(a,b){},move:function(a,b){return null!=p.START_EXEC?(isLoadingData=!0,n(b,p)):void 0},cancel:function(){isLoadingData=!1},end:function(a,b){return isLoadingData=!1,LeftSwipeStartExec=!1,RightSwipeStartExec=!1,i.swipeIdx=b.idx?b.idx:0,i.swipeBulletIdx=parseInt(b.idx/p.DISP_COUNT),i.$apply(),null!=p.EXEC?o(b,p):void 0}})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteVideo",[]);d.controller("LotteVideoCtrl",["$scope",function(a){}]),d.directive("lotteVideo",["$window","$timeout","LotteUtil",function(c,d,e){return{controller:"LotteVideoCtrl",link:function(c,f,g,h){function i(){n.src="",d(function(){n.src=j},300),q.appObj.isIOS||n.removeAttribute("controls"),c.movMode=0,c.$apply()}c.movMode=0,c.mute=!1;var j=g.lvSrc,k=g.lvDetailUrl,l=g.lvNoAlert,m=g.lvPoster,n=b.element(f).find("video")[0],o=g.lvTime||2e3;n.setAttribute("poster",m),n.addEventListener("ended",i,!1);var p={play:function(){a.videoStateModel.setPlay(!0,String(9999999*Math.random()))},pause:function(){a.videoStateModel.setPlay(!1)}};n.addEventListener("play",p.play,!1),n.addEventListener("pause",p.pause,!1);var q=e.getAbsScope(c);c.playVideo=function(){if(l||confirm("3G/LTE에서 재생시 데이터 요금이 부과할 수 있으니 유의하세요~")){var a=b.element(document.body).data("play_video")||"";if(a){var e=b.element("#"+a);if(e&&e.length>0){e[0].pause();var g=e.scope();g.movMode=0}}c.movMode=1,n.src||(n.src=j),n.play(),b.element(document.body).data("play_video",b.element(n).attr("id")),d(function(){1==c.movMode&&$(f).find(".btns").fadeOut(600,function(){c.movMode=2,$(this).attr("style",""),c.$apply()})},o)}},c.clickCover=function(){c.movMode=1,d(function(){1==c.movMode&&$(f).find(".btns").fadeOut(600,function(){c.movMode=2,$(this).attr("style",""),c.$apply()})},o)},c.stopVideo=function(){n.pause(),c.movMode=0},c.muteVideo=function(){n.muted?(c.mute=!1,n.muted=!1):(c.mute=!0,n.muted=!0)},c.fullVideo=function(){n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.webkitEnterFullscreen&&n.webkitEnterFullscreen(),q.appObj.isIOS||n.setAttribute("controls","controls")},c.goDetailPage=function(){location.href=k},b.element(f).find("video").bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(a){var b=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen,d=b?"FullscreenOn":"FullscreenOff";"FullscreenOff"==d&&(c.stopVideo(),q.appObj.isIOS||n.removeAttribute("controls"),c.$apply())})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("lotteSlider",[]);d.controller("LotteSlideCtrl",["$scope",function(b){b.getTranslateXCssObj=function(a,b){var c={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translateX("+a+"px)","-ms-transform":"translateX("+a+"px)","-moz-transform":"translateX("+a+"px)",transform:"translateX("+a+"px)","-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""};return b&&b>0&&(c["-webkit-transition"]="-webkit-transform "+b+"ms",c["-moz-transition"]="-moz-transform "+b+"ms",c["-o-transition"]="-o-transform "+b+"ms",c.transition="transform "+b+"ms"),c},b.removeTranslateCSS=function(){return{"-webkit-backface-visibility":"","-moz-backface-visibility":"","backface-visibility":"","-webkit-transform":"","-ms-transform":"","-moz-transform":"",transform:""}},b.getCoordinates=function(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}},b.getTransXPos=function(b){var c=a.getComputedStyle(b.get(0)),d=new WebKitCSSMatrix(c.webkitTransform);return d.m41}}]),d.directive("lotteSlider",["$window","$timeout","$parse",function(a,c,d){return{controller:"LotteSlideCtrl",link:function(d,e,f,g){function h(){m=k.outerWidth(),l.css({display:"inline-block"}),n=l.outerWidth(),x=-(n-m);var a=d.getTransXPos;(a.x>0||a.x<x)&&i(0,500)}function i(a,b){l.css(d.getTranslateXCssObj(a,b)),k.trigger({type:"slide",posX:a,wrapWidth:m,contWidth:n})}function j(){k.on({"touchstart.lotteSlider":function(a){m=k.outerWidth(),n=l.outerWidth(),y=!1,z=!1,n>m&&(a.stopPropagation(),o=!0,q=d.getCoordinates(a),p=d.getTransXPos(l),t=Date.now())},"touchmove.lotteSlider":function(a){if(o){var b,c;if(r=d.getCoordinates(a),b=Math.abs(r.x-q.x),c=Math.abs(r.y-q.y),y||(z=b>c,y=!0),z){b>5&&a.preventDefault(),a.stopPropagation();var e=p+r.x-q.x;e>0?e/=3:x>e&&(e=x+(e-x)/3),i(e,0)}}},"touchend.lotteSlider":function(a){if(s=d.getCoordinates(a),o&&q.x!=s.x&&(Math.abs(q.x-s.x)>5&&a.preventDefault(),event.stopPropagation(),y=!1,z)){m=k.outerWidth();var b=d.getTransXPos(l);u=Date.now(),w=q.x>s.x?-1:1,v=u-t;var c=Math.abs(q.x-s.x),e=.4,f=c*e/v,g=b+m*f*w;g>0?g=0:x>g&&(g=x),(Math.abs(b-g)>30||0==g||g==x)&&i(g,500)}},"touchcancel.lotteSlider":function(a){}}),b.element(a).on("resize.lotteSlider orientationchange.lotteSlider",function(){h()})}var k=b.element(e),l=k.find(">").eq(0),m=k.width(),n=l.width(),o=!1,p=0,q=null,r=null,s=null,t=0,u=0,v=0,w=0,x=0;d.lotteSliderMoveXPos=function(a,b){m=k.width(),n=l.width(),a>0?a=0:Math.abs(a)>n-m&&(a=-(n-m)),b||(b=0),i(a,b)},d.reset=function(){o=!1,i(0,0),c(function(){h()})};var y=!1,z=!1;c(function(){h(),j()})}}}])}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteNgSwipe","lotteVideo","lotteSlider"]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(http|https|javascript):/)}]);d.controller("mylotteCritViewCtrl",["$scope","$rootScope","LotteCommon","$http","$filter","$window","$timeout","LotteUtil","LotteForm","LotteUserService","LotteGA",function(a,c,d,e,f,g,h,i,j,k,l){a.showWrap=!0,a.contVisible=!0,a.subTitle="내 상품평",a.isShowThisSns=!1,a.tabControl=i.getParameter("mode")||"first",a.jsonLoading=!1,a.gaCtgName="MO_내 상품평",a.pageUI={};var m=20;a.unwrittenCommentList={},a.unwrittenPageNum=1,a.unwrittenCurrentRows=0,a.completeGetUnwrittenComment=!1,a.completeGetWrittenComment=!1,a.writtenCommentList={},a.writtenPageNum=1,a.writtenCurrentRows=0,a.dummyUrl="http://image.lotte.com/lotte/mo2018/reviews/default_profile.png";try{(a.getUnwrittenCommentListData=function(){a.ajaxLoadFlag=!0,e.get(d.unwrittenCommentListData+"?"+a.baseParam+"&display_cnt="+m+"&page_num="+a.unwrittenPageNum).success(function(b){1==a.unwrittenPageNum?a.unwrittenCommentList=b.unwritten_comment_list:a.unwrittenCommentList.list.items=a.unwrittenCommentList.list.items.concat(b.unwritten_comment_list.list.items),a.unwrittenPageNum++,a.unwrittenCurrentRows+=b.unwritten_comment_list.list.total_count,a.completeGetUnwrittenComment=!0}).error(function(b){if(b.error){var c=b.error.response_code,e=b.error.response_msg;if("9004"==c){var f="targetUrl="+encodeURIComponent(location.href,"UTF-8");location.href=d.loginUrl+"?"+a.baseParam+"&"+f}else alert("["+c+"] "+e)}else alert("처리중 오류가 발생하였습니다.")})["finally"](function(){a.ajaxLoadFlag=!1})})(),(a.getWrittenCommentListData=function(){a.ajaxLoadFlag=!0,e.get(d.writtenCommentListData+"?"+a.baseParam+"&display_cnt="+m+"&page_num="+a.writtenPageNum).success(function(b){1==a.writtenPageNum?a.writtenCommentList=b.written_comment_list:a.writtenCommentList.list.items=a.writtenCommentList.list.items.concat(b.written_comment_list.list.items),a.writtenPageNum++,a.writtenCurrentRows+=b.written_comment_list.list.total_count,a.completeGetWrittenComment=!0}).error(function(b){if(b.error){var c=b.error.response_code,e=b.error.response_msg;if("9004"==c){var f="targetUrl="+encodeURIComponent(location.href,"UTF-8");location.href=d.loginUrl+"?"+a.baseParam+"&"+f}else alert("["+c+"] "+e)}else alert("처리중 오류가 발생하였습니다.")})["finally"](function(){a.ajaxLoadFlag=!1})})()}catch(n){console.error(n),a.ajaxLoadFlag=!1}a.getReviewData=function(){a.ajaxLoadFlag=!0,e.get(d.favoriteReviewerList).success(function(b){b.favoriteReviewer&&(b.favoriteReviewer.profile&&(a.pageUI.profile=b.favoriteReviewer.profile),b.favoriteReviewer.reviewerList&&b.favoriteReviewer.reviewerList.items&&b.favoriteReviewer.reviewerList.items.length&&(a.pageUI.favorite_reviewer=b.favoriteReviewer.reviewerList),b.favoriteReviewer.commentTipInfo&&b.favoriteReviewer.commentTipInfo.items&&b.favoriteReviewer.commentTipInfo.items.length&&(a.pageUI.commentTipInfo=b.favoriteReviewer.commentTipInfo))}).error(function(a){console.log("처리중 오류가 발생하였습니다.")})["finally"](function(){a.ajaxLoadFlag=!1})},k.promiseLoginInfo().then(function(b){a.loginInfo=b,a.getReviewData()})["catch"](function(b){a.loginInfo=b,a.getReviewData()}),a.addZero=function(a){return 10>a?"0"+a:a},a.getCommentWriteUrl=function(b){if(!a.unwrittenCommentList.no_write_user)return void alert(a.unwrittenCommentList.rs_no_write_msg);var c=a.unwrittenCommentList.list.items[b],e=a.baseParam+"&curDispNo="+i.getParameter("curDispNo");e+="&goods_no="+c.goods_no,"20"==c.goods_tp_cd,"01"==c.smp_cpn_goods_tp_cd&&"01"==c.smp_cpn_goods_tp_dtl_cd&&(e+="&smp_dept_yn=Y&smp_cpn_entr_no="+c.smp_cpn_entr_no),l.evtTag(a.gaCtgName,"상품평 쓰기",a.addZero(b+1),c.goods_no),h(function(){location.href=d.commentWriteNewUrl+"?"+e},300)},a.goCommentRewrite=function(b){if(l.evtTag(a.gaCtgName,"내가 쓴 상품평","수정하기"),confirm("작성한 상품평을 수정하시겠습니까?")){var c=a.writtenCommentList.list.items[b],e=a.baseParam+"&curDispNo="+i.getParameter("curDispNo");e+="&gdas_no="+c.gdas_no+"&goods_no="+c.goods_no,"20"==c.goods_tp_cd,"01"==c.smp_cpn_goods_tp_cd&&"01"==c.smp_cpn_goods_tp_dtl_cd&&(e+="&smp_dept_yn=Y&smp_cpn_entr_no="+c.smp_cpn_entr_no);var f=d.commentRewriteNewUrl+"?"+e;f&&h(function(){location.href=f},300)}},a.commentDetail=function(b,c){l.evtTag(a.gaCtgName,"내가 쓴 상품평","상세보기로이동"),h(function(){location.href=d.productSubCommentEach+"?"+a.baseParam+"&goods_no="+c+"&gdas_no="+b},300)},a.moreCmt=function(a){b.element(".prod_eval .list.written .cmtLongTxt").eq(this.$index).show(),b.element(".prod_eval .list.written .cmtShortTxt").eq(this.$index).hide()},a.deleteComment=function(b){l.evtTag(a.gaCtgName,"내가 쓴 상품평","삭제하기"),e.get(d.commentCountDeletedData+"?"+a.baseParam+"&gdas_no="+b).success(function(c){var e=c.comment_count_deleted.deleted_count;if(2==e){if(!confirm("고객님께서는 최근 1개월 동안 총 2회 상품평을 삭제하셨습니다.\n지금 삭제하시면 앞으로 3개월간 상품평 작성 권한이 제한됩니다.\n삭제하시겠습니까?"))return}else if(!confirm("상품평을 삭제하시겠습니까? 삭제된 상품평은 다시 작성할수 없습니다."))return;j.FormSubmitForAjax(d.commentDeleteData+"?"+a.baseParam,{gdas_no:b}).success(function(b){location.replace(d.critViewUrl+"?"+a.baseParam)}).error(function(a){})}).error(function(a){})}}]),d.filter("starScorePolicy",function(){return function(a,b){if(!a)return 0;var d=5,e=Math.ceil(2*a)/2;return b!=c&&(e=e/d*b),e}}),d.filter("cmtShortTxt",function(){return function(a){return a.substring(0,73)}}),d.filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),d.directive("onErrorSrc",function(){return{link:function(a,b,c){b.bind("error",function(){a.pageUI.profile.imgUrl!=a.dummyUrl&&(a.pageUI.profile.imgUrl=a.dummyUrl)})}}}),d.directive("onErrorSrc2",function(){return{link:function(a,b,c){b.bind("error",function(){c.curIndex&&a.pageUI.favorite_reviewer.items[c.curIndex-1].reviewerImgUrl!=a.dummyUrl&&(a.pageUI.favorite_reviewer.items[c.curIndex-1].reviewerImgUrl=a.dummyUrl)})}}}),d.directive("onImgLoaded",function(){return{link:function(a,c,d){b.element(c).on("load",function(){var b=this,c=d.curIdx;setTimeout(function(){b.clientWidth&&b.clientHeight&&(b.clientWidth>=b.clientHeight?a.writtenCommentList.list.items[c].img_list.items[0].typeClass="wid":a.writtenCommentList.list.items[c].img_list.items[0].typeClass="hei")},500)}).each(function(){this.complete&&b.element(this).trigger("load")})}}}),d.directive("lotteContainer",["$timeout","$http","LotteCommon","LotteGA","LotteUtil",function(a,c,d,e,f){return{templateUrl:"/lotte/resources_dev/mylotte/product/m/mylotte_crit_view_container.html",replace:!0,link:function(g,h,i){function j(a){a.preventDefault()}a(function(){g.supportPassive=f.supportPassive()},300),g.showReviewOne=function(b){var c=!1;g.supportPassive&&(document.addEventListener("touchmove",j,{passive:!1}),c=!0),g.dimmedOpen({callback:g.hideReviewOne,scrollEventFlag:c}),a(function(){g.sb_review_index=1,g.arrReviewOne=b},200),e.evtTag(g.gaCtgName,"내가 쓴 상품평","해당 상품평 사진/영상 크게보기")},g.hideReviewOne=function(){g.arrReviewOne=[],g.supportPassive&&document.removeEventListener("touchmove",j,!1)},g.reviewSwipeCurIdx=0,g.sb_review_index=1,g.swipeReviewEnd=function(a){g.swipeReviewVideoStop(),a!=g.reviewSwipeCurIdx&&(g.sb_review_index=a+1,g.reviewSwipeCurIdx=a)},g.swipeReviewVideoStop=function(){$(".lv_wrap video").each(function(b,c){$(c).siblings(".stop_cover:visible, .click_cover:visible").length>=1&&a(function(){$(c).siblings(".btn_stop").trigger("click")},10)})},g.getReviewSwipeControl=function(a){g.swipeReviewControl=a,g.reviewSwipeCurIdx=g.swipeReviewControl.getIndex()},g.swipeBeforeReview=function(){0===g.reviewSwipeCurIdx?g.reviewSwipeCurIdx=g.arrReviewOne.length:g.reviewSwipeCurIdx--,g.swipeReviewControl.moveIndex(g.reviewSwipeCurIdx),1==g.sb_review_index?g.sb_review_index=g.arrReviewOne.length:g.sb_review_index--},g.swipeNextReview=function(){g.reviewSwipeCurIdx===g.arrReviewOne.length-1?g.reviewSwipeCurIdx=0:g.reviewSwipeCurIdx++,g.swipeReviewControl.moveIndex(g.reviewSwipeCurIdx),g.sb_review_index==g.arrReviewOne.length?g.sb_review_index=1:g.sb_review_index++};var k=b.element("body")[0];g.$on("winScroll",function(a,b){"first"==g.tabControl&&g.unwrittenCurrentRows>=g.unwrittenCommentList.total_rows||"second"==g.tabControl&&g.writtenCurrentRows>=g.writtenCommentList.total_rows||!g.ajaxLoadFlag&&k.scrollHeight-2*b.winHeight<=b.scrollPos+b.winHeight&&("first"==g.tabControl?g.getUnwrittenCommentListData():"second"==g.tabControl&&g.getWrittenCommentListData())}),g.tipSwipeIndex=0,g.tipSwipeEnd=function(a){g.tipSwipeIndex=a},g.showTipLayer=function(b){g.pageUI.commentTipInfo&&g.pageUI.commentTipInfo.items&&g.pageUI.commentTipInfo.items.length&&(g.tipSwipeIndex=0,g.dimmedOpen({callback:g.hideTipLayer,scrollEventFlag:!1}),a(function(){g.arrTip=g.pageUI.commentTipInfo.items,$("#lotteDimm").css("z-index","115")},200))},g.hideTipLayer=function(){g.arrTip=null},g.getNickMaxWidth=function(){return{"max-width":b.element(document.body).width()-200+"px"}},g.goProfile=function(){e.evtTag(g.gaCtgName,"프로필 수정"),a(function(){location.href=g.pageUI.profile.prfSetUrl+"?"+g.baseParam},300)},g.goReviewerHome=function(b,c){e.evtTag(g.gaCtgName,"즐겨찾는리뷰어",g.addZero(c+1),b.reviewerMbrNo),b.reviewerHomeUrl&&a(function(){location.href=b.reviewerHomeUrl+"&"+g.baseParam},300)},g.goFavReviewer=function(){e.evtTag(g.gaCtgName,"즐겨찾는리뷰어","더보기"),a(function(){location.href=d.favoriteReviewer+"?"+g.baseParam},300)},g.goBestReview=function(){e.evtTag(g.gaCtgName,"베스트 상품평 이동"),a(function(){location.href=d.reviewBest+"?"+g.baseParam},300)},g.changeTab=function(a){e.evtTag(g.gaCtgName,"탭 클릭","second"==a?"내가 쓴 상품평":"상품평 쓰기"),g.tabControl=a},g.goProduct=function(b){e.evtTag(g.gaCtgName,"내가 쓴 상품평","상세페이지로이동"),a(function(){location.href="/product/product_view.do?"+g.baseParam+"&goods_no="+b.goods_no},300)},g.closeLayer=function(){g.dimmedClose()},g.showSettingLayer=function(){if(g.pageUI.profile.gdasOppbYn){var b=!1;g.supportPassive&&(document.addEventListener("touchmove",j,{passive:!1}),b=!0),g.dimmedOpen({callback:g.hideSettingLayer,scrollEventFlag:b}),a(function(){g.pageUI.privateClick=!0},200)}else g.setReviewHome()},g.hideSettingLayer=function(){g.dimmedClose(),g.pageUI.privateClick=!1,g.supportPassive&&document.removeEventListener("touchmove",j,!1)},g.setReviewHome=function(a){"private"==a?c.get("/json/comment/comment_open_yn_save.json?gdas_oppb_yn=false").success(function(a){g.pageUI.profile.gdasOppbYn=!1,g.hideSettingLayer()}).error(function(a){g.hideSettingLayer()}):c.get("/json/comment/comment_open_yn_save.json?gdas_oppb_yn=true").success(function(a){g.pageUI.profile.gdasOppbYn=!0,g.hideSettingLayer()}).error(function(a){g.hideSettingLayer()})}}}}])}(window,window.angular);