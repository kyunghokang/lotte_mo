!function(a,b,c){"use strict";var d=b.module("lotteMap",[]);d.controller("MapInfoCtrl",["$scope","$http","LotteCommon",function(b,d,e){b.isOpenedMap=!1,b.$on("closeStoreMap",function(a,c){b.isOpenedMap=!1}),b.$on("showStoreMap",function(a,c){var d=!1;$("#googlemap").length>0&&(d=!0),b.store_map(c.goods_no,d,c.entr_no,c.entr_contr_no,c.smp_ecoupon_yn)}),b.store_map=function(a,c,g,h,i){return"boolean"!=typeof c||c===!1?void f("http://maps.googleapis.com/maps/api/js?key=AIzaSyBsmhk0bJ_vPCFpG2JAcxmnLry_0wsLXHM",function(){b.store_map(a,!0,g,h,i)}):(console.log("google_map called!!"),void d.get(e.productMobileNaverMap,{params:{goods_no:a,smp_entr_no:g,smp_entr_contr_no:h,smp_ecoupon_yn:i}}).success(function(a){console.log("data Success!!"),b.naverStoreMapData=a.mobileNaverMap;var c=b.naverStoreMapData.smartpick_store_addr;if(c.total_count>0){var d=c.items[0].post_addr+" "+c.items[0].dtl_addr;setTimeout(function(){var a=new google.maps.LatLng("37.5675451","126.9773356"),c={center:a,disableDefaultUI:!0,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0},e=new google.maps.Map(document.getElementById("map-canvas"),c),f=new google.maps.Geocoder;f.geocode({address:d},function(a,c){if(c==google.maps.GeocoderStatus.OK){var d=new google.maps.Marker({map:e,icon:"http://static.naver.com/maps/ic_spot.png",title:b.naverStoreName,position:a[0].geometry.location});e.setCenter(d.position),e.setZoom(15)}else console.log("주소검색에 실패하였습니다.")})},10),b.naverStoreName=c.items[0].shop_nm,b.naverStoreAddr=c.items[0].post_addr+c.items[0].dtl_addr}b.isOpenedMap=!0}).error(function(){alert("매장위치 조회 중 오류가 발생하였습니다.\n잠시 후 조회해 주세요.")}))};var f=function(b,d,e,f,g){if("string"==typeof b&&b!=c){var h=!1,i=document.getElementsByTagName("head")[0],j=document.createElement("script"),e=e&&"string"==typeof e?e:"UTF-8";g&&"string"==typeof g&&""!=g&&(j.id=g),j.id="googlemap",j.src=b,j.charset=e,j.type="text/javascript",j.async=!0,j.defer="boolean"==typeof f?f:!0,"function"==typeof d&&(j.onreadystatechange=function(){if("loaded"==this.readyState||"complate"==this.readyState){if(h)return;a.setTimeout(d(),1),h=!0}},j.onload=function(){h||(a.setTimeout(d(),1),h=!0)}),i.appendChild(j)}}}]),d.directive("mapInfo",function(){return{templateUrl:"/lotte/resources_dev/common/templates/map_info.html",replace:!0,link:function(a,b,c){},controller:"MapInfoCtrl"}})}(window,window.angular),function(a,b,c){"use strict";var d=b.module("app",["lotteComm","lotteSrh","lotteSideCtg","lotteCommFooter","lotteMap"]);d.filter("ordNoChange",[function(){return function(a){return null==a?"":a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+"-"+a.substr(8,7)}}]),d.filter("strToDate",[function(){return function(a){return null==a?"":a.substr(0,4)+"년 "+a.substr(4,2)+"월 "+a.substr(6,2)+"일"}}]),d.filter("strToDateNoYear",[function(){return function(a){var b=new Array("일요일","월요일","화요일","수요일","목요일","금요일","토요일"),c=String(a).substr(0,4)+"-"+String(a).substr(4,2)+"-"+String(a).substr(6,2),d=new Date(c).getDay(),e=b[d],f=String(a).substr(4,2)+"/"+String(a).substr(6,2);return f+"("+String(e).substr(0,1)+")"}}]),d.controller("SmartPickViewCtrl",["$scope","$http","$window","$timeout","LotteCommon","LotteForm","commInitData",function(d,e,f,g,h,i,j){function k(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function l(a){return 10>a?"0"+a:a+""}d.showWrap=!0,d.contVisible=!0,d.subTitle="스마트픽 교환권 상세",d.mapViewFlag=!1,d.thisPopupPickIdx=0,d.sendPickPopupFlag=[],d.sendPickPopupFlag[d.thisPopupPickIdx]=!1,Kakao.cleanup(),1==d.appObj.isSktApp?Kakao.init("7a460fb5cdebe4589041db57d906ddda"):Kakao.init("574659987ca46095c123d71f72abac14"),d.smp_yn=!1,"Y"==j.query.smp_yn?(d.smp_yn=!0,d.promotionUrl=function(){f.location.href=h.baseUrl+"/smartpick/smartpick_promotion.do?"+d.baseParam+"&smp_yn=Y&tab_click_yn=Y"},d.pickListUrl=function(){f.location.href=h.baseUrl+"/smartpick/pick_list.do?"+d.baseParam+"&smp_yn=Y"},d.setupUrl=function(){f.location.href=h.baseUrl+"/smartpick/smp_cpn_setup.do?"+d.baseParam+"&smp_yn=Y"},d.smpParam="&smp_yn=Y"):d.smpParam="",""==k("search_flag")?d.searchParam="D7":d.searchParam=k("search_flag"),""==k("cpn_state_cd")?d.usedGubnParam="1":d.usedGubnParam=k("cpn_state_cd"),d.smartYnParam=k("smp_yn"),d.ordNoParam=k("ord_no"),d.ordSnParam=k("ord_dtl_sn");var m=h.smartPicKListData+"?"+d.baseParam+"&search_flag="+d.searchParam+"&cpn_state_cd="+d.usedGubnParam+"&ord_no="+d.ordNoParam+"&ord_dtl_sn="+d.ordSnParam;e.get(m).success(function(a){d.smartPickDetail=a.obj.smartpick[0],d.orderNumebr=d.smartPickDetail.ord_no.substr(0,4)+"-"+d.smartPickDetail.ord_no.substr(4,2)+"-"+d.smartPickDetail.ord_no.substr(6,2)+"-"+d.smartPickDetail.ord_no.substr(8,7)}).error(function(a,b,c,d){console.log("Error Data : ",b,c,d)}),d.moreProduct=function(a){f.location.href=h.prdviewUrl+"?"+d.baseParam+"&goods_no="+a+"&search_flag="+d.searchParam},d.orderCancel=function(a){if("N"==d.smartPickDetail.ord_cncl_psbl_yn)return alert("스마트픽 교환권을 취소하실 수 없습니다."),!1;if(!confirm("예약을 취소하시겠습니까?"))return!1;var c=b.extend({non_pay_ord_no:a.ord_no,non_pay_ord_dtl_sn:a.ord_dtl_sn,ecpn_no:a.ecpn_no,ord_qty:a.rel_qty,vstr_cell_no:a.adre_no,vstr_nm:a.adre_nm,goods_nm:a.goods_nm},d.baseParam);e({url:"/json/smartpick/reservation_cancel.json",data:$.param(c),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){alert(a.responseMsg),f.location.href=h.smartPickListUrl+"?"+d.baseParam}).error(function(a,b,c,d){return alert(a.responseMsg),!1})},d.sendSmartPick=function(a){if(a.crspk_install_yn!=c&&"N"==a.crspk_install_yn&&a.crspk_yn!=c&&"Y"==a.crspk_yn)return alert("편의점 픽업 교환권은 세븐 일레븐 매장에서 \n픽업준비완료 후 바코드가 생성됩니다.\n\n픽업준비완료 후 교환권을 확인해주세요."),!1;if("W"==a.prod_div){if("0"==a.mms_trns_rmnd_cnt)return alert("스마트픽 교환권 전송은 총3회까지만 가능합니다."),!1;var g=b.extend({goods_no:a.goods_no,ecpn_no:a.ecpn_no,send_sct_cd:"1",adre_no:a.adre_no,sndr_no:a.ord_user_cell_phone,adre_nm:a.adre_nm,sndr_nm:a.sndr_nm,msg_cont:a.msg_cont,rsv_yn:"N",shop_no:a.shop_no,ord_qty:a.rel_qty},d.baseParam);e({url:"/json/smartpick/reservation_send_mms.json",data:$.param(g),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,b,c,e){alert(a.responseMsg),f.location.href=h.smartPickListUrl+"?"+d.baseParam+"&tclick=m_my_smartpick"}).error(function(a,b,c,d){return alert("error.............."),!1})}else d.thisItems=a,d.thisPopupPickIdx=a.ord_no+a.ord_dtl_sn,d.sendPickPopupFlag[d.thisPopupPickIdx]=!0,d.dimmedOpen({target:"send_popup["+d.thisPopupPickIdx+"]",callback:d.sendPickPopupClose})},d.goSmsPage=function(a){if(d.sendTclick("m_DC_Smartpicklist_Clk_Shr_1"),"0"==a.mms_trns_rmnd_cnt)return alert("스마트픽 교환권 전송은 총3회까지만 가능합니다."),!1;if("W"==a.prod_div){var c=b.extend({goods_no:a.goods_no,ecpn_no:a.ecpn_no,send_sct_cd:"1",adre_no:a.adre_no,sndr_no:a.ord_user_cell_phone,adre_nm:a.adre_nm,sndr_nm:a.sndr_nm,msg_cont:a.msg_cont,rsv_yn:"N",shop_no:a.shop_no,ord_qty:a.rel_qty},d.baseParam);e({url:"/json/smartpick/reservation_send_mms.json ",data:$.param(c),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,b,c,e){alert(a.responseMsg),f.location.href=h.smartPickListUrl+"?"+d.baseParam+"&tclick=m_DC_MyPage_Clk_Btn_8"}).error(function(a,b,c,d){alert("error")})}else f.location.href=h.smartPickGiftUrl+"?ord_no="+a.ord_no+"&ord_dtl_sn="+a.ord_dtl_sn+"&"+d.baseParam+d.smpParam},d.goKakako=function(a){var b="[롯데닷컴 스마트픽]\n",c="",e="",g="",h=""!=a.bsns_time?a.bsns_time:"",i=""!=a.smp_vst_fcst_dtime?a.smp_vst_fcst_dtime:"",j="",k="",l=""!=a.goods_no?location.protocol+"//"+location.hostname+"/product/m/product_wine_view.do?goods_no="+a.goods_no:location.protocol+"//"+location.hostname,m=location.protocol+"//"+location.hostname+"/smartpick/smp_cpn_info.do?ord_no=",n=location.protocol+"//"+location.hostname+"/product/m/product_list.do?curDispNo=5409473";if(c=""!=a.goods_img?a.goods_img.replace("_150.jpg","_550.jpg"):"http://image.lotte.com/lotte/mobile/common/share_img_common.jpg",d.appObj.isAndroid&&d.appObj.verNumber>=408||d.appObj.isIOS&&d.appObj.verNumber>=4050||!d.appObj.isApp)if("W"==a.prod_div?(e="*예약증 번호 : "+a.ecpn_no,g="*예약매장 : "+a.use_loc_nm+"\n",i="*픽업가능일 : "+i.substr(0,4)+"년 "+i.substr(4,2)+"월 "+i.substr(6,2)+"일 "+h,k="예약증 상세보기",j=m+a.ord_no+"&ord_dtl_sn="+a.ord_dtl_sn):"S"==a.prod_div&&"N"==a.smp_install_yn&&"N"==a.crspk_install_yn?(e="*교환권 번호 : "+a.ecpn_no,g="*픽업장소 : "+a.use_loc_nm+"\n",i="*픽업일시 : "+i.substr(0,4)+"년 "+i.substr(4,2)+"월 "+i.substr(6,2)+"일 "+h,k="스마트픽 안내",j=n):"S"==a.prod_div&&"Y"==a.smp_install_yn?(e="*상담권 번호 : "+a.ecpn_no,g="*상담매장 : "+a.use_loc_nm+"\n",i="*상담예정일 : "+i.substr(0,4)+"년 "+i.substr(4,2)+"월 "+i.substr(6,2)+"일 "+h,k="스마트픽 안내",j=n):"S"==a.prod_div&&"Y"==a.crspk_install_yn&&(e="*교환권 번호 : "+a.ecpn_no,g="*픽업장소 : "+a.use_loc_nm+"\n",i="*픽업가능일 : "+i.substr(0,4)+"년 "+i.substr(4,2)+"월 "+i.substr(6,2)+"일 "+h,k="스마트픽 안내",j=n),d.appObj.isApp){var o={type:"default",title:b+e,desc:g+i,imageUrl:c,url:l,buttons:[{title:k,url:j}]};d.appObj.isAndroid?f.lotteshare.callAndroid("lotteshare://kakaotalk/query?"+JSON.stringify(o)):d.appObj.isIOS&&(f.location="lotteshare://kakaotalk/query?"+JSON.stringify(o))}else Kakao.Link.sendDefault({objectType:"feed",content:{title:b+e,description:g+i,imageUrl:c,link:{mobileWebUrl:l}},buttons:[{title:k,link:{mobileWebUrl:j}}]});else{var p=a.sale_prc.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if("W"==a.prod_div){var q="방문예정일",r=a.smp_vst_fcst_dtime.substr(0,4)+"년 "+a.smp_vst_fcst_dtime.substr(4,2)+"월 "+a.smp_vst_fcst_dtime.substr(6,2)+"일",s="[롯데닷컴 스마트픽]\n";s+=a.sndr_nm+"님이 보내신 예약증입니다.\n\n",s+="◆상품 정보◆\n",s+="▶ 상품명 : "+a.goods_nm+"\n",""!=a.opt_desc&&(s+="▶ 단품 : "+a.opt_desc+"\n"),s+="▶ 수량 : "+a.rel_qty+"\n",s+="▶ 상품가격 : "+p+"원\n",s+="▶ 방문매장 : "+a.use_loc_nm+"\n",s+="▶ "+q+" : "+r+a.bsns_time+"\n",s+="▶ 교환권번호 : "+a.ecpn_no+"\n",""!=a.exch_bil_use_goods_smp_cpn_no&&(s+="▶ 다른상품픽 번호 : "+a.exch_bil_use_goods_smp_cpn_no+"\n"),s+="\n<유의사항>\n",s+="- 상품이 준비되면 별도의 알람을 드립니다. 알람을 받은 후 픽업장소로  방문 바랍니다.\n",s+="- 픽업예정일 다음날까지 수령하지 않으면 주문이 자동으로 주문취소 됩니다.\n",s+="- 매장에서 다른 사이즈 및 컬러로 수령 가능합니다.\n"}else if("E"==a.prod_div){var q="유효기간",r=a.aval_term_strt_dtime.substr(0,4)+"년 "+a.aval_term_strt_dtime.substr(4,2)+"월 "+a.aval_term_strt_dtime.substr(6,2)+"일~"+a.aval_term_end_dtime.substr(0,4)+"년 "+a.aval_term_end_dtime.substr(4,2)+"월 "+a.aval_term_end_dtime.substr(6,2)+"일",s="[롯데닷컴 스마트픽]\n";s+=a.sndr_nm+"님이 보내신 예약증입니다.\n\n",s+="◆상품 정보◆\n",s+="▶ 상품명 : "+a.goods_nm+"\n",""!=a.opt_desc&&(s+="▶ 단품 : "+a.opt_desc+"\n"),s+="▶ 수량 : "+a.rel_qty+"\n",s+="▶ 상품가격 : "+p+"원\n",s+="▶ 사용매장 : "+a.use_loc_nm+"\n",s+="▶ "+q+" : "+r+"\n",s+="▶ 주문번호 : "+a.ord_no+"\n",s+="▶ 교환권번호 : "+a.ecpn_no+"\n",""!=a.exch_bil_use_goods_smp_cpn_no&&(s+="▶ 다른상품픽 번호 : "+a.exch_bil_use_goods_smp_cpn_no+"\n"),"Y"==a.rfd_psbl_tgt_yn&&(s+="\n◆환불 안내◆\n","Y"==a.auto_rfd_tgt_yn?s+="▶ 환불유형 : 자동환불 상품\n":"N"==a.auto_rfd_tgt_yn&&(s+="▶ 환불유형 : 수동환불 상품\n"),(a.rfd_tgt_cd="01")?s+="▶ 환불대상 : 주문자\n":(data.rfd_tgt_cd="02")&&(s+="▶ 환불대상 : 받는분\n"),s+="▶ 환불조건\n",s+="1. 구매일로부터 5년 이내 교환권\n",s+="2. 사용하지 않고 유효기간 지난 교환권\n",s+="▶ 환불신청 방법\n",(a.rfd_tgt_cd="01")?s+="1. 환불대상이 주문자인 경우 환불 자동 신청\n":(a.rfd_tgt_cd="02")&&(s+='1. 환불대상이 받는분인 경우 "로그인 > 마이롯데 > e쿠폰 환불신청"에서 쿠폰번호 등록\n'),(a.auto_rfd_tgt_yn="Y")?s+='2. 자동환불 상품 : 유효기간 경과 후 롯데닷컴 ID 내 "보관금"으로 자동 환불\n':(a.auto_rfd_tgt_yn="N")&&(s+="2. 수동환불 상품 : 유효기간 경과 후 고객센터로 문의 주세요. 등록된 쿠폰에 한하여 환불해 드립니다.\n"),s+="\n▶ 주의사항 및 유의사항은 상품 설명 페이지 > 기본정보에서 확인해주세요.\n")}else if("S"==a.prod_div&&"N"==a.smp_install_yn&&"N"==a.crspk_install_yn){var q="픽업예정일",r=a.smp_vst_fcst_dtime.substr(0,4)+"년 "+a.smp_vst_fcst_dtime.substr(4,2)+"월 "+a.smp_vst_fcst_dtime.substr(6,2)+"일",s="[롯데닷컴 스마트픽]\n";s+=a.sndr_nm+"님이 보내신 교환권입니다.\n\n",s+="◆상품 정보◆\n",s+="▶ 상품명 : "+a.goods_nm+"\n",""!=a.opt_desc&&(s+="▶ 단품 : "+a.opt_desc+"\n"),s+="▶ 수량 : "+a.rel_qty+"\n",s+="▶ 상품가격 : "+p+"원\n",s+="▶ 사용매장 : "+a.use_loc_nm+"\n",s+="▶ "+q+" : "+r+a.bsns_time+"\n",s+="▶ 교환권번호 : "+a.ecpn_no+"\n",""!=a.exch_bil_use_goods_smp_cpn_no&&(s+="▶ 다른상품픽 번호 : "+a.exch_bil_use_goods_smp_cpn_no+"\n"),s+="<유의사항>\n",s+="* 상품준비가 완료되면 알림 문자를 드립니다. 확인 후 픽업장소로 방문바랍니다.\n",s+="* 매장에서 다른 사이즈 및 컬러로 수령 가능합니다.\n",s+="* 픽업예정일 다음날까지 수령하지 않으면, 주문이 자동으로 취소됩니다.\n",s+="* 픽업예정일 변경이 가능합니다. (상품당 1회)\n",s+="  픽업예정일 변경안내 : http://s.lotte.com/Change\n"}else if("S"==a.prod_div&&"Y"==a.smp_install_yn){var q="상담예정일",r=a.smp_vst_fcst_dtime.substr(0,4)+"년 "+a.smp_vst_fcst_dtime.substr(4,2)+"월 "+a.smp_vst_fcst_dtime.substr(6,2)+"일",s="[롯데닷컴 스마트픽]\n";s+=a.sndr_nm+"님이 보내신 상담권입니다.\n\n",s+="◆상담 정보◆\n",s+="▶ 상담명 : "+a.goods_nm+"\n",""!=a.opt_desc&&(s+="▶ 단품 : "+a.opt_desc+"\n"),s+="▶ 수량 : "+a.rel_qty+"\n",s+="▶ 상품가격 : "+p+"원\n",s+="▶ 상담매장 : "+a.use_loc_nm+"\n",s+="▶ "+q+" : "+r+a.bsns_time+"\n",s+="▶ 상담권번호 : "+a.ecpn_no+"\n",""!=a.exch_bil_use_goods_smp_cpn_no&&(s+="▶ 다른상담픽 번호 : "+a.exch_bil_use_goods_smp_cpn_no+"\n"),s+="<유의사항>\n",s+="* 지정한 상담매장에서만 상담 가능합니다.\n",s+="* 상담예정일 +2일까지 방문상담 가능합니다. (방문하지 않을 시 주문취소) 설치상품의 주문완료는 상담예약만을 한 것이며, 매장 방문 후 설치예정일을 협의하셔야 설치가 가능합니다.\n",s+="* 상담예정일 변경은 롯데닷컴 고객센터 또는 모바일에서 가능합니다.\n"}else if("S"==a.prod_div&&"Y"==a.crspk_install_yn){var r=a.smp_vst_fcst_dtime.substr(0,4)+"년 "+a.smp_vst_fcst_dtime.substr(4,2)+"월 "+a.smp_vst_fcst_dtime.substr(6,2)+"일",s="★ 보내시는 분의 메시지\n";s+=a.msg_cont+"\n\n",s+=a.sndr_nm+" 고객님 편의점에 상품이 도착하였습니다.\n\n",s+="교환권번호 : "+a.ecpn_no+"\n",s+="주문상품 : "+a.goods_nm+"\n",s+="픽업장소 : "+a.use_loc_nm+"\n\n",s+="도착일로부터 5일 경과 시점까지 수령하지 않으면 자동으로 반품됩니다. \n반품 시 반품배송료 차감 후 환불됩니다. \n"}s+="\n▶ 롯데닷컴 고객센터 : 1577-1110\n",s+="단, 주말/공휴일은 1599-8437로 연락바랍니다.\n",s+="▶ 스마트픽 앱 URL : m.lotte.com/spp.do\n";var o={url:"smartpick",title:s,imageUrl:c};d.appObj.isAndroid?f.lotteshare.callAndroid("lotteshare://kakaotalk/query?"+JSON.stringify(o)):d.appObj.isIOS&&(f.location="lotteshare://kakaotalk/query?"+JSON.stringify(o))}d.sendTclick("m_DC_Smartpicklist_Clk_Shr_2")},d.sendPickPopupClose=function(){d.sendPickPopupFlag[d.thisPopupPickIdx]=!1,d.dimmedClose(),d.thisPopupPickIdx=0},d.google_map=function(a){if(d.mapViewFlag=!d.mapViewFlag,d.mapViewFlag){var b="crspk_yn=Y&crspk_map=Y&crspk_corp_cd="+a.crspk_corp_cd+"&crspk_corp_str_sct_cd="+a.crspk_corp_str_sct_cd+"&crspk_str_no="+a.crspk_str_no;d.google_map_url=h.pickMapUrl+"?"+b}},d.google_map_dept=function(a){d.mapViewFlag=!d.mapViewFlag,d.$broadcast("showStoreMap",{goods_no:a.goods_no,entr_no:a.entr_no,entr_contr_no:a.entr_contr_no,smp_ecoupon_yn:"N"})},d.regionName0st=[],d.regionName1st=[],d.regionName2st=[],d.regionStoreList=[],d.reqParam=[],d.naverStoreName,d.naverStoreAddr,d.naver_store_map=function(a,b,c,f,g){return d.smp_goods_type=g,"0101DEP"==d.smp_good_type||"0101ETC"==d.smp_good_type||"0102ETC"==d.smp_good_type?d.smp_good_type="Y":d.smp_good_type="N","boolean"!=typeof b||b===!1?(d.mapViewFlag=!d.mapViewFlag,void t("http://map.naver.com/js/naverMap.naver?key=956f6f619b13d3caf5540349078f9593",function(){d.naver_store_map(a,!0,c,f,g)})):(console.log("naver_store_map called!!"),d.isNaverStoreMapData=!1,d.reqParam.goods_no=a,d.reqParam.smp_entr_no=c,d.reqParam.smp_entr_contr_no=f,d.reqParam.smp_ecoupon_yn=d.smp_good_type,void e.get(h.productMobileNaverMap,{params:d.reqParam}).success(function(a){console.log("naver_store_map Success!!"),d.naverStoreMapData=a.mobileNaverMap,d.isNaverStoreMapData=!0;var b=d.naverStoreMapData.smartpick_store_addr,c="|;|",e="",f="0",g=d.naverStoreMapData.smartpick_region;if(d.regionName0st=g,console.log("smpShopList.total_count",b.total_count),1==b.total_count)console.log("Smartpick_region",g[0]),console.log("smpShopList",b.items[0]),d.getMapPoint(b.items[0].post_addr+" "+b.items[0].dtl_addr),d.naverStoreName=b.items[0].shop_nm,d.naverStoreAddr=b.items[0].post_addr+b.items[0].dtl_addr;else if(b.total_count>1){var h=d.naverStoreMapData.smartpick_store_addr.items;if(null!=b&&b.total_count>0&&(f=b.items[0].shop_no),null!=h&&h.length>0)for(var i=0;i<h.length;i++){var j=h[i].shop_no,k=h[i].post_addr+" "+h[i].dtl_addr,l=h[i].shop_nm,m=h[i].asgd_phon,n=j+c+l.replace('"','\\"')+c+k.replace('"','\\"')+c+m.replace('"','\\"');0==f.length&&0==e.length&&(e=n),f==j&&(e=n)}}}).error(function(){console.log("Data Error : Download 실패")}))},d.getMapPoint=function(a){console.log("getMapPoint",a);var b="";b=a.replace(/ /g,""),b=a.replace(/\s/g,"");var c=h.naverMapInfo+"?query="+b;console.log("map_link_url",c),e.get(c).success(function(a){var b=a,c=b.substring(b.indexOf("<x>")+3,b.indexOf("</x>")),e=b.substring(b.indexOf("<y>")+3,b.indexOf("</y>"));console.log("xpoint",c),console.log("ypoint",e),d.display_marker("1",c,e)}).error(function(){console.log("getMapPoint : Download 실패")})};var n,o,p,q="marker",r="http://static.naver.com/maps/ic_spot.png",s="";d.senddraged=function(a){zoomlevel=n.getZoom(),nposx=(a[0]+a[2])/2,nposy=(a[1]+a[3])/2,n.removeOverlay(centermarkercross),centermarkercross=new NMark(new NPoint(nposx,nposy),new NIcon(iconcentercross,new NSize(52,41))),n.addOverlay(centermarkercross)},d.mapScriptLoad=function(){n=new NMap(document.getElementById("mapContainer"),313,290),o=new NZoomControl,o.setAlign("right"),o.setValign("top"),n.addControl(o),n.enableWheelZoom(),NEvent.addListener(n,"endDrag",d.senddraged)},d.display_marker=function(a,b,c){n=new NMap(document.getElementById("mapContainer")),n.clearOverlays(q);var e=new NPoint(b,c);new NPoint(parseInt(b)+10,parseInt(c)+30);s=n.fromTM128ToLatLng(e);new NMark(s,new NIcon(r,new NSize(52,41),new NSize(14,40)));d.centerDispMarker(s),n.setCenterAndZoom(e,2)},d.clearMarkers=function(){n.clearOverlays(q)},d.display_marker_list=function(a,b,c){var e=new NPoint(b,c);s=n.fromTM128ToLatLng(e);new NMark(s,new NIcon(r,new NSize(52,41),new NSize(14,40)));d.centerDispMarker(s),n.setCenterAndZoom(e,2)},d.centerDispMarker=function(a){p=new NMark(a,new NIcon(r,new NSize(52,41),new NSize(14,40))),n.addOverlay(p,q)},d.getMapselected=function(a){if(console.log("getMapselected",a),""!=a){var b=a.split("^");d.getMapPoint(b[3]+b[4]),d.naverStoreName=b[5],d.naverStoreAddr=b[3]+b[4]}else alert("본 상품의 매장정보는 제공하고 있지 않습니다.")},d.getRegionName1stSelected=function(a,b){console.log("getRegionName1stSelected",a+"|"+b);var c,e,f,g=d.naverStoreMapData.smartpick_store_addr.items;if(a=a.replace(/ /g,""),a=a.replace(/\s/g,""),null!=g&&g.length>0){0==b?(d.regionName1st=[],d.regionName2st=[],d.regionStoreList=[]):1==b?(d.regionName2st=[],d.regionStoreList=[]):2==b&&(d.regionStoreList=[]);for(var h=0;h<g.length;h++){var i=g[h].post_addr.split(" ");c=i[0],e=i[1],f=i[2],0==b?(c=c.replace(/ /g,""),c=c.replace(/\s/g,""),a==c&&(console.log("regionVal1",e),d.regionName1st.push(e))):1==b?(e=e.replace(/ /g,""),e=e.replace(/\s/g,""),a==e&&(console.log("regionVal2",f),d.regionName2st.push(f))):2==b&&(f=f.replace(/ /g,""),f=f.replace(/\s/g,""),a==f&&(console.log("regionVal2",f),d.regionStoreList.push(g[h])))}}};var t=function(b,d,e,f,g){if("string"==typeof b&&b!=c){var h=!1,i=document.getElementsByTagName("head")[0],j=document.createElement("script"),e=e&&"string"==typeof e?e:"UTF-8";g&&"string"==typeof g&&""!=g&&(j.id=g),j.src=b,j.charset=e,j.type="text/javascript",j.async=!0,j.defer="boolean"==typeof f?f:!0,"function"==typeof d&&(j.onreadystatechange=function(){if("loaded"==this.readyState||"complate"==this.readyState){if(h)return;a.setTimeout(d(),1),h=!0}},j.onload=function(){h||(a.setTimeout(d(),1),h=!0)}),i.appendChild(j)}};d.todayDateTime=new Date,d.todayDate=d.todayDateTime.getFullYear()+l(d.todayDateTime.getMonth()+1)+l(d.todayDateTime.getDate()),d.todayHours=d.todayDateTime.getHours()}]),d.directive("lotteContainer",function(){return{templateUrl:"/lotte/resources_dev/smartpick/pick_view_container.html",replace:!0,link:function(a,b,c){}}}),d.directive("sendPick",["$window","$location",function(a,b){return{templateUrl:"/lotte/resources_dev/smartpick/send_pick.html",replace:!0,link:function(a,b,c){}}}]),d.directive("pickMapInfo",["$window","$location",function(a,b){return{templateUrl:"/lotte/resources_dev/smartpick/pick_map_info.html",replace:!0,link:function(a,b,c){console.log("naverMapInfo","called")}}}])}(window,window.angular);